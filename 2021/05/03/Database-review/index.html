<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="Database review"/><meta name="keywords" content="CTF" /><link rel="alternate" href="/atom.xml" title="M1key"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0" />
<link rel="canonical" href="https://pz1o.top/2021/05/03/Database-review/"/>

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" /><script type="text/x-mathjax-config">
    MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0" />

<script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e90b4c8b8c36ca2b3e5798ef67088f84";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "KLWvKGPeSIyoEo4k6j3v37wy-gzGzoHsz",
      appKey: "FL93w3BBbF9lxiR8X1HI58En"
    });
  </script><script>
  window.config = {"leancloud":{"app_id":"KLWvKGPeSIyoEo4k6j3v37wy-gzGzoHsz","app_key":"FL93w3BBbF9lxiR8X1HI58En"},"toc":true,"fancybox":true,"pjax":"","latex":true};
</script>

    <title>Database review - M1key</title>
  <meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="M1key" type="application/atom+xml">
</head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">M1key</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Archives
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">M1key</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archives
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            Tags
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            About
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">Database review
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2021-05-03
        </span><span class="post-visits"
             data-url="/2021/05/03/Database-review/"
             data-title="Database review">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0x01-第一章-绪论"><span class="toc-text">0x01 第一章 绪论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-数据库基本概念"><span class="toc-text">1.1 数据库基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-数据库系统特点"><span class="toc-text">1.2 数据库系统特点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库管理技术发展共有三个阶段"><span class="toc-text">数据库管理技术发展共有三个阶段</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-数据模型"><span class="toc-text">1.3 数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据模型概念"><span class="toc-text">数据模型概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据模型的分类"><span class="toc-text">数据模型的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据模型的组成要素"><span class="toc-text">数据模型的组成要素</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-实体联系数据模型"><span class="toc-text">1.4 实体联系数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#实体"><span class="toc-text">实体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#属性"><span class="toc-text">属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实体集之间的联系"><span class="toc-text">实体集之间的联系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#E-R图"><span class="toc-text">E-R图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-数据库系统体系结构"><span class="toc-text">1.5 数据库系统体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库系统的三级模式结构"><span class="toc-text">数据库系统的三级模式结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x02-第二章-关系模型"><span class="toc-text">0x02 第二章 关系模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-基本概念"><span class="toc-text">2.1 基本概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-关系操作和完整性约束"><span class="toc-text">2.2 关系操作和完整性约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-关系代数-传统集合"><span class="toc-text">2.3 关系代数 传统集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-关系代数运算"><span class="toc-text">2.4 关系代数运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#选择"><span class="toc-text">选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#投影"><span class="toc-text">投影</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#连接"><span class="toc-text">连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#除"><span class="toc-text">除</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-查询优化"><span class="toc-text">2.5 查询优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#等价变换规则："><span class="toc-text">等价变换规则：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询优化策略"><span class="toc-text">查询优化策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#优化算法"><span class="toc-text">优化算法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x03-第三章-关系数据库标准语言SQL"><span class="toc-text">0x03 第三章 关系数据库标准语言SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-SQL概述"><span class="toc-text">3.1 SQL概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-数据定义"><span class="toc-text">3.2 数据定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义基本表"><span class="toc-text">定义基本表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改表结构"><span class="toc-text">修改表结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-索引"><span class="toc-text">3.3 索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-单表查询"><span class="toc-text">3.4 单表查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-多表查询"><span class="toc-text">3.5 多表查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-嵌套查询"><span class="toc-text">3.6 嵌套查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-集合和除运算"><span class="toc-text">3.7 集合和除运算</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-数据更新和控制"><span class="toc-text">3.8 数据更新和控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#更新"><span class="toc-text">更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#控制"><span class="toc-text">控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-视图"><span class="toc-text">3.9 视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#定义视图"><span class="toc-text">定义视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除视图"><span class="toc-text">删除视图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x04-第四章-规范化理论"><span class="toc-text">0x04 第四章 规范化理论</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-规范化概述"><span class="toc-text">4.1 规范化概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-函数依赖"><span class="toc-text">4.2 函数依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#完全函数依赖："><span class="toc-text">完全函数依赖：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#部分函数依赖："><span class="toc-text">部分函数依赖：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#传递函数依赖"><span class="toc-text">传递函数依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#码的函数依赖定义"><span class="toc-text">码的函数依赖定义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-范式"><span class="toc-text">4.3 范式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1NF"><span class="toc-text">1NF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2NF"><span class="toc-text">2NF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3NF"><span class="toc-text">3NF</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-BCNF-4NF"><span class="toc-text">4.4 BCNF 4NF</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#BCNF"><span class="toc-text">BCNF</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-Armstrong公理系统"><span class="toc-text">4.5 Armstrong公理系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#独立推理规则"><span class="toc-text">独立推理规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#传递律"><span class="toc-text">传递律</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#属性集的闭包"><span class="toc-text">属性集的闭包</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-最小函数依赖集"><span class="toc-text">4.6 最小函数依赖集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函数依赖集等价"><span class="toc-text">函数依赖集等价</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最小函数依赖集"><span class="toc-text">最小函数依赖集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#F的最小依赖集的算法"><span class="toc-text">F的最小依赖集的算法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-码值理论"><span class="toc-text">4.7 码值理论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-模式分解"><span class="toc-text">4.8 模式分解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-函数依赖保持性和模式分解算法"><span class="toc-text">4.9 函数依赖保持性和模式分解算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#关系模式的分解算法"><span class="toc-text">关系模式的分解算法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x05-数据库设计"><span class="toc-text">0x05 数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-数据库设计概述"><span class="toc-text">5.1 数据库设计概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-需求分析"><span class="toc-text">5.2 需求分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-数据库概念结构设计"><span class="toc-text">5.3 数据库概念结构设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-数据库逻辑结构设计"><span class="toc-text">5.4 数据库逻辑结构设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一对一"><span class="toc-text">一对一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#一对多-多对一"><span class="toc-text">一对多&#x2F;多对一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多对多"><span class="toc-text">多对多</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#0x06-数据库保护"><span class="toc-text">0x06 数据库保护</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-数据库保护和事务"><span class="toc-text">6.1 数据库保护和事务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据事务概念"><span class="toc-text">数据事务概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务执行过程的五种状态"><span class="toc-text">事务执行过程的五种状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事务ACID特性"><span class="toc-text">事务ACID特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-数据库恢复技术"><span class="toc-text">6.2 数据库恢复技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库故障"><span class="toc-text">数据库故障</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库恢复原理和技术"><span class="toc-text">数据库恢复原理和技术</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库故障恢复"><span class="toc-text">数据库故障恢复</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-数据库并发"><span class="toc-text">6.3 数据库并发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#多事务并发执行冲突"><span class="toc-text">多事务并发执行冲突</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-并发调度和可串行化"><span class="toc-text">6.4 并发调度和可串行化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#事务简化"><span class="toc-text">事务简化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#调度的可串行化"><span class="toc-text">调度的可串行化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#冲突可串行化"><span class="toc-text">冲突可串行化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#前驱图（冲突可串行化的判定方法）："><span class="toc-text">前驱图（冲突可串行化的判定方法）：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#拓扑图（获得调度S的一个等价的串行调度）："><span class="toc-text">拓扑图（获得调度S的一个等价的串行调度）：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-事务的隔离性、封锁和并发控制"><span class="toc-text">6.5  事务的隔离性、封锁和并发控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#封锁"><span class="toc-text">封锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#排它锁（X锁）"><span class="toc-text">排它锁（X锁）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#共享锁（S锁）"><span class="toc-text">共享锁（S锁）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-数据库完全性与完整性"><span class="toc-text">6.6 数据库完全性与完整性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库完全性控制"><span class="toc-text">数据库完全性控制</span></a></li></ol></li></ol></li></ol>
    </div>
  </div><div class="post-content"><p>复习</p>
<a id="more"></a>
<p>各章节需要掌握的内容</p>
<p><img src="/2021/05/03/Database-review/image-20210503155841659.png" alt></p>
<p><img src="/2021/05/03/Database-review/image-20210503160432223.png" alt="image-20210503160432223"></p>
<p><img src="/2021/05/03/Database-review/image-20210503160508449.png" alt="image-20210503160508449"></p>
<h1 id="0x01-第一章-绪论"><a href="#0x01-第一章-绪论" class="headerlink" title="0x01 第一章 绪论"></a>0x01 第一章 绪论</h1><h2 id="1-1-数据库基本概念"><a href="#1-1-数据库基本概念" class="headerlink" title="1.1 数据库基本概念"></a>1.1 数据库基本概念</h2><p>数据库（DB）：数据库是指在计算机的存储设备上合理存放、相关联、有结构的数据集合。</p>
<p>数据库管理系统（DBMS）：位于用户和操作系统之间的一层数据管理软件。</p>
<p>数据库系统（DBS）：引进数据库和数据库管理系统后的组成。</p>
<p>数据库应用系统（DBAS）：数据库系统及其应用程序的组成。</p>
<p><img src="/2021/05/03/Database-review/image-20210503165104565.png" alt="image-20210503165104565"></p>
<h2 id="1-2-数据库系统特点"><a href="#1-2-数据库系统特点" class="headerlink" title="1.2 数据库系统特点"></a>1.2 数据库系统特点</h2><h3 id="数据库管理技术发展共有三个阶段"><a href="#数据库管理技术发展共有三个阶段" class="headerlink" title="数据库管理技术发展共有三个阶段"></a>数据库管理技术发展共有三个阶段</h3><p><strong>1.人工管理阶段</strong></p>
<p>特点</p>
<p>(1)计算机系统不提供对用户数据的管理功能；</p>
<p>(2)数据不能共享；</p>
<p>(3)不保存数据。</p>
<p><strong>2.文件系统阶段</strong></p>
<p>特点:</p>
<p>数据以“文件”形式可长期保存在外部存储器的磁盘上。由于计算机的应用转向信息管理，因此对文件要进行大量的查询、修改和插入等操作，这些操作由文件系统提供。  </p>
<p>缺点:</p>
<p>数据冗余;不一致性;数据独立性差;数据无结构。</p>
<p><strong>3.数据库系统阶段</strong></p>
<p>特点:</p>
<p>（1）数据结构化。</p>
<p>（2）数据共享性高、冗余少且易扩充。</p>
<p>（3）数据独立性高。</p>
<p>（4）数据由DBMS统一管理和控制。</p>
<h2 id="1-3-数据模型"><a href="#1-3-数据模型" class="headerlink" title="1.3 数据模型"></a>1.3 数据模型</h2><h3 id="数据模型概念"><a href="#数据模型概念" class="headerlink" title="数据模型概念"></a>数据模型概念</h3><p>现实世界数据特征的模拟和抽象。</p>
<h3 id="数据模型的分类"><a href="#数据模型的分类" class="headerlink" title="数据模型的分类"></a>数据模型的分类</h3><ol>
<li><p>概念数据模型：按用户的观点来对数据和信息建模，主要用于数据库设计</p>
<p>概念模型的表示方法很多，最常用的为实体-联系方法(Entity-Relationship approach），该方法用E-R图来描述概念模型。E-R方法也成为E-R模型</p>
</li>
<li><p>逻辑数据模型：包括层次模型、网状模型、关系模型、面向对象模型和对象关系数据模型等，主要用于数据库管理系统的实现。</p>
</li>
<li><p>物理数据模型：对数据最底层的抽象，它描述数据在系统内部的表示方法和存取方法，在磁盘或磁带上的存储方式和存取方法，是面向计算机系统的。</p>
</li>
</ol>
<h3 id="数据模型的组成要素"><a href="#数据模型的组成要素" class="headerlink" title="数据模型的组成要素"></a>数据模型的组成要素</h3><p>数据模型通常由<strong>数据结构、数据操作和完整性约束</strong>三个部分组成。</p>
<p>数据结构描述数据库的组成对象以及对象之间的联系，通常按其数据结构的类型来命名数据模型，例如层次结构、网状结构和关系结构的数据模型分别命名为层次模型、网状模型、关系模型。</p>
<p>数据操作是指对数据库中各种对象的实例允许执行的操作的集合，包括操作及其有关的规则，主要分为查询和更新（插入、删除、修改）两大类操作。</p>
<p>完整性约束条件是给定的数据模型中数据及其联系所具有的制约和依存规则，在关系模型中体现为实体完整性和参照完整性。例如，某大学的数据库中规定学生成绩如果有6门以上不及格则不能授予学士学位，教授的退休年龄是65周岁等。</p>
<h2 id="1-4-实体联系数据模型"><a href="#1-4-实体联系数据模型" class="headerlink" title="1.4 实体联系数据模型"></a>1.4 实体联系数据模型</h2><h3 id="实体"><a href="#实体" class="headerlink" title="实体"></a>实体</h3><p>实体：客观存在并可相互区别的个体。如：学生。</p>
<p>实体特性：描述实体的主要特征。如：学生的年龄，学号，性别等。</p>
<p>实体集：具有相同特性实体的集合。如：一个学校的学生。</p>
<p>实体标识符：在实体集中唯一能确定实体集的中的某个实体最小实体特性集。如：学号可以唯一确定学生。<strong>可以由多个实体特性组成。</strong></p>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><ol>
<li>一个实体记录可以有若干个属性</li>
<li>不可再分的属性叫原子属性，可再分的属性叫可分属性</li>
<li>属性有型与值之分</li>
<li>值域（属性值的范围）</li>
<li>关键字</li>
</ol>
<h3 id="实体集之间的联系"><a href="#实体集之间的联系" class="headerlink" title="实体集之间的联系"></a>实体集之间的联系</h3><ol>
<li>实体内部联系</li>
<li>实体集联系</li>
</ol>
<p>实体集间的联系：</p>
<ol>
<li>二元联系：只有两个实体集参与的联系</li>
<li>多元联系：参与实体集大于等于3的联系</li>
<li>自反联系：同一实体集内实体内部的联系</li>
</ol>
<h3 id="E-R图"><a href="#E-R图" class="headerlink" title="E-R图"></a>E-R图</h3><p>看箭头</p>
<p><img src="/2021/05/03/Database-review/image-20210504211912646.png" alt="image-20210504211912646"></p>
<h2 id="1-5-数据库系统体系结构"><a href="#1-5-数据库系统体系结构" class="headerlink" title="1.5 数据库系统体系结构"></a>1.5 数据库系统体系结构</h2><h3 id="数据库系统的三级模式结构"><a href="#数据库系统的三级模式结构" class="headerlink" title="数据库系统的三级模式结构"></a>数据库系统的三级模式结构</h3><p>外模式：<strong>也称子模式或用户模式</strong>，数据库用户（包括应用程序员和最终用户）使用的局部数据的逻辑结构和特征的描述。</p>
<p>模式：称为<strong>概念模式或者逻辑模式</strong>，是对数据库全体逻辑结构的描述,是数据库所有用户的公共数据视图，是由数据库设计者综合所有用户数据，按照统一的观点构造的对数据库全局逻辑结构的描述。</p>
<p>内模式：<strong>也称存储模式</strong>，是数据物理结构和存储方式的描述，数据在数据库的内部表示方式。</p>
<p><img src="/2021/05/03/Database-review/image-20210504212756830.png" alt="image-20210504212756830"></p>
<h1 id="0x02-第二章-关系模型"><a href="#0x02-第二章-关系模型" class="headerlink" title="0x02 第二章 关系模型"></a>0x02 第二章 关系模型</h1><h2 id="2-1-基本概念"><a href="#2-1-基本概念" class="headerlink" title="2.1 基本概念"></a>2.1 基本概念</h2><p><strong>1.域（Domain）</strong>：域是一组具有相同数据类型的值的集合，例如整数、自然数都是域</p>
<p><strong>2.笛卡尔积（Cartesian Product）</strong>：笛卡尔积是域上面的一种集合运算。</p>
<p>给定一组域D1，D2，…，Dn，允许其中某些域是相同的。 D1，D2，…，Dn的笛卡尔积为：</p>
<p><img src="/2021/05/03/Database-review/20190629192647367.png" alt="img"></p>
<p>笛卡尔积中每个元素(d1,d2,…dn)称为一个n元组或简称<strong>元组</strong></p>
<p>笛卡尔积可表示为一个二维表，<strong>表中每行对应一个元组，表中每一列的值来自一个域</strong></p>
<p><strong>3.关系（Relation）</strong></p>
<p>D1×D2×…×Dn的子集叫作在域D1，D2，…，Dn上的关系，</p>
<p>表示为R（D1，D2，…，Dn）</p>
<p>R：关系名</p>
<p>n：关系的目或度（Degree）</p>
<p>关系也是一个二维表，每行对应一个元组，每列对应一个域，每列称为属性</p>
<p>若关系中的某一属性组的值能唯一地标识一个元组，则称该属性组为<strong>候选码（Candidate key）</strong></p>
<p>若一个关系有多个候选码，则选定其中一个或多个为<strong>主码（Primary key）</strong></p>
<p>候选码的多个属性称为<strong>主属性</strong>（Prime attribute），不包含在任何候选码中的属性称为<strong>非主属性</strong>；最简单的情况下，候选码只包含一个属性，如果关系模式的所有属性都是这个关系的候选码，则称为<strong>全码</strong>（All-key）</p>
<p><strong>外码(Foreign Key)</strong>：设F是基本关系R的一个或一组属性，但不是R的码。Ks是基本关系S的主码。如果F与Ks相对应，则称F是R的外码。并称基本关系R为参照关系(Referencing Relation)，基本关系S为被参照关系（Referenced Relationship)<strong>规则:对于R中每个元组在F上的值必须为:取空值或等于S中某个元组的主码值</strong></p>
<h2 id="2-2-关系操作和完整性约束"><a href="#2-2-关系操作和完整性约束" class="headerlink" title="2.2 关系操作和完整性约束"></a>2.2 关系操作和完整性约束</h2><p>关系操作两类：关系检索和关系更新（插入，删除，修改）</p>
<p>关系模型的完整性规则是对关系的某种约束条件，关系模型中有三类完整性约束：</p>
<p><strong>实体完整性（Entity Integrity）</strong>：关系模型以主码作为唯一性标识，主码中的属性即主属性不能取空值</p>
<p><strong>参照完整性（Referential Integrity）</strong>：外码</p>
<p><strong>用户自定义完整性（User-defined Integrity）</strong>：反映某一具体应用所涉及的数据必须满足的语义要求</p>
<h2 id="2-3-关系代数-传统集合"><a href="#2-3-关系代数-传统集合" class="headerlink" title="2.3 关系代数 传统集合"></a>2.3 关系代数 传统集合</h2><p>相容关系为前提</p>
<p>并，差，交运算</p>
<p>广义笛卡尔积运算</p>
<h2 id="2-4-关系代数运算"><a href="#2-4-关系代数运算" class="headerlink" title="2.4 关系代数运算"></a>2.4 关系代数运算</h2><h3 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h3><p>选择运算是从关系R中选取使逻辑表达式F为真的元组，是从行的角度进行的运算</p>
<p><img src="/2021/05/03/Database-review/20190629192739586.png" alt="img"></p>
<p>如查询信息系（IS系）全体学生  <img src="/2021/05/03/Database-review/20190629192743765.png" alt="img"></p>
<h3 id="投影"><a href="#投影" class="headerlink" title="投影"></a>投影</h3><p>投影操作主要是从列的角度进行运算，但投影成功之后不仅取消了原关系中的某些列，而且还可能取消某些元组（避免重复行）</p>
<p><img src="/2021/05/03/Database-review/20190629192754689.png" alt="img"></p>
<p>如查询学生的姓名和所在系 <img src="/2021/05/03/Database-review/20190629192758641.png" alt="img"></p>
<h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p>连接运算的含义：从两个关系的笛卡尔积中选取属 性间满足一定条件的元组</p>
<p><strong>等值连接</strong>：θ为’=’的连接运算称为等值连接，即选取属性相等的元组</p>
<p><strong>自然连接</strong>：特殊的等值连接，两个关系中进行比较的分量必须是相同的属性组，在结果中要把重复的属性列去掉</p>
<p>两者的区别：</p>
<ol>
<li>一般的连接操作是从行的角度进行运算的，自然连接还需要取消重复列，所以是同时从行和列的角度进行运算。</li>
<li><strong>自然连接是特殊的等值连接，相同的属性组进行比较，并去除重复的属性列。即笛卡尔积里找出B相等的然后合并R.B和S.B为B</strong>。</li>
<li>等值连接可以不是公共属性，但自然连接必须是公共属性。</li>
</ol>
<h3 id="除"><a href="#除" class="headerlink" title="除"></a>除</h3><p>除操作是同时从行和列的角度进行运算的</p>
<p><img src="/2021/05/03/Database-review/20190629192919637.png" alt="img"></p>
<p><img src="/2021/05/03/Database-review/20190629192922956.png" alt="img"></p>
<p>通常运用于“所有的”这类情况。</p>
<p><img src="/2021/05/03/Database-review/20190629192929734.png" alt="img"></p>
<p>例题：</p>
<p><img src="/2021/05/03/Database-review/image-20210505142838842.png" alt="image-20210505142838842"></p>
<h2 id="2-5-查询优化"><a href="#2-5-查询优化" class="headerlink" title="2.5 查询优化"></a>2.5 查询优化</h2><p>三种优化：代数优化、物理优化和代价估算优化</p>
<h3 id="等价变换规则："><a href="#等价变换规则：" class="headerlink" title="等价变换规则："></a><strong>等价变换规则：</strong></h3><ol>
<li>连接、笛卡尔积交换律<img src="/2021/05/03/Database-review/image-20210505152604468.png" alt="image-20210505152604468"></li>
<li>连接、笛卡尔积结合律<img src="/2021/05/03/Database-review/image-20210505152614300.png" alt="image-20210505152614300"></li>
<li>投影的串接定律</li>
<li>选择的串接定律</li>
<li>选择和投影的交换律<img src="/2021/05/03/Database-review/image-20210505152850683.png" alt="image-20210505152850683"></li>
<li>选择和笛卡尔积的交换律<img src="/2021/05/03/Database-review/image-20210505153114367.png" alt="image-20210505153114367"></li>
</ol>
<h3 id="查询优化策略"><a href="#查询优化策略" class="headerlink" title="查询优化策略"></a>查询优化策略</h3><ol>
<li>尽可能早地执行选择操作</li>
<li>合并笛卡尔积和其后的选择操作，使其称为一个连接运算</li>
<li>合并连续的选择和投影操作</li>
</ol>
<h3 id="优化算法"><a href="#优化算法" class="headerlink" title="优化算法"></a>优化算法</h3><p><img src="/2021/05/03/Database-review/image-20210505154446428.png" alt="image-20210505154446428"></p>
<h1 id="0x03-第三章-关系数据库标准语言SQL"><a href="#0x03-第三章-关系数据库标准语言SQL" class="headerlink" title="0x03 第三章 关系数据库标准语言SQL"></a>0x03 第三章 关系数据库标准语言SQL</h1><h2 id="3-1-SQL概述"><a href="#3-1-SQL概述" class="headerlink" title="3.1 SQL概述"></a>3.1 SQL概述</h2><h2 id="3-2-数据定义"><a href="#3-2-数据定义" class="headerlink" title="3.2 数据定义"></a>3.2 数据定义</h2><h3 id="定义基本表"><a href="#定义基本表" class="headerlink" title="定义基本表"></a>定义基本表</h3><p><img src="/2021/05/03/Database-review/image-20210505161003549.png" alt="image-20210505161003549"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> auto_increment primary <span class="keyword">key</span>, // <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span></span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">50</span>),</span><br><span class="line">sex <span class="built_in">varchar</span>(<span class="number">20</span>),</span><br><span class="line"><span class="built_in">date</span> <span class="built_in">varchar</span>(<span class="number">50</span>),</span><br><span class="line"><span class="keyword">content</span> <span class="built_in">varchar</span>(<span class="number">100</span>)</span><br><span class="line">)<span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br><span class="line"><span class="comment">#char(n) varchar(n)</span></span><br><span class="line"><span class="comment">#binary(n) varbinary(n)</span></span><br><span class="line"><span class="comment">#int smallint</span></span><br><span class="line"><span class="comment">#float double</span></span><br><span class="line"><span class="comment">#date</span></span><br><span class="line"><span class="comment">#time</span></span><br><span class="line"><span class="comment">#timestamp</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#实体完整性约束</span></span><br><span class="line"><span class="comment">#主码约束 PRIMARY KEY</span></span><br><span class="line"><span class="comment">#参照完整性</span></span><br><span class="line"><span class="comment">#外码约束 FOREIGN KEY</span></span><br><span class="line"><span class="comment">#用户自定义完整性</span></span><br><span class="line"><span class="comment">#非空 NOT NULL</span></span><br><span class="line"><span class="comment">#唯一 UNIQUE</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line"><span class="keyword">id</span> <span class="built_in">int</span> <span class="keyword">references</span> s(<span class="keyword">key</span>),</span><br><span class="line"><span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">default</span> <span class="string">'xx'</span>,</span><br><span class="line">sex <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">check</span>(sex=<span class="string">"male"</span> <span class="keyword">or</span> sex=<span class="string">"female"</span>),</span><br><span class="line"><span class="built_in">date</span> <span class="built_in">varchar</span>(<span class="number">50</span>),</span><br><span class="line"><span class="keyword">content</span> <span class="built_in">varchar</span>(<span class="number">100</span>),</span><br><span class="line">primary <span class="keyword">key</span>(<span class="keyword">id</span> ,<span class="keyword">name</span>)</span><br><span class="line"><span class="keyword">foreign</span> <span class="keyword">key</span>(<span class="keyword">id</span>) <span class="keyword">references</span> s(<span class="keyword">key</span>)</span><br><span class="line">)<span class="keyword">default</span> <span class="keyword">charset</span>=utf8;</span><br></pre></td></tr></table></figure>
<h3 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h3><p><img src="/2021/05/03/Database-review/image-20210505170855019.png" alt="image-20210505170855019"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//新增属性</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> phone <span class="built_in">int</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span><br><span class="line">//删除属性</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">drop</span> primary <span class="keyword">key</span>;</span><br><span class="line">//新增外码约束名</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">add</span> <span class="keyword">constraint</span> sno_key <span class="keyword">foreign</span> <span class="keyword">key</span>(<span class="keyword">id</span>) <span class="keyword">references</span> s(<span class="keyword">id</span>);</span><br><span class="line">//通过约束名删除</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">drop</span> <span class="keyword">foreign</span> <span class="keyword">key</span> sno_key;</span><br><span class="line">//修改属性</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> student <span class="keyword">modify</span> phone <span class="built_in">smallint</span>;</span><br><span class="line">//删除基本表</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> student;</span><br></pre></td></tr></table></figure>
<h2 id="3-3-索引"><a href="#3-3-索引" class="headerlink" title="3.3 索引"></a>3.3 索引</h2><p><img src="/2021/05/03/Database-review/image-20210505172628228.png" alt="image-20210505172628228"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//建立索引</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> Stusno <span class="keyword">on</span> student(<span class="keyword">sid</span> <span class="keyword">ASC</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> Coucno <span class="keyword">on</span> course(cid <span class="keyword">ASC</span>);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> <span class="keyword">index</span> SCno <span class="keyword">on</span> study(<span class="keyword">id</span> <span class="keyword">ASC</span>,cid <span class="keyword">DESC</span>);</span><br><span class="line">//删除索引</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">index</span> Stusno;</span><br></pre></td></tr></table></figure>
<h2 id="3-4-单表查询"><a href="#3-4-单表查询" class="headerlink" title="3.4 单表查询"></a>3.4 单表查询</h2><p><img src="/2021/05/03/Database-review/image-20210505184519452.png" alt="image-20210505184519452"></p>
<p><strong>where子句常用查询条件</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210505184800139.png" alt="image-20210505184800139"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">//聚集函数</span><br><span class="line">COUNT（*）                                    统计元组个数  </span><br><span class="line">COUNT（[DISTINCT|ALL] &lt;列名&gt;）  统计一列中值的个数</span><br><span class="line">SUM（[DISTINCT|ALL] &lt;列名&gt;）   计算一列值的总和（此列必须为数值型）</span><br><span class="line">AVG（[DISTINCT|ALL] &lt;列名&gt;）            计算一列值的平均值（此列必须为数值型）</span><br><span class="line">MAX（[DISTINCT|ALL] &lt;列名&gt;）      求一列中的最大值</span><br><span class="line">MIN（[DISTINCT|ALL] &lt;列名&gt;）       求一列中的最小值</span><br><span class="line">如果指定DISTINCT短语，则表示在计算时取消指定列中的重复值，ALL为缺省值，表示不取消重复值</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">FROM</span> Student <span class="comment">/* 查询学生总人数 */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//<span class="keyword">where</span>谓词eg</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">where</span> 学院=<span class="string">"计算机"</span> <span class="keyword">and</span> 出生年份 &gt;=<span class="number">2000</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">where</span> 出生年份 <span class="keyword">between</span> <span class="number">1996</span> amd <span class="number">1998</span>;</span><br><span class="line"><span class="keyword">select</span> sno,sname <span class="keyword">from</span> student <span class="keyword">where</span> 学院 <span class="keyword">in</span> (<span class="string">"计算机"</span>,<span class="string">"信电"</span>);</span><br><span class="line">//a%b 以a开头b结尾任意长度的字符串</span><br><span class="line">//a_b 以a开头b结尾3长度的字符串</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student <span class="keyword">where</span> sname <span class="keyword">like</span> <span class="string">"王%"</span> ESCAPE <span class="string">"\ "</span>;\</span><br><span class="line"><span class="keyword">select</span> sno,sname <span class="keyword">from</span> student <span class="keyword">where</span> 学院 <span class="keyword">is</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">//集函数eg</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">as</span> 总人数 <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">AVG</span>(<span class="keyword">year</span>(<span class="keyword">now</span>())-出生年份) <span class="keyword">as</span> 平均年龄 <span class="keyword">from</span> student;</span><br><span class="line"></span><br><span class="line">//group by eg</span><br><span class="line"><span class="keyword">select</span> cno,<span class="keyword">count</span>(sno) <span class="keyword">as</span> 人数 <span class="keyword">from</span> sc <span class="keyword">group</span> <span class="keyword">by</span> cno;</span><br><span class="line"><span class="keyword">select</span> sno,<span class="keyword">count</span>(cno) <span class="keyword">as</span> 选课数 <span class="keyword">from</span> sc <span class="keyword">where</span> sno <span class="keyword">between</span> <span class="string">'091501'</span> <span class="keyword">and</span> <span class="string">'091506'</span> <span class="keyword">group</span> <span class="keyword">by</span> sno <span class="keyword">having</span> <span class="keyword">count</span>(cno) &gt;= <span class="string">'3'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-5-多表查询"><a href="#3-5-多表查询" class="headerlink" title="3.5 多表查询"></a>3.5 多表查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">//eg</span><br><span class="line">//查询选修180101号课程且成绩在90分以上的学生学号，姓名及成绩。</span><br><span class="line"><span class="keyword">select</span> s.sno,sname,grade </span><br><span class="line"><span class="keyword">from</span> s,sc </span><br><span class="line"><span class="keyword">where</span> s.sno=sc.sno <span class="keyword">and</span> sc.cno=<span class="string">'180101'</span> <span class="keyword">and</span> sc.grade &gt; <span class="number">90</span>;</span><br><span class="line">//查询选修了数据库原理课程的学生的姓名和成绩。</span><br><span class="line"><span class="keyword">select</span> cname,grade</span><br><span class="line"><span class="keyword">from</span> s</span><br><span class="line"><span class="keyword">join</span> sc <span class="keyword">on</span> sc.sno=s.sno</span><br><span class="line"><span class="keyword">join</span> c <span class="keyword">on</span> sc.cno=c.cno</span><br><span class="line"><span class="keyword">where</span> cname = <span class="string">"数据库原理"</span></span><br><span class="line">//统计每一门课的平均分</span><br><span class="line"><span class="keyword">select</span> cname,<span class="keyword">AVG</span>(grade) <span class="keyword">as</span> 平均分</span><br><span class="line"><span class="keyword">from</span> c,sc</span><br><span class="line"><span class="keyword">where</span> c.cno=sc.cno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> cno,cname;</span><br><span class="line">//查询平均分高于90分的学生的学号、姓名以及他的平均分，并按平均分降序排列。</span><br><span class="line"><span class="keyword">select</span> sno,sname,<span class="keyword">AVG</span>(grade) <span class="keyword">as</span> 平均分</span><br><span class="line"><span class="keyword">from</span> s,sc</span><br><span class="line"><span class="keyword">where</span> s.sno=sc.sno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno,sname</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">AVG</span>(grade) &gt; <span class="number">90</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">AVG</span>(grade) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">//Limit [offset,] count</span><br><span class="line">//查询平均分高于90分的前五名学生的学号、姓名以及他的平均分</span><br><span class="line"><span class="keyword">select</span> sno,sname,<span class="keyword">AVG</span>(grade)</span><br><span class="line"><span class="keyword">from</span> s,sc</span><br><span class="line"><span class="keyword">where</span> s.sno=sc.sno</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno,sname</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">AVG</span>(grade) &gt; <span class="number">90</span></span><br><span class="line"><span class="keyword">limit</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">//自连接</span><br><span class="line">//查询和王丽在同一个学院学习的学生的姓名。</span><br><span class="line"><span class="keyword">select</span> s2.sname</span><br><span class="line"><span class="keyword">from</span> s <span class="keyword">as</span> s1,s <span class="keyword">as</span> s2</span><br><span class="line"><span class="keyword">where</span> s1.sname=<span class="string">"王丽"</span> <span class="keyword">and</span> s1.学院=s2.学院;</span><br></pre></td></tr></table></figure>
<h2 id="3-6-嵌套查询"><a href="#3-6-嵌套查询" class="headerlink" title="3.6 嵌套查询"></a>3.6 嵌套查询</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//查询与王丽在同一个学院学习的学生的学号和姓名</span><br><span class="line"><span class="keyword">select</span> sno,sname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> 学院 <span class="keyword">IN</span>(</span><br><span class="line">	<span class="keyword">select</span> 学院</span><br><span class="line">	<span class="keyword">from</span> student</span><br><span class="line">	<span class="keyword">where</span> sname=<span class="string">"王丽"</span></span><br><span class="line">)</span><br><span class="line">//查询没有选修数据库原理课程的学生的学号和姓名。</span><br><span class="line"><span class="keyword">select</span> sno,sname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> sno <span class="keyword">NOT</span> <span class="keyword">IN</span>(</span><br><span class="line">	<span class="keyword">select</span> sno</span><br><span class="line">	<span class="keyword">from</span> sc</span><br><span class="line">	<span class="keyword">where</span> cno <span class="keyword">IN</span>(</span><br><span class="line">    	<span class="keyword">select</span> cno</span><br><span class="line">    	<span class="keyword">from</span> c</span><br><span class="line">    	<span class="keyword">where</span> cname=<span class="string">"数据库原理"</span></span><br><span class="line">))</span><br><span class="line">//集函数作用对象</span><br><span class="line">无<span class="keyword">where</span>就是整张表</span><br><span class="line">有<span class="keyword">where</span>就是行</span><br><span class="line">有分组，就是分组</span><br><span class="line">//<span class="keyword">exists</span></span><br><span class="line"><span class="keyword">select</span> sno,sname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line">	<span class="keyword">select</span> * </span><br><span class="line">	<span class="keyword">from</span> sc,c</span><br><span class="line">	<span class="keyword">where</span> sc.cno=c.cno <span class="keyword">and</span> cname=<span class="string">"数据库原理"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="3-7-集合和除运算"><a href="#3-7-集合和除运算" class="headerlink" title="3.7 集合和除运算"></a>3.7 集合和除运算</h2><p><strong>集合操作的各查询结果的列数必须相同，对应项的数据类型也必须相同。</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">//并运算</span><br><span class="line">//查询选修了180101号或180102号课程或二者都选修了的学生学号、课程号和成绩。</span><br><span class="line">(<span class="keyword">select</span> sno,cno,grade</span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">where</span> cno=<span class="string">"180101"</span>)</span><br><span class="line"><span class="keyword">union</span></span><br><span class="line">(<span class="keyword">select</span> sno,cno,grade</span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">where</span> cno=<span class="string">"180102"</span>);</span><br><span class="line">//差运算</span><br><span class="line">//查询选修了180101号或180102号课程或二者都选修了的学生学号、课程号和成绩。</span><br><span class="line">(<span class="keyword">select</span> cno,sno,grade</span><br><span class="line"><span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> cno=<span class="string">"180101"</span>)</span><br><span class="line"><span class="keyword">except</span></span><br><span class="line">(<span class="keyword">select</span> cno,sno.grade</span><br><span class="line"><span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> cno=<span class="string">"180102"</span>);</span><br><span class="line">//除运算</span><br><span class="line">//中间一层为小集合，最内一层为大集合</span><br><span class="line">//查询了选修全部课程的姓名</span><br><span class="line"><span class="keyword">select</span> sname</span><br><span class="line"><span class="keyword">from</span> s </span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line">	<span class="keyword">select</span> * </span><br><span class="line">    <span class="keyword">from</span> c </span><br><span class="line">    <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line">    	<span class="keyword">select</span> * </span><br><span class="line">        <span class="keyword">from</span> sc </span><br><span class="line">    	<span class="keyword">where</span> sc.cno=c.cno <span class="keyword">and</span> s.sno=sc.sno));</span><br><span class="line">//查询至少选修了091501号学生选修的全部课程的学生的姓名</span><br><span class="line"><span class="keyword">select</span> sname</span><br><span class="line"><span class="keyword">from</span> s</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line">	<span class="keyword">select</span> * </span><br><span class="line">	<span class="keyword">from</span> sc <span class="keyword">as</span> <span class="keyword">first</span></span><br><span class="line">	 <span class="keyword">where</span> first.sno=<span class="string">"091501"</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line">     	<span class="keyword">select</span> * </span><br><span class="line">        <span class="keyword">from</span> sc <span class="keyword">as</span> <span class="keyword">second</span></span><br><span class="line">     	<span class="keyword">where</span> first.cno=second.cno <span class="keyword">and</span> second.sno=s.sno));</span><br></pre></td></tr></table></figure>
<h2 id="3-8-数据更新和控制"><a href="#3-8-数据更新和控制" class="headerlink" title="3.8 数据更新和控制"></a>3.8 数据更新和控制</h2><h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><ol>
<li>insert</li>
<li>update</li>
<li>delete</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//<span class="keyword">insert</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student</span><br><span class="line"><span class="keyword">values</span>(<span class="string">"xx"</span>,<span class="string">"xx"</span>,<span class="string">"xx"</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> sc(sno,cno)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">"081010"</span>,<span class="string">"101"</span>);</span><br><span class="line"></span><br><span class="line">//<span class="keyword">update</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">table</span></span><br><span class="line"><span class="keyword">set</span> grade=grade+<span class="number">1</span></span><br><span class="line"><span class="keyword">where</span> sno <span class="keyword">in</span>(</span><br><span class="line">	<span class="keyword">select</span> sno</span><br><span class="line">	<span class="keyword">from</span> student</span><br><span class="line">	<span class="keyword">where</span> 学院=<span class="string">"计算机"</span>);</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">table</span></span><br><span class="line"><span class="keyword">set</span> grade=grade+<span class="number">1</span></span><br><span class="line"><span class="keyword">where</span> <span class="keyword">exists</span>(</span><br><span class="line">	<span class="keyword">select</span> *</span><br><span class="line">	<span class="keyword">from</span> student</span><br><span class="line">	<span class="keyword">where</span> 学院=<span class="string">"计算机"</span> <span class="keyword">and</span> s.sno=sc.sno);</span><br><span class="line"></span><br><span class="line">//<span class="keyword">delete</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> <span class="keyword">table</span></span><br><span class="line"><span class="keyword">where</span> sno=<span class="string">"101"</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">exists</span>(</span><br><span class="line">	<span class="keyword">select</span> * </span><br><span class="line">    <span class="keyword">from</span> s</span><br><span class="line">	<span class="keyword">where</span> sc.sno=s.sno <span class="keyword">and</span> 学院=<span class="string">"计算机"</span>)</span><br></pre></td></tr></table></figure>
<h3 id="控制"><a href="#控制" class="headerlink" title="控制"></a>控制</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//<span class="keyword">grant</span></span><br><span class="line">//把学生表的查询权限授予用户User1</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">select</span> <span class="keyword">on</span> <span class="keyword">table</span> student <span class="keyword">to</span> user1;</span><br><span class="line">//DBA把在数据库SMD中建立表的权限授予用户User3。</span><br><span class="line"><span class="keyword">GRANT</span> createtab <span class="keyword">on</span> <span class="keyword">database</span> smd <span class="keyword">to</span> User3;</span><br><span class="line">//把学习表的全部权限授予全部用户。</span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">all</span> <span class="keyword">privileges</span> <span class="keyword">on</span> <span class="keyword">table</span> sc <span class="keyword">to</span> <span class="keyword">public</span>;</span><br><span class="line">//<span class="keyword">with</span> <span class="keyword">grant</span> <span class="keyword">option</span>可以把权限授予其他人</span><br><span class="line">//把用户User6对学生表的<span class="keyword">INSERT</span>权限收回</span><br><span class="line">//<span class="keyword">revoke</span> <span class="keyword">insert</span> <span class="keyword">on</span> <span class="keyword">table</span> student <span class="keyword">from</span> user6;</span><br></pre></td></tr></table></figure>
<h2 id="3-9-视图"><a href="#3-9-视图" class="headerlink" title="3.9 视图"></a>3.9 视图</h2><p>概念:视图是从一个或几个基本表（或视图)导出的表。</p>
<p>视图也称为虚表或者虚关系:只存放视图的定义。</p>
<h3 id="定义视图"><a href="#定义视图" class="headerlink" title="定义视图"></a>定义视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span></span><br><span class="line">&lt;视图名&gt; [(&lt;列名&gt; [，&lt;列名&gt;]…)]</span><br><span class="line"><span class="keyword">AS</span> &lt;子查询&gt;</span><br><span class="line">[<span class="keyword">WITH</span> <span class="keyword">CHECK</span> <span class="keyword">OPTION</span>]；</span><br><span class="line"></span><br><span class="line">//计算机学院学生的视图</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> CS_STU</span><br><span class="line"><span class="keyword">AS</span> <span class="keyword">select</span> sno,sname</span><br><span class="line"><span class="keyword">from</span> student</span><br><span class="line"><span class="keyword">where</span> 学院=<span class="string">"计算机"</span>;</span><br></pre></td></tr></table></figure>
<h3 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> cs_stu</span><br></pre></td></tr></table></figure>
<h1 id="0x04-第四章-规范化理论"><a href="#0x04-第四章-规范化理论" class="headerlink" title="0x04 第四章 规范化理论"></a>0x04 第四章 规范化理论</h1><h2 id="4-1-规范化概述"><a href="#4-1-规范化概述" class="headerlink" title="4.1 规范化概述"></a>4.1 规范化概述</h2><h2 id="4-2-函数依赖"><a href="#4-2-函数依赖" class="headerlink" title="4.2 函数依赖"></a>4.2 函数依赖</h2><p>X相等，Y一定相等。若X不等，Y可等可不等。</p>
<p><img src="/2021/05/03/Database-review/image-20210506211418905.png" alt="image-20210506211418905"></p>
<p>如果X→Y，但Y不为X的子集，则称X→Y是<strong>非平凡的函数依赖</strong></p>
<p>若X→Y，但Y属于X, 则称X→Y是<strong>平凡的函数依赖</strong></p>
<h3 id="完全函数依赖："><a href="#完全函数依赖：" class="headerlink" title="完全函数依赖："></a><strong>完全函数依赖</strong>：<img src="/2021/05/03/Database-review/20190629193601651.png" alt="img"></h3><h3 id="部分函数依赖："><a href="#部分函数依赖：" class="headerlink" title="部分函数依赖："></a>部分函数依赖：<img src="/2021/05/03/Database-review/20190629193601806.png" alt="img"></h3><p><img src="/2021/05/03/Database-review/20190629193609721.png" alt="img"></p>
<p>上图中<img src="/2021/05/03/Database-review/20190629193615156.png" alt="img"> 是完全函数依赖，</p>
<p><img src="/2021/05/03/Database-review/20190629193615144.png" alt="img"> 是部分数依赖，因为Sno→Sdept成立，而Sno是Sno，Cno的真子集</p>
<h3 id="传递函数依赖"><a href="#传递函数依赖" class="headerlink" title="传递函数依赖"></a><strong>传递函数依赖</strong></h3><p>定义:在R(U)中，如果X→Y，Y不包含于X即Y不是X的子集，Y不→X，Y→Z,则称Z对X传递函数依赖。</p>
<h3 id="码的函数依赖定义"><a href="#码的函数依赖定义" class="headerlink" title="码的函数依赖定义"></a>码的函数依赖定义</h3><p><strong>候选码和主码</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210506215255533.png" alt="image-20210506215255533"></p>
<p><strong>主属性和非主属性</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210506215233325.png" alt="image-20210506215233325"></p>
<p><strong>外码</strong><img src="/2021/05/03/Database-review/image-20210506215400654.png" alt="image-20210506215400654"></p>
<p><strong>超码</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210506215557064.png" alt="image-20210506215557064"></p>
<h2 id="4-3-范式"><a href="#4-3-范式" class="headerlink" title="4.3 范式"></a>4.3 范式</h2><h3 id="1NF"><a href="#1NF" class="headerlink" title="1NF"></a>1NF</h3><p>如果一关系模式r(R)的每个属性对应的域值都是不可分的(即原子的)，则称r(R)属于第一范式，记为r(R)Î1NF.</p>
<p>第一范式的目标是：将基本数据划分成称为实体集或表的逻辑单元，当设计好每个实体后，需要为其指定主码。</p>
<p><img src="/2021/05/03/Database-review/20190629193650963.png" alt="img"></p>
<p>第一范式是对关系模式的最起码的要求。不满足第一范式的数据库模式不能称为关系数据库</p>
<h3 id="2NF"><a href="#2NF" class="headerlink" title="2NF"></a>2NF</h3><p>若关系模式R∈1NF，并且每一个非主属性都完全函数依赖于任何一个候选码，则R∈2NF。</p>
<p>第二范式的目标：将只部分依赖于候选码（即依赖于候选码的部分属性）的非主属性移到其他表中。</p>
<p>S-L-C这个函数依赖图中非主属性Sdept和Sloc部分函数依赖于码(Sno, Cno)</p>
<p><img src="/2021/05/03/Database-review/20190629193705542.png" alt="img"></p>
<p>将其分为两个表后使得非主属性对其各自的码都是完全函数依赖</p>
<p><img src="/2021/05/03/Database-review/20190629193713265.png" alt="img"></p>
<p>2NF范式虽然消除了由于非主属性对候选码的部 分依赖所引起的冗余及各种异常，但并没有排除传递依赖。因此，还需要对其进一步规范化</p>
<h3 id="3NF"><a href="#3NF" class="headerlink" title="3NF"></a>3NF</h3><p><strong>3NF必定是2NF</strong></p>
<p>若R∈3NF，则每一个非主属性既不部分依赖于码也不传递依赖于码</p>
<p>第三范式的目标：去掉表中不直接依赖于候选码的非主属性</p>
<p><img src="/2021/05/03/Database-review/20190629193726860.png" alt="img"></p>
<p>Sno→Sdept  Sdept → Sno  Sdept→Sloc 可得： Sno→Sloc，即S-L中存在非主属性对码的传递函数依 赖，S-L ∉ 3NF</p>
<p>采用投影分解法，把S-L分解为两个关系模式，以消除传递函数依赖：</p>
<p><img src="/2021/05/03/Database-review/20190629193735197.png" alt="img"></p>
<p>eg:</p>
<ol>
<li>先找谁能决定U</li>
<li>之后看是否有部分函数依赖(1NF,2NF)</li>
<li>最后看是否有传递函数依赖(2NF,3NF)</li>
</ol>
<h2 id="4-4-BCNF-4NF"><a href="#4-4-BCNF-4NF" class="headerlink" title="4.4 BCNF 4NF"></a>4.4 BCNF 4NF</h2><h3 id="BCNF"><a href="#BCNF" class="headerlink" title="BCNF"></a>BCNF</h3><p>通常认为BCNF是修正的第三范式，有时也称为扩充的第三范式。</p>
<p>一个满足BCNF的关系模式有：</p>
<p>所有非主属性都完全函数依赖于每个候选码<br>所有的主属性都完全函数依赖于每个不包含它的候选码<br>没有任何属性完全函数依赖于非码的任何一组属性<br>BCNF范式排除了：</p>
<p>任何属性(包括主属性和非主属性)对候选码的部分依赖和传递依赖；<br>主属性之间的传递依赖。<br>例子：</p>
<p>关系模式STJ(S,T,J)中，S表示学生，T表示教师，J表示课程。每一教师只教一门课，</p>
<p>每门课有若干教师，某一学生选定某门课，就对应一个固定的教师。</p>
<p>由语义可得到函数依赖：(S,J)→T；(S,T)→J；T→J</p>
<p>因为没有任何非主属性对码传递依赖或部分依赖，</p>
<p>STJ ∈ 3NF。</p>
<p>因为T是决定因素，而T不包含码，所以STJ 不属于 BCNF 关系。</p>
<p><img src="/2021/05/03/Database-review/20190629193928110.png" alt="img"></p>
<p><strong>结论：</strong></p>
<ol>
<li>任何一个二目关系都是BCNF</li>
<li>关系模式R中属性全部是主属性，则R的最低范式必定是 至少达到第三范式</li>
</ol>
<h2 id="4-5-Armstrong公理系统"><a href="#4-5-Armstrong公理系统" class="headerlink" title="4.5 Armstrong公理系统"></a>4.5 Armstrong公理系统</h2><h3 id="独立推理规则"><a href="#独立推理规则" class="headerlink" title="独立推理规则"></a>独立推理规则</h3><p><strong>自反律</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210506230123348.png" alt="image-20210506230123348"></p>
<p><strong>增广律</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210506230337823.png" alt="image-20210506230337823"></p>
<h3 id="传递律"><a href="#传递律" class="headerlink" title="传递律"></a>传递律</h3><p><img src="/2021/05/03/Database-review/image-20210506230430664.png" alt="image-20210506230430664"></p>
<ol>
<li>Y属于X,X-&gt;Y</li>
<li>Z属于U,X-&gt;Y,有XZ-&gt;YZ</li>
<li>X-&gt;Y和Y-&gt;Z,有X-&gt;Z</li>
</ol>
<p>几个推论</p>
<ol>
<li>X-&gt;Y,X-&gt;Z 有 X-&gt;YZ</li>
<li>X-&gt;Y Z属于Y 有X-&gt;Z</li>
<li>X-&gt;Y,WY-&gt;Z,有XW-&gt;Z</li>
</ol>
<h3 id="属性集的闭包"><a href="#属性集的闭包" class="headerlink" title="属性集的闭包"></a>属性集的闭包</h3><p><img src="/2021/05/03/Database-review/image-20210506233112332.png" alt="image-20210506233112332"></p>
<h2 id="4-6-最小函数依赖集"><a href="#4-6-最小函数依赖集" class="headerlink" title="4.6 最小函数依赖集"></a>4.6 最小函数依赖集</h2><h3 id="函数依赖集等价"><a href="#函数依赖集等价" class="headerlink" title="函数依赖集等价"></a>函数依赖集等价</h3><p>设F和G是函数依赖集，若F闭包=G闭包，则F和G等价。</p>
<p><strong>F的闭包=G的闭包的充分必要条件是F是G闭包的子集，G是F闭包的子集。</strong></p>
<p>eg：</p>
<p><img src="/2021/05/03/Database-review/image-20210507153146293.png" alt="image-20210507153146293"></p>
<h3 id="最小函数依赖集"><a href="#最小函数依赖集" class="headerlink" title="最小函数依赖集"></a><strong>最小函数依赖集</strong></h3><p>定义需要满足三个条件：</p>
<ol>
<li>右部都是单属性</li>
<li>F-A之后记为F1，且F1不与F等价</li>
<li>对于多个属性决定，要判断每一属性不是冗余的。</li>
</ol>
<h3 id="F的最小依赖集的算法"><a href="#F的最小依赖集的算法" class="headerlink" title="F的最小依赖集的算法"></a><strong>F的最小依赖集的算法</strong></h3><p><img src="/2021/05/03/Database-review/image-20210507154804795.png" alt="image-20210507154804795"></p>
<p>eg：</p>
<p><strong>函数依赖集F的最小覆盖可能有多个</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210507155107652.png" alt="image-20210507155107652"></p>
<p><img src="/2021/05/03/Database-review/image-20210507155154422.png" alt="image-20210507155154422"></p>
<p><img src="/2021/05/03/Database-review/image-20210507155340685.png" alt="image-20210507155340685"></p>
<p><img src="/2021/05/03/Database-review/image-20210507155425864.png" alt="image-20210507155425864"></p>
<h2 id="4-7-码值理论"><a href="#4-7-码值理论" class="headerlink" title="4.7 码值理论"></a>4.7 码值理论</h2><p><img src="/2021/05/03/Database-review/image-20210507160245915.png" alt="image-20210507160245915"></p>
<p><img src="/2021/05/03/Database-review/image-20210507160155053.png" alt="image-20210507160155053"></p>
<p><strong>多属性依赖集候选关键字求解算法</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210507161022110.png" alt="image-20210507161022110"></p>
<p><img src="/2021/05/03/Database-review/image-20210507161055600.png" alt="image-20210507161055600"></p>
<p><img src="/2021/05/03/Database-review/image-20210507161117962.png" alt="image-20210507161117962"></p>
<p>此外还有图论的方法。</p>
<p>简单来说就是两点</p>
<ol>
<li>先找X（L类和N类）和Y（R类和LR类），画好入度和出度。</li>
<li>然后逐个增加，直至找到回路。</li>
</ol>
<h2 id="4-8-模式分解"><a href="#4-8-模式分解" class="headerlink" title="4.8 模式分解"></a>4.8 模式分解</h2><p>没太看懂 等复习完再看</p>
<p><strong>判断分解的无损连接性</strong></p>
<p>直接看例子吧</p>
<p><img src="/2021/05/03/Database-review/image-20210507172917369.png" alt="image-20210507172917369"></p>
<h2 id="4-9-函数依赖保持性和模式分解算法"><a href="#4-9-函数依赖保持性和模式分解算法" class="headerlink" title="4.9 函数依赖保持性和模式分解算法"></a>4.9 函数依赖保持性和模式分解算法</h2><h3 id="关系模式的分解算法"><a href="#关系模式的分解算法" class="headerlink" title="关系模式的分解算法"></a>关系模式的分解算法</h3><p><strong>1.转换为3NF的保持函数依赖的分解</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210507212116352.png" alt="image-20210507212116352"></p>
<p><img src="/2021/05/03/Database-review/image-20210507212123809.png" alt="image-20210507212123809"></p>
<p><strong>2.具有依赖保持和连接不失真的分解</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210507212321618.png" alt="image-20210507212321618"></p>
<p><strong>3.结果为BCNF的连不失真分解</strong></p>
<p><img src="/2021/05/03/Database-review/image-20210507212741288.png" alt="image-20210507212741288"></p>
<h1 id="0x05-数据库设计"><a href="#0x05-数据库设计" class="headerlink" title="0x05 数据库设计"></a>0x05 数据库设计</h1><h2 id="5-1-数据库设计概述"><a href="#5-1-数据库设计概述" class="headerlink" title="5.1 数据库设计概述"></a>5.1 数据库设计概述</h2><p><strong>数据库设计</strong>：对于一个给定的应用环境，构造最优的数据库模式，建立数据库及其应用系统，使之能有效地存储数据，满足各种用户的信息需求（数据库内容及结构的要求，静态）与处理需求（数据库要进行的数据处理，动态）。</p>
<p><strong>设计方法</strong></p>
<ol>
<li>直观设计法</li>
<li>规范设计法（实体联系、基于3NF、基于视图概念）</li>
<li>计算机辅助设计法</li>
<li>自动化设计法</li>
</ol>
<h2 id="5-2-需求分析"><a href="#5-2-需求分析" class="headerlink" title="5.2 需求分析"></a>5.2 需求分析</h2><p><strong>分析重点</strong>：信息要求（DB中需存储的数据）、处理要求（用户要求的处理功能、处理响应时间的要求）、安全性与完整性要求</p>
<p><strong>调查需求步骤</strong>： </p>
<ol>
<li>分析用户活动，产生业务流程图</li>
<li>确定系统范围，产生业务范围图</li>
<li>分析用户活动及所设计的数据，产生数据流图（外部项、数据加工、数据存储、数据流）</li>
<li>分析系统数据，产生数据字典</li>
</ol>
<p><strong>数据字典</strong>：关于数据库中数据的描述，元数据，而不是数据本身 </p>
<p>数据项：是不可再分的数据单位 </p>
<p>数据结构：反映数据之间的组合关系 </p>
<p>数据流：数据结构在系统内传输的途径 </p>
<p>数据存储：数据结构停留或保存的地方，也是数据流的来源和去向之一 </p>
<p>处理过程：描述处理过程的说明性信息 </p>
<h2 id="5-3-数据库概念结构设计"><a href="#5-3-数据库概念结构设计" class="headerlink" title="5.3 数据库概念结构设计"></a>5.3 数据库概念结构设计</h2><p><strong>分类</strong>：自顶向下（集中模式设计）、自底向上（视图集成法）、混合策略（自底向上 、和自顶向下相结合）、逐步扩张（由内向外法）</p>
<p><strong>局部视图设计</strong>：通常以中层数据流图作为设计分E-R图的依据（找实体、找属性、找联系和类型） </p>
<p><strong>集成全局视图</strong>：模式之间的对应和冲突包括：属性冲突 （属性域冲突、取值单位冲突）、命名冲突（同名异义、异名同义）、结构冲突 ，可以修改视图使得相互一致或者合并视图或者重构。</p>
<h2 id="5-4-数据库逻辑结构设计"><a href="#5-4-数据库逻辑结构设计" class="headerlink" title="5.4 数据库逻辑结构设计"></a>5.4 数据库逻辑结构设计</h2><p>E-R图转换为关系模式，实质是将实体和联系转为关系模式。 </p>
<h3 id="一对一"><a href="#一对一" class="headerlink" title="一对一"></a><strong>一对一</strong></h3><ul>
<li><p>转换为新关系，每个实体的码均是该关系的候选码。 </p>
</li>
<li><p>与任意一端模式合并。在该关系模式中加入另一关系的码和联系的属性，该关系的码不变。 </p>
</li>
</ul>
<h3 id="一对多-多对一"><a href="#一对多-多对一" class="headerlink" title="一对多/多对一"></a><strong>一对多/多对一</strong></h3><ul>
<li>转换为新关系。 与该联系相连的各实体的码以及联系本身的属性构成新关系的属性，该关系的码是n端关系模式的码</li>
<li>与n端模式合并。<strong>在n端关系模式中加入1端关系模式的码和联系的属性，关系的码仍为n端关系的码</strong>。 </li>
</ul>
<h3 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a><strong>多对多</strong></h3><ul>
<li>与该联系相连的各实体的码以及联系本身的属性构成新关系的属性，该关系的码是两端关系模式码的组合。 </li>
</ul>
<h1 id="0x06-数据库保护"><a href="#0x06-数据库保护" class="headerlink" title="0x06 数据库保护"></a>0x06 数据库保护</h1><h2 id="6-1-数据库保护和事务"><a href="#6-1-数据库保护和事务" class="headerlink" title="6.1 数据库保护和事务"></a>6.1 数据库保护和事务</h2><p>数据库需要保护，数据库保护包括四个主要功能:备份和恢复、并发控制、安全性控制和完整性控制。</p>
<h3 id="数据事务概念"><a href="#数据事务概念" class="headerlink" title="数据事务概念"></a>数据事务概念</h3><p>是一个不可分割的操作序列，该操作序列要么全做，要么全不做。</p>
<p>事务通常是以BEGIN TRANSACTION开始，以COMMIT或ROLLBACK结束。COMMIT表示提交，ROLLBACK表示回滚，在事务运行的过程中发生某种故障事务不能继续执行，系统就会将事务对数据库的已完成操作全部撤销，从而回滚到事务开始时的状态。</p>
<h3 id="事务执行过程的五种状态"><a href="#事务执行过程的五种状态" class="headerlink" title="事务执行过程的五种状态"></a>事务执行过程的五种状态</h3><ol>
<li>活动状态</li>
<li>部分提交状态</li>
<li>提交状态</li>
<li>失败状态</li>
<li>中止状态</li>
</ol>
<p><img src="/2021/05/03/Database-review/image-20210508123313748.png" alt="image-20210508123313748"></p>
<h3 id="事务ACID特性"><a href="#事务ACID特性" class="headerlink" title="事务ACID特性"></a>事务ACID特性</h3><p>1.原子性：事务是不可分割的工作单位。</p>
<p>2.一致性：事务提交后，数据库从-个一致性状态变到另一个一致性状态。</p>
<p>3.隔离性：在事务完成之前，它对数据库产生的结果不能被其它事务引用。</p>
<p>4.持续性：一旦事务执行成功(提交)，其对数据产生的效果永久有效。</p>
<h2 id="6-2-数据库恢复技术"><a href="#6-2-数据库恢复技术" class="headerlink" title="6.2 数据库恢复技术"></a>6.2 数据库恢复技术</h2><h3 id="数据库故障"><a href="#数据库故障" class="headerlink" title="数据库故障"></a>数据库故障</h3><p>1.事务内部故障：如果当前事务在执行内部操作的时候发生故障，就是事务内部故障，执行UNDO操作。</p>
<p>2.系统故障：造成系统停止运转并要求系统重新启动的一类故障。</p>
<p>3.介质故障：导致数据库的数据部分丢失或者全部丢失的一类故障。</p>
<h3 id="数据库恢复原理和技术"><a href="#数据库恢复原理和技术" class="headerlink" title="数据库恢复原理和技术"></a>数据库恢复原理和技术</h3><p><strong>数据转储</strong>：转储即DBA定期地将整个数据库复制到磁带或另一个磁盘上保存起来的过程。这些备用的数据称为后被副本。</p>
<p>转储又分为静态转储和动态转储：静态转储必须等待正在运行的用户事务结束才能进行；动态转储是指转储期间允许对数据库进行存取或修改，即转储和用户事务可以并发执行。</p>
<p>也可分为海量转储和增量转储：海量转储即每次转储全部数据库，增量转储即每次只转储上一次转储后更新的数据。</p>
<p><strong>登记日志：</strong>日志文件是用来记录事务对数据库的更新操作的文件。不同数据库系统采用的日志文件格式并不完全一样，主要有两种格式：<strong>以记录为单位的日志文件</strong>和<strong>以数据块为单位的日志文件</strong></p>
<p>每个日志记录的内容主要包括：</p>
<ul>
<li>事务标识（标明是哪个事务）</li>
<li>操作的类型（插入、删除或修改）</li>
<li>操作对象（记录内部标识）</li>
<li>更新前数据的旧值（对插入操作而言，此项为空值）</li>
<li>更新后数据的新值（对删除操作而言，此项为空值）</li>
</ul>
<h3 id="数据库故障恢复"><a href="#数据库故障恢复" class="headerlink" title="数据库故障恢复"></a>数据库故障恢复</h3><p><strong>事务内部故障</strong>的恢复步骤：</p>
<ol>
<li>①反向扫描日志文件，查找该事务的更新操作</li>
<li>如果遇到update 操作，则用日志记录中的“前像”更新数据对象;</li>
<li>如果遇到insert 操作，则做delete操作，删除该数据对象;</li>
<li>如果遇到delete 操作，则做insert操作,插入之前删掉的数据对象，插入的值是日志记录中的“前像”</li>
<li>②继续反向扫描日志文件，对每个更新操作进行同样的处理。直到遇见该事务的start记录为止。</li>
</ol>
<p><strong>系统故障的恢复</strong>：</p>
<ol>
<li>从头扫描日志文件，对具有start和commit的进行REDO，对只有start但无commit，进行UNDO队列。</li>
<li>对REDO队列进行REDO，正向扫描并执行。</li>
<li>对UNDO队列进行UNDO，反向扫描并执行逆操作。</li>
</ol>
<p><strong>介质故障的恢复：</strong></p>
<p>DBA利用数据库副本和日志文件副本进行恢复 </p>
<h2 id="6-3-数据库并发"><a href="#6-3-数据库并发" class="headerlink" title="6.3 数据库并发"></a>6.3 数据库并发</h2><h3 id="多事务并发执行冲突"><a href="#多事务并发执行冲突" class="headerlink" title="多事务并发执行冲突"></a>多事务并发执行冲突</h3><p><strong>条件：</strong></p>
<ol>
<li>两个操作来自不同的事务</li>
<li>两个操作针对同一个对象</li>
<li>两个操作其中至少有一个写操作</li>
</ol>
<p><strong>冲突分类：</strong></p>
<ol>
<li>写-写（丢失修改）</li>
<li>写-读（读脏数据）</li>
<li>读-写（不可重复读）</li>
</ol>
<h2 id="6-4-并发调度和可串行化"><a href="#6-4-并发调度和可串行化" class="headerlink" title="6.4 并发调度和可串行化"></a>6.4 并发调度和可串行化</h2><h3 id="事务简化"><a href="#事务简化" class="headerlink" title="事务简化"></a>事务简化</h3><p><strong>代数表示</strong>：Ri(X)表示事务Ti的读X操作，Wi(X)表示事务Ti的写X操作 </p>
<p><strong>串行/并发调度</strong>：串行调度事务执行的结果总是正确的，但是不能够充分利用系统资 </p>
<p>源。并发调度各个事务交叉地执行，但是不一定正确。 </p>
<h3 id="调度的可串行化"><a href="#调度的可串行化" class="headerlink" title="调度的可串行化"></a>调度的可串行化</h3><p>一个事务集的并发调度与某一串行调度是等价的，可串行化是作为并发调度正确与否的判定准则 </p>
<h3 id="冲突可串行化"><a href="#冲突可串行化" class="headerlink" title="冲突可串行化"></a>冲突可串行化</h3><p>一个调度Sc在保证冲突操作的次序不变情况下，通过交换两个事务不冲突操作的次序得到另一个调度Sc’， 如果Sc’是串行的，称调度Sc为冲突可串行化调度。</p>
<p><strong>冲突可串行化一定是可串行化的，但可串行化不一定是冲突可串行化</strong></p>
<h3 id="前驱图（冲突可串行化的判定方法）："><a href="#前驱图（冲突可串行化的判定方法）：" class="headerlink" title="前驱图（冲突可串行化的判定方法）："></a>前驱图<strong>（冲突可串行化的判定方法）</strong>：</h3><p>V是由所有参加调度的事务构成的节点，E是图中的一条有向边，如果Oi和Oj是冲突操作，且Oi先于Oj执行，则在图中有一条边Ti→Tj，如果得到无环的前趋图，则是可串行化的 。</p>
<h3 id="拓扑图（获得调度S的一个等价的串行调度）："><a href="#拓扑图（获得调度S的一个等价的串行调度）：" class="headerlink" title="拓扑图（获得调度S的一个等价的串行调度）："></a>拓扑图（获得调度S的一个等价的串行调度）：</h3><p>数据结构，去线法（输出一个入度为0的顶点，然后删除此顶点，并删除以次顶点为尾的弧） 。</p>
<h2 id="6-5-事务的隔离性、封锁和并发控制"><a href="#6-5-事务的隔离性、封锁和并发控制" class="headerlink" title="6.5  事务的隔离性、封锁和并发控制"></a>6.5  事务的隔离性、封锁和并发控制</h2><h3 id="封锁"><a href="#封锁" class="headerlink" title="封锁"></a>封锁</h3><p>指事务在对数据对象进行操作之前，必须先向系统申请对数据对象加锁，获得加锁之后才能进行相应的操作。</p>
<h3 id="排它锁（X锁）"><a href="#排它锁（X锁）" class="headerlink" title="排它锁（X锁）"></a>排它锁（X锁）</h3><p>若事务T对数据对象A加上排它锁，则只允许T读取和修改A，不允许其他任何事务再对A加任何锁，直到T释放A上的X锁。</p>
<h3 id="共享锁（S锁）"><a href="#共享锁（S锁）" class="headerlink" title="共享锁（S锁）"></a>共享锁（S锁）</h3><p>若事务T对数据对象A加上共享锁，则事务T可以读A但不能修改A，其他事务只能对A加S锁，而不能加X锁，直到T释放A上的S锁 </p>
<div class="table-container">
<table>
<thead>
<tr>
<th>级别</th>
<th>加锁协议</th>
<th>放锁</th>
</tr>
</thead>
<tbody>
<tr>
<td>一级</td>
<td>修改数据A之前必须对其加X锁</td>
<td>事务结束释放X锁</td>
</tr>
<tr>
<td>二级</td>
<td>一级+事务T在读取数据A之前必须对其加S锁</td>
<td>读完释放S锁</td>
</tr>
<tr>
<td>三级</td>
<td>一级+事务T在读取数据A之前必须对其加S锁</td>
<td>事务结束释放S锁</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/2021/05/03/Database-review/image-20210508143748136.png" alt="image-20210508143748136"></p>
<p><strong>两段锁协议（2PL）</strong>：某一事务在对数据进行读、写之前，先要申请并获得对该数据的封锁。在释放一个封锁之后，事务不再申请和获得任何其它封锁。任何一个遵从2PL协议的调度都是冲突可串行化的（充分不必要条件）。</p>
<p>分为两个阶段：</p>
<ol>
<li>加锁段</li>
<li>解锁段</li>
</ol>
<p>死锁：两个及以上事务相互等待释放锁，利用超时法或等待图发进行死锁检测。</p>
<p> 活锁：某资源长期被一些事务封锁，其他事务得不到该资源，可采用先来先服务原则避免活锁。</p>
<h2 id="6-6-数据库完全性与完整性"><a href="#6-6-数据库完全性与完整性" class="headerlink" title="6.6 数据库完全性与完整性"></a>6.6 数据库完全性与完整性</h2><h3 id="数据库完全性控制"><a href="#数据库完全性控制" class="headerlink" title="数据库完全性控制"></a>数据库完全性控制</h3><ol>
<li>用户标识和鉴别</li>
<li>存取控制</li>
</ol>

      </div>
      <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <a href="https://pz1o.top">M1key</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="https://pz1o.top/2021/05/03/Database-review/">https://pz1o.top/2021/05/03/Database-review/</a>
    </p>
    <p class="copyright-item">
      <span>License: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/tags/Course/">Course</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/2021/05/03/static-program/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">static program</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    <a class="next" href="/2021/04/30/makefile/">
        <span class="next-text nav-default">makefile</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:pz1olzy@aliyun.com" class="iconfont icon-email" title="email"></a>
        <a href="https://stackoverflow.com" target="_blank" rel="noopener" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
        <a href="https://twitter.com" target="_blank" rel="noopener" class="iconfont icon-twitter" title="twitter"></a>
        <a href="https://google.com" target="_blank" rel="noopener" class="iconfont icon-google" title="google"></a>
        <a href="https://github.com/pz1o" target="_blank" rel="noopener" class="iconfont icon-github" title="github"></a>
        <a href="https://zhihu.com" target="_blank" rel="noopener" class="iconfont icon-zhihu" title="zhihu"></a>
        <a href="https://douban.com" target="_blank" rel="noopener" class="iconfont icon-douban" title="douban"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="noopener">Even</a>
  </span>

  <span class="copyright-year">&copy;2020 - 2021<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">M1key</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
